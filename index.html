<!DOCTYPE html>
<html data-init="no-js">
<head>
<meta charset="UTF-8" />
<title>Pilgrim&#39;s Progreſs</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="application-name" content="SugarCube" />
<meta name="version" content="2.37.3" />
<!--

SugarCube (v2.37.3): A free (gratis and libre) story format.

Copyright © 2013–2021 Thomas Michael Edwards <thomasmedwards@gmail.com>.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

1. Redistributions of source code must retain the above copyright notice, this
   list of conditions and the following disclaimer.
2. Redistributions in binary form must reproduce the above copyright notice,
   this list of conditions and the following disclaimer in the documentation
   and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

-->
<script id="script-libraries" type="text/javascript">
if(document.head&&document.addEventListener&&document.querySelector&&Object.create&&Object.freeze&&JSON){document.documentElement.setAttribute("data-init", "loading");
/*! @source http://purl.eligrey.com/github/classList.js/blob/1.2.20171210/classList.js */
"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))||!function(t){"use strict";if("Element"in t){var e="classList",n="prototype",i=t.Element[n],s=Object,r=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array[n].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},c=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},a=function(t,e){if(""===e)throw new c("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(e))throw new c("INVALID_CHARACTER_ERR","The token must not contain space characters.");return o.call(t,e)},l=function(t){for(var e=r.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],i=0,s=n.length;s>i;i++)this.push(n[i]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},u=l[n]=[],h=function(){return new l(this)};if(c[n]=Error[n],u.item=function(t){return this[t]||null},u.contains=function(t){return~a(this,t+"")},u.add=function(){var t,e=arguments,n=0,i=e.length,s=!1;do t=e[n]+"",~a(this,t)||(this.push(t),s=!0);while(++n<i);s&&this._updateClassName()},u.remove=function(){var t,e,n=arguments,i=0,s=n.length,r=!1;do for(t=n[i]+"",e=a(this,t);~e;)this.splice(e,1),r=!0,e=a(this,t);while(++i<s);r&&this._updateClassName()},u.toggle=function(t,e){var n=this.contains(t),i=n?e!==!0&&"remove":e!==!1&&"add";return i&&this[i](t),e===!0||e===!1?e:!n},u.replace=function(t,e){var n=a(t+"");~n&&(this.splice(n,1,e),this._updateClassName())},u.toString=function(){return this.join(" ")},s.defineProperty){var f={get:h,enumerable:!0,configurable:!0};try{s.defineProperty(i,e,f)}catch(p){void 0!==p.number&&-2146823252!==p.number||(f.enumerable=!1,s.defineProperty(i,e,f))}}else s[n].__defineGetter__&&i.__defineGetter__(e,h)}}(self),function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,i=arguments.length;for(n=0;i>n;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(t,e){var n=this.toString().split(" "),i=n.indexOf(t+"");~i&&(n=n.slice(i),this.remove.apply(this,n),this.add(e),this.add.apply(this,n.slice(1)))}),t=null}());
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2020 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/v4.5.14/LICENSE
 */
(function(t,r){"use strict";if(typeof define==="function"&&define.amd){define(r)}else if(typeof exports==="object"){module.exports=r()}else{t.returnExports=r()}})(this,function(){var t=Array;var r=t.prototype;var e=Object;var n=e.prototype;var i=Function;var a=i.prototype;var o=String;var f=o.prototype;var u=Number;var l=u.prototype;var s=r.slice;var c=r.splice;var v=r.push;var h=r.unshift;var p=r.concat;var y=r.join;var d=a.call;var g=a.apply;var w=Math.max;var b=Math.min;var T=n.toString;var m=typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol";var D;var S=Function.prototype.toString,x=/^\s*class /,O=function isES6ClassFn(t){try{var r=S.call(t);var e=r.replace(/\/\/.*\n/g,"");var n=e.replace(/\/\*[.\s\S]*\*\//g,"");var i=n.replace(/\n/gm," ").replace(/ {2}/g," ");return x.test(i)}catch(a){return false}},E=function tryFunctionObject(t){try{if(O(t)){return false}S.call(t);return true}catch(r){return false}},j="[object Function]",I="[object GeneratorFunction]",D=function isCallable(t){if(!t){return false}if(typeof t!=="function"&&typeof t!=="object"){return false}if(m){return E(t)}if(O(t)){return false}var r=T.call(t);return r===j||r===I};var M;var U=RegExp.prototype.exec,$=function tryRegexExec(t){try{U.call(t);return true}catch(r){return false}},F="[object RegExp]";M=function isRegex(t){if(typeof t!=="object"){return false}return m?$(t):T.call(t)===F};var N;var C=String.prototype.valueOf,k=function tryStringObject(t){try{C.call(t);return true}catch(r){return false}},A="[object String]";N=function isString(t){if(typeof t==="string"){return true}if(typeof t!=="object"){return false}return m?k(t):T.call(t)===A};var R=e.defineProperty&&function(){try{var t={};e.defineProperty(t,"x",{enumerable:false,value:t});for(var r in t){return false}return t.x===t}catch(n){return false}}();var P=function(t){var r;if(R){r=function(t,r,n,i){if(!i&&r in t){return}e.defineProperty(t,r,{configurable:true,enumerable:false,writable:true,value:n})}}else{r=function(t,r,e,n){if(!n&&r in t){return}t[r]=e}}return function defineProperties(e,n,i){for(var a in n){if(t.call(n,a)){r(e,a,n[a],i)}}}}(n.hasOwnProperty);var J=function isPrimitive(t){var r=typeof t;return t===null||r!=="object"&&r!=="function"};var Y=u.isNaN||function isActualNaN(t){return t!==t};var z={ToInteger:function ToInteger(t){var r=+t;if(Y(r)){r=0}else if(r!==0&&r!==1/0&&r!==-(1/0)){r=(r>0||-1)*Math.floor(Math.abs(r))}return r},ToPrimitive:function ToPrimitive(t){var r,e,n;if(J(t)){return t}e=t.valueOf;if(D(e)){r=e.call(t);if(J(r)){return r}}n=t.toString;if(D(n)){r=n.call(t);if(J(r)){return r}}throw new TypeError},ToObject:function(t){if(t==null){throw new TypeError("can't convert "+t+" to object")}return e(t)},ToUint32:function ToUint32(t){return t>>>0}};var Z=function Empty(){};P(a,{bind:function bind(t){var r=this;if(!D(r)){throw new TypeError("Function.prototype.bind called on incompatible "+r)}var n=s.call(arguments,1);var a;var o=function(){if(this instanceof a){var i=g.call(r,this,p.call(n,s.call(arguments)));if(e(i)===i){return i}return this}else{return g.call(r,t,p.call(n,s.call(arguments)))}};var f=w(0,r.length-n.length);var u=[];for(var l=0;l<f;l++){v.call(u,"$"+l)}a=i("binder","return function ("+y.call(u,",")+"){ return binder.apply(this, arguments); }")(o);if(r.prototype){Z.prototype=r.prototype;a.prototype=new Z;Z.prototype=null}return a}});var G=d.bind(n.hasOwnProperty);var H=d.bind(n.toString);var W=d.bind(s);var B=g.bind(s);if(typeof document==="object"&&document&&document.documentElement){try{W(document.documentElement.childNodes)}catch(X){var L=W;var q=B;W=function arraySliceIE(t){var r=[];var e=t.length;while(e-- >0){r[e]=t[e]}return q(r,L(arguments,1))};B=function arraySliceApplyIE(t,r){return q(W(t),r)}}}var K=d.bind(f.slice);var Q=d.bind(f.split);var V=d.bind(f.indexOf);var _=d.bind(v);var tt=d.bind(n.propertyIsEnumerable);var rt=d.bind(r.sort);var et=t.isArray||function isArray(t){return H(t)==="[object Array]"};var nt=[].unshift(0)!==1;P(r,{unshift:function(){h.apply(this,arguments);return this.length}},nt);P(t,{isArray:et});var it=e("a");var at=it[0]!=="a"||!(0 in it);var ot=function properlyBoxed(t){var r=true;var e=true;var n=false;if(t){try{t.call("foo",function(t,e,n){if(typeof n!=="object"){r=false}});t.call([1],function(){"use strict";e=typeof this==="string"},"x")}catch(i){n=true}}return!!t&&!n&&r&&e};P(r,{forEach:function forEach(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=-1;var i=z.ToUint32(e.length);var a;if(arguments.length>1){a=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.forEach callback must be a function")}while(++n<i){if(n in e){if(typeof a==="undefined"){t(e[n],n,r)}else{t.call(a,e[n],n,r)}}}}},!ot(r.forEach));P(r,{map:function map(r){var e=z.ToObject(this);var n=at&&N(this)?Q(this,""):e;var i=z.ToUint32(n.length);var a=t(i);var o;if(arguments.length>1){o=arguments[1]}if(!D(r)){throw new TypeError("Array.prototype.map callback must be a function")}for(var f=0;f<i;f++){if(f in n){if(typeof o==="undefined"){a[f]=r(n[f],f,e)}else{a[f]=r.call(o,n[f],f,e)}}}return a}},!ot(r.map));P(r,{filter:function filter(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i=[];var a;var o;if(arguments.length>1){o=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.filter callback must be a function")}for(var f=0;f<n;f++){if(f in e){a=e[f];if(typeof o==="undefined"?t(a,f,r):t.call(o,a,f,r)){_(i,a)}}}return i}},!ot(r.filter));P(r,{every:function every(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.every callback must be a function")}for(var a=0;a<n;a++){if(a in e&&!(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return false}}return true}},!ot(r.every));P(r,{some:function some(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.some callback must be a function")}for(var a=0;a<n;a++){if(a in e&&(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return true}}return false}},!ot(r.some));var ft=false;if(r.reduce){ft=typeof r.reduce.call("es5",function(t,r,e,n){return n})==="object"}P(r,{reduce:function reduce(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduce callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduce of empty array with no initial value")}var i=0;var a;if(arguments.length>=2){a=arguments[1]}else{do{if(i in e){a=e[i++];break}if(++i>=n){throw new TypeError("reduce of empty array with no initial value")}}while(true)}for(;i<n;i++){if(i in e){a=t(a,e[i],i,r)}}return a}},!ft);var ut=false;if(r.reduceRight){ut=typeof r.reduceRight.call("es5",function(t,r,e,n){return n})==="object"}P(r,{reduceRight:function reduceRight(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduceRight callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduceRight of empty array with no initial value")}var i;var a=n-1;if(arguments.length>=2){i=arguments[1]}else{do{if(a in e){i=e[a--];break}if(--a<0){throw new TypeError("reduceRight of empty array with no initial value")}}while(true)}if(a<0){return i}do{if(a in e){i=t(i,e[a],a,r)}}while(a--);return i}},!ut);var lt=r.indexOf&&[0,1].indexOf(1,2)!==-1;P(r,{indexOf:function indexOf(t){var r=at&&N(this)?Q(this,""):z.ToObject(this);var e=z.ToUint32(r.length);if(e===0){return-1}var n=0;if(arguments.length>1){n=z.ToInteger(arguments[1])}n=n>=0?n:w(0,e+n);for(;n<e;n++){if(n in r&&r[n]===t){return n}}return-1}},lt);var st=r.lastIndexOf&&[0,1].lastIndexOf(0,-3)!==-1;P(r,{lastIndexOf:function lastIndexOf(t){var r=at&&N(this)?Q(this,""):z.ToObject(this);var e=z.ToUint32(r.length);if(e===0){return-1}var n=e-1;if(arguments.length>1){n=b(n,z.ToInteger(arguments[1]))}n=n>=0?n:e-Math.abs(n);for(;n>=0;n--){if(n in r&&t===r[n]){return n}}return-1}},st);var ct=function(){var t=[1,2];var r=t.splice();return t.length===2&&et(r)&&r.length===0}();P(r,{splice:function splice(t,r){if(arguments.length===0){return[]}else{return c.apply(this,arguments)}}},!ct);var vt=function(){var t={};r.splice.call(t,0,0,1);return t.length===1}();P(r,{splice:function splice(t,r){if(arguments.length===0){return[]}var e=arguments;this.length=w(z.ToInteger(this.length),0);if(arguments.length>0&&typeof r!=="number"){e=W(arguments);if(e.length<2){_(e,this.length-t)}else{e[1]=z.ToInteger(r)}}return c.apply(this,e)}},!vt);var ht=function(){var r=new t(1e5);r[8]="x";r.splice(1,1);return r.indexOf("x")===7}();var pt=function(){var t=256;var r=[];r[t]="a";r.splice(t+1,0,"b");return r[t]==="a"}();P(r,{splice:function splice(t,r){var e=z.ToObject(this);var n=[];var i=z.ToUint32(e.length);var a=z.ToInteger(t);var f=a<0?w(i+a,0):b(a,i);var u=arguments.length===0?0:arguments.length===1?i-f:b(w(z.ToInteger(r),0),i-f);var l=0;var s;while(l<u){s=o(f+l);if(G(e,s)){n[l]=e[s]}l+=1}var c=W(arguments,2);var v=c.length;var h;if(v<u){l=f;var p=i-u;while(l<p){s=o(l+u);h=o(l+v);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l+=1}l=i;var y=i-u+v;while(l>y){delete e[l-1];l-=1}}else if(v>u){l=i-u;while(l>f){s=o(l+u-1);h=o(l+v-1);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l-=1}}l=f;for(var d=0;d<c.length;++d){e[l]=c[d];l+=1}e.length=i-u+v;return n}},!ht||!pt);var yt=r.join;var dt;try{dt=Array.prototype.join.call("123",",")!=="1,2,3"}catch(X){dt=true}if(dt){P(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return yt.call(N(this)?Q(this,""):this,r)}},dt)}var gt=[1,2].join(undefined)!=="1,2";if(gt){P(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return yt.call(this,r)}},gt)}var wt=function push(t){var r=z.ToObject(this);var e=z.ToUint32(r.length);var n=0;while(n<arguments.length){r[e+n]=arguments[n];n+=1}r.length=e+n;return e+n};var bt=function(){var t={};var r=Array.prototype.push.call(t,undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();P(r,{push:function push(t){if(et(this)){return v.apply(this,arguments)}return wt.apply(this,arguments)}},bt);var Tt=function(){var t=[];var r=t.push(undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();P(r,{push:wt},Tt);P(r,{slice:function(t,r){var e=N(this)?Q(this,""):this;return B(e,arguments)}},at);var mt=function(){try{[1,2].sort(null)}catch(t){try{[1,2].sort({})}catch(r){return false}}return true}();var Dt=function(){try{[1,2].sort(/a/);return false}catch(t){}return true}();var St=function(){try{[1,2].sort(undefined);return true}catch(t){}return false}();P(r,{sort:function sort(t){if(typeof t==="undefined"){return rt(this)}if(!D(t)){throw new TypeError("Array.prototype.sort callback must be a function")}return rt(this,t)}},mt||!St||!Dt);var xt=!tt({toString:null},"toString");var Ot=tt(function(){},"prototype");var Et=!G("x","0");var jt=function(t){var r=t.constructor;return r&&r.prototype===t};var It={$applicationCache:true,$console:true,$external:true,$frame:true,$frameElement:true,$frames:true,$innerHeight:true,$innerWidth:true,$onmozfullscreenchange:true,$onmozfullscreenerror:true,$outerHeight:true,$outerWidth:true,$pageXOffset:true,$pageYOffset:true,$parent:true,$scrollLeft:true,$scrollTop:true,$scrollX:true,$scrollY:true,$self:true,$webkitIndexedDB:true,$webkitStorageInfo:true,$window:true,$width:true,$height:true,$top:true,$localStorage:true};var Mt=function(){if(typeof window==="undefined"){return false}for(var t in window){try{if(!It["$"+t]&&G(window,t)&&window[t]!==null&&typeof window[t]==="object"){jt(window[t])}}catch(r){return true}}return false}();var Ut=function(t){if(typeof window==="undefined"||!Mt){return jt(t)}try{return jt(t)}catch(r){return false}};var $t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var Ft=$t.length;var Nt=function isArguments(t){return H(t)==="[object Arguments]"};var Ct=function isArguments(t){return t!==null&&typeof t==="object"&&typeof t.length==="number"&&t.length>=0&&!et(t)&&D(t.callee)};var kt=Nt(arguments)?Nt:Ct;P(e,{keys:function keys(t){var r=D(t);var e=kt(t);var n=t!==null&&typeof t==="object";var i=n&&N(t);if(!n&&!r&&!e){throw new TypeError("Object.keys called on a non-object")}var a=[];var f=Ot&&r;if(i&&Et||e){for(var u=0;u<t.length;++u){_(a,o(u))}}if(!e){for(var l in t){if(!(f&&l==="prototype")&&G(t,l)){_(a,o(l))}}}if(xt){var s=Ut(t);for(var c=0;c<Ft;c++){var v=$t[c];if(!(s&&v==="constructor")&&G(t,v)){_(a,v)}}}return a}});var At=e.keys&&function(){return e.keys(arguments).length===2}(1,2);var Rt=e.keys&&function(){var t=e.keys(arguments);return arguments.length!==1||t.length!==1||t[0]!==1}(1);var Pt=e.keys;P(e,{keys:function keys(t){if(kt(t)){return Pt(W(t))}else{return Pt(t)}}},!At||Rt);var Jt=new Date(-0xc782b5b342b24).getUTCMonth()!==0;var Yt=new Date(-0x55d318d56a724);var zt=new Date(14496624e5);var Zt=Yt.toUTCString()!=="Mon, 01 Jan -45875 11:59:59 GMT";var Gt;var Ht;var Wt=Yt.getTimezoneOffset();if(Wt<-720){Gt=Yt.toDateString()!=="Tue Jan 02 -45875";Ht=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(zt))}else{Gt=Yt.toDateString()!=="Mon Jan 01 -45875";Ht=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(zt))}var Bt=d.bind(Date.prototype.getFullYear);var Xt=d.bind(Date.prototype.getMonth);var Lt=d.bind(Date.prototype.getDate);var qt=d.bind(Date.prototype.getUTCFullYear);var Kt=d.bind(Date.prototype.getUTCMonth);var Qt=d.bind(Date.prototype.getUTCDate);var Vt=d.bind(Date.prototype.getUTCDay);var _t=d.bind(Date.prototype.getUTCHours);var tr=d.bind(Date.prototype.getUTCMinutes);var rr=d.bind(Date.prototype.getUTCSeconds);var er=d.bind(Date.prototype.getUTCMilliseconds);var nr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var ir=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var ar=function daysInMonth(t,r){return Lt(new Date(r,t,0))};P(Date.prototype,{getFullYear:function getFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);if(t<0&&Xt(this)>11){return t+1}return t},getMonth:function getMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Xt(this);if(t<0&&r>11){return 0}return r},getDate:function getDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Xt(this);var e=Lt(this);if(t<0&&r>11){if(r===12){return e}var n=ar(0,t+1);return n-e+1}return e},getUTCFullYear:function getUTCFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);if(t<0&&Kt(this)>11){return t+1}return t},getUTCMonth:function getUTCMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);var r=Kt(this);if(t<0&&r>11){return 0}return r},getUTCDate:function getUTCDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);var r=Kt(this);var e=Qt(this);if(t<0&&r>11){if(r===12){return e}var n=ar(0,t+1);return n-e+1}return e}},Jt);P(Date.prototype,{toUTCString:function toUTCString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Vt(this);var r=Qt(this);var e=Kt(this);var n=qt(this);var i=_t(this);var a=tr(this);var o=rr(this);return nr[t]+", "+(r<10?"0"+r:r)+" "+ir[e]+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"}},Jt||Zt);P(Date.prototype,{toDateString:function toDateString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();return nr[t]+" "+ir[e]+" "+(r<10?"0"+r:r)+" "+n}},Jt||Gt);if(Jt||Ht){Date.prototype.toString=function toString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();var i=this.getHours();var a=this.getMinutes();var o=this.getSeconds();var f=this.getTimezoneOffset();var u=Math.floor(Math.abs(f)/60);var l=Math.floor(Math.abs(f)%60);return nr[t]+" "+ir[e]+" "+(r<10?"0"+r:r)+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"+(f>0?"-":"+")+(u<10?"0"+u:u)+(l<10?"0"+l:l)};if(R){e.defineProperty(Date.prototype,"toString",{configurable:true,enumerable:false,writable:true})}}var or=-621987552e5;var fr="-000001";var ur=Date.prototype.toISOString&&new Date(or).toISOString().indexOf(fr)===-1;var lr=Date.prototype.toISOString&&new Date(-1).toISOString()!=="1969-12-31T23:59:59.999Z";var sr=d.bind(Date.prototype.getTime);P(Date.prototype,{toISOString:function toISOString(){if(!isFinite(this)||!isFinite(sr(this))){throw new RangeError("Date.prototype.toISOString called on non-finite value.")}var t=qt(this);var r=Kt(this);t+=Math.floor(r/12);r=(r%12+12)%12;var e=[r+1,Qt(this),_t(this),tr(this),rr(this)];t=(t<0?"-":t>9999?"+":"")+K("00000"+Math.abs(t),0<=t&&t<=9999?-4:-6);for(var n=0;n<e.length;++n){e[n]=K("00"+e[n],-2)}return t+"-"+W(e,0,2).join("-")+"T"+W(e,2).join(":")+"."+K("000"+er(this),-3)+"Z"}},ur||lr);var cr=function(){try{return Date.prototype.toJSON&&new Date(NaN).toJSON()===null&&new Date(or).toJSON().indexOf(fr)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return true}})}catch(t){return false}}();if(!cr){Date.prototype.toJSON=function toJSON(t){var r=e(this);var n=z.ToPrimitive(r);if(typeof n==="number"&&!isFinite(n)){return null}var i=r.toISOString;if(!D(i)){throw new TypeError("toISOString property is not callable")}return i.call(r)}}var vr=Date.parse("+033658-09-27T01:46:40.000Z")===1e15;var hr=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));var pr=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(pr||hr||!vr){var yr=Math.pow(2,31)-1;var dr=Y(new Date(1970,0,1,0,0,0,yr+1).getTime());Date=function(t){var r=function Date(e,n,i,a,f,u,l){var s=arguments.length;var c;if(this instanceof t){var v=u;var h=l;if(dr&&s>=7&&l>yr){var p=Math.floor(l/yr)*yr;var y=Math.floor(p/1e3);v+=y;h-=y*1e3}c=s===1&&o(e)===e?new t(r.parse(e)):s>=7?new t(e,n,i,a,f,v,h):s>=6?new t(e,n,i,a,f,v):s>=5?new t(e,n,i,a,f):s>=4?new t(e,n,i,a):s>=3?new t(e,n,i):s>=2?new t(e,n):s>=1?new t(e instanceof t?+e:e):new t}else{c=t.apply(this,arguments)}if(!J(c)){P(c,{constructor:r},true)}return c};var e=new RegExp("^"+"(\\d{4}|[+-]\\d{6})"+"(?:-(\\d{2})"+"(?:-(\\d{2})"+"(?:"+"T(\\d{2})"+":(\\d{2})"+"(?:"+":(\\d{2})"+"(?:(\\.\\d{1,}))?"+")?"+"("+"Z|"+"(?:"+"([-+])"+"(\\d{2})"+":(\\d{2})"+")"+")?)?)?)?"+"$");var n=[0,31,59,90,120,151,181,212,243,273,304,334,365];var i=function dayFromMonth(t,r){var e=r>1?1:0;return n[r]+Math.floor((t-1969+e)/4)-Math.floor((t-1901+e)/100)+Math.floor((t-1601+e)/400)+365*(t-1970)};var a=function toUTC(r){var e=0;var n=r;if(dr&&n>yr){var i=Math.floor(n/yr)*yr;var a=Math.floor(i/1e3);e+=a;n-=a*1e3}return u(new t(1970,0,1,0,0,e,n))};for(var f in t){if(G(t,f)){r[f]=t[f]}}P(r,{now:t.now,UTC:t.UTC},true);r.prototype=t.prototype;P(r.prototype,{constructor:r},true);var l=function parse(r){var n=e.exec(r);if(n){var o=u(n[1]),f=u(n[2]||1)-1,l=u(n[3]||1)-1,s=u(n[4]||0),c=u(n[5]||0),v=u(n[6]||0),h=Math.floor(u(n[7]||0)*1e3),p=Boolean(n[4]&&!n[8]),y=n[9]==="-"?1:-1,d=u(n[10]||0),g=u(n[11]||0),w;var b=c>0||v>0||h>0;if(s<(b?24:25)&&c<60&&v<60&&h<1e3&&f>-1&&f<12&&d<24&&g<60&&l>-1&&l<i(o,f+1)-i(o,f)){w=((i(o,f)+l)*24+s+d*y)*60;w=((w+c+g*y)*60+v)*1e3+h;if(p){w=a(w)}if(-864e13<=w&&w<=864e13){return w}}return NaN}return t.parse.apply(this,arguments)};P(r,{parse:l});return r}(Date)}if(!Date.now){Date.now=function now(){return(new Date).getTime()}}var gr=l.toFixed&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||(1000000000000000128).toFixed(0)!=="1000000000000000128");var wr={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function multiply(t,r){var e=-1;var n=r;while(++e<wr.size){n+=t*wr.data[e];wr.data[e]=n%wr.base;n=Math.floor(n/wr.base)}},divide:function divide(t){var r=wr.size;var e=0;while(--r>=0){e+=wr.data[r];wr.data[r]=Math.floor(e/t);e=e%t*wr.base}},numToString:function numToString(){var t=wr.size;var r="";while(--t>=0){if(r!==""||t===0||wr.data[t]!==0){var e=o(wr.data[t]);if(r===""){r=e}else{r+=K("0000000",0,7-e.length)+e}}}return r},pow:function pow(t,r,e){return r===0?e:r%2===1?pow(t,r-1,e*t):pow(t*t,r/2,e)},log:function log(t){var r=0;var e=t;while(e>=4096){r+=12;e/=4096}while(e>=2){r+=1;e/=2}return r}};var br=function toFixed(t){var r,e,n,i,a,f,l,s;r=u(t);r=Y(r)?0:Math.floor(r);if(r<0||r>20){throw new RangeError("Number.toFixed called with invalid number of decimals")}e=u(this);if(Y(e)){return"NaN"}if(e<=-1e21||e>=1e21){return o(e)}n="";if(e<0){n="-";e=-e}i="0";if(e>1e-21){a=wr.log(e*wr.pow(2,69,1))-69;f=a<0?e*wr.pow(2,-a,1):e/wr.pow(2,a,1);f*=4503599627370496;a=52-a;if(a>0){wr.multiply(0,f);l=r;while(l>=7){wr.multiply(1e7,0);l-=7}wr.multiply(wr.pow(10,l,1),0);l=a-1;while(l>=23){wr.divide(1<<23);l-=23}wr.divide(1<<l);wr.multiply(1,1);wr.divide(2);i=wr.numToString()}else{wr.multiply(0,f);wr.multiply(1<<-a,0);i=wr.numToString()+K("0.00000000000000000000",2,2+r)}}if(r>0){s=i.length;if(s<=r){i=n+K("0.0000000000000000000",0,r-s+2)+i}else{i=n+K(i,0,s-r)+"."+K(i,s-r)}}else{i=n+i}return i};P(l,{toFixed:br},gr);var Tr=function(){try{return 1..toPrecision(undefined)==="1"}catch(t){return true}}();var mr=l.toPrecision;P(l,{toPrecision:function toPrecision(t){return typeof t==="undefined"?mr.call(this):mr.call(this,t)}},Tr);if("ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1){(function(){var t=typeof/()??/.exec("")[1]==="undefined";var r=Math.pow(2,32)-1;f.split=function(e,n){var i=String(this);if(typeof e==="undefined"&&n===0){return[]}if(!M(e)){return Q(this,e,n)}var a=[];var o=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,u,l,s,c;var h=new RegExp(e.source,o+"g");if(!t){u=new RegExp("^"+h.source+"$(?!\\s)",o)}var p=typeof n==="undefined"?r:z.ToUint32(n);l=h.exec(i);while(l){s=l.index+l[0].length;if(s>f){_(a,K(i,f,l.index));if(!t&&l.length>1){l[0].replace(u,function(){for(var t=1;t<arguments.length-2;t++){if(typeof arguments[t]==="undefined"){l[t]=void 0}}})}if(l.length>1&&l.index<i.length){v.apply(a,W(l,1))}c=l[0].length;f=s;if(a.length>=p){break}}if(h.lastIndex===l.index){h.lastIndex++}l=h.exec(i)}if(f===i.length){if(c||!h.test("")){_(a,"")}}else{_(a,K(i,f))}return a.length>p?W(a,0,p):a}})()}else if("0".split(void 0,0).length){f.split=function split(t,r){if(typeof t==="undefined"&&r===0){return[]}return Q(this,t,r)}}var Dr=f.replace;var Sr=function(){var t=[];"x".replace(/x(.)?/g,function(r,e){_(t,e)});return t.length===1&&typeof t[0]==="undefined"}();if(!Sr){f.replace=function replace(t,r){var e=D(r);var n=M(t)&&/\)[*?]/.test(t.source);if(!e||!n){return Dr.call(this,t,r)}else{var i=function(e){var n=arguments.length;var i=t.lastIndex;t.lastIndex=0;var a=t.exec(e)||[];t.lastIndex=i;_(a,arguments[n-2],arguments[n-1]);return r.apply(this,a)};return Dr.call(this,t,i)}}}var xr=f.substr;var Or="".substr&&"0b".substr(-1)!=="b";P(f,{substr:function substr(t,r){var e=t;if(t<0){e=w(this.length+t,0)}return xr.call(this,e,r)}},Or);var Er="\t\n\x0B\f\r \xa0\u1680\u2000\u2001\u2002\u2003"+"\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028"+"\u2029\ufeff";var jr="\u200b";var Ir="["+Er+"]";var Mr=new RegExp("^"+Ir+Ir+"*");var Ur=new RegExp(Ir+Ir+"*$");var $r=f.trim&&(Er.trim()||!jr.trim());P(f,{trim:function trim(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}return o(this).replace(Mr,"").replace(Ur,"")}},$r);var Fr=d.bind(String.prototype.trim);var Nr=f.lastIndexOf&&"abc\u3042\u3044".lastIndexOf("\u3042\u3044",2)!==-1;P(f,{lastIndexOf:function lastIndexOf(t){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var r=o(this);var e=o(t);var n=arguments.length>1?u(arguments[1]):NaN;var i=Y(n)?Infinity:z.ToInteger(n);var a=b(w(i,0),r.length);var f=e.length;var l=a+f;while(l>0){l=w(0,l-f);var s=V(K(r,l,a+f),e);if(s!==-1){return l+s}}return-1}},Nr);var Cr=f.lastIndexOf;P(f,{lastIndexOf:function lastIndexOf(t){return Cr.apply(this,arguments)}},f.lastIndexOf.length!==1);if(parseInt(Er+"08")!==8||parseInt(Er+"0x16")!==22){parseInt=function(t){var r=/^[-+]?0[xX]/;return function parseInt(e,n){if(typeof e==="symbol"){""+e}var i=Fr(String(e));var a=u(n)||(r.test(i)?16:10);return t(i,a)}}(parseInt)}if(1/parseFloat("-0")!==-Infinity){parseFloat=function(t){return function parseFloat(r){var e=Fr(String(r));var n=t(e);return n===0&&K(e,0,1)==="-"?-0:n}}(parseFloat)}if(String(new RangeError("test"))!=="RangeError: test"){var kr=function toString(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var t=this.name;if(typeof t==="undefined"){t="Error"}else if(typeof t!=="string"){t=o(t)}var r=this.message;if(typeof r==="undefined"){r=""}else if(typeof r!=="string"){r=o(r)}if(!t){return r}if(!r){return t}return t+": "+r};Error.prototype.toString=kr}if(R){var Ar=function(t,r){if(tt(t,r)){var e=Object.getOwnPropertyDescriptor(t,r);if(e.configurable){e.enumerable=false;Object.defineProperty(t,r,e)}}};Ar(Error.prototype,"message");if(Error.prototype.message!==""){Error.prototype.message=""}Ar(Error.prototype,"name")}if(String(/a/gim)!=="/a/gim"){var Rr=function toString(){var t="/"+this.source+"/";if(this.global){t+="g"}if(this.ignoreCase){t+="i"}if(this.multiline){t+="m"}return t};RegExp.prototype.toString=Rr}});
/*!
 * https://github.com/paulmillr/es6-shim
 * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
 *   and contributors,  MIT License
 * es6-shim: v0.35.4
 * see https://github.com/paulmillr/es6-shim/blob/0.35.4/LICENSE
 * Details and documentation:
 * https://github.com/paulmillr/es6-shim/
 */
(function(e,t){if(typeof define==="function"&&define.amd){define(t)}else if(typeof exports==="object"){module.exports=t()}else{e.returnExports=t()}})(this,function(){"use strict";var e=Function.call.bind(Function.apply);var t=Function.call.bind(Function.call);var r=Array.isArray;var n=Object.keys;var o=function notThunker(t){return function notThunk(){return!e(t,this,arguments)}};var i=function(e){try{e();return false}catch(t){return true}};var a=function valueOrFalseIfThrows(e){try{return e()}catch(t){return false}};var u=o(i);var f=function(){return!i(function(){return Object.defineProperty({},"x",{get:function(){}})})};var s=!!Object.defineProperty&&f();var c=function foo(){}.name==="foo";var l=Function.call.bind(Array.prototype.forEach);var p=Function.call.bind(Array.prototype.reduce);var v=Function.call.bind(Array.prototype.filter);var y=Function.call.bind(Array.prototype.some);var h=function(e,t,r,n){if(!n&&t in e){return}if(s){Object.defineProperty(e,t,{configurable:true,enumerable:false,writable:true,value:r})}else{e[t]=r}};var b=function(e,t,r){l(n(t),function(n){var o=t[n];h(e,n,o,!!r)})};var g=Function.call.bind(Object.prototype.toString);var d=typeof/abc/==="function"?function IsCallableSlow(e){return typeof e==="function"&&g(e)==="[object Function]"}:function IsCallableFast(e){return typeof e==="function"};var m={getter:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}Object.defineProperty(e,t,{configurable:true,enumerable:false,get:r})},proxy:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,{configurable:n.configurable,enumerable:n.enumerable,get:function getKey(){return e[t]},set:function setKey(r){e[t]=r}})},redefine:function(e,t,r){if(s){var n=Object.getOwnPropertyDescriptor(e,t);n.value=r;Object.defineProperty(e,t,n)}else{e[t]=r}},defineByDescriptor:function(e,t,r){if(s){Object.defineProperty(e,t,r)}else if("value"in r){e[t]=r.value}},preserveToString:function(e,t){if(t&&d(t.toString)){h(e,"toString",t.toString.bind(t),true)}}};var O=Object.create||function(e,t){var r=function Prototype(){};r.prototype=e;var o=new r;if(typeof t!=="undefined"){n(t).forEach(function(e){m.defineByDescriptor(o,e,t[e])})}return o};var w=function(e,t){if(!Object.setPrototypeOf){return false}return a(function(){var r=function Subclass(t){var r=new e(t);Object.setPrototypeOf(r,Subclass.prototype);return r};Object.setPrototypeOf(r,e);r.prototype=O(e.prototype,{constructor:{value:r}});return t(r)})};var j=function(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}throw new Error("unable to locate global object")};var S=j();var T=S.isFinite;var I=Function.call.bind(String.prototype.indexOf);var E=Function.apply.bind(Array.prototype.indexOf);var P=Function.call.bind(Array.prototype.concat);var C=Function.call.bind(String.prototype.slice);var M=Function.call.bind(Array.prototype.push);var x=Function.apply.bind(Array.prototype.push);var N=Function.call.bind(Array.prototype.shift);var A=Math.max;var R=Math.min;var _=Math.floor;var k=Math.abs;var L=Math.exp;var F=Math.log;var D=Math.sqrt;var z=Function.call.bind(Object.prototype.hasOwnProperty);var q;var W=function(){};var G=S.Map;var H=G&&G.prototype["delete"];var V=G&&G.prototype.get;var B=G&&G.prototype.has;var U=G&&G.prototype.set;var $=S.Symbol||{};var J=$.species||"@@species";var X=Number.isNaN||function isNaN(e){return e!==e};var K=Number.isFinite||function isFinite(e){return typeof e==="number"&&T(e)};var Z=d(Math.sign)?Math.sign:function sign(e){var t=Number(e);if(t===0){return t}if(X(t)){return t}return t<0?-1:1};var Y=function log1p(e){var t=Number(e);if(t<-1||X(t)){return NaN}if(t===0||t===Infinity){return t}if(t===-1){return-Infinity}return 1+t-1===0?t:t*(F(1+t)/(1+t-1))};var Q=function isArguments(e){return g(e)==="[object Arguments]"};var ee=function isArguments(e){return e!==null&&typeof e==="object"&&typeof e.length==="number"&&e.length>=0&&g(e)!=="[object Array]"&&g(e.callee)==="[object Function]"};var te=Q(arguments)?Q:ee;var re={primitive:function(e){return e===null||typeof e!=="function"&&typeof e!=="object"},string:function(e){return g(e)==="[object String]"},regex:function(e){return g(e)==="[object RegExp]"},symbol:function(e){return typeof S.Symbol==="function"&&typeof e==="symbol"}};var ne=function overrideNative(e,t,r){var n=e[t];h(e,t,r,true);m.preserveToString(e[t],n)};var oe=typeof $==="function"&&typeof $["for"]==="function"&&re.symbol($());var ie=re.symbol($.iterator)?$.iterator:"_es6-shim iterator_";if(S.Set&&typeof(new S.Set)["@@iterator"]==="function"){ie="@@iterator"}if(!S.Reflect){h(S,"Reflect",{},true)}var ae=S.Reflect;var ue=String;var fe=typeof document==="undefined"||!document?null:document.all;var se=fe==null?function isNullOrUndefined(e){return e==null}:function isNullOrUndefinedAndNotDocumentAll(e){return e==null&&e!==fe};var ce={Call:function Call(t,r){var n=arguments.length>2?arguments[2]:[];if(!ce.IsCallable(t)){throw new TypeError(t+" is not a function")}return e(t,r,n)},RequireObjectCoercible:function(e,t){if(se(e)){throw new TypeError(t||"Cannot call method on "+e)}return e},TypeIsObject:function(e){if(e===void 0||e===null||e===true||e===false){return false}return typeof e==="function"||typeof e==="object"||e===fe},ToObject:function(e,t){return Object(ce.RequireObjectCoercible(e,t))},IsCallable:d,IsConstructor:function(e){return ce.IsCallable(e)},ToInt32:function(e){return ce.ToNumber(e)>>0},ToUint32:function(e){return ce.ToNumber(e)>>>0},ToNumber:function(e){if(g(e)==="[object Symbol]"){throw new TypeError("Cannot convert a Symbol value to a number")}return+e},ToInteger:function(e){var t=ce.ToNumber(e);if(X(t)){return 0}if(t===0||!K(t)){return t}return(t>0?1:-1)*_(k(t))},ToLength:function(e){var t=ce.ToInteger(e);if(t<=0){return 0}if(t>Number.MAX_SAFE_INTEGER){return Number.MAX_SAFE_INTEGER}return t},SameValue:function(e,t){if(e===t){if(e===0){return 1/e===1/t}return true}return X(e)&&X(t)},SameValueZero:function(e,t){return e===t||X(e)&&X(t)},IsIterable:function(e){return ce.TypeIsObject(e)&&(typeof e[ie]!=="undefined"||te(e))},GetIterator:function(e){if(te(e)){return new q(e,"value")}var t=ce.GetMethod(e,ie);if(!ce.IsCallable(t)){throw new TypeError("value is not an iterable")}var r=ce.Call(t,e);if(!ce.TypeIsObject(r)){throw new TypeError("bad iterator")}return r},GetMethod:function(e,t){var r=ce.ToObject(e)[t];if(se(r)){return void 0}if(!ce.IsCallable(r)){throw new TypeError("Method not callable: "+t)}return r},IteratorComplete:function(e){return!!e.done},IteratorClose:function(e,t){var r=ce.GetMethod(e,"return");if(r===void 0){return}var n,o;try{n=ce.Call(r,e)}catch(i){o=i}if(t){return}if(o){throw o}if(!ce.TypeIsObject(n)){throw new TypeError("Iterator's return method returned a non-object.")}},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!ce.TypeIsObject(t)){throw new TypeError("bad iterator")}return t},IteratorStep:function(e){var t=ce.IteratorNext(e);var r=ce.IteratorComplete(t);return r?false:t},Construct:function(e,t,r,n){var o=typeof r==="undefined"?e:r;if(!n&&ae.construct){return ae.construct(e,t,o)}var i=o.prototype;if(!ce.TypeIsObject(i)){i=Object.prototype}var a=O(i);var u=ce.Call(e,a,t);return ce.TypeIsObject(u)?u:a},SpeciesConstructor:function(e,t){var r=e.constructor;if(r===void 0){return t}if(!ce.TypeIsObject(r)){throw new TypeError("Bad constructor")}var n=r[J];if(se(n)){return t}if(!ce.IsConstructor(n)){throw new TypeError("Bad @@species")}return n},CreateHTML:function(e,t,r,n){var o=ce.ToString(e);var i="<"+t;if(r!==""){var a=ce.ToString(n);var u=a.replace(/"/g,"&quot;");i+=" "+r+'="'+u+'"'}var f=i+">";var s=f+o;return s+"</"+t+">"},IsRegExp:function IsRegExp(e){if(!ce.TypeIsObject(e)){return false}var t=e[$.match];if(typeof t!=="undefined"){return!!t}return re.regex(e)},ToString:function ToString(e){return ue(e)}};if(s&&oe){var le=function defineWellKnownSymbol(e){if(re.symbol($[e])){return $[e]}var t=$["for"]("Symbol."+e);Object.defineProperty($,e,{configurable:false,enumerable:false,writable:false,value:t});return t};if(!re.symbol($.search)){var pe=le("search");var ve=String.prototype.search;h(RegExp.prototype,pe,function search(e){return ce.Call(ve,e,[this])});var ye=function search(e){var t=ce.RequireObjectCoercible(this);if(!se(e)){var r=ce.GetMethod(e,pe);if(typeof r!=="undefined"){return ce.Call(r,e,[t])}}return ce.Call(ve,t,[ce.ToString(e)])};ne(String.prototype,"search",ye)}if(!re.symbol($.replace)){var he=le("replace");var be=String.prototype.replace;h(RegExp.prototype,he,function replace(e,t){return ce.Call(be,e,[this,t])});var ge=function replace(e,t){var r=ce.RequireObjectCoercible(this);if(!se(e)){var n=ce.GetMethod(e,he);if(typeof n!=="undefined"){return ce.Call(n,e,[r,t])}}return ce.Call(be,r,[ce.ToString(e),t])};ne(String.prototype,"replace",ge)}if(!re.symbol($.split)){var de=le("split");var me=String.prototype.split;h(RegExp.prototype,de,function split(e,t){return ce.Call(me,e,[this,t])});var Oe=function split(e,t){var r=ce.RequireObjectCoercible(this);if(!se(e)){var n=ce.GetMethod(e,de);if(typeof n!=="undefined"){return ce.Call(n,e,[r,t])}}return ce.Call(me,r,[ce.ToString(e),t])};ne(String.prototype,"split",Oe)}var we=re.symbol($.match);var je=we&&function(){var e={};e[$.match]=function(){return 42};return"a".match(e)!==42}();if(!we||je){var Se=le("match");var Te=String.prototype.match;h(RegExp.prototype,Se,function match(e){return ce.Call(Te,e,[this])});var Ie=function match(e){var t=ce.RequireObjectCoercible(this);if(!se(e)){var r=ce.GetMethod(e,Se);if(typeof r!=="undefined"){return ce.Call(r,e,[t])}}return ce.Call(Te,t,[ce.ToString(e)])};ne(String.prototype,"match",Ie)}}var Ee=function wrapConstructor(e,t,r){m.preserveToString(t,e);if(Object.setPrototypeOf){Object.setPrototypeOf(e,t)}if(s){l(Object.getOwnPropertyNames(e),function(n){if(n in W||r[n]){return}m.proxy(e,n,t)})}else{l(Object.keys(e),function(n){if(n in W||r[n]){return}t[n]=e[n]})}t.prototype=e.prototype;m.redefine(e.prototype,"constructor",t)};var Pe=function(){return this};var Ce=function(e){if(s&&!z(e,J)){m.getter(e,J,Pe)}};var Me=function(e,t){var r=t||function iterator(){return this};h(e,ie,r);if(!e[ie]&&re.symbol(ie)){e[ie]=r}};var xe=function createDataProperty(e,t,r){if(s){Object.defineProperty(e,t,{configurable:true,enumerable:true,writable:true,value:r})}else{e[t]=r}};var Ne=function createDataPropertyOrThrow(e,t,r){xe(e,t,r);if(!ce.SameValue(e[t],r)){throw new TypeError("property is nonconfigurable")}};var Ae=function(e,t,r,n){if(!ce.TypeIsObject(e)){throw new TypeError("Constructor requires `new`: "+t.name)}var o=t.prototype;if(!ce.TypeIsObject(o)){o=r}var i=O(o);for(var a in n){if(z(n,a)){var u=n[a];h(i,a,u,true)}}return i};if(String.fromCodePoint&&String.fromCodePoint.length!==1){var Re=String.fromCodePoint;ne(String,"fromCodePoint",function fromCodePoint(e){return ce.Call(Re,this,arguments)})}var _e={fromCodePoint:function fromCodePoint(e){var t=[];var r;for(var n=0,o=arguments.length;n<o;n++){r=Number(arguments[n]);if(!ce.SameValue(r,ce.ToInteger(r))||r<0||r>1114111){throw new RangeError("Invalid code point "+r)}if(r<65536){M(t,String.fromCharCode(r))}else{r-=65536;M(t,String.fromCharCode((r>>10)+55296));M(t,String.fromCharCode(r%1024+56320))}}return t.join("")},raw:function raw(e){var t=ce.ToObject(e,"bad callSite");var r=ce.ToObject(t.raw,"bad raw value");var n=r.length;var o=ce.ToLength(n);if(o<=0){return""}var i=[];var a=0;var u,f,s,c;while(a<o){u=ce.ToString(a);s=ce.ToString(r[u]);M(i,s);if(a+1>=o){break}f=a+1<arguments.length?arguments[a+1]:"";c=ce.ToString(f);M(i,c);a+=1}return i.join("")}};if(String.raw&&String.raw({raw:{0:"x",1:"y",length:2}})!=="xy"){ne(String,"raw",_e.raw)}b(String,_e);var ke=function repeat(e,t){if(t<1){return""}if(t%2){return repeat(e,t-1)+e}var r=repeat(e,t/2);return r+r};var Le=Infinity;var Fe={repeat:function repeat(e){var t=ce.ToString(ce.RequireObjectCoercible(this));var r=ce.ToInteger(e);if(r<0||r>=Le){throw new RangeError("repeat count must be less than infinity and not overflow maximum string size")}return ke(t,r)},startsWith:function startsWith(e){var t=ce.ToString(ce.RequireObjectCoercible(this));if(ce.IsRegExp(e)){throw new TypeError('Cannot call method "startsWith" with a regex')}var r=ce.ToString(e);var n;if(arguments.length>1){n=arguments[1]}var o=A(ce.ToInteger(n),0);return C(t,o,o+r.length)===r},endsWith:function endsWith(e){var t=ce.ToString(ce.RequireObjectCoercible(this));if(ce.IsRegExp(e)){throw new TypeError('Cannot call method "endsWith" with a regex')}var r=ce.ToString(e);var n=t.length;var o;if(arguments.length>1){o=arguments[1]}var i=typeof o==="undefined"?n:ce.ToInteger(o);var a=R(A(i,0),n);return C(t,a-r.length,a)===r},includes:function includes(e){if(ce.IsRegExp(e)){throw new TypeError('"includes" does not accept a RegExp')}var t=ce.ToString(e);var r;if(arguments.length>1){r=arguments[1]}return I(this,t,r)!==-1},codePointAt:function codePointAt(e){var t=ce.ToString(ce.RequireObjectCoercible(this));var r=ce.ToInteger(e);var n=t.length;if(r>=0&&r<n){var o=t.charCodeAt(r);var i=r+1===n;if(o<55296||o>56319||i){return o}var a=t.charCodeAt(r+1);if(a<56320||a>57343){return o}return(o-55296)*1024+(a-56320)+65536}}};if(String.prototype.includes&&"a".includes("a",Infinity)!==false){ne(String.prototype,"includes",Fe.includes)}if(String.prototype.startsWith&&String.prototype.endsWith){var De=i(function(){return"/a/".startsWith(/a/)});var ze=a(function(){return"abc".startsWith("a",Infinity)===false});if(!De||!ze){ne(String.prototype,"startsWith",Fe.startsWith);ne(String.prototype,"endsWith",Fe.endsWith)}}if(oe){var qe=a(function(){var e=/a/;e[$.match]=false;return"/a/".startsWith(e)});if(!qe){ne(String.prototype,"startsWith",Fe.startsWith)}var We=a(function(){var e=/a/;e[$.match]=false;return"/a/".endsWith(e)});if(!We){ne(String.prototype,"endsWith",Fe.endsWith)}var Ge=a(function(){var e=/a/;e[$.match]=false;return"/a/".includes(e)});if(!Ge){ne(String.prototype,"includes",Fe.includes)}}b(String.prototype,Fe);var He=["\t\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028","\u2029\ufeff"].join("");var Ve=new RegExp("(^["+He+"]+)|(["+He+"]+$)","g");var Be=function trim(){return ce.ToString(ce.RequireObjectCoercible(this)).replace(Ve,"")};var Ue=["\x85","\u200b","\ufffe"].join("");var $e=new RegExp("["+Ue+"]","g");var Je=/^[-+]0x[0-9a-f]+$/i;var Xe=Ue.trim().length!==Ue.length;h(String.prototype,"trim",Be,Xe);var Ke=function(e){return{value:e,done:arguments.length===0}};var Ze=function(e){ce.RequireObjectCoercible(e);this._s=ce.ToString(e);this._i=0};Ze.prototype.next=function(){var e=this._s;var t=this._i;if(typeof e==="undefined"||t>=e.length){this._s=void 0;return Ke()}var r=e.charCodeAt(t);var n,o;if(r<55296||r>56319||t+1===e.length){o=1}else{n=e.charCodeAt(t+1);o=n<56320||n>57343?1:2}this._i=t+o;return Ke(e.substr(t,o))};Me(Ze.prototype);Me(String.prototype,function(){return new Ze(this)});var Ye={from:function from(e){var r=this;var n;if(arguments.length>1){n=arguments[1]}var o,i;if(typeof n==="undefined"){o=false}else{if(!ce.IsCallable(n)){throw new TypeError("Array.from: when provided, the second argument must be a function")}if(arguments.length>2){i=arguments[2]}o=true}var a=typeof(te(e)||ce.GetMethod(e,ie))!=="undefined";var u,f,s;if(a){f=ce.IsConstructor(r)?Object(new r):[];var c=ce.GetIterator(e);var l,p;s=0;while(true){l=ce.IteratorStep(c);if(l===false){break}p=l.value;try{if(o){p=typeof i==="undefined"?n(p,s):t(n,i,p,s)}f[s]=p}catch(v){ce.IteratorClose(c,true);throw v}s+=1}u=s}else{var y=ce.ToObject(e);u=ce.ToLength(y.length);f=ce.IsConstructor(r)?Object(new r(u)):new Array(u);var h;for(s=0;s<u;++s){h=y[s];if(o){h=typeof i==="undefined"?n(h,s):t(n,i,h,s)}Ne(f,s,h)}}f.length=u;return f},of:function of(){var e=arguments.length;var t=this;var n=r(t)||!ce.IsCallable(t)?new Array(e):ce.Construct(t,[e]);for(var o=0;o<e;++o){Ne(n,o,arguments[o])}n.length=e;return n}};b(Array,Ye);Ce(Array);q=function(e,t){this.i=0;this.array=e;this.kind=t};b(q.prototype,{next:function(){var e=this.i;var t=this.array;if(!(this instanceof q)){throw new TypeError("Not an ArrayIterator")}if(typeof t!=="undefined"){var r=ce.ToLength(t.length);for(;e<r;e++){var n=this.kind;var o;if(n==="key"){o=e}else if(n==="value"){o=t[e]}else if(n==="entry"){o=[e,t[e]]}this.i=e+1;return Ke(o)}}this.array=void 0;return Ke()}});Me(q.prototype);var Qe=Array.of===Ye.of||function(){var e=function Foo(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&t.length===2}();if(!Qe){ne(Array,"of",Ye.of)}var et={copyWithin:function copyWithin(e,t){var r=ce.ToObject(this);var n=ce.ToLength(r.length);var o=ce.ToInteger(e);var i=ce.ToInteger(t);var a=o<0?A(n+o,0):R(o,n);var u=i<0?A(n+i,0):R(i,n);var f;if(arguments.length>2){f=arguments[2]}var s=typeof f==="undefined"?n:ce.ToInteger(f);var c=s<0?A(n+s,0):R(s,n);var l=R(c-u,n-a);var p=1;if(u<a&&a<u+l){p=-1;u+=l-1;a+=l-1}while(l>0){if(u in r){r[a]=r[u]}else{delete r[a]}u+=p;a+=p;l-=1}return r},fill:function fill(e){var t;if(arguments.length>1){t=arguments[1]}var r;if(arguments.length>2){r=arguments[2]}var n=ce.ToObject(this);var o=ce.ToLength(n.length);t=ce.ToInteger(typeof t==="undefined"?0:t);r=ce.ToInteger(typeof r==="undefined"?o:r);var i=t<0?A(o+t,0):R(t,o);var a=r<0?o+r:r;for(var u=i;u<o&&u<a;++u){n[u]=e}return n},find:function find(e){var r=ce.ToObject(this);var n=ce.ToLength(r.length);if(!ce.IsCallable(e)){throw new TypeError("Array#find: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0,a;i<n;i++){a=r[i];if(o){if(t(e,o,a,i,r)){return a}}else if(e(a,i,r)){return a}}},findIndex:function findIndex(e){var r=ce.ToObject(this);var n=ce.ToLength(r.length);if(!ce.IsCallable(e)){throw new TypeError("Array#findIndex: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0;i<n;i++){if(o){if(t(e,o,r[i],i,r)){return i}}else if(e(r[i],i,r)){return i}}return-1},keys:function keys(){return new q(this,"key")},values:function values(){return new q(this,"value")},entries:function entries(){return new q(this,"entry")}};if(Array.prototype.keys&&!ce.IsCallable([1].keys().next)){delete Array.prototype.keys}if(Array.prototype.entries&&!ce.IsCallable([1].entries().next)){delete Array.prototype.entries}if(Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[ie]){b(Array.prototype,{values:Array.prototype[ie]});if(re.symbol($.unscopables)){Array.prototype[$.unscopables].values=true}}if(c&&Array.prototype.values&&Array.prototype.values.name!=="values"){var tt=Array.prototype.values;ne(Array.prototype,"values",function values(){return ce.Call(tt,this,arguments)});h(Array.prototype,ie,Array.prototype.values,true)}b(Array.prototype,et);if(1/[true].indexOf(true,-0)<0){h(Array.prototype,"indexOf",function indexOf(e){var t=E(this,arguments);if(t===0&&1/t<0){return 0}return t},true)}Me(Array.prototype,function(){return this.values()});if(Object.getPrototypeOf){Me(Object.getPrototypeOf([].values()))}var rt=function(){return a(function(){return Array.from({length:-1}).length===0})}();var nt=function(){var e=Array.from([0].entries());return e.length===1&&r(e[0])&&e[0][0]===0&&e[0][1]===0}();if(!rt||!nt){ne(Array,"from",Ye.from)}var ot=function(){return a(function(){return Array.from([0],void 0)})}();if(!ot){var it=Array.from;ne(Array,"from",function from(e){if(arguments.length>1&&typeof arguments[1]!=="undefined"){return ce.Call(it,this,arguments)}else{return t(it,this,e)}})}var at=-(Math.pow(2,32)-1);var ut=function(e,r){var n={length:at};n[r?(n.length>>>0)-1:0]=true;return a(function(){t(e,n,function(){throw new RangeError("should not reach here")},[]);return true})};if(!ut(Array.prototype.forEach)){var ft=Array.prototype.forEach;ne(Array.prototype,"forEach",function forEach(e){return ce.Call(ft,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.map)){var st=Array.prototype.map;ne(Array.prototype,"map",function map(e){return ce.Call(st,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.filter)){var ct=Array.prototype.filter;ne(Array.prototype,"filter",function filter(e){return ce.Call(ct,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.some)){var lt=Array.prototype.some;ne(Array.prototype,"some",function some(e){return ce.Call(lt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.every)){var pt=Array.prototype.every;ne(Array.prototype,"every",function every(e){return ce.Call(pt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.reduce)){var vt=Array.prototype.reduce;ne(Array.prototype,"reduce",function reduce(e){return ce.Call(vt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.reduceRight,true)){var yt=Array.prototype.reduceRight;ne(Array.prototype,"reduceRight",function reduceRight(e){return ce.Call(yt,this.length>=0?this:[],arguments)},true)}var ht=Number("0o10")!==8;var bt=Number("0b10")!==2;var gt=y(Ue,function(e){return Number(e+0+e)===0});if(ht||bt||gt){var dt=Number;var mt=/^0b[01]+$/i;var Ot=/^0o[0-7]+$/i;var wt=mt.test.bind(mt);var jt=Ot.test.bind(Ot);var St=function(e){var t;if(typeof e.valueOf==="function"){t=e.valueOf();if(re.primitive(t)){return t}}if(typeof e.toString==="function"){t=e.toString();if(re.primitive(t)){return t}}throw new TypeError("No default value")};var Tt=$e.test.bind($e);var It=Je.test.bind(Je);var Et=function(){var e=function Number(t){var r;if(arguments.length>0){r=re.primitive(t)?t:St(t,"number")}else{r=0}if(typeof r==="string"){r=ce.Call(Be,r);if(wt(r)){r=parseInt(C(r,2),2)}else if(jt(r)){r=parseInt(C(r,2),8)}else if(Tt(r)||It(r)){r=NaN}}var n=this;var o=a(function(){dt.prototype.valueOf.call(n);return true});if(n instanceof e&&!o){return new dt(r)}return dt(r)};return e}();Ee(dt,Et,{});b(Et,{NaN:dt.NaN,MAX_VALUE:dt.MAX_VALUE,MIN_VALUE:dt.MIN_VALUE,NEGATIVE_INFINITY:dt.NEGATIVE_INFINITY,POSITIVE_INFINITY:dt.POSITIVE_INFINITY});Number=Et;m.redefine(S,"Number",Et)}var Pt=Math.pow(2,53)-1;b(Number,{MAX_SAFE_INTEGER:Pt,MIN_SAFE_INTEGER:-Pt,EPSILON:2.220446049250313e-16,parseInt:S.parseInt,parseFloat:S.parseFloat,isFinite:K,isInteger:function isInteger(e){return K(e)&&ce.ToInteger(e)===e},isSafeInteger:function isSafeInteger(e){return Number.isInteger(e)&&k(e)<=Number.MAX_SAFE_INTEGER},isNaN:X});h(Number,"parseInt",S.parseInt,Number.parseInt!==S.parseInt);if([,1].find(function(){return true})===1){ne(Array.prototype,"find",et.find)}if([,1].findIndex(function(){return true})!==0){ne(Array.prototype,"findIndex",et.findIndex)}var Ct=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable);var Mt=function ensureEnumerable(e,t){if(s&&Ct(e,t)){Object.defineProperty(e,t,{enumerable:false})}};var xt=function sliceArgs(){var e=Number(this);var t=arguments.length;var r=t-e;var n=new Array(r<0?0:r);for(var o=e;o<t;++o){n[o-e]=arguments[o]}return n};var Nt=function assignTo(e){return function assignToSource(t,r){t[r]=e[r];return t}};var At=function(e,t){var r=n(Object(t));var o;if(ce.IsCallable(Object.getOwnPropertySymbols)){o=v(Object.getOwnPropertySymbols(Object(t)),Ct(t))}return p(P(r,o||[]),Nt(t),e)};var Rt={assign:function(e,t){var r=ce.ToObject(e,"Cannot convert undefined or null to object");return p(ce.Call(xt,1,arguments),At,r)},is:function is(e,t){return ce.SameValue(e,t)}};var _t=Object.assign&&Object.preventExtensions&&function(){var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return e[1]==="y"}}();if(_t){ne(Object,"assign",Rt.assign)}b(Object,Rt);if(s){var kt={setPrototypeOf:function(e,r){var n;var o=function(e,t){if(!ce.TypeIsObject(e)){throw new TypeError("cannot set prototype on a non-object")}if(!(t===null||ce.TypeIsObject(t))){throw new TypeError("can only set prototype to an object or null"+t)}};var i=function(e,r){o(e,r);t(n,e,r);return e};try{n=e.getOwnPropertyDescriptor(e.prototype,r).set;t(n,{},null)}catch(a){if(e.prototype!=={}[r]){return}n=function(e){this[r]=e};i.polyfill=i(i({},null),e.prototype)instanceof e}return i}(Object,"__proto__")};b(Object,kt)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&Object.getPrototypeOf(Object.setPrototypeOf({},null))!==null&&Object.getPrototypeOf(Object.create(null))===null){(function(){var e=Object.create(null);var t=Object.getPrototypeOf;var r=Object.setPrototypeOf;Object.getPrototypeOf=function(r){var n=t(r);return n===e?null:n};Object.setPrototypeOf=function(t,n){var o=n===null?e:n;return r(t,o)};Object.setPrototypeOf.polyfill=false})()}var Lt=!i(function(){return Object.keys("foo")});if(!Lt){var Ft=Object.keys;ne(Object,"keys",function keys(e){return Ft(ce.ToObject(e))});n=Object.keys}var Dt=i(function(){return Object.keys(/a/g)});if(Dt){var zt=Object.keys;ne(Object,"keys",function keys(e){if(re.regex(e)){var t=[];for(var r in e){if(z(e,r)){M(t,r)}}return t}return zt(e)});n=Object.keys}if(Object.getOwnPropertyNames){var qt=!i(function(){return Object.getOwnPropertyNames("foo")});if(!qt){var Wt=typeof window==="object"?Object.getOwnPropertyNames(window):[];var Gt=Object.getOwnPropertyNames;ne(Object,"getOwnPropertyNames",function getOwnPropertyNames(e){var t=ce.ToObject(e);if(g(t)==="[object Window]"){try{return Gt(t)}catch(r){return P([],Wt)}}return Gt(t)})}}if(Object.getOwnPropertyDescriptor){var Ht=!i(function(){return Object.getOwnPropertyDescriptor("foo","bar")});if(!Ht){var Vt=Object.getOwnPropertyDescriptor;ne(Object,"getOwnPropertyDescriptor",function getOwnPropertyDescriptor(e,t){return Vt(ce.ToObject(e),t)})}}if(Object.seal){var Bt=!i(function(){return Object.seal("foo")});if(!Bt){var Ut=Object.seal;ne(Object,"seal",function seal(e){if(!ce.TypeIsObject(e)){return e}return Ut(e)})}}if(Object.isSealed){var $t=!i(function(){return Object.isSealed("foo")});if(!$t){var Jt=Object.isSealed;ne(Object,"isSealed",function isSealed(e){if(!ce.TypeIsObject(e)){return true}return Jt(e)})}}if(Object.freeze){var Xt=!i(function(){return Object.freeze("foo")});if(!Xt){var Kt=Object.freeze;ne(Object,"freeze",function freeze(e){if(!ce.TypeIsObject(e)){return e}return Kt(e)})}}if(Object.isFrozen){var Zt=!i(function(){return Object.isFrozen("foo")});if(!Zt){var Yt=Object.isFrozen;ne(Object,"isFrozen",function isFrozen(e){if(!ce.TypeIsObject(e)){return true}return Yt(e)})}}if(Object.preventExtensions){var Qt=!i(function(){return Object.preventExtensions("foo")});if(!Qt){var er=Object.preventExtensions;ne(Object,"preventExtensions",function preventExtensions(e){if(!ce.TypeIsObject(e)){return e}return er(e)})}}if(Object.isExtensible){var tr=!i(function(){return Object.isExtensible("foo")});if(!tr){var rr=Object.isExtensible;ne(Object,"isExtensible",function isExtensible(e){if(!ce.TypeIsObject(e)){return false}return rr(e)})}}if(Object.getPrototypeOf){var nr=!i(function(){return Object.getPrototypeOf("foo")});if(!nr){var or=Object.getPrototypeOf;ne(Object,"getPrototypeOf",function getPrototypeOf(e){return or(ce.ToObject(e))})}}var ir=s&&function(){var e=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");return e&&ce.IsCallable(e.get)}();if(s&&!ir){var ar=function flags(){if(!ce.TypeIsObject(this)){throw new TypeError("Method called on incompatible type: must be an object.")}var e="";if(this.global){e+="g"}if(this.ignoreCase){e+="i"}if(this.multiline){e+="m"}if(this.unicode){e+="u"}if(this.sticky){e+="y"}return e};m.getter(RegExp.prototype,"flags",ar)}var ur=s&&a(function(){return String(new RegExp(/a/g,"i"))==="/a/i"});var fr=oe&&s&&function(){var e=/./;e[$.match]=false;return RegExp(e)===e}();var sr=a(function(){return RegExp.prototype.toString.call({source:"abc"})==="/abc/"});var cr=sr&&a(function(){return RegExp.prototype.toString.call({source:"a",flags:"b"})==="/a/b"});if(!sr||!cr){var lr=RegExp.prototype.toString;h(RegExp.prototype,"toString",function toString(){var e=ce.RequireObjectCoercible(this);if(re.regex(e)){return t(lr,e)}var r=ue(e.source);var n=ue(e.flags);return"/"+r+"/"+n},true);m.preserveToString(RegExp.prototype.toString,lr)}if(s&&(!ur||fr)){var pr=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get;var vr=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{};var yr=function(){return this.source};var hr=ce.IsCallable(vr.get)?vr.get:yr;var br=RegExp;var gr=function(){return function RegExp(e,t){var r=ce.IsRegExp(e);var n=this instanceof RegExp;if(!n&&r&&typeof t==="undefined"&&e.constructor===RegExp){return e}var o=e;var i=t;if(re.regex(e)){o=ce.Call(hr,e);i=typeof t==="undefined"?ce.Call(pr,e):t;return new RegExp(o,i)}else if(r){o=e.source;i=typeof t==="undefined"?e.flags:t}return new br(e,t)}}();Ee(br,gr,{$input:true});RegExp=gr;m.redefine(S,"RegExp",gr)}if(s){var dr={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};l(n(dr),function(e){if(e in RegExp&&!(dr[e]in RegExp)){m.getter(RegExp,dr[e],function get(){return RegExp[e]})}})}Ce(RegExp);var mr=1/Number.EPSILON;var Or=function roundTiesToEven(e){return e+mr-mr};var wr=Math.pow(2,-23);var jr=Math.pow(2,127)*(2-wr);var Sr=Math.pow(2,-126);var Tr=Math.E;var Ir=Math.LOG2E;var Er=Math.LOG10E;var Pr=Number.prototype.clz;delete Number.prototype.clz;var Cr={acosh:function acosh(e){var t=Number(e);if(X(t)||e<1){return NaN}if(t===1){return 0}if(t===Infinity){return t}var r=1/(t*t);if(t<2){return Y(t-1+D(1-r)*t)}var n=t/2;return Y(n+D(1-r)*n-1)+1/Ir},asinh:function asinh(e){var t=Number(e);if(t===0||!T(t)){return t}var r=k(t);var n=r*r;var o=Z(t);if(r<1){return o*Y(r+n/(D(n+1)+1))}return o*(Y(r/2+D(1+1/n)*r/2-1)+1/Ir)},atanh:function atanh(e){var t=Number(e);if(t===0){return t}if(t===-1){return-Infinity}if(t===1){return Infinity}if(X(t)||t<-1||t>1){return NaN}var r=k(t);return Z(t)*Y(2*r/(1-r))/2},cbrt:function cbrt(e){var t=Number(e);if(t===0){return t}var r=t<0;var n;if(r){t=-t}if(t===Infinity){n=Infinity}else{n=L(F(t)/3);n=(t/(n*n)+2*n)/3}return r?-n:n},clz32:function clz32(e){var t=Number(e);var r=ce.ToUint32(t);if(r===0){return 32}return Pr?ce.Call(Pr,r):31-_(F(r+.5)*Ir)},cosh:function cosh(e){var t=Number(e);if(t===0){return 1}if(X(t)){return NaN}if(!T(t)){return Infinity}var r=L(k(t)-1);return(r+1/(r*Tr*Tr))*(Tr/2)},expm1:function expm1(e){var t=Number(e);if(t===-Infinity){return-1}if(!T(t)||t===0){return t}if(k(t)>.5){return L(t)-1}var r=t;var n=0;var o=1;while(n+r!==n){n+=r;o+=1;r*=t/o}return n},hypot:function hypot(e,t){var r=0;var n=0;for(var o=0;o<arguments.length;++o){var i=k(Number(arguments[o]));if(n<i){r*=n/i*(n/i);r+=1;n=i}else{r+=i>0?i/n*(i/n):i}}return n===Infinity?Infinity:n*D(r)},log2:function log2(e){return F(e)*Ir},log10:function log10(e){return F(e)*Er},log1p:Y,sign:Z,sinh:function sinh(e){var t=Number(e);if(!T(t)||t===0){return t}var r=k(t);if(r<1){var n=Math.expm1(r);return Z(t)*n*(1+1/(n+1))/2}var o=L(r-1);return Z(t)*(o-1/(o*Tr*Tr))*(Tr/2)},tanh:function tanh(e){var t=Number(e);if(X(t)||t===0){return t}if(t>=20){return 1}if(t<=-20){return-1}return(Math.expm1(t)-Math.expm1(-t))/(L(t)+L(-t))},trunc:function trunc(e){var t=Number(e);return t<0?-_(-t):_(t)},imul:function imul(e,t){var r=ce.ToUint32(e);var n=ce.ToUint32(t);var o=r>>>16&65535;var i=r&65535;var a=n>>>16&65535;var u=n&65535;return i*u+(o*u+i*a<<16>>>0)|0},fround:function fround(e){var t=Number(e);if(t===0||t===Infinity||t===-Infinity||X(t)){return t}var r=Z(t);var n=k(t);if(n<Sr){return r*Or(n/Sr/wr)*Sr*wr}var o=(1+wr/Number.EPSILON)*n;var i=o-(o-n);if(i>jr||X(i)){return r*Infinity}return r*i}};var Mr=function withinULPDistance(e,t,r){return k(1-e/t)/Number.EPSILON<(r||8)};b(Math,Cr);h(Math,"sinh",Cr.sinh,Math.sinh(710)===Infinity);h(Math,"cosh",Cr.cosh,Math.cosh(710)===Infinity);h(Math,"log1p",Cr.log1p,Math.log1p(-1e-17)!==-1e-17);h(Math,"asinh",Cr.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7));h(Math,"asinh",Cr.asinh,Math.asinh(1e300)===Infinity);h(Math,"atanh",Cr.atanh,Math.atanh(1e-300)===0);h(Math,"tanh",Cr.tanh,Math.tanh(-2e-17)!==-2e-17);
h(Math,"acosh",Cr.acosh,Math.acosh(Number.MAX_VALUE)===Infinity);h(Math,"acosh",Cr.acosh,!Mr(Math.acosh(1+Number.EPSILON),Math.sqrt(2*Number.EPSILON)));h(Math,"cbrt",Cr.cbrt,!Mr(Math.cbrt(1e-300),1e-100));h(Math,"sinh",Cr.sinh,Math.sinh(-2e-17)!==-2e-17);var xr=Math.expm1(10);h(Math,"expm1",Cr.expm1,xr>22025.465794806718||xr<22025.465794806718);var Nr=Math.round;var Ar=Math.round(.5-Number.EPSILON/4)===0&&Math.round(-.5+Number.EPSILON/3.99)===1;var Rr=mr+1;var _r=2*mr-1;var kr=[Rr,_r].every(function(e){return Math.round(e)===e});h(Math,"round",function round(e){var t=_(e);var r=t===-1?-0:t+1;return e-t<.5?t:r},!Ar||!kr);m.preserveToString(Math.round,Nr);var Lr=Math.imul;if(Math.imul(4294967295,5)!==-5){Math.imul=Cr.imul;m.preserveToString(Math.imul,Lr)}if(Math.imul.length!==2){ne(Math,"imul",function imul(e,t){return ce.Call(Lr,Math,arguments)})}var Fr=function(){var e=S.setTimeout;if(typeof e!=="function"&&typeof e!=="object"){return}ce.IsPromise=function(e){if(!ce.TypeIsObject(e)){return false}if(typeof e._promise==="undefined"){return false}return true};var r=function(e){if(!ce.IsConstructor(e)){throw new TypeError("Bad promise constructor")}var t=this;var r=function(e,r){if(t.resolve!==void 0||t.reject!==void 0){throw new TypeError("Bad Promise implementation!")}t.resolve=e;t.reject=r};t.resolve=void 0;t.reject=void 0;t.promise=new e(r);if(!(ce.IsCallable(t.resolve)&&ce.IsCallable(t.reject))){throw new TypeError("Bad promise constructor")}};var n;if(typeof window!=="undefined"&&ce.IsCallable(window.postMessage)){n=function(){var e=[];var t="zero-timeout-message";var r=function(r){M(e,r);window.postMessage(t,"*")};var n=function(r){if(r.source===window&&r.data===t){r.stopPropagation();if(e.length===0){return}var n=N(e);n()}};window.addEventListener("message",n,true);return r}}var o=function(){var e=S.Promise;var t=e&&e.resolve&&e.resolve();return t&&function(e){return t.then(e)}};var i=ce.IsCallable(S.setImmediate)?S.setImmediate:typeof process==="object"&&process.nextTick?process.nextTick:o()||(ce.IsCallable(n)?n():function(t){e(t,0)});var a=function(e){return e};var u=function(e){throw e};var f=0;var s=1;var c=2;var l=0;var p=1;var v=2;var y={};var h=function(e,t,r){i(function(){g(e,t,r)})};var g=function(e,t,r){var n,o;if(t===y){return e(r)}try{n=e(r);o=t.resolve}catch(i){n=i;o=t.reject}o(n)};var d=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.fulfillReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+l],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=s;r.reactionLength=0};var m=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.rejectReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+p],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=c;r.reactionLength=0};var O=function(e){var t=false;var r=function(r){var n;if(t){return}t=true;if(r===e){return m(e,new TypeError("Self resolution"))}if(!ce.TypeIsObject(r)){return d(e,r)}try{n=r.then}catch(o){return m(e,o)}if(!ce.IsCallable(n)){return d(e,r)}i(function(){j(e,r,n)})};var n=function(r){if(t){return}t=true;return m(e,r)};return{resolve:r,reject:n}};var w=function(e,r,n,o){if(e===I){t(e,r,n,o,y)}else{t(e,r,n,o)}};var j=function(e,t,r){var n=O(e);var o=n.resolve;var i=n.reject;try{w(r,t,o,i)}catch(a){i(a)}};var T,I;var E=function(){var e=function Promise(t){if(!(this instanceof e)){throw new TypeError('Constructor Promise requires "new"')}if(this&&this._promise){throw new TypeError("Bad construction")}if(!ce.IsCallable(t)){throw new TypeError("not a valid resolver")}var r=Ae(this,e,T,{_promise:{result:void 0,state:f,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}});var n=O(r);var o=n.reject;try{t(n.resolve,o)}catch(i){o(i)}return r};return e}();T=E.prototype;var P=function(e,t,r,n){var o=false;return function(i){if(o){return}o=true;t[e]=i;if(--n.count===0){var a=r.resolve;a(t)}}};var C=function(e,t,r){var n=e.iterator;var o=[];var i={count:1};var a,u;var f=0;while(true){try{a=ce.IteratorStep(n);if(a===false){e.done=true;break}u=a.value}catch(s){e.done=true;throw s}o[f]=void 0;var c=t.resolve(u);var l=P(f,o,r,i);i.count+=1;w(c.then,c,l,r.reject);f+=1}if(--i.count===0){var p=r.resolve;p(o)}return r.promise};var x=function(e,t,r){var n=e.iterator;var o,i,a;while(true){try{o=ce.IteratorStep(n);if(o===false){e.done=true;break}i=o.value}catch(u){e.done=true;throw u}a=t.resolve(i);w(a.then,a,r.resolve,r.reject)}return r.promise};b(E,{all:function all(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=ce.GetIterator(e);i={iterator:o,done:false};return C(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{ce.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},race:function race(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=ce.GetIterator(e);i={iterator:o,done:false};return x(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{ce.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},reject:function reject(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}var n=new r(t);var o=n.reject;o(e);return n.promise},resolve:function resolve(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}if(ce.IsPromise(e)){var n=e.constructor;if(n===t){return e}}var o=new r(t);var i=o.resolve;i(e);return o.promise}});b(T,{"catch":function(e){return this.then(null,e)},then:function then(e,t){var n=this;if(!ce.IsPromise(n)){throw new TypeError("not a promise")}var o=ce.SpeciesConstructor(n,E);var i;var b=arguments.length>2&&arguments[2]===y;if(b&&o===E){i=y}else{i=new r(o)}var g=ce.IsCallable(e)?e:a;var d=ce.IsCallable(t)?t:u;var m=n._promise;var O;if(m.state===f){if(m.reactionLength===0){m.fulfillReactionHandler0=g;m.rejectReactionHandler0=d;m.reactionCapability0=i}else{var w=3*(m.reactionLength-1);m[w+l]=g;m[w+p]=d;m[w+v]=i}m.reactionLength+=1}else if(m.state===s){O=m.result;h(g,i,O)}else if(m.state===c){O=m.result;h(d,i,O)}else{throw new TypeError("unexpected Promise state")}return i.promise}});y=new r(E);I=T.then;return E}();if(S.Promise){delete S.Promise.accept;delete S.Promise.defer;delete S.Promise.prototype.chain}if(typeof Fr==="function"){b(S,{Promise:Fr});var Dr=w(S.Promise,function(e){return e.resolve(42).then(function(){})instanceof e});var zr=!i(function(){return S.Promise.reject(42).then(null,5).then(null,W)});var qr=i(function(){return S.Promise.call(3,W)});var Wr=function(e){var t=e.resolve(5);t.constructor={};var r=e.resolve(t);try{r.then(null,W).then(null,W)}catch(n){return true}return t===r}(S.Promise);var Gr=s&&function(){var e=0;var t=Object.defineProperty({},"then",{get:function(){e+=1}});Promise.resolve(t);return e===1}();var Hr=function BadResolverPromise(e){var t=new Promise(e);e(3,function(){});this.then=t.then;this.constructor=BadResolverPromise};Hr.prototype=Promise.prototype;Hr.all=Promise.all;var Vr=a(function(){return!!Hr.all([1,2])});if(!Dr||!zr||!qr||Wr||!Gr||Vr){Promise=Fr;ne(S,"Promise",Fr)}if(Promise.all.length!==1){var Br=Promise.all;ne(Promise,"all",function all(e){return ce.Call(Br,this,arguments)})}if(Promise.race.length!==1){var Ur=Promise.race;ne(Promise,"race",function race(e){return ce.Call(Ur,this,arguments)})}if(Promise.resolve.length!==1){var $r=Promise.resolve;ne(Promise,"resolve",function resolve(e){return ce.Call($r,this,arguments)})}if(Promise.reject.length!==1){var Jr=Promise.reject;ne(Promise,"reject",function reject(e){return ce.Call(Jr,this,arguments)})}Mt(Promise,"all");Mt(Promise,"race");Mt(Promise,"resolve");Mt(Promise,"reject");Ce(Promise)}var Xr=function(e){var t=n(p(e,function(e,t){e[t]=true;return e},{}));return e.join(":")===t.join(":")};var Kr=Xr(["z","a","bb"]);var Zr=Xr(["z",1,"a","3",2]);if(s){var Yr=function fastkey(e,t){if(!t&&!Kr){return null}if(se(e)){return"^"+ce.ToString(e)}else if(typeof e==="string"){return"$"+e}else if(typeof e==="number"){if(!Zr){return"n"+e}return e}else if(typeof e==="boolean"){return"b"+e}return null};var Qr=function emptyObject(){return Object.create?Object.create(null):{}};var en=function addIterableToMap(e,n,o){if(r(o)||re.string(o)){l(o,function(e){if(!ce.TypeIsObject(e)){throw new TypeError("Iterator value "+e+" is not an entry object")}n.set(e[0],e[1])})}else if(o instanceof e){t(e.prototype.forEach,o,function(e,t){n.set(t,e)})}else{var i,a;if(!se(o)){a=n.set;if(!ce.IsCallable(a)){throw new TypeError("bad map")}i=ce.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=ce.IteratorStep(i);if(u===false){break}var f=u.value;try{if(!ce.TypeIsObject(f)){throw new TypeError("Iterator value "+f+" is not an entry object")}t(a,n,f[0],f[1])}catch(s){ce.IteratorClose(i,true);throw s}}}}};var tn=function addIterableToSet(e,n,o){if(r(o)||re.string(o)){l(o,function(e){n.add(e)})}else if(o instanceof e){t(e.prototype.forEach,o,function(e){n.add(e)})}else{var i,a;if(!se(o)){a=n.add;if(!ce.IsCallable(a)){throw new TypeError("bad set")}i=ce.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=ce.IteratorStep(i);if(u===false){break}var f=u.value;try{t(a,n,f)}catch(s){ce.IteratorClose(i,true);throw s}}}}};var rn={Map:function(){var e={};var r=function MapEntry(e,t){this.key=e;this.value=t;this.next=null;this.prev=null};r.prototype.isRemoved=function isRemoved(){return this.key===e};var n=function isMap(e){return!!e._es6map};var o=function requireMapSlot(e,t){if(!ce.TypeIsObject(e)||!n(e)){throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+ce.ToString(e))}};var i=function MapIterator(e,t){o(e,"[[MapIterator]]");this.head=e._head;this.i=this.head;this.kind=t};i.prototype={isMapIterator:true,next:function next(){if(!this.isMapIterator){throw new TypeError("Not a MapIterator")}var e=this.i;var t=this.kind;var r=this.head;if(typeof this.i==="undefined"){return Ke()}while(e.isRemoved()&&e!==r){e=e.prev}var n;while(e.next!==r){e=e.next;if(!e.isRemoved()){if(t==="key"){n=e.key}else if(t==="value"){n=e.value}else{n=[e.key,e.value]}this.i=e;return Ke(n)}}this.i=void 0;return Ke()}};Me(i.prototype);var a;var u=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}if(this&&this._es6map){throw new TypeError("Bad construction")}var e=Ae(this,Map,a,{_es6map:true,_head:null,_map:G?new G:null,_size:0,_storage:Qr()});var t=new r(null,null);t.next=t.prev=t;e._head=t;if(arguments.length>0){en(Map,e,arguments[0])}return e};a=u.prototype;m.getter(a,"size",function(){if(typeof this._size==="undefined"){throw new TypeError("size method called on incompatible Map")}return this._size});b(a,{get:function get(e){o(this,"get");var t;var r=Yr(e,true);if(r!==null){t=this._storage[r];if(t){return t.value}else{return}}if(this._map){t=V.call(this._map,e);if(t){return t.value}else{return}}var n=this._head;var i=n;while((i=i.next)!==n){if(ce.SameValueZero(i.key,e)){return i.value}}},has:function has(e){o(this,"has");var t=Yr(e,true);if(t!==null){return typeof this._storage[t]!=="undefined"}if(this._map){return B.call(this._map,e)}var r=this._head;var n=r;while((n=n.next)!==r){if(ce.SameValueZero(n.key,e)){return true}}return false},set:function set(e,t){o(this,"set");var n=this._head;var i=n;var a;var u=Yr(e,true);if(u!==null){if(typeof this._storage[u]!=="undefined"){this._storage[u].value=t;return this}else{a=this._storage[u]=new r(e,t);i=n.prev}}else if(this._map){if(B.call(this._map,e)){V.call(this._map,e).value=t}else{a=new r(e,t);U.call(this._map,e,a);i=n.prev}}while((i=i.next)!==n){if(ce.SameValueZero(i.key,e)){i.value=t;return this}}a=a||new r(e,t);if(ce.SameValue(-0,e)){a.key=+0}a.next=this._head;a.prev=this._head.prev;a.prev.next=a;a.next.prev=a;this._size+=1;return this},"delete":function(t){o(this,"delete");var r=this._head;var n=r;var i=Yr(t,true);if(i!==null){if(typeof this._storage[i]==="undefined"){return false}n=this._storage[i].prev;delete this._storage[i]}else if(this._map){if(!B.call(this._map,t)){return false}n=V.call(this._map,t).prev;H.call(this._map,t)}while((n=n.next)!==r){if(ce.SameValueZero(n.key,t)){n.key=e;n.value=e;n.prev.next=n.next;n.next.prev=n.prev;this._size-=1;return true}}return false},clear:function clear(){o(this,"clear");this._map=G?new G:null;this._size=0;this._storage=Qr();var t=this._head;var r=t;var n=r.next;while((r=n)!==t){r.key=e;r.value=e;n=r.next;r.next=r.prev=t}t.next=t.prev=t},keys:function keys(){o(this,"keys");return new i(this,"key")},values:function values(){o(this,"values");return new i(this,"value")},entries:function entries(){o(this,"entries");return new i(this,"key+value")},forEach:function forEach(e){o(this,"forEach");var r=arguments.length>1?arguments[1]:null;var n=this.entries();for(var i=n.next();!i.done;i=n.next()){if(r){t(e,r,i.value[1],i.value[0],this)}else{e(i.value[1],i.value[0],this)}}}});Me(a,a.entries);return u}(),Set:function(){var e=function isSet(e){return e._es6set&&typeof e._storage!=="undefined"};var r=function requireSetSlot(t,r){if(!ce.TypeIsObject(t)||!e(t)){throw new TypeError("Set.prototype."+r+" called on incompatible receiver "+ce.ToString(t))}};var o;var i=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}if(this&&this._es6set){throw new TypeError("Bad construction")}var e=Ae(this,Set,o,{_es6set:true,"[[SetData]]":null,_storage:Qr()});if(!e._es6set){throw new TypeError("bad set")}if(arguments.length>0){tn(Set,e,arguments[0])}return e};o=i.prototype;var a=function(e){var t=e;if(t==="^null"){return null}else if(t==="^undefined"){return void 0}else{var r=t.charAt(0);if(r==="$"){return C(t,1)}else if(r==="n"){return+C(t,1)}else if(r==="b"){return t==="btrue"}}return+t};var u=function ensureMap(e){if(!e["[[SetData]]"]){var t=new rn.Map;e["[[SetData]]"]=t;l(n(e._storage),function(e){var r=a(e);t.set(r,r)});e["[[SetData]]"]=t}e._storage=null};m.getter(i.prototype,"size",function(){r(this,"size");if(this._storage){return n(this._storage).length}u(this);return this["[[SetData]]"].size});b(i.prototype,{has:function has(e){r(this,"has");var t;if(this._storage&&(t=Yr(e))!==null){return!!this._storage[t]}u(this);return this["[[SetData]]"].has(e)},add:function add(e){r(this,"add");var t;if(this._storage&&(t=Yr(e))!==null){this._storage[t]=true;return this}u(this);this["[[SetData]]"].set(e,e);return this},"delete":function(e){r(this,"delete");var t;if(this._storage&&(t=Yr(e))!==null){var n=z(this._storage,t);return delete this._storage[t]&&n}u(this);return this["[[SetData]]"]["delete"](e)},clear:function clear(){r(this,"clear");if(this._storage){this._storage=Qr()}if(this["[[SetData]]"]){this["[[SetData]]"].clear()}},values:function values(){r(this,"values");u(this);return new f(this["[[SetData]]"].values())},entries:function entries(){r(this,"entries");u(this);return new f(this["[[SetData]]"].entries())},forEach:function forEach(e){r(this,"forEach");var n=arguments.length>1?arguments[1]:null;var o=this;u(o);this["[[SetData]]"].forEach(function(r,i){if(n){t(e,n,i,i,o)}else{e(i,i,o)}})}});h(i.prototype,"keys",i.prototype.values,true);Me(i.prototype,i.prototype.values);var f=function SetIterator(e){this.it=e};f.prototype={isSetIterator:true,next:function next(){if(!this.isSetIterator){throw new TypeError("Not a SetIterator")}return this.it.next()}};Me(f.prototype);return i}()};var nn=S.Set&&!Set.prototype["delete"]&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys);if(nn){S.Set=rn.Set}if(S.Map||S.Set){var on=a(function(){return new Map([[1,2]]).get(1)===2});if(!on){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){en(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,S.Map.prototype);return e};S.Map.prototype=O(G.prototype);h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var an=new Map;var un=function(){var e=new Map([[1,0],[2,0],[3,0],[4,0]]);e.set(-0,e);return e.get(0)===e&&e.get(-0)===e&&e.has(0)&&e.has(-0)}();var fn=an.set(1,2)===an;if(!un||!fn){ne(Map.prototype,"set",function set(e,r){t(U,this,e===0?0:e,r);return this})}if(!un){b(Map.prototype,{get:function get(e){return t(V,this,e===0?0:e)},has:function has(e){return t(B,this,e===0?0:e)}},true);m.preserveToString(Map.prototype.get,V);m.preserveToString(Map.prototype.has,B)}var sn=new Set;var cn=Set.prototype["delete"]&&Set.prototype.add&&Set.prototype.has&&function(e){e["delete"](0);e.add(-0);return!e.has(0)}(sn);var ln=sn.add(1)===sn;if(!cn||!ln){var pn=Set.prototype.add;Set.prototype.add=function add(e){t(pn,this,e===0?0:e);return this};m.preserveToString(Set.prototype.add,pn)}if(!cn){var vn=Set.prototype.has;Set.prototype.has=function has(e){return t(vn,this,e===0?0:e)};m.preserveToString(Set.prototype.has,vn);var yn=Set.prototype["delete"];Set.prototype["delete"]=function SetDelete(e){return t(yn,this,e===0?0:e)};m.preserveToString(Set.prototype["delete"],yn)}var hn=w(S.Map,function(e){var t=new e([]);t.set(42,42);return t instanceof e});var bn=Object.setPrototypeOf&&!hn;var gn=function(){try{return!(S.Map()instanceof S.Map)}catch(e){return e instanceof TypeError}}();if(S.Map.length!==0||bn||!gn){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){en(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Map.prototype);return e};S.Map.prototype=G.prototype;h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var dn=w(S.Set,function(e){var t=new e([]);t.add(42,42);return t instanceof e});var mn=Object.setPrototypeOf&&!dn;var On=function(){try{return!(S.Set()instanceof S.Set)}catch(e){return e instanceof TypeError}}();if(S.Set.length!==0||mn||!On){var wn=S.Set;S.Set=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}var e=new wn;if(arguments.length>0){tn(Set,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Set.prototype);return e};S.Set.prototype=wn.prototype;h(S.Set.prototype,"constructor",S.Set,true);m.preserveToString(S.Set,wn)}var jn=new S.Map;var Sn=!a(function(){return jn.keys().next().done});if(typeof S.Map.prototype.clear!=="function"||(new S.Set).size!==0||jn.size!==0||typeof S.Map.prototype.keys!=="function"||typeof S.Set.prototype.keys!=="function"||typeof S.Map.prototype.forEach!=="function"||typeof S.Set.prototype.forEach!=="function"||u(S.Map)||u(S.Set)||typeof jn.keys().next!=="function"||Sn||!hn){b(S,{Map:rn.Map,Set:rn.Set},true)}if(S.Set.prototype.keys!==S.Set.prototype.values){h(S.Set.prototype,"keys",S.Set.prototype.values,true)}Me(Object.getPrototypeOf((new S.Map).keys()));Me(Object.getPrototypeOf((new S.Set).keys()));if(c&&S.Set.prototype.has.name!=="has"){var Tn=S.Set.prototype.has;ne(S.Set.prototype,"has",function has(e){return t(Tn,this,e)})}}b(S,rn);Ce(S.Map);Ce(S.Set)}var In=function throwUnlessTargetIsObject(e){if(!ce.TypeIsObject(e)){throw new TypeError("target must be an object")}};var En={apply:function apply(){return ce.Call(ce.Call,null,arguments)},construct:function construct(e,t){if(!ce.IsConstructor(e)){throw new TypeError("First argument must be a constructor.")}var r=arguments.length>2?arguments[2]:e;if(!ce.IsConstructor(r)){throw new TypeError("new.target must be a constructor.")}return ce.Construct(e,t,r,"internal")},deleteProperty:function deleteProperty(e,t){In(e);if(s){var r=Object.getOwnPropertyDescriptor(e,t);if(r&&!r.configurable){return false}}return delete e[t]},has:function has(e,t){In(e);return t in e}};if(Object.getOwnPropertyNames){Object.assign(En,{ownKeys:function ownKeys(e){In(e);var t=Object.getOwnPropertyNames(e);if(ce.IsCallable(Object.getOwnPropertySymbols)){x(t,Object.getOwnPropertySymbols(e))}return t}})}var Pn=function ConvertExceptionToBoolean(e){return!i(e)};if(Object.preventExtensions){Object.assign(En,{isExtensible:function isExtensible(e){In(e);return Object.isExtensible(e)},preventExtensions:function preventExtensions(e){In(e);return Pn(function(){return Object.preventExtensions(e)})}})}if(s){var Cn=function get(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(!n){var o=Object.getPrototypeOf(e);if(o===null){return void 0}return Cn(o,t,r)}if("value"in n){return n.value}if(n.get){return ce.Call(n.get,r)}return void 0};var Mn=function set(e,r,n,o){var i=Object.getOwnPropertyDescriptor(e,r);if(!i){var a=Object.getPrototypeOf(e);if(a!==null){return Mn(a,r,n,o)}i={value:void 0,writable:true,enumerable:true,configurable:true}}if("value"in i){if(!i.writable){return false}if(!ce.TypeIsObject(o)){return false}var u=Object.getOwnPropertyDescriptor(o,r);if(u){return ae.defineProperty(o,r,{value:n})}else{return ae.defineProperty(o,r,{value:n,writable:true,enumerable:true,configurable:true})}}if(i.set){t(i.set,o,n);return true}return false};Object.assign(En,{defineProperty:function defineProperty(e,t,r){In(e);return Pn(function(){return Object.defineProperty(e,t,r)})},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(e,t){In(e);return Object.getOwnPropertyDescriptor(e,t)},get:function get(e,t){In(e);var r=arguments.length>2?arguments[2]:e;return Cn(e,t,r)},set:function set(e,t,r){In(e);var n=arguments.length>3?arguments[3]:e;return Mn(e,t,r,n)}})}if(Object.getPrototypeOf){var xn=Object.getPrototypeOf;En.getPrototypeOf=function getPrototypeOf(e){In(e);return xn(e)}}if(Object.setPrototypeOf&&En.getPrototypeOf){var Nn=function(e,t){var r=t;while(r){if(e===r){return true}r=En.getPrototypeOf(r)}return false};Object.assign(En,{setPrototypeOf:function setPrototypeOf(e,t){In(e);if(t!==null&&!ce.TypeIsObject(t)){throw new TypeError("proto must be an object or null")}if(t===ae.getPrototypeOf(e)){return true}if(ae.isExtensible&&!ae.isExtensible(e)){return false}if(Nn(e,t)){return false}Object.setPrototypeOf(e,t);return true}})}var An=function(e,t){if(!ce.IsCallable(S.Reflect[e])){h(S.Reflect,e,t)}else{var r=a(function(){S.Reflect[e](1);S.Reflect[e](NaN);S.Reflect[e](true);return true});if(r){ne(S.Reflect,e,t)}}};Object.keys(En).forEach(function(e){An(e,En[e])});var Rn=S.Reflect.getPrototypeOf;if(c&&Rn&&Rn.name!=="getPrototypeOf"){ne(S.Reflect,"getPrototypeOf",function getPrototypeOf(e){return t(Rn,S.Reflect,e)})}if(S.Reflect.setPrototypeOf){if(a(function(){S.Reflect.setPrototypeOf(1,{});return true})){ne(S.Reflect,"setPrototypeOf",En.setPrototypeOf)}}if(S.Reflect.defineProperty){if(!a(function(){var e=!S.Reflect.defineProperty(1,"test",{value:1});var t=typeof Object.preventExtensions!=="function"||!S.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return e&&t})){ne(S.Reflect,"defineProperty",En.defineProperty)}}if(S.Reflect.construct){if(!a(function(){var e=function F(){};return S.Reflect.construct(function(){},[],e)instanceof e})){ne(S.Reflect,"construct",En.construct)}}if(String(new Date(NaN))!=="Invalid Date"){var _n=Date.prototype.toString;var kn=function toString(){var e=+this;if(e!==e){return"Invalid Date"}return ce.Call(_n,this)};ne(Date.prototype,"toString",kn)}var Ln={anchor:function anchor(e){return ce.CreateHTML(this,"a","name",e)},big:function big(){return ce.CreateHTML(this,"big","","")},blink:function blink(){return ce.CreateHTML(this,"blink","","")},bold:function bold(){return ce.CreateHTML(this,"b","","")},fixed:function fixed(){return ce.CreateHTML(this,"tt","","")},fontcolor:function fontcolor(e){return ce.CreateHTML(this,"font","color",e)},fontsize:function fontsize(e){return ce.CreateHTML(this,"font","size",e)},italics:function italics(){return ce.CreateHTML(this,"i","","")},link:function link(e){return ce.CreateHTML(this,"a","href",e)},small:function small(){return ce.CreateHTML(this,"small","","")},strike:function strike(){return ce.CreateHTML(this,"strike","","")},sub:function sub(){return ce.CreateHTML(this,"sub","","")},sup:function sub(){return ce.CreateHTML(this,"sup","","")}};l(Object.keys(Ln),function(e){var r=String.prototype[e];var n=false;if(ce.IsCallable(r)){var o=t(r,"",' " ');var i=P([],o.match(/"/g)).length;n=o!==o.toLowerCase()||i>2}else{n=true}if(n){ne(String.prototype,e,Ln[e])}});var Fn=function(){if(!oe){return false}var e=typeof JSON==="object"&&typeof JSON.stringify==="function"?JSON.stringify:null;if(!e){return false}if(typeof e($())!=="undefined"){return true}if(e([$()])!=="[null]"){return true}var t={a:$()};t[$()]=true;if(e(t)!=="{}"){return true}return false}();var Dn=a(function(){if(!oe){return true}return JSON.stringify(Object($()))==="{}"&&JSON.stringify([Object($())])==="[{}]"});if(Fn||!Dn){var zn=JSON.stringify;ne(JSON,"stringify",function stringify(e){if(typeof e==="symbol"){return}var n;if(arguments.length>1){n=arguments[1]}var o=[e];if(!r(n)){var i=ce.IsCallable(n)?n:null;var a=function(e,r){var n=i?t(i,this,e,r):r;if(typeof n!=="symbol"){if(re.symbol(n)){return Nt({})(n)}else{return n}}};o.push(a)}else{o.push(n)}if(arguments.length>2){o.push(arguments[2])}return zn.apply(this,o)})}return S});
/*! jQuery v3.7.1 | (c) OpenJS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(ie,e){"use strict";var oe=[],r=Object.getPrototypeOf,ae=oe.slice,g=oe.flat?function(e){return oe.flat.call(e)}:function(e){return oe.concat.apply([],e)},s=oe.push,se=oe.indexOf,n={},i=n.toString,ue=n.hasOwnProperty,o=ue.toString,a=o.call(Object),le={},v=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},y=function(e){return null!=e&&e===e.window},C=ie.document,u={type:!0,src:!0,nonce:!0,noModule:!0};function m(e,t,n){var r,i,o=(n=n||C).createElement("script");if(o.text=e,t)for(r in u)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function x(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[i.call(e)]||"object":typeof e}var t="3.7.1",l=/HTML$/i,ce=function(e,t){return new ce.fn.init(e,t)};function c(e){var t=!!e&&"length"in e&&e.length,n=x(e);return!v(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}function fe(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}ce.fn=ce.prototype={jquery:t,constructor:ce,length:0,toArray:function(){return ae.call(this)},get:function(e){return null==e?ae.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=ce.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return ce.each(this,e)},map:function(n){return this.pushStack(ce.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(ae.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(ce.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(ce.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:oe.sort,splice:oe.splice},ce.extend=ce.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||v(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(ce.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||ce.isPlainObject(n)?n:{},i=!1,a[t]=ce.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},ce.extend({expando:"jQuery"+(t+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==i.call(e))&&(!(t=r(e))||"function"==typeof(n=ue.call(t,"constructor")&&t.constructor)&&o.call(n)===a)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){m(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(c(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},text:function(e){var t,n="",r=0,i=e.nodeType;if(!i)while(t=e[r++])n+=ce.text(t);return 1===i||11===i?e.textContent:9===i?e.documentElement.textContent:3===i||4===i?e.nodeValue:n},makeArray:function(e,t){var n=t||[];return null!=e&&(c(Object(e))?ce.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:se.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!l.test(t||n&&n.nodeName||"HTML")},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(c(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:le}),"function"==typeof Symbol&&(ce.fn[Symbol.iterator]=oe[Symbol.iterator]),ce.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var pe=oe.pop,de=oe.sort,he=oe.splice,ge="[\\x20\\t\\r\\n\\f]",ve=new RegExp("^"+ge+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ge+"+$","g");ce.contains=function(e,t){var n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(e.contains?e.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))};var f=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function p(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}ce.escapeSelector=function(e){return(e+"").replace(f,p)};var ye=C,me=s;!function(){var e,b,w,o,a,T,r,C,d,i,k=me,S=ce.expando,E=0,n=0,s=W(),c=W(),u=W(),h=W(),l=function(e,t){return e===t&&(a=!0),0},f="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",t="(?:\\\\[\\da-fA-F]{1,6}"+ge+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",p="\\["+ge+"*("+t+")(?:"+ge+"*([*^$|!~]?=)"+ge+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+t+"))|)"+ge+"*\\]",g=":("+t+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+p+")*)|.*)\\)|)",v=new RegExp(ge+"+","g"),y=new RegExp("^"+ge+"*,"+ge+"*"),m=new RegExp("^"+ge+"*([>+~]|"+ge+")"+ge+"*"),x=new RegExp(ge+"|>"),j=new RegExp(g),A=new RegExp("^"+t+"$"),D={ID:new RegExp("^#("+t+")"),CLASS:new RegExp("^\\.("+t+")"),TAG:new RegExp("^("+t+"|[*])"),ATTR:new RegExp("^"+p),PSEUDO:new RegExp("^"+g),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ge+"*(even|odd|(([+-]|)(\\d*)n|)"+ge+"*(?:([+-]|)"+ge+"*(\\d+)|))"+ge+"*\\)|)","i"),bool:new RegExp("^(?:"+f+")$","i"),needsContext:new RegExp("^"+ge+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ge+"*((?:-\\d)?\\d*)"+ge+"*\\)|)(?=[^-]|$)","i")},N=/^(?:input|select|textarea|button)$/i,q=/^h\d$/i,L=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,H=/[+~]/,O=new RegExp("\\\\[\\da-fA-F]{1,6}"+ge+"?|\\\\([^\\r\\n\\f])","g"),P=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},M=function(){V()},R=J(function(e){return!0===e.disabled&&fe(e,"fieldset")},{dir:"parentNode",next:"legend"});try{k.apply(oe=ae.call(ye.childNodes),ye.childNodes),oe[ye.childNodes.length].nodeType}catch(e){k={apply:function(e,t){me.apply(e,ae.call(t))},call:function(e){me.apply(e,ae.call(arguments,1))}}}function I(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(V(e),e=e||T,C)){if(11!==p&&(u=L.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return k.call(n,a),n}else if(f&&(a=f.getElementById(i))&&I.contains(e,a)&&a.id===i)return k.call(n,a),n}else{if(u[2])return k.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&e.getElementsByClassName)return k.apply(n,e.getElementsByClassName(i)),n}if(!(h[t+" "]||d&&d.test(t))){if(c=t,f=e,1===p&&(x.test(t)||m.test(t))){(f=H.test(t)&&U(e.parentNode)||e)==e&&le.scope||((s=e.getAttribute("id"))?s=ce.escapeSelector(s):e.setAttribute("id",s=S)),o=(l=Y(t)).length;while(o--)l[o]=(s?"#"+s:":scope")+" "+Q(l[o]);c=l.join(",")}try{return k.apply(n,f.querySelectorAll(c)),n}catch(e){h(t,!0)}finally{s===S&&e.removeAttribute("id")}}}return re(t.replace(ve,"$1"),e,n,r)}function W(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function F(e){return e[S]=!0,e}function $(e){var t=T.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function B(t){return function(e){return fe(e,"input")&&e.type===t}}function _(t){return function(e){return(fe(e,"input")||fe(e,"button"))&&e.type===t}}function z(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&R(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function X(a){return F(function(o){return o=+o,F(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function U(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function V(e){var t,n=e?e.ownerDocument||e:ye;return n!=T&&9===n.nodeType&&n.documentElement&&(r=(T=n).documentElement,C=!ce.isXMLDoc(T),i=r.matches||r.webkitMatchesSelector||r.msMatchesSelector,r.msMatchesSelector&&ye!=T&&(t=T.defaultView)&&t.top!==t&&t.addEventListener("unload",M),le.getById=$(function(e){return r.appendChild(e).id=ce.expando,!T.getElementsByName||!T.getElementsByName(ce.expando).length}),le.disconnectedMatch=$(function(e){return i.call(e,"*")}),le.scope=$(function(){return T.querySelectorAll(":scope")}),le.cssHas=$(function(){try{return T.querySelector(":has(*,:jqfake)"),!1}catch(e){return!0}}),le.getById?(b.filter.ID=function(e){var t=e.replace(O,P);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&C){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(O,P);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&C){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},b.find.CLASS=function(e,t){if("undefined"!=typeof t.getElementsByClassName&&C)return t.getElementsByClassName(e)},d=[],$(function(e){var t;r.appendChild(e).innerHTML="<a id='"+S+"' href='' disabled='disabled'></a><select id='"+S+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+ge+"*(?:value|"+f+")"),e.querySelectorAll("[id~="+S+"-]").length||d.push("~="),e.querySelectorAll("a#"+S+"+*").length||d.push(".#.+[+~]"),e.querySelectorAll(":checked").length||d.push(":checked"),(t=T.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),r.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&d.push(":enabled",":disabled"),(t=T.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||d.push("\\["+ge+"*name"+ge+"*="+ge+"*(?:''|\"\")")}),le.cssHas||d.push(":has"),d=d.length&&new RegExp(d.join("|")),l=function(e,t){if(e===t)return a=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!le.sortDetached&&t.compareDocumentPosition(e)===n?e===T||e.ownerDocument==ye&&I.contains(ye,e)?-1:t===T||t.ownerDocument==ye&&I.contains(ye,t)?1:o?se.call(o,e)-se.call(o,t):0:4&n?-1:1)}),T}for(e in I.matches=function(e,t){return I(e,null,null,t)},I.matchesSelector=function(e,t){if(V(e),C&&!h[t+" "]&&(!d||!d.test(t)))try{var n=i.call(e,t);if(n||le.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){h(t,!0)}return 0<I(t,T,null,[e]).length},I.contains=function(e,t){return(e.ownerDocument||e)!=T&&V(e),ce.contains(e,t)},I.attr=function(e,t){(e.ownerDocument||e)!=T&&V(e);var n=b.attrHandle[t.toLowerCase()],r=n&&ue.call(b.attrHandle,t.toLowerCase())?n(e,t,!C):void 0;return void 0!==r?r:e.getAttribute(t)},I.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ce.uniqueSort=function(e){var t,n=[],r=0,i=0;if(a=!le.sortStable,o=!le.sortStable&&ae.call(e,0),de.call(e,l),a){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)he.call(e,n[r],1)}return o=null,e},ce.fn.uniqueSort=function(){return this.pushStack(ce.uniqueSort(ae.apply(this)))},(b=ce.expr={cacheLength:50,createPseudo:F,match:D,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(O,P),e[3]=(e[3]||e[4]||e[5]||"").replace(O,P),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||I.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&I.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return D.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&j.test(n)&&(t=Y(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(O,P).toLowerCase();return"*"===e?function(){return!0}:function(e){return fe(e,t)}},CLASS:function(e){var t=s[e+" "];return t||(t=new RegExp("(^|"+ge+")"+e+"("+ge+"|$)"))&&s(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=I.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(v," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(d,e,t,h,g){var v="nth"!==d.slice(0,3),y="last"!==d.slice(-4),m="of-type"===e;return 1===h&&0===g?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u=v!==y?"nextSibling":"previousSibling",l=e.parentNode,c=m&&e.nodeName.toLowerCase(),f=!n&&!m,p=!1;if(l){if(v){while(u){o=e;while(o=o[u])if(m?fe(o,c):1===o.nodeType)return!1;s=u="only"===d&&!s&&"nextSibling"}return!0}if(s=[y?l.firstChild:l.lastChild],y&&f){p=(a=(r=(i=l[S]||(l[S]={}))[d]||[])[0]===E&&r[1])&&r[2],o=a&&l.childNodes[a];while(o=++a&&o&&o[u]||(p=a=0)||s.pop())if(1===o.nodeType&&++p&&o===e){i[d]=[E,a,p];break}}else if(f&&(p=a=(r=(i=e[S]||(e[S]={}))[d]||[])[0]===E&&r[1]),!1===p)while(o=++a&&o&&o[u]||(p=a=0)||s.pop())if((m?fe(o,c):1===o.nodeType)&&++p&&(f&&((i=o[S]||(o[S]={}))[d]=[E,p]),o===e))break;return(p-=g)===h||p%h==0&&0<=p/h}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||I.error("unsupported pseudo: "+e);return a[S]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?F(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=se.call(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:F(function(e){var r=[],i=[],s=ne(e.replace(ve,"$1"));return s[S]?F(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:F(function(t){return function(e){return 0<I(t,e).length}}),contains:F(function(t){return t=t.replace(O,P),function(e){return-1<(e.textContent||ce.text(e)).indexOf(t)}}),lang:F(function(n){return A.test(n||"")||I.error("unsupported lang: "+n),n=n.replace(O,P).toLowerCase(),function(e){var t;do{if(t=C?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=ie.location&&ie.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===r},focus:function(e){return e===function(){try{return T.activeElement}catch(e){}}()&&T.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:z(!1),disabled:z(!0),checked:function(e){return fe(e,"input")&&!!e.checked||fe(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return q.test(e.nodeName)},input:function(e){return N.test(e.nodeName)},button:function(e){return fe(e,"input")&&"button"===e.type||fe(e,"button")},text:function(e){var t;return fe(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:X(function(){return[0]}),last:X(function(e,t){return[t-1]}),eq:X(function(e,t,n){return[n<0?n+t:n]}),even:X(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:X(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:X(function(e,t,n){var r;for(r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:X(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=B(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=_(e);function G(){}function Y(e,t){var n,r,i,o,a,s,u,l=c[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=y.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=m.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(ve," ")}),a=a.slice(n.length)),b.filter)!(r=D[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?I.error(e):c(e,s).slice(0)}function Q(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function J(a,e,t){var s=e.dir,u=e.next,l=u||s,c=t&&"parentNode"===l,f=n++;return e.first?function(e,t,n){while(e=e[s])if(1===e.nodeType||c)return a(e,t,n);return!1}:function(e,t,n){var r,i,o=[E,f];if(n){while(e=e[s])if((1===e.nodeType||c)&&a(e,t,n))return!0}else while(e=e[s])if(1===e.nodeType||c)if(i=e[S]||(e[S]={}),u&&fe(e,u))e=e[s]||e;else{if((r=i[l])&&r[0]===E&&r[1]===f)return o[2]=r[2];if((i[l]=o)[2]=a(e,t,n))return!0}return!1}}function K(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Z(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function ee(d,h,g,v,y,e){return v&&!v[S]&&(v=ee(v)),y&&!y[S]&&(y=ee(y,e)),F(function(e,t,n,r){var i,o,a,s,u=[],l=[],c=t.length,f=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)I(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),p=!d||!e&&h?f:Z(f,u,d,n,r);if(g?g(p,s=y||(e?d:c||v)?[]:t,n,r):s=p,v){i=Z(s,l),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(s[l[o]]=!(p[l[o]]=a))}if(e){if(y||d){if(y){i=[],o=s.length;while(o--)(a=s[o])&&i.push(p[o]=a);y(null,s=[],i,r)}o=s.length;while(o--)(a=s[o])&&-1<(i=y?se.call(e,a):u[o])&&(e[i]=!(t[i]=a))}}else s=Z(s===t?s.splice(c,s.length):s),y?y(null,t,s,r):k.apply(t,s)})}function te(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=J(function(e){return e===i},a,!0),l=J(function(e){return-1<se.call(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!=w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[J(K(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return ee(1<s&&K(c),1<s&&Q(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ve,"$1"),t,s<n&&te(e.slice(s,n)),n<r&&te(e=e.slice(n)),n<r&&Q(e))}c.push(t)}return K(c)}function ne(e,t){var n,v,y,m,x,r,i=[],o=[],a=u[e+" "];if(!a){t||(t=Y(e)),n=t.length;while(n--)(a=te(t[n]))[S]?i.push(a):o.push(a);(a=u(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=E+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==T||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==T||(V(o),n=!C);while(s=v[a++])if(s(o,t||T,n)){k.call(r,o);break}i&&(E=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=pe.call(r));f=Z(f)}k.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&ce.uniqueSort(r)}return i&&(E=h,w=p),c},m?F(r):r))).selector=e}return a}function re(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&Y(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&C&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(O,P),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=D.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(O,P),H.test(o[0].type)&&U(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&Q(o)))return k.apply(n,r),n;break}}}return(l||ne(e,c))(r,t,!C,n,!t||H.test(e)&&U(t.parentNode)||t),n}G.prototype=b.filters=b.pseudos,b.setFilters=new G,le.sortStable=S.split("").sort(l).join("")===S,V(),le.sortDetached=$(function(e){return 1&e.compareDocumentPosition(T.createElement("fieldset"))}),ce.find=I,ce.expr[":"]=ce.expr.pseudos,ce.unique=ce.uniqueSort,I.compile=ne,I.select=re,I.setDocument=V,I.tokenize=Y,I.escape=ce.escapeSelector,I.getText=ce.text,I.isXML=ce.isXMLDoc,I.selectors=ce.expr,I.support=ce.support,I.uniqueSort=ce.uniqueSort}();var d=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&ce(e).is(n))break;r.push(e)}return r},h=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},b=ce.expr.match.needsContext,w=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function T(e,n,r){return v(n)?ce.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?ce.grep(e,function(e){return e===n!==r}):"string"!=typeof n?ce.grep(e,function(e){return-1<se.call(n,e)!==r}):ce.filter(n,e,r)}ce.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?ce.find.matchesSelector(r,e)?[r]:[]:ce.find.matches(e,ce.grep(t,function(e){return 1===e.nodeType}))},ce.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(ce(e).filter(function(){for(t=0;t<r;t++)if(ce.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)ce.find(e,i[t],n);return 1<r?ce.uniqueSort(n):n},filter:function(e){return this.pushStack(T(this,e||[],!1))},not:function(e){return this.pushStack(T(this,e||[],!0))},is:function(e){return!!T(this,"string"==typeof e&&b.test(e)?ce(e):e||[],!1).length}});var k,S=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(ce.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||k,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:S.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof ce?t[0]:t,ce.merge(this,ce.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:C,!0)),w.test(r[1])&&ce.isPlainObject(t))for(r in t)v(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=C.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==n.ready?n.ready(e):e(ce):ce.makeArray(e,this)}).prototype=ce.fn,k=ce(C);var E=/^(?:parents|prev(?:Until|All))/,j={children:!0,contents:!0,next:!0,prev:!0};function A(e,t){while((e=e[t])&&1!==e.nodeType);return e}ce.fn.extend({has:function(e){var t=ce(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(ce.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&ce(e);if(!b.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&ce.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?ce.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?se.call(ce(e),this[0]):se.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ce.uniqueSort(ce.merge(this.get(),ce(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ce.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return d(e,"parentNode")},parentsUntil:function(e,t,n){return d(e,"parentNode",n)},next:function(e){return A(e,"nextSibling")},prev:function(e){return A(e,"previousSibling")},nextAll:function(e){return d(e,"nextSibling")},prevAll:function(e){return d(e,"previousSibling")},nextUntil:function(e,t,n){return d(e,"nextSibling",n)},prevUntil:function(e,t,n){return d(e,"previousSibling",n)},siblings:function(e){return h((e.parentNode||{}).firstChild,e)},children:function(e){return h(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(fe(e,"template")&&(e=e.content||e),ce.merge([],e.childNodes))}},function(r,i){ce.fn[r]=function(e,t){var n=ce.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=ce.filter(t,n)),1<this.length&&(j[r]||ce.uniqueSort(n),E.test(r)&&n.reverse()),this.pushStack(n)}});var D=/[^\x20\t\r\n\f]+/g;function N(e){return e}function q(e){throw e}function L(e,t,n,r){var i;try{e&&v(i=e.promise)?i.call(e).done(t).fail(n):e&&v(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}ce.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},ce.each(e.match(D)||[],function(e,t){n[t]=!0}),n):ce.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){ce.each(e,function(e,t){v(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==x(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return ce.each(arguments,function(e,t){var n;while(-1<(n=ce.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<ce.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},ce.extend({Deferred:function(e){var o=[["notify","progress",ce.Callbacks("memory"),ce.Callbacks("memory"),2],["resolve","done",ce.Callbacks("once memory"),ce.Callbacks("once memory"),0,"resolved"],["reject","fail",ce.Callbacks("once memory"),ce.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return ce.Deferred(function(r){ce.each(o,function(e,t){var n=v(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&v(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,v(t)?s?t.call(e,l(u,o,N,s),l(u,o,q,s)):(u++,t.call(e,l(u,o,N,s),l(u,o,q,s),l(u,o,N,o.notifyWith))):(a!==N&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){ce.Deferred.exceptionHook&&ce.Deferred.exceptionHook(e,t.error),u<=i+1&&(a!==q&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(ce.Deferred.getErrorHook?t.error=ce.Deferred.getErrorHook():ce.Deferred.getStackHook&&(t.error=ce.Deferred.getStackHook()),ie.setTimeout(t))}}return ce.Deferred(function(e){o[0][3].add(l(0,e,v(r)?r:N,e.notifyWith)),o[1][3].add(l(0,e,v(t)?t:N)),o[2][3].add(l(0,e,v(n)?n:q))}).promise()},promise:function(e){return null!=e?ce.extend(e,a):a}},s={};return ce.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=ae.call(arguments),o=ce.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?ae.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(L(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||v(i[t]&&i[t].then)))return o.then();while(t--)L(i[t],a(t),o.reject);return o.promise()}});var H=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ce.Deferred.exceptionHook=function(e,t){ie.console&&ie.console.warn&&e&&H.test(e.name)&&ie.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},ce.readyException=function(e){ie.setTimeout(function(){throw e})};var O=ce.Deferred();function P(){C.removeEventListener("DOMContentLoaded",P),ie.removeEventListener("load",P),ce.ready()}ce.fn.ready=function(e){return O.then(e)["catch"](function(e){ce.readyException(e)}),this},ce.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--ce.readyWait:ce.isReady)||(ce.isReady=!0)!==e&&0<--ce.readyWait||O.resolveWith(C,[ce])}}),ce.ready.then=O.then,"complete"===C.readyState||"loading"!==C.readyState&&!C.documentElement.doScroll?ie.setTimeout(ce.ready):(C.addEventListener("DOMContentLoaded",P),ie.addEventListener("load",P));var M=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===x(n))for(s in i=!0,n)M(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,v(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(ce(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},R=/^-ms-/,I=/-([a-z])/g;function W(e,t){return t.toUpperCase()}function F(e){return e.replace(R,"ms-").replace(I,W)}var $=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function B(){this.expando=ce.expando+B.uid++}B.uid=1,B.prototype={cache:function(e){var t=e[this.expando];return t||(t={},$(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[F(t)]=n;else for(r in t)i[F(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][F(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(F):(t=F(t))in r?[t]:t.match(D)||[]).length;while(n--)delete r[t[n]]}(void 0===t||ce.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ce.isEmptyObject(t)}};var _=new B,z=new B,X=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,U=/[A-Z]/g;function V(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(U,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:X.test(i)?JSON.parse(i):i)}catch(e){}z.set(e,t,n)}else n=void 0;return n}ce.extend({hasData:function(e){return z.hasData(e)||_.hasData(e)},data:function(e,t,n){return z.access(e,t,n)},removeData:function(e,t){z.remove(e,t)},_data:function(e,t,n){return _.access(e,t,n)},_removeData:function(e,t){_.remove(e,t)}}),ce.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=z.get(o),1===o.nodeType&&!_.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=F(r.slice(5)),V(o,r,i[r]));_.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){z.set(this,n)}):M(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=z.get(o,n))?t:void 0!==(t=V(o,n))?t:void 0;this.each(function(){z.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){z.remove(this,e)})}}),ce.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=_.get(e,t),n&&(!r||Array.isArray(n)?r=_.access(e,t,ce.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=ce.queue(e,t),r=n.length,i=n.shift(),o=ce._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){ce.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return _.get(e,n)||_.access(e,n,{empty:ce.Callbacks("once memory").add(function(){_.remove(e,[t+"queue",n])})})}}),ce.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?ce.queue(this[0],t):void 0===n?this:this.each(function(){var e=ce.queue(this,t,n);ce._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&ce.dequeue(this,t)})},dequeue:function(e){return this.each(function(){ce.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=ce.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=_.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var G=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Y=new RegExp("^(?:([+-])=|)("+G+")([a-z%]*)$","i"),Q=["Top","Right","Bottom","Left"],J=C.documentElement,K=function(e){return ce.contains(e.ownerDocument,e)},Z={composed:!0};J.getRootNode&&(K=function(e){return ce.contains(e.ownerDocument,e)||e.getRootNode(Z)===e.ownerDocument});var ee=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&K(e)&&"none"===ce.css(e,"display")};function te(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return ce.css(e,t,"")},u=s(),l=n&&n[3]||(ce.cssNumber[t]?"":"px"),c=e.nodeType&&(ce.cssNumber[t]||"px"!==l&&+u)&&Y.exec(ce.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)ce.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,ce.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ne={};function re(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=_.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&ee(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ne[s])||(o=a.body.appendChild(a.createElement(s)),u=ce.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ne[s]=u)))):"none"!==n&&(l[c]="none",_.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}ce.fn.extend({show:function(){return re(this,!0)},hide:function(){return re(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ee(this)?ce(this).show():ce(this).hide()})}});var xe,be,we=/^(?:checkbox|radio)$/i,Te=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ce=/^$|^module$|\/(?:java|ecma)script/i;xe=C.createDocumentFragment().appendChild(C.createElement("div")),(be=C.createElement("input")).setAttribute("type","radio"),be.setAttribute("checked","checked"),be.setAttribute("name","t"),xe.appendChild(be),le.checkClone=xe.cloneNode(!0).cloneNode(!0).lastChild.checked,xe.innerHTML="<textarea>x</textarea>",le.noCloneChecked=!!xe.cloneNode(!0).lastChild.defaultValue,xe.innerHTML="<option></option>",le.option=!!xe.lastChild;var ke={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Se(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&fe(e,t)?ce.merge([e],n):n}function Ee(e,t){for(var n=0,r=e.length;n<r;n++)_.set(e[n],"globalEval",!t||_.get(t[n],"globalEval"))}ke.tbody=ke.tfoot=ke.colgroup=ke.caption=ke.thead,ke.th=ke.td,le.option||(ke.optgroup=ke.option=[1,"<select multiple='multiple'>","</select>"]);var je=/<|&#?\w+;/;function Ae(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===x(o))ce.merge(p,o.nodeType?[o]:o);else if(je.test(o)){a=a||f.appendChild(t.createElement("div")),s=(Te.exec(o)||["",""])[1].toLowerCase(),u=ke[s]||ke._default,a.innerHTML=u[1]+ce.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;ce.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<ce.inArray(o,r))i&&i.push(o);else if(l=K(o),a=Se(f.appendChild(o),"script"),l&&Ee(a),n){c=0;while(o=a[c++])Ce.test(o.type||"")&&n.push(o)}return f}var De=/^([^.]*)(?:\.(.+)|)/;function Ne(){return!0}function qe(){return!1}function Le(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Le(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=qe;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return ce().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=ce.guid++)),e.each(function(){ce.event.add(this,t,i,r,n)})}function He(e,r,t){t?(_.set(e,r,!1),ce.event.add(e,r,{namespace:!1,handler:function(e){var t,n=_.get(this,r);if(1&e.isTrigger&&this[r]){if(n)(ce.event.special[r]||{}).delegateType&&e.stopPropagation();else if(n=ae.call(arguments),_.set(this,r,n),this[r](),t=_.get(this,r),_.set(this,r,!1),n!==t)return e.stopImmediatePropagation(),e.preventDefault(),t}else n&&(_.set(this,r,ce.event.trigger(n[0],n.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=Ne)}})):void 0===_.get(e,r)&&ce.event.add(e,r,Ne)}ce.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=_.get(t);if($(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&ce.find.matchesSelector(J,i),n.guid||(n.guid=ce.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof ce&&ce.event.triggered!==e.type?ce.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(D)||[""]).length;while(l--)d=g=(s=De.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=ce.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=ce.event.special[d]||{},c=ce.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&ce.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),ce.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=_.hasData(e)&&_.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(D)||[""]).length;while(l--)if(d=g=(s=De.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=ce.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||ce.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)ce.event.remove(e,d+t[l],n,r,!0);ce.isEmptyObject(u)&&_.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=ce.event.fix(e),l=(_.get(this,"events")||Object.create(null))[u.type]||[],c=ce.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=ce.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((ce.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<ce(i,this).index(l):ce.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(ce.Event.prototype,t,{enumerable:!0,configurable:!0,get:v(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[ce.expando]?e:new ce.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return we.test(t.type)&&t.click&&fe(t,"input")&&He(t,"click",!0),!1},trigger:function(e){var t=this||e;return we.test(t.type)&&t.click&&fe(t,"input")&&He(t,"click"),!0},_default:function(e){var t=e.target;return we.test(t.type)&&t.click&&fe(t,"input")&&_.get(t,"click")||fe(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ce.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},ce.Event=function(e,t){if(!(this instanceof ce.Event))return new ce.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ne:qe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&ce.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[ce.expando]=!0},ce.Event.prototype={constructor:ce.Event,isDefaultPrevented:qe,isPropagationStopped:qe,isImmediatePropagationStopped:qe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ne,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ne,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ne,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ce.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},ce.event.addProp),ce.each({focus:"focusin",blur:"focusout"},function(r,i){function o(e){if(C.documentMode){var t=_.get(this,"handle"),n=ce.event.fix(e);n.type="focusin"===e.type?"focus":"blur",n.isSimulated=!0,t(e),n.target===n.currentTarget&&t(n)}else ce.event.simulate(i,e.target,ce.event.fix(e))}ce.event.special[r]={setup:function(){var e;if(He(this,r,!0),!C.documentMode)return!1;(e=_.get(this,i))||this.addEventListener(i,o),_.set(this,i,(e||0)+1)},trigger:function(){return He(this,r),!0},teardown:function(){var e;if(!C.documentMode)return!1;(e=_.get(this,i)-1)?_.set(this,i,e):(this.removeEventListener(i,o),_.remove(this,i))},_default:function(e){return _.get(e.target,r)},delegateType:i},ce.event.special[i]={setup:function(){var e=this.ownerDocument||this.document||this,t=C.documentMode?this:e,n=_.get(t,i);n||(C.documentMode?this.addEventListener(i,o):e.addEventListener(r,o,!0)),_.set(t,i,(n||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=C.documentMode?this:e,n=_.get(t,i)-1;n?_.set(t,i,n):(C.documentMode?this.removeEventListener(i,o):e.removeEventListener(r,o,!0),_.remove(t,i))}}}),ce.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){ce.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||ce.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),ce.fn.extend({on:function(e,t,n,r){return Le(this,e,t,n,r)},one:function(e,t,n,r){return Le(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ce(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=qe),this.each(function(){ce.event.remove(this,e,n,t)})}});var Oe=/<script|<style|<link/i,Pe=/checked\s*(?:[^=]|=\s*.checked.)/i,Me=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Re(e,t){return fe(e,"table")&&fe(11!==t.nodeType?t:t.firstChild,"tr")&&ce(e).children("tbody")[0]||e}function Ie(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function We(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Fe(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(_.hasData(e)&&(s=_.get(e).events))for(i in _.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)ce.event.add(t,i,s[i][n]);z.hasData(e)&&(o=z.access(e),a=ce.extend({},o),z.set(t,a))}}function $e(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=v(d);if(h||1<f&&"string"==typeof d&&!le.checkClone&&Pe.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),$e(t,r,i,o)});if(f&&(t=(e=Ae(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=ce.map(Se(e,"script"),Ie)).length;c<f;c++)u=e,c!==p&&(u=ce.clone(u,!0,!0),s&&ce.merge(a,Se(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,ce.map(a,We),c=0;c<s;c++)u=a[c],Ce.test(u.type||"")&&!_.access(u,"globalEval")&&ce.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?ce._evalUrl&&!u.noModule&&ce._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):m(u.textContent.replace(Me,""),u,l))}return n}function Be(e,t,n){for(var r,i=t?ce.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||ce.cleanData(Se(r)),r.parentNode&&(n&&K(r)&&Ee(Se(r,"script")),r.parentNode.removeChild(r));return e}ce.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=K(e);if(!(le.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ce.isXMLDoc(e)))for(a=Se(c),r=0,i=(o=Se(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&we.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||Se(e),a=a||Se(c),r=0,i=o.length;r<i;r++)Fe(o[r],a[r]);else Fe(e,c);return 0<(a=Se(c,"script")).length&&Ee(a,!f&&Se(e,"script")),c},cleanData:function(e){for(var t,n,r,i=ce.event.special,o=0;void 0!==(n=e[o]);o++)if($(n)){if(t=n[_.expando]){if(t.events)for(r in t.events)i[r]?ce.event.remove(n,r):ce.removeEvent(n,r,t.handle);n[_.expando]=void 0}n[z.expando]&&(n[z.expando]=void 0)}}}),ce.fn.extend({detach:function(e){return Be(this,e,!0)},remove:function(e){return Be(this,e)},text:function(e){return M(this,function(e){return void 0===e?ce.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return $e(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Re(this,e).appendChild(e)})},prepend:function(){return $e(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Re(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return $e(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return $e(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ce.cleanData(Se(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ce.clone(this,e,t)})},html:function(e){return M(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Oe.test(e)&&!ke[(Te.exec(e)||["",""])[1].toLowerCase()]){e=ce.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(ce.cleanData(Se(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return $e(this,arguments,function(e){var t=this.parentNode;ce.inArray(this,n)<0&&(ce.cleanData(Se(this)),t&&t.replaceChild(e,this))},n)}}),ce.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){ce.fn[e]=function(e){for(var t,n=[],r=ce(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),ce(r[o])[a](t),s.apply(n,t.get());return this.pushStack(n)}});var _e=new RegExp("^("+G+")(?!px)[a-z%]+$","i"),ze=/^--/,Xe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=ie),t.getComputedStyle(e)},Ue=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Ve=new RegExp(Q.join("|"),"i");function Ge(e,t,n){var r,i,o,a,s=ze.test(t),u=e.style;return(n=n||Xe(e))&&(a=n.getPropertyValue(t)||n[t],s&&a&&(a=a.replace(ve,"$1")||void 0),""!==a||K(e)||(a=ce.style(e,t)),!le.pixelBoxStyles()&&_e.test(a)&&Ve.test(t)&&(r=u.width,i=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=a,a=n.width,u.width=r,u.minWidth=i,u.maxWidth=o)),void 0!==a?a+"":a}function Ye(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",J.appendChild(u).appendChild(l);var e=ie.getComputedStyle(l);n="1%"!==e.top,s=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),r=36===t(e.width),l.style.position="absolute",i=12===t(l.offsetWidth/3),J.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=C.createElement("div"),l=C.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",le.clearCloneStyle="content-box"===l.style.backgroundClip,ce.extend(le,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=C.createElement("table"),t=C.createElement("tr"),n=C.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="box-sizing:content-box;border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",J.appendChild(e).appendChild(t).appendChild(n),r=ie.getComputedStyle(t),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,J.removeChild(e)),a}}))}();var Qe=["Webkit","Moz","ms"],Je=C.createElement("div").style,Ke={};function Ze(e){var t=ce.cssProps[e]||Ke[e];return t||(e in Je?e:Ke[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Qe.length;while(n--)if((e=Qe[n]+t)in Je)return e}(e)||e)}var et=/^(none|table(?!-c[ea]).+)/,tt={position:"absolute",visibility:"hidden",display:"block"},nt={letterSpacing:"0",fontWeight:"400"};function rt(e,t,n){var r=Y.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function it(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0,l=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=ce.css(e,n+Q[a],!0,i)),r?("content"===n&&(u-=ce.css(e,"padding"+Q[a],!0,i)),"margin"!==n&&(u-=ce.css(e,"border"+Q[a]+"Width",!0,i))):(u+=ce.css(e,"padding"+Q[a],!0,i),"padding"!==n?u+=ce.css(e,"border"+Q[a]+"Width",!0,i):s+=ce.css(e,"border"+Q[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u+l}function ot(e,t,n){var r=Xe(e),i=(!le.boxSizingReliable()||n)&&"border-box"===ce.css(e,"boxSizing",!1,r),o=i,a=Ge(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(_e.test(a)){if(!n)return a;a="auto"}return(!le.boxSizingReliable()&&i||!le.reliableTrDimensions()&&fe(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===ce.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===ce.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+it(e,t,n||(i?"border":"content"),o,r,a)+"px"}function at(e,t,n,r,i){return new at.prototype.init(e,t,n,r,i)}ce.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ge(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=F(t),u=ze.test(t),l=e.style;if(u||(t=Ze(s)),a=ce.cssHooks[t]||ce.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=Y.exec(n))&&i[1]&&(n=te(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(ce.cssNumber[s]?"":"px")),le.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=F(t);return ze.test(t)||(t=Ze(s)),(a=ce.cssHooks[t]||ce.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Ge(e,t,r)),"normal"===i&&t in nt&&(i=nt[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),ce.each(["height","width"],function(e,u){ce.cssHooks[u]={get:function(e,t,n){if(t)return!et.test(ce.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ot(e,u,n):Ue(e,tt,function(){return ot(e,u,n)})},set:function(e,t,n){var r,i=Xe(e),o=!le.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===ce.css(e,"boxSizing",!1,i),s=n?it(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-it(e,u,"border",!1,i)-.5)),s&&(r=Y.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=ce.css(e,u)),rt(0,t,s)}}}),ce.cssHooks.marginLeft=Ye(le.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ge(e,"marginLeft"))||e.getBoundingClientRect().left-Ue(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),ce.each({margin:"",padding:"",border:"Width"},function(i,o){ce.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+Q[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(ce.cssHooks[i+o].set=rt)}),ce.fn.extend({css:function(e,t){return M(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Xe(e),i=t.length;a<i;a++)o[t[a]]=ce.css(e,t[a],!1,r);return o}return void 0!==n?ce.style(e,t,n):ce.css(e,t)},e,t,1<arguments.length)}}),((ce.Tween=at).prototype={constructor:at,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||ce.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(ce.cssNumber[n]?"":"px")},cur:function(){var e=at.propHooks[this.prop];return e&&e.get?e.get(this):at.propHooks._default.get(this)},run:function(e){var t,n=at.propHooks[this.prop];return this.options.duration?this.pos=t=ce.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):at.propHooks._default.set(this),this}}).init.prototype=at.prototype,(at.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ce.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){ce.fx.step[e.prop]?ce.fx.step[e.prop](e):1!==e.elem.nodeType||!ce.cssHooks[e.prop]&&null==e.elem.style[Ze(e.prop)]?e.elem[e.prop]=e.now:ce.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=at.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ce.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ce.fx=at.prototype.init,ce.fx.step={};var st,ut,lt,ct,ft=/^(?:toggle|show|hide)$/,pt=/queueHooks$/;function dt(){ut&&(!1===C.hidden&&ie.requestAnimationFrame?ie.requestAnimationFrame(dt):ie.setTimeout(dt,ce.fx.interval),ce.fx.tick())}function ht(){return ie.setTimeout(function(){st=void 0}),st=Date.now()}function gt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=Q[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function vt(e,t,n){for(var r,i=(yt.tweeners[t]||[]).concat(yt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function yt(o,e,t){var n,a,r=0,i=yt.prefilters.length,s=ce.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=st||ht(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:ce.extend({},e),opts:ce.extend(!0,{specialEasing:{},easing:ce.easing._default},t),originalProperties:e,originalOptions:t,startTime:st||ht(),duration:t.duration,tweens:[],createTween:function(e,t){var n=ce.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=F(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=ce.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=yt.prefilters[r].call(l,o,c,l.opts))return v(n.stop)&&(ce._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return ce.map(c,vt,l),v(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),ce.fx.timer(ce.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}ce.Animation=ce.extend(yt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return te(n.elem,e,Y.exec(t),n),n}]},tweener:function(e,t){v(e)?(t=e,e=["*"]):e=e.match(D);for(var n,r=0,i=e.length;r<i;r++)n=e[r],yt.tweeners[n]=yt.tweeners[n]||[],yt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ee(e),v=_.get(e,"fxshow");for(r in n.queue||(null==(a=ce._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,ce.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],ft.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||ce.style(e,r)}if((u=!ce.isEmptyObject(t))||!ce.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=_.get(e,"display")),"none"===(c=ce.css(e,"display"))&&(l?c=l:(re([e],!0),l=e.style.display||l,c=ce.css(e,"display"),re([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===ce.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=_.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&re([e],!0),p.done(function(){for(r in g||re([e]),_.remove(e,"fxshow"),d)ce.style(e,r,d[r])})),u=vt(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?yt.prefilters.unshift(e):yt.prefilters.push(e)}}),ce.speed=function(e,t,n){var r=e&&"object"==typeof e?ce.extend({},e):{complete:n||!n&&t||v(e)&&e,duration:e,easing:n&&t||t&&!v(t)&&t};return ce.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in ce.fx.speeds?r.duration=ce.fx.speeds[r.duration]:r.duration=ce.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){v(r.old)&&r.old.call(this),r.queue&&ce.dequeue(this,r.queue)},r},ce.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ee).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=ce.isEmptyObject(t),o=ce.speed(e,n,r),a=function(){var e=yt(this,ce.extend({},t),o);(i||_.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=ce.timers,r=_.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&pt.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||ce.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=_.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=ce.timers,o=n?n.length:0;for(t.finish=!0,ce.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),ce.each(["toggle","show","hide"],function(e,r){var i=ce.fn[r];ce.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(gt(r,!0),e,t,n)}}),ce.each({slideDown:gt("show"),slideUp:gt("hide"),slideToggle:gt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){ce.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),ce.timers=[],ce.fx.tick=function(){var e,t=0,n=ce.timers;for(st=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||ce.fx.stop(),st=void 0},ce.fx.timer=function(e){ce.timers.push(e),ce.fx.start()},ce.fx.interval=13,ce.fx.start=function(){ut||(ut=!0,dt())},ce.fx.stop=function(){ut=null},ce.fx.speeds={slow:600,fast:200,_default:400},ce.fn.delay=function(r,e){return r=ce.fx&&ce.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=ie.setTimeout(e,r);t.stop=function(){ie.clearTimeout(n)}})},lt=C.createElement("input"),ct=C.createElement("select").appendChild(C.createElement("option")),lt.type="checkbox",le.checkOn=""!==lt.value,le.optSelected=ct.selected,(lt=C.createElement("input")).value="t",lt.type="radio",le.radioValue="t"===lt.value;var mt,xt=ce.expr.attrHandle;ce.fn.extend({attr:function(e,t){return M(this,ce.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){ce.removeAttr(this,e)})}}),ce.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?ce.prop(e,t,n):(1===o&&ce.isXMLDoc(e)||(i=ce.attrHooks[t.toLowerCase()]||(ce.expr.match.bool.test(t)?mt:void 0)),void 0!==n?null===n?void ce.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=ce.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!le.radioValue&&"radio"===t&&fe(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(D);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),mt={set:function(e,t,n){return!1===t?ce.removeAttr(e,n):e.setAttribute(n,n),n}},ce.each(ce.expr.match.bool.source.match(/\w+/g),function(e,t){var a=xt[t]||ce.find.attr;xt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=xt[o],xt[o]=r,r=null!=a(e,t,n)?o:null,xt[o]=i),r}});var bt=/^(?:input|select|textarea|button)$/i,wt=/^(?:a|area)$/i;function Tt(e){return(e.match(D)||[]).join(" ")}function Ct(e){return e.getAttribute&&e.getAttribute("class")||""}function kt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(D)||[]}ce.fn.extend({prop:function(e,t){return M(this,ce.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[ce.propFix[e]||e]})}}),ce.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&ce.isXMLDoc(e)||(t=ce.propFix[t]||t,i=ce.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=ce.find.attr(e,"tabindex");return t?parseInt(t,10):bt.test(e.nodeName)||wt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),le.optSelected||(ce.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ce.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ce.propFix[this.toLowerCase()]=this}),ce.fn.extend({addClass:function(t){var e,n,r,i,o,a;return v(t)?this.each(function(e){ce(this).addClass(t.call(this,e,Ct(this)))}):(e=kt(t)).length?this.each(function(){if(r=Ct(this),n=1===this.nodeType&&" "+Tt(r)+" "){for(o=0;o<e.length;o++)i=e[o],n.indexOf(" "+i+" ")<0&&(n+=i+" ");a=Tt(n),r!==a&&this.setAttribute("class",a)}}):this},removeClass:function(t){var e,n,r,i,o,a;return v(t)?this.each(function(e){ce(this).removeClass(t.call(this,e,Ct(this)))}):arguments.length?(e=kt(t)).length?this.each(function(){if(r=Ct(this),n=1===this.nodeType&&" "+Tt(r)+" "){for(o=0;o<e.length;o++){i=e[o];while(-1<n.indexOf(" "+i+" "))n=n.replace(" "+i+" "," ")}a=Tt(n),r!==a&&this.setAttribute("class",a)}}):this:this.attr("class","")},toggleClass:function(t,n){var e,r,i,o,a=typeof t,s="string"===a||Array.isArray(t);return v(t)?this.each(function(e){ce(this).toggleClass(t.call(this,e,Ct(this),n),n)}):"boolean"==typeof n&&s?n?this.addClass(t):this.removeClass(t):(e=kt(t),this.each(function(){if(s)for(o=ce(this),i=0;i<e.length;i++)r=e[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==t&&"boolean"!==a||((r=Ct(this))&&_.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===t?"":_.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+Tt(Ct(n))+" ").indexOf(t))return!0;return!1}});var St=/\r/g;ce.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=v(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,ce(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=ce.map(t,function(e){return null==e?"":e+""})),(r=ce.valHooks[this.type]||ce.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=ce.valHooks[t.type]||ce.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(St,""):null==e?"":e:void 0}}),ce.extend({valHooks:{option:{get:function(e){var t=ce.find.attr(e,"value");return null!=t?t:Tt(ce.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!fe(n.parentNode,"optgroup"))){if(t=ce(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=ce.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<ce.inArray(ce.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),ce.each(["radio","checkbox"],function(){ce.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<ce.inArray(ce(e).val(),t)}},le.checkOn||(ce.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Et=ie.location,jt={guid:Date.now()},At=/\?/;ce.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new ie.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||ce.error("Invalid XML: "+(n?ce.map(n.childNodes,function(e){return e.textContent}).join("\n"):e)),t};var Dt=/^(?:focusinfocus|focusoutblur)$/,Nt=function(e){e.stopPropagation()};ce.extend(ce.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||C],d=ue.call(e,"type")?e.type:e,h=ue.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||C,3!==n.nodeType&&8!==n.nodeType&&!Dt.test(d+ce.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[ce.expando]?e:new ce.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:ce.makeArray(t,[e]),c=ce.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!y(n)){for(s=c.delegateType||d,Dt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||C)&&p.push(a.defaultView||a.parentWindow||ie)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(_.get(o,"events")||Object.create(null))[e.type]&&_.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&$(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!$(n)||u&&v(n[d])&&!y(n)&&((a=n[u])&&(n[u]=null),ce.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,Nt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,Nt),ce.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=ce.extend(new ce.Event,n,{type:e,isSimulated:!0});ce.event.trigger(r,null,t)}}),ce.fn.extend({trigger:function(e,t){return this.each(function(){ce.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return ce.event.trigger(e,t,n,!0)}});var qt=/\[\]$/,Lt=/\r?\n/g,Ht=/^(?:submit|button|image|reset|file)$/i,Ot=/^(?:input|select|textarea|keygen)/i;function Pt(n,e,r,i){var t;if(Array.isArray(e))ce.each(e,function(e,t){r||qt.test(n)?i(n,t):Pt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==x(e))i(n,e);else for(t in e)Pt(n+"["+t+"]",e[t],r,i)}ce.param=function(e,t){var n,r=[],i=function(e,t){var n=v(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!ce.isPlainObject(e))ce.each(e,function(){i(this.name,this.value)});else for(n in e)Pt(n,e[n],t,i);return r.join("&")},ce.fn.extend({serialize:function(){return ce.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ce.prop(this,"elements");return e?ce.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ce(this).is(":disabled")&&Ot.test(this.nodeName)&&!Ht.test(e)&&(this.checked||!we.test(e))}).map(function(e,t){var n=ce(this).val();return null==n?null:Array.isArray(n)?ce.map(n,function(e){return{name:t.name,value:e.replace(Lt,"\r\n")}}):{name:t.name,value:n.replace(Lt,"\r\n")}}).get()}});var Mt=/%20/g,Rt=/#.*$/,It=/([?&])_=[^&]*/,Wt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ft=/^(?:GET|HEAD)$/,$t=/^\/\//,Bt={},_t={},zt="*/".concat("*"),Xt=C.createElement("a");function Ut(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(D)||[];if(v(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Vt(t,i,o,a){var s={},u=t===_t;function l(e){var r;return s[e]=!0,ce.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function Gt(e,t){var n,r,i=ce.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&ce.extend(!0,e,r),e}Xt.href=Et.href,ce.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ce.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Gt(Gt(e,ce.ajaxSettings),t):Gt(ce.ajaxSettings,e)},ajaxPrefilter:Ut(Bt),ajaxTransport:Ut(_t),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=ce.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?ce(y):ce.event,x=ce.Deferred(),b=ce.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Wt.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Et.href)+"").replace($t,Et.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(D)||[""],null==v.crossDomain){r=C.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Xt.protocol+"//"+Xt.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=ce.param(v.data,v.traditional)),Vt(Bt,v,t,T),h)return T;for(i in(g=ce.event&&v.global)&&0==ce.active++&&ce.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Ft.test(v.type),f=v.url.replace(Rt,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Mt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(At.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(It,"$1"),o=(At.test(f)?"&":"?")+"_="+jt.guid+++o),v.url=f+o),v.ifModified&&(ce.lastModified[f]&&T.setRequestHeader("If-Modified-Since",ce.lastModified[f]),ce.etag[f]&&T.setRequestHeader("If-None-Match",ce.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+zt+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Vt(_t,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=ie.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&ie.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<ce.inArray("script",v.dataTypes)&&ce.inArray("json",v.dataTypes)<0&&(v.converters["text script"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(ce.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(ce.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--ce.active||ce.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return ce.get(e,t,n,"json")},getScript:function(e,t){return ce.get(e,void 0,t,"script")}}),ce.each(["get","post"],function(e,i){ce[i]=function(e,t,n,r){return v(t)&&(r=r||n,n=t,t=void 0),ce.ajax(ce.extend({url:e,type:i,dataType:r,data:t,success:n},ce.isPlainObject(e)&&e))}}),ce.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),ce._evalUrl=function(e,t,n){return ce.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){ce.globalEval(e,t,n)}})},ce.fn.extend({wrapAll:function(e){var t;return this[0]&&(v(e)&&(e=e.call(this[0])),t=ce(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return v(n)?this.each(function(e){ce(this).wrapInner(n.call(this,e))}):this.each(function(){var e=ce(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=v(t);return this.each(function(e){ce(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){ce(this).replaceWith(this.childNodes)}),this}}),ce.expr.pseudos.hidden=function(e){return!ce.expr.pseudos.visible(e)},ce.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},ce.ajaxSettings.xhr=function(){try{return new ie.XMLHttpRequest}catch(e){}};var Yt={0:200,1223:204},Qt=ce.ajaxSettings.xhr();le.cors=!!Qt&&"withCredentials"in Qt,le.ajax=Qt=!!Qt,ce.ajaxTransport(function(i){var o,a;if(le.cors||Qt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Yt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&ie.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),ce.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),ce.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ce.globalEval(e),e}}}),ce.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ce.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=ce("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),C.head.appendChild(r[0])},abort:function(){i&&i()}}});var Jt,Kt=[],Zt=/(=)\?(?=&|$)|\?\?/;ce.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Kt.pop()||ce.expando+"_"+jt.guid++;return this[e]=!0,e}}),ce.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Zt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Zt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Zt,"$1"+r):!1!==e.jsonp&&(e.url+=(At.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||ce.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=ie[r],ie[r]=function(){o=arguments},n.always(function(){void 0===i?ce(ie).removeProp(r):ie[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Kt.push(r)),o&&v(i)&&i(o[0]),o=i=void 0}),"script"}),le.createHTMLDocument=((Jt=C.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Jt.childNodes.length),ce.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(le.createHTMLDocument?((r=(t=C.implementation.createHTMLDocument("")).createElement("base")).href=C.location.href,t.head.appendChild(r)):t=C),o=!n&&[],(i=w.exec(e))?[t.createElement(i[1])]:(i=Ae([e],t,o),o&&o.length&&ce(o).remove(),ce.merge([],i.childNodes)));var r,i,o},ce.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=Tt(e.slice(s)),e=e.slice(0,s)),v(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&ce.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?ce("<div>").append(ce.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},ce.expr.pseudos.animated=function(t){return ce.grep(ce.timers,function(e){return t===e.elem}).length},ce.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=ce.css(e,"position"),c=ce(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=ce.css(e,"top"),u=ce.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),v(t)&&(t=t.call(e,n,ce.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},ce.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){ce.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===ce.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===ce.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=ce(e).offset()).top+=ce.css(e,"borderTopWidth",!0),i.left+=ce.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-ce.css(r,"marginTop",!0),left:t.left-i.left-ce.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===ce.css(e,"position"))e=e.offsetParent;return e||J})}}),ce.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;ce.fn[t]=function(e){return M(this,function(e,t,n){var r;if(y(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),ce.each(["top","left"],function(e,n){ce.cssHooks[n]=Ye(le.pixelPosition,function(e,t){if(t)return t=Ge(e,n),_e.test(t)?ce(e).position()[n]+"px":t})}),ce.each({Height:"height",Width:"width"},function(a,s){ce.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){ce.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return M(this,function(e,t,n){var r;return y(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?ce.css(e,t,i):ce.style(e,t,n,i)},s,n?e:void 0,n)}})}),ce.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ce.fn[t]=function(e){return this.on(t,e)}}),ce.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),ce.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){ce.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var en=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;ce.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),v(e))return r=ae.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(ae.call(arguments)))}).guid=e.guid=e.guid||ce.guid++,i},ce.holdReady=function(e){e?ce.readyWait++:ce.ready(!0)},ce.isArray=Array.isArray,ce.parseJSON=JSON.parse,ce.nodeName=fe,ce.isFunction=v,ce.isWindow=y,ce.camelCase=F,ce.type=x,ce.now=Date.now,ce.isNumeric=function(e){var t=ce.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},ce.trim=function(e){return null==e?"":(e+"").replace(en,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return ce});var tn=ie.jQuery,nn=ie.$;return ce.noConflict=function(e){return ie.$===ce&&(ie.$=nn),e&&ie.jQuery===ce&&(ie.jQuery=tn),ce},"undefined"==typeof e&&(ie.jQuery=ie.$=ce),ce});
/*
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function(b,c){var $=b.jQuery||b.Cowboy||(b.Cowboy={}),a;$.throttle=a=function(e,f,j,i){var h,d=0;if(typeof f!=="boolean"){i=j;j=f;f=c}function g(){var o=this,m=+new Date()-d,n=arguments;function l(){d=+new Date();j.apply(o,n)}function k(){h=c}if(i&&!h){l()}h&&clearTimeout(h);if(i===c&&m>e){l()}else{if(f!==true){h=setTimeout(i?k:l,i===c?e-m:e)}}}if($.guid){g.guid=j.guid=j.guid||$.guid++}return g};$.debounce=function(d,e,f){return f===c?a(d,e,false):a(d,f,e!==false)}})(this);
/*!
 * imagesLoaded PACKAGED v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
!function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var i=this._events=this._events||{},n=i[e]=i[e]||[];return n.indexOf(t)==-1&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{},n=i[e]=i[e]||{};return n[t]=!0,this}},t.off=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=i.indexOf(t);return n!=-1&&i.splice(n,1),this}},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){i=i.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],o=0;o<i.length;o++){var r=i[o],s=n&&n[r];s&&(this.off(e,r),delete n[r]),r.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(i){return t(e,i)}):"object"==typeof module&&module.exports?module.exports=t(e,require("ev-emitter")):e.imagesLoaded=t(e,e.EvEmitter)}("undefined"!=typeof window?window:this,function(e,t){function i(e,t){for(var i in t)e[i]=t[i];return e}function n(e){if(Array.isArray(e))return e;var t="object"==typeof e&&"number"==typeof e.length;return t?d.call(e):[e]}function o(e,t,r){if(!(this instanceof o))return new o(e,t,r);var s=e;return"string"==typeof e&&(s=document.querySelectorAll(e)),s?(this.elements=n(s),this.options=i({},this.options),"function"==typeof t?r=t:i(this.options,t),r&&this.on("always",r),this.getImages(),h&&(this.jqDeferred=new h.Deferred),void setTimeout(this.check.bind(this))):void a.error("Bad element for imagesLoaded "+(s||e))}function r(e){this.img=e}function s(e,t){this.url=e,this.element=t,this.img=new Image}var h=e.jQuery,a=e.console,d=Array.prototype.slice;o.prototype=Object.create(t.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),this.options.background===!0&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&u[t]){for(var i=e.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var r=e.querySelectorAll(this.options.background);for(n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}}};var u={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(t.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,e),n=i.exec(t.backgroundImage)}},o.prototype.addImage=function(e){var t=new r(e);this.images.push(t)},o.prototype.addBackground=function(e,t){var i=new s(e,t);this.images.push(i)},o.prototype.check=function(){function e(e,i,n){setTimeout(function(){t.progress(e,i,n)})}var t=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(t){t.once("progress",e),t.check()}):void this.complete()},o.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,e,t)},o.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},r.prototype=Object.create(t.prototype),r.prototype.check=function(){var e=this.getIsImageComplete();return e?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},r.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},r.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype=Object.create(r.prototype),s.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var e=this.getIsImageComplete();e&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},s.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},o.makeJQueryPlugin=function(t){t=t||e.jQuery,t&&(h=t,h.fn.imagesLoaded=function(e,t){var i=new o(this,e,t);return i.jqDeferred.promise(h(this))})},o.makeJQueryPlugin(),o});
/*! lz-string.min.js v1.5.0 | (c) 2023 Pieroxy | MIT license */
var LZString=function(){var r=String.fromCharCode,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",e={};function t(r,o){if(!e[r]){e[r]={};for(var n=0;n<r.length;n++)e[r][r.charAt(n)]=n}return e[r][o]}var i={compressToBase64:function(r){if(null==r)return"";var n=i._compress(r,6,function(r){return o.charAt(r)});switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(r){return null==r?"":""==r?null:i._decompress(r.length,32,function(n){return t(o,r.charAt(n))})},compressToUTF16:function(o){return null==o?"":i._compress(o,15,function(o){return r(o+32)})+" "},decompressFromUTF16:function(r){return null==r?"":""==r?null:i._decompress(r.length,16384,function(o){return r.charCodeAt(o)-32})},compressToUint8Array:function(r){for(var o=i.compress(r),n=new Uint8Array(2*o.length),e=0,t=o.length;e<t;e++){var s=o.charCodeAt(e);n[2*e]=s>>>8,n[2*e+1]=s%256}return n},decompressFromUint8Array:function(o){if(null==o)return i.decompress(o);for(var n=new Array(o.length/2),e=0,t=n.length;e<t;e++)n[e]=256*o[2*e]+o[2*e+1];var s=[];return n.forEach(function(o){s.push(r(o))}),i.decompress(s.join(""))},compressToEncodedURIComponent:function(r){return null==r?"":i._compress(r,6,function(r){return n.charAt(r)})},decompressFromEncodedURIComponent:function(r){return null==r?"":""==r?null:(r=r.replace(/ /g,"+"),i._decompress(r.length,32,function(o){return t(n,r.charAt(o))}))},compress:function(o){return i._compress(o,16,function(o){return r(o)})},_compress:function(r,o,n){if(null==r)return"";var e,t,i,s={},u={},a="",p="",c="",l=2,f=3,h=2,d=[],m=0,v=0;for(i=0;i<r.length;i+=1)if(a=r.charAt(i),Object.prototype.hasOwnProperty.call(s,a)||(s[a]=f++,u[a]=!0),p=c+a,Object.prototype.hasOwnProperty.call(s,p))c=p;else{if(Object.prototype.hasOwnProperty.call(u,c)){if(c.charCodeAt(0)<256){for(e=0;e<h;e++)m<<=1,v==o-1?(v=0,d.push(n(m)),m=0):v++;for(t=c.charCodeAt(0),e=0;e<8;e++)m=m<<1|1&t,v==o-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}else{for(t=1,e=0;e<h;e++)m=m<<1|t,v==o-1?(v=0,d.push(n(m)),m=0):v++,t=0;for(t=c.charCodeAt(0),e=0;e<16;e++)m=m<<1|1&t,v==o-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}0==--l&&(l=Math.pow(2,h),h++),delete u[c]}else for(t=s[c],e=0;e<h;e++)m=m<<1|1&t,v==o-1?(v=0,d.push(n(m)),m=0):v++,t>>=1;0==--l&&(l=Math.pow(2,h),h++),s[p]=f++,c=String(a)}if(""!==c){if(Object.prototype.hasOwnProperty.call(u,c)){if(c.charCodeAt(0)<256){for(e=0;e<h;e++)m<<=1,v==o-1?(v=0,d.push(n(m)),m=0):v++;for(t=c.charCodeAt(0),e=0;e<8;e++)m=m<<1|1&t,v==o-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}else{for(t=1,e=0;e<h;e++)m=m<<1|t,v==o-1?(v=0,d.push(n(m)),m=0):v++,t=0;for(t=c.charCodeAt(0),e=0;e<16;e++)m=m<<1|1&t,v==o-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}0==--l&&(l=Math.pow(2,h),h++),delete u[c]}else for(t=s[c],e=0;e<h;e++)m=m<<1|1&t,v==o-1?(v=0,d.push(n(m)),m=0):v++,t>>=1;0==--l&&(l=Math.pow(2,h),h++)}for(t=2,e=0;e<h;e++)m=m<<1|1&t,v==o-1?(v=0,d.push(n(m)),m=0):v++,t>>=1;for(;;){if(m<<=1,v==o-1){d.push(n(m));break}v++}return d.join("")},decompress:function(r){return null==r?"":""==r?null:i._decompress(r.length,32768,function(o){return r.charCodeAt(o)})},_decompress:function(o,n,e){var t,i,s,u,a,p,c,l=[],f=4,h=4,d=3,m="",v=[],g={val:e(0),position:n,index:1};for(t=0;t<3;t+=1)l[t]=t;for(s=0,a=Math.pow(2,2),p=1;p!=a;)u=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=e(g.index++)),s|=(u>0?1:0)*p,p<<=1;switch(s){case 0:for(s=0,a=Math.pow(2,8),p=1;p!=a;)u=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=e(g.index++)),s|=(u>0?1:0)*p,p<<=1;c=r(s);break;case 1:for(s=0,a=Math.pow(2,16),p=1;p!=a;)u=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=e(g.index++)),s|=(u>0?1:0)*p,p<<=1;c=r(s);break;case 2:return""}for(l[3]=c,i=c,v.push(c);;){if(g.index>o)return"";for(s=0,a=Math.pow(2,d),p=1;p!=a;)u=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=e(g.index++)),s|=(u>0?1:0)*p,p<<=1;switch(c=s){case 0:for(s=0,a=Math.pow(2,8),p=1;p!=a;)u=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=e(g.index++)),s|=(u>0?1:0)*p,p<<=1;l[h++]=r(s),c=h-1,f--;break;case 1:for(s=0,a=Math.pow(2,16),p=1;p!=a;)u=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=e(g.index++)),s|=(u>0?1:0)*p,p<<=1;l[h++]=r(s),c=h-1,f--;break;case 2:return v.join("")}if(0==f&&(f=Math.pow(2,d),d++),l[c])m=l[c];else{if(c!==h)return null;m=i+i.charAt(0)}v.push(m),l[h++]=i+m.charAt(0),i=m,0==--f&&(f=Math.pow(2,d),d++)}}};return i}();"function"==typeof define&&define.amd?define(function(){return LZString}):"undefined"!=typeof module&&null!=module?module.exports=LZString:"undefined"!=typeof angular&&null!=angular&&angular.module("LZString",[]).factory("LZString",function(){return LZString});
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/dist/FileSaver.js */
(function(a,b){if("function"==typeof define&&define.amd)define([],b);else if("undefined"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){"use strict";function b(a,b){return"undefined"==typeof b?b={autoBom:!1}:"object"!=typeof b&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open("GET",a),d.responseType="blob",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error("could not download file")},d.send()}function d(a){var b=new XMLHttpRequest;b.open("HEAD",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent("click"))}catch(c){var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||("object"!=typeof window||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement("a");g=g||b.name||"download",j.download=g,j.rel="noopener","string"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target="_blank")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:"msSaveOrOpenBlob"in navigator?function(f,g,h){if(g=g||f.name||"download","string"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement("a");i.href=f,i.target="_blank",setTimeout(function(){e(i)})}}:function(b,d,e,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),"string"==typeof b)return c(b,d,e);var h="application/octet-stream"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\/[\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&"undefined"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4E4)}});f.saveAs=g.saveAs=g,"undefined"!=typeof module&&(module.exports=g)});
/*! seedrandom.js v3.0.5 | Copyright 2019 David Bau. | MIT license */
!function(f,a,c){var s,l=256,p="random",d=c.pow(l,6),g=c.pow(2,52),y=2*g,h=l-1;function n(n,t,r){function e(){for(var n=u.g(6),t=d,r=0;n<g;)n=(n+r)*l,t*=l,r=u.g(1);for(;y<=n;)n/=2,t/=2,r>>>=1;return(n+r)/t}var o=[],i=j(function n(t,r){var e,o=[],i=typeof t;if(r&&"object"==i)for(e in t)try{o.push(n(t[e],r-1))}catch(n){}return o.length?o:"string"==i?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[n,S(a)]:null==n?function(){try{var n;return s&&(n=s.randomBytes)?n=n(l):(n=new Uint8Array(l),(f.crypto||f.msCrypto).getRandomValues(n)),S(n)}catch(n){var t=f.navigator,r=t&&t.plugins;return[+new Date,f,r,f.screen,S(a)]}}():n,3),o),u=new m(o);return e.int32=function(){return 0|u.g(4)},e.quick=function(){return u.g(4)/4294967296},e.double=e,j(S(u.S),a),(t.pass||r||function(n,t,r,e){return e&&(e.S&&v(e,u),n.state=function(){return v(u,{})}),r?(c[p]=n,t):n})(e,i,"global"in t?t.global:this==c,t.state)}function m(n){var t,r=n.length,u=this,e=0,o=u.i=u.j=0,i=u.S=[];for(r||(n=[r++]);e<l;)i[e]=e++;for(e=0;e<l;e++)i[e]=i[o=h&o+n[e%r]+(t=i[e])],i[o]=t;(u.g=function(n){for(var t,r=0,e=u.i,o=u.j,i=u.S;n--;)t=i[e=h&e+1],r=r*l+i[h&(i[e]=i[o=h&o+t])+(i[o]=t)];return u.i=e,u.j=o,r})(l)}function v(n,t){return t.i=n.i,t.j=n.j,t.S=n.S.slice(),t}function j(n,t){for(var r,e=n+"",o=0;o<e.length;)t[h&o]=h&(r^=19*t[h&o])+e.charCodeAt(o++);return S(t)}function S(n){return String.fromCharCode.apply(0,n)}if(j(c.random(),a),"object"==typeof module&&module.exports){module.exports=n;try{s=require("crypto")}catch(n){}}else"function"==typeof define&&define.amd?define(function(){return n}):c["seed"+p]=n}("undefined"!=typeof self?self:this,[],Math);
/*! console_hack.js | (c) 2015 Thomas Michael Edwards | Licensed under SugarCube's Simple BSD license */
!function(){for(var methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],length=methods.length,noop=function(){},console=window.console=window.console||{};length--;){var method=methods[length];console[method]||(console[method]=noop)}}();
}else{document.documentElement.setAttribute("data-init", "lacking");}
</script>
<style id="style-normalize" type="text/css">/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}</style>
<style id="style-init-screen" type="text/css">@-webkit-keyframes init-loading-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes init-loading-spin{0%{-o-transform:rotate(0);transform:rotate(0)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes init-loading-spin{0%{-webkit-transform:rotate(0);-o-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}#init-screen{display:none;z-index:500000;position:fixed;top:0;left:0;height:100%;width:100%;font:28px/1 Helmet,Freesans,sans-serif;font-weight:700;color:#eee;background-color:#111;text-align:center}#init-screen>div{display:none;position:relative;margin:0 auto;max-width:1136px;top:25%}html[data-init=lacking] #init-screen,html[data-init=loading] #init-screen,html[data-init=no-js] #init-screen{display:block}html[data-init=lacking] #init-lacking,html[data-init=no-js] #init-no-js{display:block;padding:0 1em}html[data-init=no-js] #init-no-js{color:red}html[data-init=loading] #init-loading{-webkit-animation:init-loading-spin 2s linear infinite;-o-animation:init-loading-spin 2s linear infinite;animation:init-loading-spin 2s linear infinite;border:12px solid transparent;border-bottom-color:#7f7f7f;border-radius:50%;border-top-color:#7f7f7f;display:block;height:100px;width:100px}html[data-init=loading] #init-loading>div{text-indent:16128px;overflow:hidden;white-space:nowrap}html[data-init=loading] #story,html[data-init=loading] #ui-bar{display:none!important}</style>
<style id="style-font-icons" type="text/css">@font-face{font-family:sc-icons;font-display:block;src:url("data:application/octet-stream;base64,d09GRgABAAAAAFRoAAsAAAAAVBwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABCAAAAGAAAABgD1IUnWNtYXAAAAFoAAACdAAAAnQzsxFSZ2FzcAAAA9wAAAAIAAAACAAAABBnbHlmAAAD5AAASzgAAEs4ynuL3WhlYWQAAE8cAAAANgAAADYc3WiNaGhlYQAAT1QAAAAkAAAAJAiCBP1obXR4AABPeAAAAfAAAAHwyjAFu2xvY2EAAFFoAAAA+gAAAPpXLER0bWF4cAAAUmQAAAAgAAAAIACEAIVuYW1lAABShAAAAcIAAAHCiTu08nBvc3QAAFRIAAAAIAAAACAAAwAAAAMDyQGQAAUAAAKZAswAAACPApkCzAAAAesAMwEJAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAQAAA+CoDgP+AAIADgACAAAAAAQAAAAAAAAAAAAAAIAAAAAAAAwAAAAMAAAAcAAEAAwAAABwAAwABAAAAHAAEAlgAAACSAIAABgASAAEAIPAC8AXwDvAR8BPwFfAZ8CPwKPAu8E7wWvBe8GPwaPBq8G7wcfB48InwjfCT8JzwoPDC8MfwyfDQ8Nrw5/Dr8P7xDvEQ8SfxOvE+8ULxRPFG8UrxUvGG8YjxkfGr8d3x4PH48gXyRPKL8o3y6vLt8vHy+fMe813zgvQQ9Vr1b/V09cD2qfeM99n4Kv/9//8AAAAAACDwAvAE8AzwEPAT8BXwGfAj8CbwLvBI8FDwXvBg8GXwavBu8HDwd/CJ8I3wk/Cc8KDwwfDH8Mnw0PDX8Ofw6/D+8Q3xEPEn8TfxPvFB8UTxRvFK8VDxhfGI8ZHxq/Hd8eDx+PIE8kDyi/KN8ury7fLx8vnzHvNd84H0EPVa9W31dPXA9qn3jPfZ+Cn//f//AAH/4xACEAEP+w/6D/kP+A/1D+wP6g/lD8wPyw/ID8cPxg/FD8IPwQ+8D6wPqQ+kD5wPmQ95D3UPdA9uD2gPXA9ZD0cPOQ84DyIPEw8QDw4PDQ8MDwkPBA7SDtEOyQ6wDn8OfQ5mDlsOIQ3bDdoNfg18DXkNcg1ODRAM7QxgCxcLBQsBCrYJzgjsCKAIUQADAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAH//wAPAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAIAAP+OA/IDgAArAEcAACUWFA8BBiIvAS4BPQEOASMiJy4BJyY1NDc+ATc2MzIXHgEXFhUUBgczMhYXJTI3PgE3NjU0Jy4BJyYjIgcOAQcGFRQXHgEXFgPyDg45DigOxwcHNYNIVkxMcSAhISBxTExWVkxMcSAhLykhCRIH/nU1Ly5GFBQUFEYuLzU1Ly5GFBQUFEYuLwsOKA45Dg7HBxIJISkvISBxTExWVkxMcSAhISBxTExWSIM1BwcOFBRGLi81NS8uRhQUFBRGLi81NS8uRhQUAAAAAAEAEv/TA+4DNQAjAAABFhceAQcGBwEGIicBJicmNjc2NzY3NhYXFh8BNzY3PgEXFhcDnS8YGQUUFCr+fRM1Ev59KxMUBRkYLyoxMWUvMCYnJyYwL2UxMikDAyg2NnI3Nyz+cBMTAZAsNzdyNjYoIw8OCBYWJykpJxYWCA4PIwAAAQA8/4cERANcABgAAAE2MhcTBR4BDwETFgYnJQUGJjcTJyY2NyUCBxFQEYMBJCgYHNQyB0Ej/vv++yNBBzLUHBknASQDXCQk/vgrBksczv7dKC4SiooSLigBI84cSwYrAAAAAAEADwARA/EC7wAVAAAlASY0PwE2Mh8BATYyHwEWFAcBBiInAVz+sw8PSA8rD+AB4A8rD0gPD/2zDyoPEQFNDyoPSQ8P4AHgDw9JDyoP/bMPDwAAAAEAEgAyAq4CzgAjAAABFxYUDwEGIi8BBwYiLwEmND8BJyY0PwE2Mh8BNzYyHwEWFAcB5ckSEi0SNBPIyBM0Ei0SEsnJEhItEjQTyMgTNBItEhIBgMgTNBItEhLJyRISLRI0E8jIEzQSLRISyckSEi0SNBMAAwAA/44D8gOAACMAUABsAAABFRQGKwEVFAYrASImPQEjIiY9ATQ2OwE1NDY7ATIWHQEzMhYBBwYiLwEuAT0BDgEjIicuAScmNTQ3PgE3NjMyFx4BFxYVFAYHMzIWHwEWFAcBNCcuAScmIyIHDgEHBhUUFx4BFxYzMjc+ATc2AmAOCnAOCkAKDnAKDg4KcA4KQAoOcAoOAZI5DicOyAcHNYNIVkxMcSAhISBxTExWVkxMcSAhLykhCRIHxw4O/r4VFkkyMjg4MjFKFhUVFkkyMjg4MjFKFhUCAEAKDnAKDg4KcA4KQAoOcAoODgpwDv29OQ4OxwcSCSEpLyEgcUxMVlZMTHEgISEgcUxMVkiDNQcHxw4oDgIZODIxShYVFRZJMjI4ODIxShYVFRZJMjIAAAMAAP+OA/IDgAAPADwAWAAAARUUBiMhIiY9ATQ2MyEyFgEHBiIvAS4BPQEOASMiJy4BJyY1NDc+ATc2MzIXHgEXFhUUBgczMhYfARYUBwE0Jy4BJyYjIgcOAQcGFRQXHgEXFjMyNz4BNzYCYA4K/rAKDg4KAVAKDgGSOQ4nDsgHBzWDSFZMTHEgISEgcUxMVlZMTHEgIS8pIQkSB8cODv6+FRZJMjI4ODIxShYVFRZJMjI4ODIxShYVAgBACg4OCkAKDg79vTkODscHEgkhKS8hIHFMTFZWTExxICEhIHFMTFZIgzUHB8cOKA4CGTgyMUoWFRUWSTIyODgyMUoWFRUWSTIyAAAAAAIAEP+QA/ADgAA+AE4AAAEWFx4BFxYVFAcOAQcGIyInLgEnJjU0Nz4BNzY3NhYfARYGBw4BFRQXHgEXFjMyNz4BNzY1NCYnLgE/AT4BFwMUBisBIiY1ETQ2OwEyFhUDIC8nJjYPDycnhlpaZ2ZbWocoJw8ONyYmMBEqCx8JBw8+ShoaWz49RkU9PVwbGkdBDwcJHwsqEdAcFEAUHBwUQBQcAxQiLCxnOjs+Z1pahycnJyeGWltmPzo6aCwsIgwJEzgQIwsujVNFPT1cGhsaGlw9PkdOjjALIxA4EwkM/lwUHBwUAeAUHBwUAAAAAgAm/5wD2gNkAFMAXwAAAR4BBw4BBw4BLwEOAQcVFAYHBiInLgE9AS4BJwcGJicuAScmNj8BJjQ3Jy4BNz4BNz4BHwE+ATc1NDY3PgEXHgEdAR4BFzc2FhceARcWBg8BFhQHBTI2NTQmIyIGFRQWA88HBgIRNyUGEQdVGz4hCgk0bzcICyE+GlYHEQUlOBECBgdWBwdWBwYCETglBREHVRs+IQsING83CAshPhtVBxEFJTgRAgYHVQYG/oZCXl5CQl5eAQkFDwk1YCgGAwUxFyQLYwgNAgwMAg0IYwskFzEFAwYoYDUJDwQyIkcjMQQQCDZfKAcCBDEXIwxiCQ0CCwEMAg0JYgwjFzEEAgYpXzYIDwUxI0YjWl5CQl5eQkJeAAAAAAIAAP/ABIADQAAjAFcAAAE+ATMyFhcBERQGIyciJjU4ATE1NCYrASIGHQEUBiMHIiY1ESUeARUUBg8BDgEjIiYnAS4BIyIGBwEOASMiJi8BLgE1NDY3AT4BMzIWHwE1NDY7ATIWFRECMQMIBAQIAwFxEw3gDRMTDYANExMN4A0TA7cEBQMCMwQJBgQIA/4pAwgEBAgD/ikDCAQGCQQzAgMFBAH6DCARESAMsw4KcAoOAlcDAwMD/tH+uA0TARIOvw0TEw2/DhIBEw0BSGEDCgYECAM+BAUDAwGDAwMDA/59AwMFBD4DCAUFCgMBoQoMDAqTkQoODgr+6wAAAAQAAP+ABAADgAAWAC0AOQBFAAABMzIWFREzMhYHAQYiJwEmNjsBETQ2MwEVFAYjISImPQE0NjMhFxYyPwEhMhYVBzQmIyIGFRQWMzI2NzQmIyIGFRQWMzI2AbCgFByvGxQS/s8LIAv+zxMVGrAcFAJQHBT8YBQcHBQBJWIfVB9iASUUHPgXERAYFxEQGIAXERAYFxEQGAOAHBT+sDET/s8LCwExEzEBUBQc/RDgFBwcFOAUHGIeHmIcFLAQGBcREBgXERAYFxEQGBcAAAIAAP+AA4ADgAAgACkAAAEyFhURFAYjISImNRE0NjsBNTQ3PgE3NjMyFx4BFxYdASM1NCYjIgYdAQMgKDg4KP1AKDg4KDAYGFI4Nz8/NzhSGBigVDw8VAHAOCj+gCg4OCgBgCg4kD83OFIYGBgYUjg3P5CQPFRUPJAAAAABAAAADgIAAvIAEQAAATYWFREUBi8BIyImNRE0NjsBAa4WPDsXsswUHBwUzALyFhgg/WAgGBayHBQBIBQcAAAAAgAAAAwDAALwABEAKgAAATYWFREUBi8BIyImNRE0NjsBBR4BFRQGBwYmJyY2Nz4BNTQmJy4BNz4BFwGuFzs7F7LMFBwcFMwBqCsxMSsRJgoJCxEUFhYUEQsJCiYRAvAWGCD9YCAYFrIcFAEgFBwmGFIwMFIYCQsREiYJCyUWFiULCSYSEQsJAAQAAP+oBIADWAARADoAWwB0AAABNhYVERQGLwEjIiY1ETQ2OwEBFhceARcWFRQHDgEHBgcGJicmNjc2Nz4BNzY1NCcuAScmJy4BNz4BFxMUBw4BBwYHBiYnJjY3PgE1NCYnLgE3PgEXFhceARcWFSUeARUUBgcGJicmNjc+ATU0JicuATc+ARcBrhc7OxeyzBQcHBTMAoU8Ly9CEhEREkIvLzwSJwoLCBExKCc2Dw4ODzYnKDERCAsLJxE/DAstHyApEiYKCggRPENDPBEICgsnECkgHy0LDP7kKzExKxEmCgkLERQWFhQRCwkKJhEC8hYYIP1gIBgWshwUASAUHAEYJzQ0ekRER0dERHo0NCcLCRARJwsgKytlODk7Ozk4ZSsrIAsnEREIC/4oMC0tUCMiGQwLDxEnCyZ7RkZ7JgsnERAJCxkiI1AtLTCaGFIwMFIYCQsREiYJCyUWFiULCSYSEQsJAAAAAAEAAP+AAwADgAAKAAAXETQ2MyEyFhURJQA4KAJAKDj+gIADoCg4OCj8YOAAAQCA/8ADAANAABkAABcRNDY7ATIWFREBNhYVERQGJwERFAYrASImgA4KYAoOAYcfSkof/nkOCmAKDigDUAoODgr+nwFqGiIp/QApIhoBaP6hCg4OAAAAAAEAAAAABAADAAAkAAA3ETQ2OwEyFhURATYWFREBNhYVERQGJwERFAYnAREUBisBIiY1AA4KUAoOAVcfSgFXH0pKH/6pSh/+qQ4KUAoOGALQCg4OCv7QATkaIin++AE5GiIp/YApIhoBNv77KSIaATb+0woODgoAAAIAFwAPBAAC8QALABcAABMmNDcBNhYVERQGJxMmNDcBNhYVERQGJxcXFwGAH0pKH4AXFwGAH0pKHwFPEzwTAUAaIin9gCkiGgFAEzwTAUAaIin9gCkiGgABAAD/jQNRA3MACwAAARYUBwEGJjURNDYXA1EvL/1AMGFmKwHTHG4c/mAcNzgDQD8tGQAAAgAA/8IDgANCAA8AHwAABSMiJjURNDY7ATIWFREUBiUUBisBIiY1ETQ2OwEyFhUBIMAoODgowCg4OAI4OCjAKDg4KMAoOD44KALAKDg4KP1AKDhgKDg4KALAKDg4KAAAAQAA/8ADgANAAA8AAAEyFhURFAYjISImNRE0NjMDICg4OCj9QCg4OCgDQDgo/UAoODgoAsAoOAACAAAADwPpAvEACwAXAAABFhQHAQYmNRE0NhcDFhQHAQYmNRE0NhcD6RcX/oAfSkofgBcX/oAfSkofAbETPBP+wBoiKQKAKSIa/sATPBP+wBoiKQKAKSIaAAAAAAEAAAAABAADAAAjAAABERQGKwEiJjURAQYmNREBBiY1ETQ2FwERNDYXARE0NjsBMhYEAA4KUAoO/qkfSv6pH0pKHwFXSh8BVw4KUAoOAuj9MAoODgoBMP7HGiIpAQj+xxoiKQKAKSIa/skBBikiGv7JAS4KDg4AAAEAgP/AAwADQAAZAAABERQGKwEiJjURAQYmNRE0NhcBETQ2OwEyFgMADgpgCg7+eR9KSh8Bhw4KYAoOAyj8sAoODgoBYf6WGiIpAwApIhr+mAFfCg4OAAACAAD/wAOAAyEADwAcAAAlFRQGIyEiJj0BNDYzITIWJSImNwE2MhcBFgYjIQOAJRv9ABslJRsDABsl/OA+MyoBYB1UHQFgKjM+/UCAgBslJRuAGyUlZXMuAYAfH/6ALnMAAAAAAQBF/9kCOwMnABUAABMBNjIfARYUBwkBFhQPAQYiJwEmNDdFAYUOKA4tDg7+zAE0Dg4tDigO/nsODgGiAYUODi4OJw/+y/7LDycOLg4OAYUOKA4AAQBF/9kCOwMnABUAAAkBBiIvASY0NwkBJjQ/ATYyFwEWFAcCO/57DigOLQ4OATT+zA4OLQ4oDgGFDg4BXv57Dg4uDicPATUBNQ8nDi4ODv57DigOAAAAAAIAEP+QA/ADcAAbAD8AAAEyFx4BFxYVFAcOAQcGIyInLgEnJjU0Nz4BNzYBNTQmKwE1NCYrASIGHQEjIgYdARQWOwEVFBY7ATI2PQEzMjYCAGdaWocnJycnh1paZ2daWocnJycnh1paAYcOCrgOCnAKDrgKDg4KuA4KcAoOuAoOA3AnJ4daWmdnWlqHJycnJ4daWmdnWlqHJyf92HAKDrgKDg4KuA4KcAoOuAoODgq4DgAAAAIAEP+QA/ADcAAbACsAAAEyFx4BFxYVFAcOAQcGIyInLgEnJjU0Nz4BNzYDITI2PQE0JiMhIgYdARQWAgBnWlqHJycnJ4daWmdnWlqHJycnJ4daWqECEAoODgr98AoODgNwJyeHWlpnZ1pahycnJyeHWlpnZ1pahycn/cAOCnAKDg4KcAoOAAACABD/kAPwA3AAGwBAAAABMhceARcWFRQHDgEHBiMiJy4BJyY1NDc+ATc2ASc3NjQvASYiDwEnJiIPAQYUHwEHBhQfARYyPwEXFjI/ATY0JwIAZ1pahycnJyeHWlpnZ1pahycnJyeHWloBWoODBwdPBxQHgoIHFAdPBweDgwcHTwcUB4KCBxQHTwcHA3AnJ4daWmdnWlqHJycnJ4daWmdnWlqHJyf9joKCBxQHTwcHg4MHB08HFAeCggcUB08HB4ODBwdPBxQHAAIAEP+QA/ADcAAbADEAAAEUBw4BBwYjIicuAScmNTQ3PgE3NjMyFx4BFxYJATY0LwEmIgcBJyYiDwEGFB8BFjI3A/AnJ4daWmdnWlqHJycnJ4daWmdnWlqHJyf91wFwCQkuCRsJ/tSMCRsJLgkJ0AoaCgGAZ1pahycnJyeHWlpnZ1pahycnJyeHWlr+kgFwChoKLQkJ/tSMCQktChoK0AkJAAAAAwAQ/5AD8ANwABsASQBVAAABFAcOAQcGIyInLgEnJjU0Nz4BNzYzMhceARcWJSIGBwYWHwEWNjc+ATMyFhUUBgcOAR0BFBY7ATI2PQE0Nz4BNzY1NCcuAScmIwMiBhUUFjMyNjU0JgPwJyeHWlpnZ1pahycnJyeHWlpnZ1pahycn/h1RbykFAwhFCBMGGy8pHzwiHyNKDgpwCg4aGj4aGhQVQiopKw0mNjYmJjY2AYBnWlqHJycnJ4daWmdnWlqHJycnJ4daWuVCPgcTBjUGAwgiJSQeFh0REzw+CAoODgoDFQ4PKCEgOiwlJTcPEP4QNiYmNjYmJjYAAAAAAwAQ/5AD8ANwABsAJwBGAAABMhceARcWFRQHDgEHBiMiJy4BJyY1NDc+ATc2FyIGFRQWMzI2NTQmEzU0JisBNTQmKwEiBh0BFBY7ARUjIgYdARQWOwEyNgIAZ1pahycnJyeHWlpnZ1pahycnJyeHWlpnIzExIyMxMU0OChgOCoAKDg4KGBgKDg4KsAoOA3AnJ4daWmdnWlqHJycnJ4daWmdnWlqHJyfcMSMjMTEjIzH+BDAKDsgKDg4KMAoOgA4KMAoODgAAAAADABD/kAPwA3AAGwArADsAAAEyFx4BFxYVFAcOAQcGIyInLgEnJjU0Nz4BNzYFJicuAQcGBwE2NzYmJyYnARYXHgE3NjcBBgcGFhcWFwIAZ1pahycnJyeHWlpnZ1pahycnJyeHWloBazE8PH4+PTUCASUQEQoaGzH9+DE8PH4+PTX9/yUQEQoaGzEDcCcnh1paZ2daWocnJycnh1paZ2daWocnJ+wxGxoKERAl/f81PT5+PDwx/fgxGxoKERAlAgE1PT5+PDwxAAEADv/ZA4ADJwAeAAAlBwYiJwEmNDcBNjIfARYUDwEhMhYdARQGIyEXFhQHAgMsDigO/nsODgGFDigOLA4P8QI/FBwcFP3B8Q8OBi0ODgGFDigOAYUODi0OKA7mHBRAFBzmDigOAAAAAQAA/9kDcgMnAB4AAAE3NjIXARYUBwEGIi8BJjQ/ASEiJj0BNDYzIScmNDcBfSwOKA4BhQ4O/nsOKA4sDg/x/cEUHBwUAj/xDw4C+i0ODv57DigO/nsODi0OKA7mHBRAFBzmDigOAAABABn/wANmAzIAHgAAEycmNDcBNjIXARYUDwEGIi8BERQGKwEiJjURBwYiJ0YtDg4BhQ4oDgGEDw8sDikO5RwUQBQc5g4oDgE9LA4oDgGFDg7+ew4nDi0OD/H9wRQcHBQCP/EPDgAAAAEAGf/OA2cDQAAeAAABFxYUBwEGIicBJjQ/ATYyHwERNDY7ATIWFRE3NjIXAzotDg7+ew4oDv57Dg4tDigO5hwUQBQc5g4oDgHDLA4oDv57Dg4BhQ4oDiwOD/ECPxQcHBT9wfEPDgAABAAA/8ADgANAABQAKQA+AFMAABM1NDY7ATIWHQEUBisBFRQGKwEiJgE0NjsBMhYdARQGKwEiJj0BIyImNQEyFh0BFAYrASImPQE0NjsBNTQ2MwEUBisBIiY9ATQ2OwEyFh0BMzIWFQAcFPgKDg4KqA4KUAoOAkAOCvgUHA4KUAoOqAoOASgKDhwU+AoODgqoDgr+KA4K+BQcDgpQCg6oCg4CGPgUHA4KUAoOqAoODgEaCg4cFPgKDg4KqA4K/igOCvgUHA4KUAoOqAoO/tgKDhwU+AoODgqoDgoAAAQAAP/AA4ADQAAUACkAPgBTAAABIyImPQE0NjsBMhYdATMyFh0BFAYlFAYrASImPQE0NjsBNTQ2OwEyFhURFAYrASImPQEjIiY9ATQ2OwEyFhUFFAYrASImPQE0NjsBMhYdARQGKwEDaPgUHA4KUAoOqAoODv3OHBT4Cg4OCqgOClAKDg4KUAoOqAoODgr4FBwBgA4KUAoOHBT4Cg4OCqgCABwU+AoODgqoDgpQCg4wFBwOClAKDqgKDg4K/LAKDg4KqA4KUAoOHBT4Cg4OCvgUHA4KUAoOAAEAAP/AA4ADQAAjAAABMhYdARQGIyERFAYrASImNREhIiY9ATQ2MyERNDY7ATIWFREDQBslJRv+4CUbQBsl/uAbJSUbASAlG0AbJQHgJRtAGyX+4BslJRsBICUbQBslASAbJSUb/uAAAQAAASADgAHgAA8AAAEyFh0BFAYjISImPQE0NjMDQBslJRv9ABslJRsB4CUbQBslJRtAGyUAAAADABD/kAPwA3AAGwAnADcAAAEUBw4BBwYjIicuAScmNTQ3PgE3NjMyFx4BFxYFIgYVFBYzMjY1NCYDEx4BOwEyNjcTNiYrASIGA/AnJ4daWmdnWlqHJycnJ4daWmdnWlqHJyf+ECY2NiYmNjZ9DgEOCWIJDgEOAQ4LfgsOAYBnWlqHJycnJ4daWmdnWlqHJycnJ4daWss2JiY2NiYmNgFL/vAKDQ0KARAKDw8AAwAAAAAEgAMAACgASQBlAAABHgEVFAYHBgcOAQcGIyInLgEnJicuATU0Njc2Nz4BNzYzMhceARcWFwE4ATEyNz4BNzY1MTQnLgEnJiMiBw4BBwYVFBceARcWMxE4ATEyFhUUBiMiJjU0NjceATMyNjU0Jic+ATMEeQMEBAMpOzuTVlVcXFVWkzs7KQMEBAMpOzuTVlVcXFVWkzs7Kf3HPDQ1ThYXFxZONTQ8PDQ1ThYXFxZONTQ8UHBwUE9wAwQLHRAoOAoJDBoNAZ0GDwgIDwZQQUFeGRoaGV5BQVAGDwgIDwZQQUFeGRoaGV5BQVD+wxcWTjU0PDw0NU4WFxcWTjU0PDw0NU4WFwHgcFBPcHBPDRoMCQo4KBAdCwQEAAAAAwAA/4AFAAOAAB8ATwB0AAAlMjY3Fw4BIyInLgEnJicuATU0Njc+ATcXFhceARcWMwUeARUUBg8BDgEjIiYnAS4BNTQ2PwE+ATMyFh8BPgEzMhceARcWFx4BFRQGBw4BByc+ATU4ATE0Jy4BJyYjMSIGBxc+ATU0Jic+ATMyFhUcARUUBgcCgA0aDWgmTihcVVaTOzspAwQEAw8mFNIEGBhNMjI5AnQFBwQDJwQOBwYKBPtnBQcEAycEDgcGCgT+QpVQXFVWkzs7KQMEBAMeUjKTDQ8XFk41NDw0XSWTAQIKCQ0bDU9vBgRgAwJQCgsaGV5BQVAGDwgIDwYeNxqiODAxSBQVdAUNBwYKBDMFBwQDA40FDQcGCgQzBQcEA8QjKBoZXkFBUAYPCAgPBjtnKnEbPSA8NDVOFhcjH3IFCgUQHQsEBG9OAQEBEB0OAAAAAwAN/4AEcwNQAAsAFwAnAAAlFgYjISImNwE2MhcDIgYVFBYzMjY1NCYDEx4BOwEyNjcTNiYrASIGBHMcODf8QDc4HAHgHG8bUyY2NiYmNjZ9DgEOCWIJDgEOAQ4LfgsOEDBgYDADQDAw/Ww2JiY2NiYmNgFL/vAKDQ0KARAKDw8AAAAAAQAZAIUDZwJ7ABUAAAkBFhQPAQYiJwkBBiIvASY0NwE2MhcB4gGFDg4uDicP/sv+yw8nDi4ODgGFDigOAnv+ew4oDi0ODgE0/swODi0OKA4BhQ4OAAAAAAEAGQCFA2cCewAVAAAlASY0PwE2MhcJATYyHwEWFAcBBiInAZ7+ew4OLg4nDwE1ATUPJw4uDg7+ew4oDoUBhQ4oDi0ODv7MATQODi0OKA7+ew4OAAEAPP+IAkADgAAPAAABEQUGJjcTJyY2NyUTPgEzAkD++yNBBzLUHBknASSDCCARA4D8kYkTLycBI84cSwYrAQgSEgAAAQAA/4kDAAOAAC0AAAEeARUUBiMhFRQGDwEGIi8BLgE9ASEiJjU0Nj8BIyImPQE0NjMhMhYdARQGKwECVEhkHBT+8AEBMAQUBDABAf7wFBxjSRhUFBwcFAIgFBwcFFQB0yF1TRQc0AIEAWAJCWABBALQHBRMdiHtHBRgFBwcFGAUHAAABAAA/4AEAAN1ABYAMAA8AEgAACUjIiY1ESMiJjcBNjIXARYGKwERFAYjJRUUBiMhIiY9ATQ2MyEVFBY7ATI2PQEhMhYHNCYjIgYVFBYzMjY3NCYjIgYVFBYzMjYCUKAUHK8bFBIBMQsgCwExExUbrxwUAbAcFPxgFBwcFAEQQi6gLkIBEBQc+BcREBgXERAYgBcREBgXERAYgBwUAVAxEwExCwv+zxMx/rAUHBDgFBwcFOAUHBAuQkIuEBzEEBgXERAYFxEQGBcREBgXAAAAAAEAAP+AA4ADgAAwAAABMhYVERQGIyEiJjURNDY7ATU0Nz4BNzYzMhceARcWHQEUBisBIiY9ATQmBw4BHQEhAyAoODgo/UAoODgoMBgXUzc3Pz84N1MYGBwUQBQcVTw8UwHwAYA4KP7AKDg4KAFAKDjNPzg4UxgZGBdTODc/IBQcHBQgPFUBAVU8zgAABAAAAAAEgAMAAA8AJAAwADwAAAEVFAYjISImPQE0NjMhMhYnITgBMSIGBxM+ATMhMhYXEy4BIzEHIgYVFBYzMjY1NCYjIgYVFBYzMjY1NCYEgDgo/EAoODgoA8AoOGD8QBEeD8IMKhkCGhkqDMIPHxBgGyUlGxslJdsbJSUbGyUlASDAKDg4KMAoODh4BgYBIRQXFxT+3wYGwCUbGyUlGxslJRsbJSUbGyUAAAIAFv+WA+oDagA+AH0AAAEWFxYUBwYHMAYxBwYHBiInJicmJyY0NzY/ATYWFx4BFxYGDwEOARcWMj8BNjQnLgEnLgE1JjY/AT4BFx4BFwEWFxYUBwYPAQYmJy4BJyY2PwE+AScmIg8BBhQXHgEXHgEVFgYPAQ4BJy4BJyYnJjQ3NjcwNjE3Njc2MhcWFwKNLRYWFhYsAYYtODh1ODgsLRYWFhYtSg8nAQEJCQMEBhsqAioqeCuGKioFCwUGBwELDSoIGAkLFQkBGi0WFhYWLUoPJwEBCQkDBAYbKgIqKngrhioqBQsFBgcBCw0qCBgJCxUJLRYWFhYsAYYtODh1ODgsAg0tODh0ODgsAYYtFhYWFi0sODh1ODgtSg8PFRs1GggSBxoqdysrKoYrdyoGCAMEDgcQIAwqCAIGCBEKARosODh1ODgtSg8PFRs1GggSBxoqdysrKoYrdyoGCAMEDgcQIAwqCAIGCBEKLTg4dDg4LAGGLRYWFhYtAAAAAQAA/8AFAANAADcAAAEWFx4BFxYVFAcOAQcGIyEiJy4BJyY1NDc+ATc2NzwBNTQ3PgE3NjMyFx4BFxYXPgEzMhYVFAYHBDMsJSY3DxAUFEYuLzX9IDw0NU4WFw4PMyMjKhkZVzo7QiwqKUcdHhQXNh5PcQcGAbsJFxdCKiouNS8uRhQUFxZONTQ8LysrRxobDwQIBEI7OlcZGQwLKh4dJA8RcU8SIxAAAwAA/8ADgANAABMAHwA0AAABHgEVERQGIyEiJjURNDYzITIWFwMyNjU0JiMiBhUUFhM0Ji8BLgEjISIGHQEUFjMhMjY9AQNkDQ84KP1AKDg4KAIYFCMN/DVLSzU1S0v1BAMHAwkF/jcKDg4KAdAKDgJ8DSMU/egoODgoAsAoOA8N/RxLNTVLSzU1SwJhBQkDBwMEDgrQCg4OCskAAwAA//gDgAMIAA8AHwAvAAATIiY9ATQ2MyEyFh0BFAYjASImPQE0NjMhMhYdARQGIwEiJj0BNDYzITIWHQEUBiMgDRMTDQNADRMTDfzADRMTDQNADRMTDfzADRMTDQNADRMTDQJ4Ew1QDRMTDVANE/7AEw1QDRMTDVANE/7AEw1QDRMTDVANEwAAAAAFAAD/gAQAA4AABwAPABcALQAxAAABLwE/AR8BBwUvAT8BHwEHAR8BDwEvATcTFhQHAQ4BIyImLwEmNDcBPgEzMhYXAzcnBwHAIEBAICBAQP7ANWtrNTVrawKLNWtrNTVra8ITE/0qCRgMDRcKqRMTAtYJGAwNFwp1rWatAsBAICBAQCAgwGs1NWtrNTX+lWs1NWtrNTUB7xM1E/0qCgkJCqkTNRMC1goJCQr+fK1mrQAAAAABACIAugJdAgAADAAAEyEyFgcBBiInASY2Mz8CAhsUE/7/DCEL/v4TFRsCADET/v4LCwECEzEAAAEAIgDAAl4CBgALAAAlISImNwE2MhcBFgYCQf3+GxUTAQILIgsBAhMVwDETAQILC/7+EzEAAAAAAQA6AGIBgAKeAAwAAAERFAYnASY0NwE2FhUBgDET/v4LCwECEzECgf3+GxUTAQILIgsBAhMVGwABAAAAYgFGAp4ADAAANxE0NhcBFhQHAQYmNQAxEwECCwv+/hMxfwICGxUT/v4LIgv+/hMVGwAAAAEAAP+AAnkDgAAZAAABMhYHAQ4BIyImNxMjIiY3Ez4BMyEyFgcDMwJQHBsO/qAGFwwXHQVc7RYcAkADGxIBIBgcBlXnAkAwGP2gCw0kFwGFIRUB4BIYJhb+/AAAAwAA/4ACwAOAABIANABKAAAXNSEVFAYPAQ4BKwEiJi8BLgE1AzQ3PgE3NjMyFx4BFxYVFAYHDgEHHAExITA0NS4BJy4BNSUyNjU0JiMiBw4BBwYVFBYzMjY1NDbAAUAGBSIJHBB8EBwJIgUGwBoaXkBATUlAQV8cHC4pGUEP/sAPQRkpLgFgDRMTDS4pKT0REhMNDRNeDU1NCRIIMw0QEA0zCBIJAi1GP0BhHR0bHGBAQElDdi8caTEBAQEBMWkcL3ZDoBMNDRMSET0pKS4NExMNQl4AAAAAAgAA/8ADgANAAA8AMwAAATIWFREUBiMhIiY1ETQ2MwE1NCYrATU0JisBIgYdASMiBh0BFBY7ARUUFjsBMjY9ATMyNgMgKDg4KP1AKDg4KAKADgq4DgpwCg64Cg4OCrgOCnAKDrgKDgNAOCj9QCg4OCgCwCg4/ghwCg64Cg4OCrgOCnAKDrgKDg4KuA4AAAAAAgAA/8AEAANAACAAQQAAATIWFREUBiMhIiY1ETQ3PgE3NjsBMhYdARQGKwEiBh0BITIWFREUBiMhIiY1ETQ3PgE3NjsBMhYdARQGKwEiBh0BA6AoODgo/wAoOBkZVzo7QhAUHBwUEDVL/mAoODgo/wAoOBkZVzo7QhAUHBwUEDVLAYA4KP8AKDg4KAHgQjs6VxkZHBRgFBxLNYA4KP8AKDg4KAHgQjs6VxkZHBRgFBxLNYAAAgAA/8AEAANAACAAQQAAATIWFREUBw4BBwYrASImPQE0NjsBMjY9ASMiJjURNDYzITIWFREUBw4BBwYrASImPQE0NjsBMjY9ASMiJjURNDYzA6AoOBkZVzo7QhAUHBwUEDVLoCg4OCj+wCg4GRlXOjtCEBQcHBQQNUugKDg4KANAOCj+IEI7OlcZGRwUYBQcSzWAOCgBACg4OCj+IEI7OlcZGRwUYBQcSzWAOCgBACg4AAAABwAA/4AEAAOAAAsAFwAjAC8AOwBHAFMAAAEUBiMiJjU0NjMyFgMyFhUUBiMiJjU0NgEyFhUUBiMiJjU0NgUUBiMiJjU0NjMyFhcyFhUUBiMiJjU0NiEyFhUUBiMiJjU0NgEyFhUUBiMiJjU0NgJgOCgoODgoKDhgKDg4KCg4OAHIKDg4KCg4OP1IOCgoODgoKDgaKDg4KCg4OAJ0KDg4KCg4OP3cKDg4KCg4OAMgKDg4KCg4OPz4OCgoODgoKDgBoDgoKDg4KCg4YCg4OCgoODjuOCgoODgoKDg4KCg4OCgoOAJMOCgoODgoKDgAAAAAAwAO/44D8gNyACUATABcAAAlFhQPAQYHBiInJicmJyY0NzY/ATYyHwEWFA8BBhQXFjI/ATYyFwMnJjQ/ATY3NjIXFhcWFxYUBwYPAQYiLwEmND8BNjQnJiIPAQYiJwEGIicBJjQ/ATYyFwEWFAcCYAcHWS04OHU4OCwtFhYWFi1ZBxQHTwcHWSoqKngqWQcUByJPBwdZLTg4dTg4LC0WFhYWLVkHFAdPBwdZKioqeCpZBxQHAdYOKA78jQ4OLQ4oDgNzDg5UBxQHWS0WFhYWLSw4OHU4OC1ZBwdPBxQHWSp4KioqWQcHAbpPBxQHWS0WFhYWLSw4OHU4OC1ZBwdPBxQHWSp4KioqWQcH/TEODgNzDigOLQ4O/I0OKA4AAAAAAgAQ/5AD8ANwABsAMQAABSInLgEnJjU0Nz4BNzYzMhceARcWFRQHDgEHBgkBFjI/ATY0LwE3NjQvASYiBwEGFBcCAGdaWocnJycnh1paZ2daWocnJycnh1pa/rUBDw4oDiIODsvLDg4iDigO/vEODnAnJ4daWmdnWlqHJycnJ4daWmdnWlqHJycBzv7xDg4iDigOy8sOKA4iDg7+8Q4oDgAAAAACABD/kAPwA3AAGwAxAAABMhceARcWFRQHDgEHBiMiJy4BJyY1NDc+ATc2CQEmIg8BBhQfAQcGFB8BFjI3ATY0JwIAZ1pahycnJyeHWlpnZ1pahycnJyeHWloBS/7xDigOIg4Oy8sODiIOKA4BDw4OA3AnJ4daWmdnWlqHJycnJ4daWmdnWlqHJyf+MgEPDg4iDigOy8sOKA4iDg4BDw4oDgAAAAIAEP+QA/ADcAAbADEAABM0Nz4BNzYzMhceARcWFRQHDgEHBiMiJy4BJyYJAQYUHwEWMj8BFxYyPwE2NCcBJiIHECcnh1paZ2daWocnJycnh1paZ2daWocnJwHO/vEODiIOKA7Lyw4oDiIODv7xDigOAYBnWlqHJycnJ4daWmdnWlqHJycnJ4daWgFL/vEOKA4iDg7Lyw4OIg4oDgEPDg4AAAAAAgAQ/5AD8ANwABsAMQAAARQHDgEHBiMiJy4BJyY1NDc+ATc2MzIXHgEXFgkBNjQvASYiDwEnJiIPAQYUFwEWMjcD8Ccnh1paZ2daWocnJycnh1paZ2daWocnJ/4yAQ8ODiIOKA7Lyw4oDiIODgEPDigOAYBnWlqHJycnJ4daWmdnWlqHJycnJ4daWv61AQ8OKA4iDg7Lyw4OIg4oDv7xDg4AAAACAAD/gAOAA4AAMAA+AAABMhYVERQGIyEiJjURNDY7ATU0Nz4BNzYzMhceARcWHQEUBisBIiY9ATQmBw4BHQEhATU0JiMiBh0BFBYzMjYDICg4OCj9QCg4OCgwGBdTNzc/Pzg3UxgYHBRAFBxVPDxTAfD+8C8hIS8vISEvAYA4KP7AKDg4KAFAKDjNPzg4UxgZGBdTODc/IBQcHBQgPFUBAVU8zv7QYCEvLyFgIS8vAAMAEADwA/ACEAALABcAIwAAARQGIyImNTQ2MzIWNzIWFRQGIyImNTQ2ITIWFRQGIyImNTQ2ApBUPDxUVDw8VNA8VFQ8PFRU/Xw8VFQ8PFRUAYA8VFQ8PFRUVFQ8PFRUPDxUVDw8VFQ8PFQAAAMAMP+QAVADcAALABcAIwAAEzIWFRQGIyImNTQ2JzQ2MzIWFRQGIyImETQ2MzIWFRQGIyImwDxUVDw8VFRUVDw8VFQ8PFRUPDxUVDw8VAIQVDw8VFQ8PFTQPFRUPDxUVP18PFRUPDxUVAAAAAIAEP+QA/ADcAAbACcAAAEyFx4BFxYVFAcOAQcGIyInLgEnJjU0Nz4BNzYBNjQnJSYGFREUFjcCAGdaWocnJycnh1paZ2daWocnJycnh1paAU4ZGf6gFzAwFwNwJyeHWlpnZ1pahycnJyeHWlpnZ1pahycn/eAOOA7WDRsc/mAcGw0AAAIAAP/AA4ADQAAPAB8AAAEyFhURFAYjISImNRE0NjMTITI2PQE0JiMhIgYdARQWAyAoODgo/UAoODgoWAIQCg4OCv3wCg4OA0A4KP1AKDg4KALAKDj98A4KcAoODgpwCg4AAAACAAD/wAOAA0AADwAlAAAFISImNRE0NjMhMhYVERQGJQE2NC8BJiIHAScmIg8BBhQfARYyNwMg/UAoODgoAsAoODj+PwFwCQkuCRsJ/tSMCRsJLgkJ0AoaCkA4KALAKDg4KP1AKDjEAXAJGwkuCQn+1IwJCS4JGwnQCQkAAgAA/8ADgANAAA8AGwAAAREUBiMhIiY1ETQ2MyEyFgEXFjI/ATYmIyEiBgOAOCj9QCg4OCgCwCg4/Tn2BxQH9gsMEP4UEAwC4P1AKDg4KALAKDg4/r/2Bwf2Cx4eAAAAAgAA/8ADgANAAA8AHAAANxE0NjMhMhYVERQGIyEiJgEnJiIPAQYWMyEyNicAOCgCwCg4OCj9QCg4Asf2BxQH9gsMEAHsEAwLIALAKDg4KP1AKDg4AUH2Bwf2Cx4eCwAAAgAA/8ADgANAAA8AHAAAEyEyFhURFAYjISImNRE0NgE3NjQvASYGFREUFjdgAsAoODgo/UAoODgBQfYHB/YLHh4LA0A4KP1AKDg4KALAKDj9OfYHFAf2CwwQ/hQQDAsAAwAT/5MD7QNtAAsAMwBPAAABMhYVFAYjIiY1NDYFFhQPARcWBi8BBwYiLwEHBiY/AScmND8BJyY2HwE3NjIfATc2Fg8BAzY3NjQnJicmJyYiBwYHBgcGFBcWFxYXFjI3NgIAT3FxT09xcQI8ExS9QwceFcleCisJX8kUHgdDvhMTvkMHHhTJXwoqCl/JFB4HQ3olExMTEyUlMC9iLzAlJRMTExMlJTAvYi8wAkBxT09xcU9PcaEKKgpfyRQeB0O+ExO+QwceFMlfCioKX8kUHgdDvhMTvkMHHhXI/s0lMC9iLzAlJRMTExMlJTAvYi8wJSUTExMTAAABADb/gAPEA4AALAAABSInLgEnJjU0Nz4BNzYzMhYXHgEHBgcOAQcGFRQXHgEXFjc2FgcGBw4BBwYjAjZqXV2LKCkpKItdXWoYLxcQBg8vJSY0Dg8oKIRWVl0QEgskLC1lODg8gCgpi11dampdXosoKAQFAyEIGyUmWjM0Nl5QUG0YGBEDHA0tIyMxDQ0AAAACAAD/kwQAA4AASgBZAAABDgErARUUBgcXFhQHBiIvAQ4BIxE0JisBIgYVESImJwcGIicmND8BLgE9ASMiJicmNjsBNScmNDc2Mh8BITc2MhcWFA8BFTMyFgcBMhceARcWFSE0Nz4BNzYEAAEmGm8ODXgTExI2Em4lXDQOCjAKDjRcJW4SNhITE3gNDm8aJgEBJhtwXRMTEjYSbgHKbhI2EhMTXXAbJgH+Ai4pKT0REv5AEhE9KSkBPhokICE9HHkSNhITE20eIgHoCg4OCv4YIh5tExMSNhJ5HD0hICQaGyd1XhI2EhMTbW0TExI2El51JxsCQhIRPSkpLi4pKT0REgAAAAIAAP/AA4ADQAAPABwAAAUhIiY1ETQ2MyEyFhURFAYBBwYUHwEWNjURNCYHAyD9QCg4OCgCwCg4OP6/9gcH9gseHgtAOCgCwCg4OCj9QCg4Asf2BxQH9gsMEAHsEAwLAAUAAABABQACwAAKABQAXgBoAIIAAAEXIzc+ATEzMBYXATIWFREUBiMhEQU1NCYrATU0JisBIgYdASMiBh0BFBY7AQ4BBy4BJy4BDwIOARceARcOAQcOAR8BHgE3PgE3HgEXFjY/ATYmJy4BJz4BNzMyNjUlNDYzIREhIiY1NwYWOwEyNj8BMxceATsBMjYnAy4BKwEiBgcBMBZMFgULAQoFA6AUHBwU/dACAA4KgA4KIAoOgAoODgrlCh4UChIHBhIIDw0JBAYJFQwMGg4JBQUQBRQIEyQQESMTCRMFEAUFCA0bDB8sChcKDvtgHBQCMP3QFBx2BA4NLQgNAhN4EwINCC4MDgRzAg0HQQgNAgGoS0sSMDASARgcFP3gFBwCgPAgCg4gCg4OCiAOCiAKDhUsFQoVCggEBQgIBRUIDRoNCRIJBRMIHAkFBQwZDQ0ZDAUFCRwIEwUIEwkiRyMOCsAUHP2AHBRwDBQKB0BABwoUDAFSBwkJBwABAED/wAOAA0AAKgAAARUUBisBERQGKwEiJjURIxEUBisBIiY9ASMiJy4BJyY1NDc+ATc2MyEyFgOAEw1gEw1ADRNAEw1ADRNAQjs6VxkZGRlXOjtCAeANEwMgQA0T/SANExMNAuD9IA0TEw3gGRlXOjtCQjs6VxkZEwAAAQAA/4ADgAOAADYAAAEyFhUUBiMiJjU4ATE0NjcnDgEjIiY1NDYzMhYXNy4BNTQ2MzIWFRQGIyImJwceARUUBgcXPgECwFBwcFBQcAIDzRk9IlBwcFAiPRnNAwJwUFBwcFAiPRnNAwICA80ZPQEAcFBQcHBQCxUKgBQWcFBQcBYUgAoVC1BwcFBQcBYUgAoVCwsVCoAUFgACAAD/gAOAA4AAHQAoAAABMhYdARQGIyEiJj0BNDY7ATc+ATsBOAExMhYfATMBAyEDDgEjISImJwNgDRMTDfzADRMTDfATBhYO5Q4XBhPw/QoqAwAqAzcm/hQmNwMDQBMNQA0TEw1ADRMlDA8PDCX8mgKm/VomNDQmAAAAAwAAAAAEgAMAAB0AOQBQAAABMhceARcWFRQHDgEHBiMhIicuAScmNTQ3PgE3NjMBFBceARcWMzI3PgE3NjU0Jy4BJyYjIgcOAQcGATI3PgE3NjU0Jy4BJyYrARYXFhQHBgcDAFBFRmkeHh4eaUZFUP6AUEVGaR4eHh5pRkVQ/wAUFEYuLzU1Ly5GFBQUFEYuLzU1Ly5GFBQCgDUvLkYUFBQURi4vNWIxGRgYGTEDAB4eaUZFUFBFRmkeHh4eaUZFUFBFRmkeHv6ANS8uRhQUFBRGLi81NS8uRhQUFBRGLi/+yxQURi4vNTUvLkYUFDdCQopCQjcAAAACAAAAAASAAwAAHQA5AAABMhceARcWFRQHDgEHBiMhIicuAScmNTQ3PgE3NjMBMjc+ATc2NTQnLgEnJiMiBw4BBwYVFBceARcWAwBPRkZpHh4eHmlGRVD+gE9GRmkeHh4eaUZFUAGANS8uRhQUFBRGLi81NS8uRhQUFBRGLi8DAB4eaUZFUE9GRmkeHh4eaUZFUE9GRmkeHv2AFBRGLi81NS8uRhQUFBRGLi81NS8uRhQUAAADAAAAQAUAAsAABwAhACUAAAEhESE1MzUjEzIWHQEzMhYVERQGKwEVFAYjISImNRE0NjMFESERBED8QAPAQEAgKDgQFBwcFBA4KPwAKDg4KAOg/MACQP6AgIABADgoIBwU/uAUHCAoODgoAcAoOMD/AAEAAAMAAABABQACwAAHACEAJQAAASERITUzNSMTMhYdATMyFhURFAYrARUUBiMhIiY1ETQ2MwURIREEQPxAA8BAQCAoOBAUHBwUEDgo/AAoODgoAuD9gAJA/oCAgAEAOCggHBT+4BQcICg4OCgBwCg4wP8AAQAAAwAAAEAFAALAAAcAIQAlAAABIREhNTM1IxMyFh0BMzIWFREUBisBFRQGIyEiJjURNDYzBREhEQRA/EADwEBAICg4EBQcHBQQOCj8ACg4OCgCIP5AAkD+gICAAQA4KCAcFP7gFBwgKDg4KAHAKDjA/wABAAADAAAAQAUAAsAABwAhACUAAAEhESE1MzUjEzIWHQEzMhYVERQGKwEVFAYjISImNRE0NjMFESERBED8QAPAQEAgKDgQFBwcFBA4KPwAKDg4KAFg/wACQP6AgIABADgoIBwU/uAUHCAoODgoAcAoOMD/AAEAAAIAAABABQACwAAHACEAAAEhESE1MzUjEzIWHQEzMhYVERQGKwEVFAYjISImNRE0NjMEQPxAA8BAQCAoOBAUHBwUEDgo/AAoODgoAkD+gICAAQA4KCAcFP7gFBwgKDg4KAHAKDgAAAAAAwAQ/5AD8ANwABsAKwA7AAABMhceARcWFRQHDgEHBiMiJy4BJyY1NDc+ATc2ExE0JisBIgYVERQWOwEyNjcRNCYrASIGFREUFjsBMjYCAGdaWocnJycnh1paZ2daWocnJycnh1paRxMNYA0TEw1gDRPgEw1gDRMTDWANEwNwJyeHWlpnZ1pahycnJyeHWlpnZ1pahycn/XABQA0TEw3+wA0TEw0BQA0TEw3+wA0TEwACABD/kAPwA3AAGwArAAABMhceARcWFRQHDgEHBiMiJy4BJyY1NDc+ATc2ARE0JiMhIgYVERQWMyEyNgIAZ1pahycnJyeHWlpnZ1pahycnJyeHWloBJxMN/sANExMNAUANEwNwJyeHWlpnZ1pahycnJyeHWlpnZ1pahycn/XABQA0TEw3+wA0TEwAAAAEAEP+QA/ADcABEAAABMhceARcWFRQHDgEHBiMiJy4BJyYnLgE/ATYyFx4BMzI3PgE3Njc2Jy4BJyYHDgEHFxYGIyEiJjURNDYfATY3PgE3NjMB/2daW4cnJycnh1paZzAtLlQmJiEIAQhPBxMHLnE+Rj0+WhoaAQEbG10+PkVAdC5TFxkg/vQUHDsXRyInJ1YvLzIDcCcnh1paZ2daWocnJwkJIRcYHgcUCE8HBigrGxpbPTxESD4+XBoaAQEuLFMXOxwUAQwgGRdHHxoZJAkKAAAABQAA/4ADgAOAAAkAFwAlADMAUQAAFxEhERQGIyEiJgERFBYzMjY1ETQmIyIGBxEUFjMyNjURNCYjIgYHERQWMzI2NRE0JiMiBgEyFh0BFAYjISImPQE0NjsBNz4BOwE4ATEyFh8BM0ADADgo/cAoOAIgEw0NExMNDRPAEw0NExMNDRPAEw0NExMNDRMCgA0TEw38wA0TEw3wEwYWDuUOFwYT8CACoP1gKDg4Aij+QA0TEw0BwA0TEw3+QA0TEw0BwA0TEw3+QA0TEw0BwA0TEwFTEw1ADRMTDUANEyUMDw8MJQAAAgAQ/5AD8ANwACsAWAAAAS4BIyIHDgEHBgcOASsBIiY3Njc+ATc2MzIXHgEXFhc3NhYVERQGIyEiJjcFITIWDwEeATMyNz4BNzY3PgE7ATIWBwYHDgEHBiMiJy4BJyYnBwYmNRE0NjMC5S53QDo1NVYfHw4CDQhzCw4CECwsgVJRWzIvL1cnJyJHFzscFP70IBkX/a4BDCAZF1Mud0A6NTVWHx8OAg0IcwsOAhAsLIFSUVsyLy9XJyciRxc7HBQCdSwvExNDLy44CAoRC1dJSmwfHwkKJBkZIEcXGSD+9BQcOxfyOxdTLC8TE0MvLjgIChELV0lKbB8fCQokGRkgRxcZIAEMFBwAAQAQ/5AD8ANwAEQAAAEyFx4BFxYXNzYWFREUBiMhIiY/AS4BJyYHDgEHBhcWFx4BFxYzMjY3NjIfARYGBwYHDgEHBiMiJy4BJyY1NDc+ATc2MwIBMi8vVicnIkcXOxwU/vQgGRdTLnRART4+XRsbAQEaGlo+PUY+cS4HEwdPCAEIISYmVC4tMGdaWocnJycnh1taZwNwCgkkGRofRxcZIP70FBw7F1MsLgEBGhpcPj5IRDw9WxobKygGB08IFAceGBchCQknJ4daWmdnWlqHJycAAAABAAD/wAOAA0AASAAAJRUUBiM4ATEjIiY/AScHFxYGKwEiJjU4ATE1NDYfATcnBwYmPQE0NjM4ATEzMhYPARc3JyY2OwEyFhU4ATEVFAYvAQcXNzYWFQOAHBTgIBkXSNbWSBcZIOAUHDsXSNfXSBc7HBTgIBkXSNbWSBcZIOAUHDsXSNfXSBc70OAUHDsXSNfXSBc7HBTgIBkXSNbXSRcZIOAUHDsXSNfXSBc7HBTgIBkXSNbXSRcZIAAAAAIAAP+ABAADgAAeADoAAAEyFhURFAYjISImNRE0NjMhMhYdARQGIyERITU0NjMTMhYVERQGLwEBDgEjIiYvAS4BNTQ2NwEnJjYzA2ANEzgo/UAoODgoAUANExMN/uACgBMNsBQcOxdH/hgGEgoKEQctBwcHBwHnRxcZIAEAEw3/ACg4OCgCwCg4Ew1ADRP9gOANEwKAHBT/ACAYFkf+GQcHBwctBxEKChIGAehHFzsAAgAA/8AFAANAADcATQAAARYXHgEXFhUUBw4BBwYjISInLgEnJjU0Nz4BNzY3PAE1NDc+ATc2MzIXHgEXFhc+ATMyFhUUBgcFNiYrATU0JisBIgYdASMiBh8BFjI3BDMsJSY3DxAUFEYuLzX9IDw0NU4WFw4PMyMjKhkZVzo7QiwqKUcdHhQXNh5PcQcG/vYQERWDEw1gDRODFREQ0goaCgG7CRcXQioqLjUvLkYUFBcWTjU0PC8rK0caGw8ECARCOzpXGRkMCyoeHSQPEXFPEiMQshAn4A0TEw3gJxDSCgoAAAAAAgAA/8AFAANAADcATgAAARYXHgEXFhUUBw4BBwYjISInLgEnJjU0Nz4BNzY3PAE1NDc+ATc2MzIXHgEXFhc+ATMyFhUUBgcFMjYvASYiDwEGFjsBFRQWOwEyNj0BMwQzLCUmNw8QFBRGLi81/SA8NDVOFhcODzMjIyoZGVc6O0IsKilHHR4UFzYeT3EHBv7gFREQ0goaCtIQERWDEw1gDRODAbsJFxdCKiouNS8uRhQUFxZONTQ8LysrRxobDwQIBEI7OlcZGQwLKh4dJA8RcU8SIxB7JxDSCgrSECfgDRMTDeAAAgAA/8AEAANAAA8ANAAAATIWFREUBiMhIiY1ETQ2MwEnNzY0LwEmIg8BJyYiDwEGFB8BBwYUHwEWMj8BFxYyPwE2NCcDoCg4OCj8wCg4OCgCmYaGBwdRBxUHhYUHFQdRBweGhgcHUQcVB4WFBxUHUQcHA0A4KP1AKDg4KALAKDj9u4WFBxUHUQcHhoYHB1EHFQeFhQcVB1EHB4aGBwdRBxUHAAACABMAAAUAAwAAFAA5AAABMhYVERQGIyEiJicBJjQ3AT4BMyEDJzc2NC8BJiIPAScmIg8BBhQfAQcGFB8BFjI/ARcWMj8BNjQnBIA1S0s1/RsaLxL+0xMTAS0RLxoC5ql8fAkJLgkbCXx8CRsJLgkJfX0JCS4JGwl8fAkbCS4JCQMASzX+ADVLExIBLhI2EgEtEhT+BHx8CRsJLgkJfX0JCS4JGwl8fAkbCS4JCXx8CQkuCRsJAAAAAwAA/4ADAAOAABEAJwAyAAABFBYzIREUBiMhIiY1ETQ2MyETNiYrATU0JisBIgYdASMiBh8BFjI3AR4BHQEhETMyFhcBwBwUARAcFP1gFBwcFAGQmQ8QFoITDUANE4IWEA/BChwKAVoHB/8ADAoRBwJwFBz9cBQcHBQDoBQc/UkPKKANExMNoCgPvwoKAqQHEQoMAQAHBwADAAD/gAR2A4AACgAaADYAAAEVIREzMhYfAR4BARYUDwEGJj0BIzUzNTQ2FwUUFjMhERQGIyEiJjURNDYzIREUFjMhESEiBhUDAP8ADAoRB8QHBwF2Cgq/ECeAgCcQ/ckTDQFgHBT9YBQcHBQBkBwUARD+oA0TAowMAQAHB8QHEf6CChwKwQ8QFoKAghYQD/kNE/7wFBwcFAOgFBz+8BQc/wATDQAAAAADAAD/gAQAA4AACQAUADcAABMzFSMiJj0BNDYBHgEdASERMzIWFwMUFjMhERQGIyEiJjURIRUUFj8BNjQvASYGHQEhETQ2MyERIODgDRMTA98HB/8ADAoRB24cFAEQHBT9YBQcAQAnEL8KCr8PKP8AHBQBkAFAgBMNQA0TAW4HEQoMAQAHB/7+FBz9cBQcHBQBEIIWEA/BChwKwQ8QFoICEBQc/vAAAAADAAD/gAMAA4AAEQAoADMAAAEUFjMhERQGIyEiJjURNDYzIRMyNi8BJiIPAQYWOwEVFBY7ATI2PQEzEx4BHQEhETMyFhcBwBwUARAcFP1gFBwcFAGQghYQD8EKHArBDxAWghMNQA0TgrAHB/8ADAoRBwJwFBz9cBQcHBQDoBQc/UAoD78KCr8PKKANExMNoAHuBxEKDAEABwcAAAACABP/gAQdA4AAIQAoAAABHgEPARMWBiMiJiclBQ4BIyImNxMnJjY3JRM+ATMyFhcTEzclJxEXAwP5Jxkc1DIFKRwHDwf++v76Bw8IHCgFMtQcGScBJYMIIBERIAmCMqX+6Xz5MAIpBksczv7dHywEA4qJBAQsHwEjzhxLBisBCBISEhL++P7foCn8/YWCARQAAAAAAgAAAA4D9wLyABEANQAAATYWFREUBi8BIyImNRE0NjsBBRcWFA8BBiIvAQcGIi8BJjQ/AScmND8BNjIfATc2Mh8BFhQHAa4XOzsXsswUHBwUzAKfXAkJLgoaCltbChoKLgkJXFwJCS4KGgpbWwoaCi4JCQLyFhgg/WAgGBayHBQBIBQcwFsKGgouCQlcXAkJLgoaCltbChoKLgkJXFwJCS4KGgoAAAAABAAJ/4kD9wN3ABYALABCAFgAAAEyFh0BFAYvAQcGIi8BJjQ/AScmNjsBNyImPQE0Nh8BNzYyHwEWFA8BFxYGIwMXFhQPAQYiLwEHBiY9ATQ2OwEyFgcBNhYdARQGKwEiJj8BJyY0PwE2Mh8BAZAUHDsXPscJGwkzCQnHQhcZIODgFBw7Fz7HCRsJMwkJx0IXGSAgxwkJMwkbCcc+FzscFOAgGRf9/Bc7HBTgIBkXQscJCTMJGwnHAUAcFOAgGRdCxwkJMwkbCcc+FzuAHBTgIBkXQscJCTMJGwnHPhc7/vDHCRsJMwkJx0IXGSDgFBw7FwIEFhgg4BQcOxc+xwkaCjMJCccAAAAABAAA/5YD9wOAABUANABAAEwAACUWFA8BBiIvAS4BNycjAzcFFRc2FhcnIgYHJyY2Nz4BFx4BDwEfATc2FhcWBgcOAQcnLgEjBwYWFwcGIicmNDcBAzI2NTQmIyIGFRQWA+oWFmkWPhbqIg4U1XzAgAEA1SpeI2kMGQykASgrOJJHDggKlReHlQobAxImNxQsGCceTSvPCAYM+CVqJiUlATHWFBwcFBQcHGkWPhZpFhbqI14q1QEAgMB81RQOImsDA6Q5bCs3JhIDGwqViBaVCggNR5M4Ex0LJx4gpCBAHfglJSZqJQEx/kUcFBQcHBQUHAAAAAMAAP+AA4ADgAAKACMAQQAAFwMhAw4BIyEiJicTBhY7ARUUFjsBMjY9ATMyNi8BLgEjIgYHATIWHQEUBiMhIiY9ATQ2OwE3PgE7ATgBMTIWHwEzaioDACoDNyb+FCY3A40PEBVzEw1ADRNzFREQsgULBwcLBQG3DRMTDfzADRMTDfATBhYO5Q4XBhPwJgKm/VomNDQmAWAQKuANExMN4CoQvAUFBQUBShMNQA0TEw1ADRMlDA8PDCUAAAAAAwAA/4ADgAOAAAkAIgBAAAAXESERFAYjISImEwYWOwEVFBY7ATI2PQEzMjYvAS4BIyIGBwEyFh0BFAYjISImPQE0NjsBNz4BOwE4ATEyFh8BM0ADADgo/cAoOLcPEBVzEw1ADRNzFREQsgULBwcLBQG3DRMTDfzADRMTDfATBhYO5Q4XBhPwIAKg/WAoODgBghAq4A0TEw3gKhC8BQUFBQFKEw1ADRMTDUANEyUMDw8MJQAAAQAAAAEAAII1aM1fDzz1AAsEAAAAAADcXxJIAAAAANxfEkgAAP+ABQADgAAAAAgAAgAAAAAAAAABAAADgP+AAAAFAAAAAAAFAAABAAAAAAAAAAAAAAAAAAAAfAQAAAAAAAAAAAAAAAAAAAAEAAAABAAAEgSAADwEAAAPAsAAEgQAAAAEAAAABAAAEAQAACYEgAAABAAAAAOAAAACAAAAAwAAAASAAAADAAAAA4AAgAQAAAAEAAAXA4AAAAOAAAADgAAABAAAAAQAAAADgACAA4AAAAKAAEUCgABFBAAAEAQAABAEAAAQBAAAEAQAABAEAAAQBAAAEAOAAA4DgAAAA4AAGQOAABkDgAAAA4AAAAOAAAADgAAABAAAEASAAAAFAAAABIAADQOAABkDgAAZBIAAPAMAAAAEAAAAA4AAAASAAAAEAAAWBQAAAAOAAAADgAAABAAAAAKAACICgAAiAYAAOgGAAAACgAAAAsAAAAOAAAAEAAAABAAAAAQAAAAEAAAOBAAAEAQAABAEAAAQBAAAEAOAAAAEAAAQAYAAMAQAABADgAAAA4AAAAOAAAADgAAAA4AAAAQAABMEAAA2BAAAAAOAAAAFAAAAA4AAQAOAAAADgAAABIAAAASAAAAFAAAABQAAAAUAAAAFAAAABQAAAAQAABAEAAAQBAAAEAOAAAAEAAAQBAAAEAOAAAAEAAAABQAAAAUAAAAEAAAABQAAEwMAAAAEgAAABAAAAAMAAAAEMAATBAAAAAQAAAkEAAAAA4AAAAOAAAAAAAAAAAoAFAAeAIoAygD8ASYBYAH4AnwC8gOEBAIEaASmBMYFCgW+BdQGAAY8BmgGggayBs4G/Ac4B2QHlgfAB+wIRgiKCO4JQAm+CiIKhgq6Cu4LIgtWC8QMMAxkDIAM1g1mDg4OUA58DqYOyA8KD3IPuBAOEMwRIBFuEbQSDhIqEkYSYhJ+EqwTGBNgE7oUFBSMFRwVbhXAFhIWZBa8FvIXKBdqF5wX2hgKGDoYahjmGS4ZsBngGpwa2hsmG2Qb4Bw6HHQcrhzoHSIdVh2uHfQeXh7QH1QfviAcIHQg5iFYIaoiBiJSIqYi+iNII5Ij5iRqJOQlQiWcAAAAAQAAAHwAgwAHAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAwAAAABAAAAAAACAAcAjQABAAAAAAADAAwARQABAAAAAAAEAAwAogABAAAAAAAFAAsAJAABAAAAAAAGAAwAaQABAAAAAAAKABoAxgADAAEECQABABgADAADAAEECQACAA4AlAADAAEECQADABgAUQADAAEECQAEABgArgADAAEECQAFABYALwADAAEECQAGABgAdQADAAEECQAKADQA4HNjLWljb25zLTkwMABzAGMALQBpAGMAbwBuAHMALQA5ADAAMFZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMHNjLWljb25zLTkwMABzAGMALQBpAGMAbwBuAHMALQA5ADAAMHNjLWljb25zLTkwMABzAGMALQBpAGMAbwBuAHMALQA5ADAAMFJlZ3VsYXIAUgBlAGcAdQBsAGEAcnNjLWljb25zLTkwMABzAGMALQBpAGMAbwBuAHMALQA5ADAAMEZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("woff")}</style>
<style id="style-font-emoji" type="text/css">@font-face{font-family:color-emoji;src:local("Twemoji Mozilla"),local("Apple Color Emoji"),local("Segoe UI Emoji"),local("Segoe UI Symbol"),local("Noto Color Emoji"),local("EmojiOne Color"),local("Android Emoji")}</style>
<style id="style-core" type="text/css">#store-area,tw-storydata{display:none!important;z-index:0}::-webkit-scrollbar{height:8px;width:8px}::-webkit-scrollbar-corner,::-webkit-scrollbar-track{background-color:#111}::-webkit-scrollbar-thumb{background-color:#333;border:1px solid #111}*{scrollbar-color:#333 #111;scrollbar-width:thin}:-webkit-full-screen{height:100%;width:100%}:-ms-fullscreen{height:100%;width:100%}:fullscreen{height:100%;width:100%}body::-ms-backdrop{background:0 0}:focus{outline:thin dotted}:disabled{cursor:not-allowed!important}html{font-family:-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Cantarell,Ubuntu,"Helvetica Neue",Helvetica,Arial,sans-serif,color-emoji;font-size:16px;line-height:1}body{color:#eee;background-color:#111;overflow:auto}a{cursor:pointer;color:#68d;text-decoration:none;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s}a:hover,html[data-outlines] a:focus{color:#8af;text-decoration:underline}a.link-broken{color:#c22}a.link-broken:hover,html[data-outlines] a.link-broken:focus{color:#e44}a[disabled],span.link-disabled{color:#aaa;cursor:not-allowed!important;text-decoration:none}a.link-internal{-webkit-touch-callout:none}area{cursor:pointer}button{cursor:pointer;color:#eee;background-color:#35a;border:1px solid #57c;line-height:normal;padding:.4em;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}button:hover,html[data-outlines] button:focus{background-color:#57c;border-color:#79e}button:disabled{background-color:#444;border:1px solid #666}code,kbd,pre,samp,var{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Lucida Console","Courier New",Courier,monospace,monospace}pre{overflow:auto}input,select,textarea{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}select{padding:.34em .4em}input[type=text]{min-width:18em}textarea{min-width:30em;resize:vertical}input[type=checkbox],input[type=file],input[type=radio],select{cursor:pointer}input[type=range]{-webkit-appearance:none;min-height:1.2em}input[type=range]:focus{outline:0}input[type=range]::-webkit-slider-runnable-track{background:#222;border:1px solid #444;border-radius:0;cursor:pointer;height:10px;width:100%}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:18px;margin-top:-5px;width:33px}input[type=range]:focus::-webkit-slider-runnable-track{background:#222}input[type=range]::-moz-range-track{background:#222;border:1px solid #444;border-radius:0;cursor:pointer;height:10px;width:100%}input[type=range]::-moz-range-thumb{background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:18px;width:33px}input[type=range]::-ms-track{background:0 0;border-color:transparent;color:transparent;cursor:pointer;height:10px;width:calc(100% - 1px)}input[type=range]::-ms-fill-lower{background:#222;border:1px solid #444;border-radius:0}input[type=range]::-ms-fill-upper{background:#222;border:1px solid #444;border-radius:0}input[type=range]::-ms-thumb{background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:16px;width:33px}html[data-outlines] input:focus,html[data-outlines] select:focus,html[data-outlines] textarea:focus,input:hover,select:hover,textarea:hover{background-color:#333;border-color:#eee}input:disabled,select:disabled,textarea:disabled{color:#333;background-color:transparent;border-color:#111}hr{display:block;height:1px;border:none;border-top:1px solid #eee;margin:1em 0;padding:0}audio,canvas,progress,video{max-width:100%;vertical-align:middle}.no-transition{-webkit-transition:none!important;-o-transition:none!important;transition:none!important}.error-view{background-color:#511;border-left:.5em solid #c22;display:inline-block;margin:.1em;max-width:100%;padding:0 .25em;position:relative}.error-view>.error-toggle{background-color:transparent;border:none;line-height:inherit;left:0;padding:0;position:absolute;top:0;width:1.75em}.error-view>.error-toggle:hover,html[data-outlines] .error-view>.error-toggle:focus{background-color:transparent}.error-view>.error{display:inline-block;margin-left:.25em}.error-view>.error-toggle+.error{margin-left:1.5em}.error-view>.error-source[hidden]{display:none}.error-view>.error-source:not([hidden]){background-color:rgba(0,0,0,.2);display:block;margin:0 0 .25em;overflow-x:auto;padding:.25em}.highlight,.marked{color:#ff0;font-weight:700;font-style:italic}.nobr{white-space:nowrap}.error-view>.error-toggle::before,.error-view>.error::before,[data-icon-after]::after,[data-icon-before]::before,[data-icon]::before,a.link-external::after{font-family:sc-icons!important;font-style:normal;font-weight:400;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}[data-icon]::before{content:attr(data-icon)}[data-icon-before]::before{content:attr(data-icon-before);margin-right:.35em}[data-icon-after]::after{content:attr(data-icon-after);margin-left:.35em}.error-view>.error-toggle::before{content:"\f0da"}.error-view>.error-toggle.enabled::before{content:"\f0d7"}.error-view>.error::before{content:"\f071";margin-right:.35em}a.link-external::after{content:"\f35d";margin-left:.25em}</style>
<style id="style-core-display" type="text/css">#story{z-index:10;margin:2.5em}@media screen and (max-width:1136px){#story{margin-right:1.5em}}#passages{max-width:54em;margin:0 auto}</style>
<style id="style-core-passage" type="text/css">.passage{line-height:1.75;text-align:left;-webkit-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.passage-in{opacity:0}.passage ol,.passage ul{margin-left:.5em;padding-left:1.5em}.passage table{margin:1em 0;border-collapse:collapse;font-size:100%}.passage caption,.passage td,.passage th,.passage tr{padding:3px}@media (prefers-reduced-motion:reduce){.passage{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}}</style>
<style id="style-core-macro" type="text/css">@-webkit-keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}@-o-keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}@keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}.macro-append-insert,.macro-linkappend-insert,.macro-linkprepend-insert,.macro-linkreplace-insert,.macro-prepend-insert,.macro-repeat-insert,.macro-replace-insert,.macro-timed-insert{-webkit-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.macro-append-in,.macro-linkappend-in,.macro-linkprepend-in,.macro-linkreplace-in,.macro-prepend-in,.macro-repeat-in,.macro-replace-in,.macro-timed-in{opacity:0}.macro-type-cursor::after{-webkit-animation:cursor-blink 1s infinite;-o-animation:cursor-blink 1s infinite;animation:cursor-blink 1s infinite;content:"\2590";opacity:1}</style>
<style id="style-ui-dialog" type="text/css">html[data-dialog] body{overflow:hidden}#ui-overlay{background-color:#000;height:200%;left:-50%;opacity:0;position:fixed;top:-50%;-webkit-transition:visibility .2s step-end,opacity .2s ease-in;-o-transition:visibility .2s step-end,opacity .2s ease-in;transition:visibility .2s step-end,opacity .2s ease-in;visibility:hidden;width:200%;z-index:100000}#ui-overlay.open{opacity:.8;-webkit-transition:visibility 0s;-o-transition:visibility 0s;transition:visibility 0s;visibility:visible}#ui-dialog{display:none;margin:0;max-width:66em;opacity:0;padding:0;position:fixed;top:50px;z-index:100100}#ui-dialog.open{display:block;opacity:1;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-dialog>*{-webkit-box-sizing:border-box;box-sizing:border-box}#ui-dialog-titlebar{background-color:#444;min-height:24px;position:relative}#ui-dialog-title{font-size:1.5em;margin:0;padding:.2em 3.5em .2em .5em;text-align:center;text-transform:uppercase}#ui-dialog-close{background-color:transparent;border:1px solid transparent;cursor:pointer;display:block;font-size:120%;height:92%;margin:0;padding:0;position:absolute;right:0;top:0;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;width:3.6em;font-family:sc-icons!important;font-style:normal;font-weight:400;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#ui-dialog-close:hover{background-color:#b44;border-color:#d66}#ui-dialog-body{background-color:#111;border:1px solid #444;height:calc(100% - 2.1em);line-height:1.5;min-width:300px;overflow:auto;padding:1em;text-align:left}#ui-dialog-body>:first-child{margin-top:0}#ui-dialog-body hr{background-color:#444}#ui-dialog-body ul.buttons{margin:0;padding:0;list-style:none}#ui-dialog-body ul.buttons li{display:inline-block;margin:0;padding:.4em .4em 0 0}#ui-dialog-body ul.buttons>li+li>button{margin-left:1em}@media (prefers-reduced-motion:reduce){#ui-overlay{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}#ui-overlay.open{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}#ui-dialog.open{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}}</style>
<style id="style-ui-dialog-saves" type="text/css">#ui-dialog-body.saves{padding:0 0 1px}#ui-dialog-body.saves>:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves>h2{background-color:#222;font-size:inherit;margin:0;padding:.1em 0 .1em .4em}#ui-dialog-body.saves table{border-spacing:0;width:100%}#ui-dialog-body.saves tr:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves td{padding:.33em}#ui-dialog-body.saves td:first-child{display:none!important}#ui-dialog-body.saves td:nth-child(3){line-height:1.2;width:100%}#ui-dialog-body.saves td:last-child{text-align:right}#ui-dialog-body.saves .empty{color:#999;speak:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.saves .details{font-size:75%;margin-left:.25em}#ui-dialog-body.saves #saves-list button{color:#eee;background-color:transparent;border:1px solid #444;height:2.237em;width:2.237em}#ui-dialog-body.saves #saves-list button:disabled{color:#444;border-color:#444}#ui-dialog-body.saves #saves-list button:not(:disabled):hover{background-color:#222;border-color:#ddd}#ui-dialog-body.saves #saves-list button.delete:not(:disabled),#ui-dialog-body.saves button[id=saves-clear]:not(:disabled){background-color:#911;border-color:#b33}#ui-dialog-body.saves #saves-list button.delete:not(:disabled):hover,#ui-dialog-body.saves button[id=saves-clear]:not(:disabled):hover{background-color:#b33;border-color:#d55}#ui-dialog-body.saves #saves-list button.load:not(:disabled){background-color:#161;border-color:#383}#ui-dialog-body.saves #saves-list button.load:not(:disabled):hover{background-color:#383;border-color:#5a5}#ui-dialog-body.saves .buttons li{padding:.4em}#ui-dialog-body.saves .buttons>li+li>button{margin-left:.2em}#ui-dialog-body.saves .buttons.slots>li:last-child{float:right}#ui-dialog-body.saves #saves-list button::before,#ui-dialog-body.saves .buttons button::before{font-family:sc-icons!important;font-style:normal;font-weight:400;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#ui-dialog-body.saves .buttons button::before{margin-right:.35em}#ui-dialog-body.saves button.delete::before{content:"\f2ed"}#ui-dialog-body.saves button.delete:disabled::before{content:"\f1f8"}#ui-dialog-body.saves button.load::before{content:"\f04b"}#ui-dialog-body.saves button.save::before{content:"\f0c7"}#ui-dialog-body.saves button[id=saves-export]::before{content:"\f56e"}#ui-dialog-body.saves button[id=saves-import]::before{content:"\f56f"}#ui-dialog-body.saves button[id=saves-clear]::before{content:"\f2ed"}#ui-dialog-body.saves button[id=saves-clear]:disabled::before{content:"\f1f8"}#ui-dialog-body.saves button[id=saves-disk-save]::before{content:"\f56d"}#ui-dialog-body.saves button[id=saves-disk-load]::before{content:"\f574"}</style>
<style id="style-ui-dialog-settings" type="text/css">#ui-dialog-body.settings [id|=setting-body]>div:first-child{display:table;width:100%}#ui-dialog-body.settings [id|=setting-label]{display:table-cell;padding:.4em 2em .4em 0}#ui-dialog-body.settings [id|=setting-label]+div{display:table-cell;min-width:8em;text-align:right;vertical-align:middle;white-space:nowrap}#ui-dialog-body.settings div[id|=header-body]{margin:1em 0}#ui-dialog-body.settings div[id|=header-body]:first-child{margin-top:0}#ui-dialog-body.settings div[id|=header-body]:not(:first-child){border-top:1px solid #444;padding-top:1em}#ui-dialog-body.settings div[id|=header-body]>*{margin:0}#ui-dialog-body.settings h2[id|=header-heading]{font-size:1.375em}#ui-dialog-body.settings p[id|=header-desc],#ui-dialog-body.settings p[id|=setting-desc]{font-size:87.5%;margin:0 0 0 .5em}#ui-dialog-body.settings div[id|=setting-body]+div[id|=setting-body]{margin:1em 0}#ui-dialog-body.settings [id|=setting-control]{white-space:nowrap}#ui-dialog-body.settings button[id|=setting-control]{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}#ui-dialog-body.settings button[id|=setting-control]:hover{background-color:#333;border-color:#eee}#ui-dialog-body.settings button[id|=setting-control].enabled{background-color:#282;border-color:#4a4}#ui-dialog-body.settings button[id|=setting-control].enabled:hover{background-color:#4a4;border-color:#6c6}#ui-dialog-body.settings input[type=range][id|=setting-control]{max-width:35vw}#ui-dialog-body.settings span[id|=setting-input]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.settings button[id|=setting-control].enabled::after,#ui-dialog-body.settings button[id|=setting-control]::after{font-family:sc-icons!important;font-style:normal;font-weight:400;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;margin-left:.35em}#ui-dialog-body.settings button[id|=setting-control]::after{content:"\f204"}#ui-dialog-body.settings button[id|=setting-control].enabled::after{content:"\f205"}</style>
<style id="style-ui-dialog-legacy" type="text/css">#ui-dialog-body.list{padding:0}#ui-dialog-body.list ul{margin:0;padding:0;list-style:none;border:1px solid transparent}#ui-dialog-body.list li{margin:0}#ui-dialog-body.list li:not(:first-child){border-top:1px solid #444}#ui-dialog-body.list li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-decoration:none}#ui-dialog-body.list li a:hover{background-color:#333;border-color:#eee}#ui-dialog-body.list a{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}</style>
<style id="style-ui-bar" type="text/css">#story{margin-left:20em;-webkit-transition:margin-left .2s ease-in;-o-transition:margin-left .2s ease-in;transition:margin-left .2s ease-in}#ui-bar.stowed~#story{margin-left:4.5em}@media screen and (max-width:1136px){#story{margin-left:19em}#ui-bar.stowed~#story{margin-left:3.5em}}@media screen and (max-width:768px){#story{margin-left:3.5em}}#ui-bar{background-color:#222;border-right:1px solid #444;height:100%;left:0;margin:0;padding:0;position:fixed;text-align:center;top:0;-webkit-transition:left .2s ease-in;-o-transition:left .2s ease-in;transition:left .2s ease-in;width:17.5em;z-index:50}#ui-bar.stowed{left:-15.5em}#ui-bar-tray{position:absolute;top:.2em;left:0;right:0}#ui-bar-body{height:calc(100% - 2.5em);line-height:1.5;margin:2.5em 0;overflow:auto;padding:0 1.5em}#ui-bar.stowed #ui-bar-body,#ui-bar.stowed #ui-bar-history{visibility:hidden;-webkit-transition:visibility .2s step-end;-o-transition:visibility .2s step-end;transition:visibility .2s step-end}#ui-bar a{text-decoration:none}#ui-bar hr{border-color:#444}#ui-bar-tray button{color:#eee;background-color:transparent;border:1px solid #444}#ui-bar-tray button:hover{background-color:#444;border-color:#eee}#ui-bar-tray button:disabled{color:#444;background-color:transparent;border-color:#444}button#ui-bar-toggle{border-right:none;position:absolute;right:0;top:0}#ui-bar-history{margin:0 auto}#ui-bar-history button:not(:first-child){margin-left:1.2em}#ui-bar-body>:not(:first-child){margin-top:2em}#story-title{margin:0;font-size:162.5%}#story-author{margin-top:2em;font-weight:700}#menu ul{margin:1em 0 0;padding:0;list-style:none;border:1px solid #444}#menu ul:empty{display:none}#menu li{margin:0}#menu li:not(:first-child){border-top:1px solid #444}#menu li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-transform:uppercase}#menu li a:hover{background-color:#444;border-color:#eee}#menu a,#ui-bar-tray button{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#menu-core li[id|=menu-item] a::before,#ui-bar-tray button::before{font-family:sc-icons!important;font-style:normal;font-weight:400;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#ui-bar-tray button::before{display:block;font-size:1.1em;width:1em}#ui-bar-toggle::before{content:"\f053"}#ui-bar.stowed #ui-bar-toggle::before{content:"\f054"}#ui-bar-tray #history-backward::before{content:"\f060"}#ui-bar-tray #history-jumpto::before{content:"\f0e7"}#ui-bar-tray #history-forward::before{content:"\f061"}#menu-item-continue a::before,#menu-item-restart a::before,#menu-item-saves a::before,#menu-item-settings a::before,#menu-item-share a::before{margin-right:.35em}#menu-item-continue a::before{content:"\f04b"}#menu-item-saves a::before{content:"\f0c7"}#menu-item-settings a::before{content:"\f013"}#menu-item-restart a::before{content:"\f011"}#menu-item-share a::before{content:"\f1e0"}@media (prefers-reduced-motion:reduce){#story{-webkit-transition:margin-left 0s;-o-transition:margin-left 0s;transition:margin-left 0s}#ui-bar{-webkit-transition:left 0s;-o-transition:left 0s;transition:left 0s}}</style>
<style id="style-ui-debug-bar" type="text/css">#debug-bar{background-color:#222;border-left:1px solid #444;border-top:1px solid #444;bottom:0;margin:0;max-height:95%;max-width:66em;min-width:300px;padding:.5em;position:fixed;right:0;z-index:99900}#debug-bar>div:not([id])+div{margin-top:.5em}#debug-bar>div>label{margin-right:.5em}#debug-bar>div>input[type=text]{min-width:8em;width:14em}#debug-bar>div>select{width:22em}#debug-bar-toggle{color:#eee;background-color:#222;border:1px solid #444;height:calc(100% + 1px);left:calc(-2em - 1px);position:absolute;top:-1px;width:2em}#debug-bar-toggle:hover{background-color:#333;border-color:#eee}#debug-bar-hint{bottom:.75em;font-size:4.5em;opacity:.33;pointer-events:none;position:fixed;right:.6em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}#debug-bar-watch{background-color:#222;border-left:1px solid #444;border-top:1px solid #444;bottom:calc(100% + 1px);font-size:.9em;left:-1px;max-height:280%;max-height:calc(95vh - 100%);position:absolute;overflow-x:hidden;overflow-y:scroll;right:0;z-index:99800}#debug-bar-watch[hidden]{display:none}#debug-bar-watch div{color:#999;font-style:italic;margin:1em auto;text-align:center}#debug-bar-watch table{width:100%}#debug-bar-watch tr:nth-child(2n){background-color:rgba(127,127,127,.15)}#debug-bar-watch td{padding:.2em 0}#debug-bar-watch td:first-child+td{padding:.2em .3em .2em .1em}#debug-bar-watch .watch-delete{background-color:transparent;border:none;color:#c00}#debug-bar-watch-all,#debug-bar-watch-clear{margin-left:.5em}#debug-bar-views-toggle,#debug-bar-watch-toggle{color:#eee;background-color:transparent;border:1px solid #444;margin-right:1em;padding:.4em}#debug-bar-views-toggle:hover,#debug-bar-watch-toggle:hover{background-color:#333;border-color:#eee}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle,html[data-debug-view] #debug-bar-views-toggle{background-color:#282;border-color:#4a4}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle:hover,html[data-debug-view] #debug-bar-views-toggle:hover{background-color:#4a4;border-color:#6c6}#debug-bar-hint::after,#debug-bar-passage-play::before,#debug-bar-toggle::before,#debug-bar-views-toggle::after,#debug-bar-watch .watch-delete::before,#debug-bar-watch-add::before,#debug-bar-watch-all::before,#debug-bar-watch-clear::before,#debug-bar-watch-toggle::after{font-family:sc-icons!important;font-style:normal;font-weight:400;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#debug-bar-toggle::before{content:"\f188"}#debug-bar-hint::after{content:"\f188\202f\f061"}#debug-bar-watch .watch-delete::before{content:"\f00d"}#debug-bar-watch-add::before{content:"\f067"}#debug-bar-watch-all::before{content:"\f0d0"}#debug-bar-watch-clear::before{content:"\f2ed"}#debug-bar-views-toggle::after,#debug-bar-watch-toggle::after{content:"\f204";margin-left:.35em}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle::after,html[data-debug-view] #debug-bar-views-toggle::after{content:"\f205"}#debug-bar-passage-play::before{content:"\f04b"}</style>
<style id="style-ui-debug-views" type="text/css">html[data-debug-view] .debug{padding:.25em;background-color:#234}html[data-debug-view] .debug[title]{cursor:help}html[data-debug-view] .debug.block{display:inline-block;vertical-align:middle}html[data-debug-view] .debug.invalid{text-decoration:line-through}html[data-debug-view] .debug.hidden,html[data-debug-view] .debug.hidden .debug{background-color:#555}html:not([data-debug-view]) .debug.hidden{display:none}html[data-debug-view] .debug[data-name][data-type].nonvoid::after,html[data-debug-view] .debug[data-name][data-type]::before{background-color:rgba(0,0,0,.25);font-family:monospace,monospace;white-space:pre}html[data-debug-view] .debug[data-name][data-type]::before{content:attr(data-name)}html[data-debug-view] .debug[data-name][data-type|=macro]::before{content:"<<" attr(data-name) ">>"}html[data-debug-view] .debug[data-name][data-type|=macro].nonvoid::after{content:"<</" attr(data-name) ">>"}html[data-debug-view] .debug[data-name][data-type|=html]::before{content:"<" attr(data-name) ">"}html[data-debug-view] .debug[data-name][data-type|=html].nonvoid::after{content:"</" attr(data-name) ">"}html[data-debug-view] .debug[data-name][data-type]:not(:empty)::before{margin-right:.25em}html[data-debug-view] .debug[data-name][data-type].nonvoid:not(:empty)::after{margin-left:.25em}html[data-debug-view] .debug[data-name][data-type|=special],html[data-debug-view] .debug[data-name][data-type|=special]::before{display:block}</style>
</head>
<body>
	<div id="init-screen">
		<div id="init-no-js"><noscript>JavaScript must be enabled to play.</noscript></div>
		<div id="init-lacking"><p>Browser lacks capabilities required to play.</p><p>Upgrade or switch to another browser.</p></div>
		<div id="init-loading"><div>Loading&hellip;</div></div>
	</div>
	<tw-storydata name="Pilgrim&#39;s Progreſs" startnode="516" creator="Twine" creator-version="2.10.0" format="SugarCube" format-version="2.37.3" ifid="462F9262-7702-43AE-87C5-9780E9A42B43" options="" tags="Singleplayer Fantasy Interactive-Fiction Story-Rich Minimalist Text-based Twine Male-protagonist Medieval" zoom="0.6" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">:root {
	--background: light-dark(whitesmoke, #111);
	--text: light-dark(#3d3d3d, silver);
	--text-dim: light-dark(darkgray, darkgray);

	--ui-bubble: light-dark(white, sienna);
	--ui-waters: light-dark(#E1EBEE, saddlebrown);
	--ui-named-npc: light-dark(#1773cd, dodgerblue);

	--link: light-dark(darkturquoise, darkturquoise);
	--link-hover: light-dark(turquoise, turquoise);
	--link-active: light-dark(dodgerblue, dodgerblue);
	--link-disable: light-dark(lightgray, dimgray);

	--border: light-dark(#d9d9d9, #444);
	--border-dim: light-dark(lightgray, #333);
	--border-hover: light-dark(#444, #eee);
	--border-disable: light-dark(darkgray, #222);

	--ui-button: light-dark(transparent, transparent);
	--ui-button-hover: light-dark(rgba(153, 153, 153, 0.25), #444);

	--ui-label: light-dark(dimgray, darkgray);
	--ui-label-dim: light-dark(darkgray, dimgray);
	--ui-label-active: light-dark(goldenrod, palegoldenrod);
	--ui-label-hover: light-dark(#3d3d3d, white);
	--ui-label-danger: light-dark(red, red);

	--ui-input: light-dark(white, #333);
	--ui-input-hover: light-dark(#eee, #eee);
	--ui-input-focus: light-dark(#3d93f5, #3d93f5);

	--ui-panel: light-dark(white, #444);
	--ui-panel-gradient: light-dark(#e9e9e9, #222);

	--ui-progress-dot: light-dark(#e8e8e8, #444);
	--ui-progress-line: light-dark(darkgray, #444);
	--ui-progress-hover-dot: light-dark(#efefef, white);
	--ui-progress-hover-line: light-dark(#3d3d3d, silver);
	--ui-progress-active-dot: light-dark(white, white);
	--ui-progress-active-line: light-dark(dodgerblue, dodgerblue);
	--ui-progress-complete-dot: light-dark(white, white);
	--ui-progress-complete-line: light-dark(darkturquoise, darkturquoise);

	--ui-scrollbar-thumb: light-dark(lightgray, #444);
	--ui-scrollbar-track: light-dark(transparent, transparent);
}

* {
	scrollbar-color: var(--ui-scrollbar-thumb) var(--ui-scrollbar-track);
}

html {
	color-scheme: light;
}
html.dark-mode {
	color-scheme: dark;
}

* {
  box-sizing: border-box;
}

html.font-sans {
     font-family: Dejavu Sans, Arial, Verdana, sans-serif;
}
html.font-serif {
     font-family: Garamond, Baskerville, Baskerville Old Face, Hoefler Text, Times New Roman, serif;
}
html.font-monospace {
	font-family: SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Lucida Console","Courier New",Courier,monospace,monospace;
}

#passages {
	max-width: 34em;
}
html.fontsize-large #passages {
	max-width: 40em;
}
html.fontsize-x-large #passages {
	max-width: 48em;
}
html.fontsize-xx-large #passages {
	max-width: 64em;
}

.passage {
	text-align: left;
	transition: opacity 0s;
	line-height: 1.4em;
	margin-bottom: 2.75em;
}
html.fontsize-large .passage {
	font-size: large;
}
html.fontsize-x-large .passage {
	font-size: x-large;
}
html.fontsize-xx-large .passage {
	font-size: xx-large;

}
html.fontsize-xx-large.font-monospacee .passage {
	letter-spacing: -0.1em;
}

body,
#ui-dialog-body {
	background-color: var(--background);
	color: var(--text);
	overflow: auto;
}

.passage a {
	color: var(--link);
	font-weight: 500;
}
.passage a:hover,
.passage .ui a:hover {
	color: var(--link-hover);
}
.passage a.active,
.passage a:active {
	color: var(--link-active);
}
.passage .link-broken,
.passage .link-disabled,
#ui-bar-tray button:disabled,
.passage .macro-button:disabled, 
#ui-dialog-body.saves #saves-list button:disabled {
	color: var(--link-disable);
}
.passage .link-external {
}
.passage .link-internal {
}
body,
.passage,
.passage .icon,
#story-author a,
.passage .hidden a,
.passage .link-visited,
.passage a.macro-linkappend,
.passage a.macro-linkprepend,
.passage a.macro-linkreplace,
.passage a[data-passage$="credits"],
#ui-dialog-body.settings button[id|="setting-control"] {
	color: var(--text);
}
.passage .link-internal:not(.link-visited) {
}
.passage a.macro-linkappend,
.passage a.macro-linkprepend,
.passage a.macro-linkreplace {
	cursor: help;
}

.passage .ui a,
.passage .hidden a,
.passage a.macro-back,
.passage a.macro-return,
.passage a#cycle-select-verse,
.passage a#cycle-select-entry,
.passage a[data-passage$="credits"] {
	text-decoration: none;
}
.passage .ui a:hover,
.passage .hidden a:hover,
.passage a.macro-back:hover,
.passage a.macro-return:hover,
.passage a#cycle-select-verse:hover,
.passage a#cycle-select-entry:hover,
.passage a[data-passage$="credits"]:hover {
	text-decoration: none;
}

.passage .icon,
#menu-story li a::before,
.passage a.macro-back::before,
.passage .macro-button::before,
.passage a.macro-return::before,
.passage .ui a.macro-link::before,
.passage .ui a.link-internal::before,
.passage .ui .ui-hidden-text::before,
.passage a#cycle-select-entry::before,
.passage a#cycle-select-verse::before,
.passage .progress-bar li span::before,
.passage .progress-bar .is-active span::after,
.passage .progress-bar .is-complete span::after {
	font-family: sc-icons !important;
	font-style: normal;
	font-weight: 400;
	font-variant: normal;
	font-variant-emoji: text;
	line-height: 1;
	speak: never;
	text-rendering: auto;
	text-transform: none;
	filter: grayscale(100%);
	-webkit-filter: grayscale(100%);
	-moz-filter: grayscale(100%);
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
	margin-right: .35em;
}
.passage .icon {
	margin: 0;
}
.passage .tag#anchor a::before {
	content: "⚓";
	margin-right: 0.1em;
}
.passage .tag#prayer a::before {
	content: "📯";
	margin-right: 0.1em;
}
.passage .tag#promise a::before {
	content: "🗝️";
	margin-right: 0em;
}
.passage a.macro-back::before,
.passage a.macro-return::before {
	content: "\f060";
}
.passage .ui-bin a:hover {
	color: var(--ui-label-danger);
}
.passage .ui-bin a.macro-link::before,
.passage .ui-bin a.link-internal::before,
span[data-do-tags^="rename"] .macro-button + .macro-button::before {
	content: "\f00d";
	margin: 0 .35em;
}
.passage .ui-write a.macro-link::before,
.passage .ui-write a.link-internal::before,
span[data-do-tags^="rename"] .macro-textbox + .macro-button::before {
	content: "✎";
	display: inline-block;
	transform: scale(-1, 1);
	margin: 0 .35em;
}
.passage .ui .ui-hidden-text::before {
	content: "\f002";  
}
.passage .ui .ui-hidden-text::before {
	content: "\f002";  
}
.passage a#cycle-select-entry::before,
#menu-story a[data-passage$="journal"]::before {
	content: "\f28b";
}
#menu-story a[data-passage$="names"]::before {
	content: "🎭︎";
}
#menu-story a[data-passage$="pilgrimage"]::before {
	content: "\f061";
}
.passage a#cycle-select-verse::before,
#menu-story a[data-passage$="book"]::before {
	content: "\f002";
}
.passage .progress-bar li:not(.is-complete):not(.is-active) span {
	font-size: 0;
}
.passage .progress-bar li:not(.is-complete):not(.is-active) span::before {
	content: "\f059";
	font-size: initial;
	margin: 0;
}
.passage .progress-bar li.is-active span::before {
	content: "\f13a";
	margin-right: 0.2em;
}
.passage .progress-bar li.is-complete span::before {
	content: "\f138";
	margin-right: 0.2em;
}

.passage #clues {
	position: fixed;
	bottom: 0;
	right: 0;
	width: 50px;
	height: 50px;
	z-index: 100;
	font-size: small;
	color: var(--ui-label);
}

.passage .header {
	margin-bottom: 1.4em;
}

.passage label, 
.passage .info,
.passage .discovered,
.passage .discovered + cite {
	color: var(--text-dim);
}
.passage .tag a {
	color: var(--ui-label);
	display: inline-block;
	margin: 0.2em 0.35em;
	padding: 0 1em;
}
.passage[data-passage$="book"] .tag a::before {
	filter: brightness(0) saturate(100%) invert(41%) sepia(0%) saturate(1%) hue-rotate(28deg) brightness(94%) contrast(81%);
}
.passage .active.tag a {
	color: var(--ui-label-active);
}
.passage .active.tag a::before {
	filter: grayscale(100%) brightness(0) saturate(100%) invert(66%) sepia(95%) saturate(433%) hue-rotate(354deg) brightness(92%) contrast(85%);
}
.passage .tag a:hover {
	color: var(--ui-label-hover);
}
.passage .tag a:hover::before {
	filter: grayscale(100%) contrast(120%);
}

.passage .macro-linkappend,
.passage .macro-linkprepend,
.passage .macro-linkreplace {
	text-decoration: underline;
	text-decoration-style: dotted;
	text-underline-offset: 0.2em;
}

.passage ol + br,
.passage ul + br,
.passage pre + br, 
.passage #selected-verse br,
.passage blockquote cite + br,
.passage .macro-linkappend-insert br,
.passage .macro-linkprepend-insert br,
.passage .macro-linkreplace-insert br {
	display: none;
}

.passage #story-title small {
	font-weight: normal;
}
.passage #story-title #story-subtitle {
	margin-top: 0.2em;
}

.passage[data-passage$="credits"] .subject {
	line-height: 1.2em;
}
.passage[data-passage$="credits"] .subject > small {
	font-weight: normal;
}

.passage .gold {
	color: #CFB53B;
	font-weight: 600;
}
.passage .named {
	color: var(--ui-named-npc);
}
.passage .named > span {
	font-variant: small-caps;
}
.passage .celestial.named {
	color: var(--text);
	transition: all 300ms;
	text-shadow:
		0 0 5px ghostwhite,
		0 0 10px ghostwhite,
		0 0 20px ghostwhite,
		0 0 40px whitesmoke,
		0 0 80px mintcream,
		0 0 90px mintcream,
		0 0 100px snow,
		0 0 150px snow;
}
.passage .celestial.named:hover {
	text-shadow:
		0 0 5px ivory,
		0 0 10px ghostwhite,
		0 0 20px ghostwhite,
		0 0 40px mintcream,
		0 0 80px mintcream,
		0 0 90px mintcream,
		0 0 100px azure,
		0 0 150px azure
}

.passage pre,
.passage blockquote pre {
	font-family: inherit;
	display: inline;
}

#ui-bar {
	color: var(--text);
	border-right: 1px solid var(--border);
	height: 100%;
	left: 0;
	margin: 0;
	padding: 0;
	position: fixed;
	text-align: center;
	top: 0;
	-webkit-transition: left .2s ease-in;
	-o-transition: left .2s ease-in;
	transition: left .2s ease-in;
	width: 17.5em;
	z-index: 50;
	overflow-y: visible;
}
#ui-bar,
#ui-dialog {
	background: var(--ui-panel);
}
#ui-dialog-titlebar {
	background: linear-gradient(to top, var(--ui-panel-gradient), transparent);
}
#ui-dialog-body {
	border: 1px solid var(--border);
	height: calc(100% - 2.1em);
	line-height: 1.5;
	min-width: 300px;
	overflow: auto;
	padding: 1em;
	text-align: left;
}
#ui-dialog-titlebar {
	min-height: 24px;
	position: relative;
}
#ui-dialog-close:hover {
	color-scheme: dark;
	color: var(--ui-label-hover);
}
#ui-dialog-body.saves > h2 {
	background-color: transparent;
	font-size: inherit;
	margin: 0;
	padding: .1em 0 .1em .4em;
}
#ui-dialog-body.saves #saves-list button,
#ui-dialog-body.saves #saves-list button.load:not(:disabled),
#ui-dialog-body.saves #saves-list button.save:not(:disabled),
#ui-dialog-body.saves #saves-list button.delete:not(:disabled) {
	color: var(--ui-button-text);
	background-color: var(--ui-button);
	border: 1px solid var(--border);
	height: 2.237em;
	width: 2.237em;
}
#ui-dialog-body.saves > :not(:first-child),
#ui-dialog-body.saves tr:not(:first-child) {
	border-top: 1px solid var(--border);
}
.passage .macro-button:disabled,
#ui-dialog-body.saves #saves-list button:disabled {
	border: 1px solid var(--border-disable);
}

#menu ul {
	margin: 1em 0 0;
	padding: 0;
	list-style: none;
}
#menu li {
	border: none;
}
#menu ul {
	border: 1px solid var(--border);
}
#menu li a {
	color: var(--ui-text);
	display: block;
	padding: .25em .75em;
	border: 1px solid transparent;
	text-transform: uppercase;
}
#menu li:not(:first-child) {
	border-top: 1px solid var(--border);
}

.passage .ui a,
#ui-dialog-close,
#ui-bar-tray button,
.passage .macro-back,
.passage .macro-return,
.passage .macro-button {
	color: var(--ui-label);
	background-color: var(--ui-button);
	border: none;
	border-radius: 5px;
}
.passage .ui a,
.passage .macro-back,
.passage .macro-return,
.passage .macro-button {
	color: var(--ui-label-dim);
}
.passage .ui a:hover,
#ui-bar #menu li a:hover,
#ui-bar-tray button:hover,
.passage .macro-back:hover,
.passage .macro-return:hover,
.passage .macro-button:hover,
#ui-dialog-body.saves #saves-list button:not(:disabled):hover,
#ui-dialog-body.saves #saves-list button.load:not(:disabled):hover,
#ui-dialog-body.saves #saves-list button.delete:not(:disabled):hover {
	color: var(--ui-label-hover);
	background-color: var(--ui-button-hover);
	border-color: var(--border-hover);
}
#ui-overlay.open {
	opacity: .6;
}
input, select, textarea,
#ui-dialog-body.settings button[id|="setting-control"] {
	color: var(--text);
	background-color: var(--ui-input);
	border-radius: 5px;
	border: 1px solid rgba(153, 153, 153, 0.25);
	padding: .4em;
}
input:focus,
select:focus,
textarea:focus,
input:hover,
select:hover,
textarea:hover,
html[data-outlines] input:focus, 
html[data-outlines] select:focus, 
html[data-outlines] textarea:focus, 
#ui-dialog-body.settings button[id|="setting-control"]:hover {
	background-color: var(--ui-input);
	border-color: var(--border-hover);
	box-shadow: inset 0 0 0 2px var(--ui-input-focus);
	outline: none;
}

.passage .verse {
}
.passage .verses,
.passage .journal-entries {
	border: 1px solid var(--border-dim);
	padding: 0.4em 1em 1em 1em;
}
.passage .verses:hover,
.passage .journal-entries:hover {
	border-color: var(--border-hover);
}
.passage .verses legend,
.passage .journal-entries legend {
	padding: 0 0.35em;
}
.passage .verses-footnote,
.passage .journal-footnote {
	text-align: right;
}

.passage .progress-bar {
	display: flex;
	justify-content: space-between;
	list-style: none;
	padding: 0;
	margin: 0 0 1rem 0;
}
.progress-bar li {
	flex: 2;
	position: relative;
	padding: 0 0 14px 0;
	font-size: 16px;
	line-height: 1.5em;
	font-weight: 600;
	white-space: nowrap;
	overflow: visible;
	min-width: 0;
	text-align: center;
	border-bottom: 2px solid var(--ui-progress-line);
}
.progress-bar li:first-child,
.progress-bar li:last-child {
	flex: 1;
}
.progress-bar li:first-child {
	text-align: left;
}
.progress-bar li:last-child {
	text-align: right;
}
.progress-bar li:before {
	content: "";
	display: block;
	width: 8px;
	height: 8px;
	background-color: var(--ui-progress-dot);
	border-radius: 50%;
	border: 2px solid var(--ui-progress-line);
	position: absolute;
	left: calc(50% - 6px);
	bottom: -7px;
	z-index: 3;
	transition: all .2s ease-in-out;
}
.progress-bar li:first-child:before {
	left: 0;
}
.progress-bar li:last-child:before {
	right: 0;
	left: auto;
}
.progress-bar span {
	transition: opacity .3s ease-in-out;
}
.progress-bar li:not(.is-active) span {
	opacity: 0;
}
.progress-bar .is-skip:not(:first-child):after,
.progress-bar .is-active:not(:first-child):after,
.progress-bar .is-complete:not(:first-child):after {
	content: "";
	display: block;
	width: 100%;
	position: absolute;
	bottom: -2px;
	left: -50%;
	z-index: 2;
	border-bottom: 2px solid var(--ui-progress-complete-line);
}
.progress-bar li:last-child span {
	width: 200%;
	display: inline-block;
	position: absolute;
	left: -100%;
}
.progress-bar .is-active:last-child:after,
.progress-bar .is-complete:last-child:after {
	width: 200%;
	left: -100%;
}
.progress-bar .is-complete:before {
	background-color: var(--ui-progress-complete-dot);
	border: 2px solid var(--ui-progress-complete-line);
}
.progress-bar .is-active:before {
	background-color: var(--ui-progress-active-dot);
	border-color: var(--ui-progress-active-line);
}
.progress-bar li:hover:before,
.progress-bar .is-hovered:before {
	background-color: var(--ui-progress-hover-dot);
	border-color: var(--ui-progress-hover-line);
}
.progress-bar .is-complete:hover:before,
.progress-bar .is-hovered.is-complete:before {
	background-color: var(--ui-progress-complete-dot);
	border-color: var(--ui-progress-complete-line);
}
.progress-bar li:hover:before,
.progress-bar .is-hovered:before {
	transform: scale(1.33);
}
.progress-bar li:hover span,
.progress-bar li.is-hovered span {
	opacity: 1;
}
.progress-bar:hover li:not(:hover) span {
	opacity: 0;
}
.x-ray .progress-bar,
.x-ray .progress-bar li {
	border: 1px dashed red;
}
.progress-bar .has-changes {
	opacity: 1 !important;
}
.progress-bar .has-changes:before {
	content: "";
	display: block;
	width: 8px;
	height: 8px;
	position: absolute;
	left: calc(50% - 4px);
	bottom: -20px;
	background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%208%208%22%3E%3Cpath%20fill%3D%22%23ed1c24%22%20d%3D%22M4%200l4%208H0z%22%2F%3E%3C%2Fsvg%3E');
}

/* UI bar waves */
.parallax > use {
	animation: move-forever 25s cubic-bezier(.55,.5,.45,.5) infinite;
}
.parallax > use:nth-child(1) {
	animation-delay: -2s;
	animation-duration: 7s;
}
.parallax > use:nth-child(2) {
	animation-delay: -3s;
	animation-duration: 10s;
}
.parallax > use:nth-child(3) {
	animation-delay: -4s;
	animation-duration: 13s;
}
.parallax > use:nth-child(4) {
	animation-delay: -5s;
	animation-duration: 20s;
}
@keyframes move-forever {
	0% {
		transform: translate3d(-90px,0,0);
	}
	100% { 
		transform: translate3d(85px,0,0);
	}
}
#ui-bar-tray,
#ui-bar #menu li a,
#ui-bar #story-title,
#ui-bar #story-author,
#ui-bar #story-subtitle,
#ui-bar #story-title-separator {
	position: relative;
	z-index: 5;
}
#ui-bar .ui-waters {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
}
#ui-bar .empty {
	display: block;
	font-size: 0;
	width: 100%;
	min-height: 64px;
	height: 0;
	text-align: center;
	background: linear-gradient(60deg, var(--background) 0%, var(--ui-panel) 100%);
	position: relative;
	z-index: 0;
}
.waves {
	color: var(--ui-waters);
	width: 100%;
	height:5vh;
	margin-bottom:-7px; /*Fix for safari gap*/
	min-height:5px;
	max-height:40px;
	position:relative;
	top: -19px;
}
#ui-bar-body {
	background: var(--ui-waters);
}

#ui-bar.stowed #ui-bar-body {
	visibility: visible;
}
#ui-bar.stowed #ui-bar-body * {
	visibility: hidden;
}
#ui-bar.stowed #ui-bar-body .ui-waters * {
	visibility: visible;
}
#ui-bar.stowed .empty {
	left: 0;
	background: var(--background);
	visibility: visible;
}

/* UI bar bubbles */
.bubbles {
	position: relative;
	bottom: -100vh;
	mix-blend-mode: hard-light;
}
.bubble {
	width: 13px;
	height: 13px;
	border-radius: 100%;
	position: absolute;
	background-color: var(--ui-bubble);
	bottom: -30px;
	opacity: 0.2;
	animation: bubble 15s ease-in-out infinite,
	sideWays 4s ease-in-out infinite alternate;
}

@keyframes bubble {
	0% {
		transform: translateY(0%);
		opacity: 0.06;
	}
	100% {
		transform: translateY(-120vh);
	}
}

@keyframes sideWays {
	0% {
		margin-left: 0px;
	}
	100% {
		margin-left: 200px;
	}
}

.bubble--1 {
	left: 10%;
	animation-delay: 0.5s;
	animation-duration: 16s;
	opacity: 0.2;
}

.bubble--2 {
	width: 13px;
	height: 13px;
	left: 40%;
	animation-delay: 1s;
	animation-duration: 10s;
	opacity: 0.1;
}

.bubble--3 {
	width: 11px;
	height: 11px;
	left: 30%;
	animation-delay: 5s;
	animation-duration: 20s;
	opacity: 0.3;
}

.bubble--4 {
	width: 23px;
	height: 23px;
	left: 40%;
	animation-delay: 8s;
	animation-duration: 17s;
	opacity: 0.2;
}

.bubble--5 {
	width: 19px;
	height: 19px;
	left: 60%;
	animation-delay: 10s;
	animation-duration: 15s;
	opacity: 0.1;
}

.bubble--6 {
	width: 7px;
	height: 7px;
	left: 80%;
	animation-delay: 3s;
	animation-duration: 30s;
	opacity: 0.4;
}

.bubble--7 {
	width: 17px;
	height: 17px;
	left: 90%;
	animation-delay: -7s;
	animation-duration: 25s;
	opacity: 0.3;
}

.bubble--9 {
	width: 19px;
	height: 19px;
	left: 50%;
	bottom: 30px;
	animation-delay: -5s;
	animation-duration: 19s;
	opacity: 0.2;
}

.bubble--10 {
	width: 23px;
	height: 23px;
	left: 30%;
	bottom: 30px;
	animation-delay: -21s;
	animation-duration: 16s;
	opacity: 0.3;
}

.bubble--11 {
	width: 29px;
	height: 29px;
	left: 60%;
	bottom: 30px;
	animation-delay: -13.75s;
	animation-duration: 20s;
	opacity: 0.3;
}

.bubble--11 {
	width: 23px;
	height: 23px;
	left: 90%;
	bottom: 30px;
	animation-delay: -10.5s;
	animation-duration: 19s;
	opacity: 0.3;
}


/* Dark-mode specifics */
html.dark-mode .passage .gold {
	color: khaki;
}
html.dark-mode .passage .celestial.named {
	color: lightgoldenrodyellow;
	font-weight: inherit;
	text-shadow:
		0 0 5px lightgoldenrodyellow,
		0 0 10px lightgoldenrodyellow,
		0 0 20px lightgoldenrodyellow,
		0 0 40px #00f,
		0 0 80px #00f,
		0 0 90px #00f,
		0 0 100px #0ff,
		0 0 150px #0ff;
}
html.dark-mode .passage .celestial.named:hover {
	color: white;
	text-shadow:
		0 0 5px white,
		0 0 10px white,
		0 0 20px white,
		0 0 40px palegoldenrod,
		0 0 80px palegoldenrod,
		0 0 90px palegoldenrod,
		0 0 100px lightgoldenrodyellow,
		0 0 150px lightgoldenrodyellow;
}

html.dark-mode .passage .active.tag a::before {
	filter: grayscale(100%) brightness(0) saturate(100%) invert(100%) sepia(22%) saturate(6001%) hue-rotate(304deg) brightness(118%) contrast(87%);
}</style><script role="script" id="twine-user-script" type="text/twine-javascript">Config.navigation.override = function (destinationPassage) {
	if (passage().includes("08-CL") && 
		destinationPassage.includes("09-CO")) {
		var vars = State.variables;
		var progress = Math.round(100 * vars.seenVerses.length / setup.totalVerses);
		progress += vars.journal.length;

		console.log("Progress: "+ progress +"%; Dest:"+ destinationPassage);
		if (progress < 30) return "00-author-message";
	}
};

var settingFontNames = ["(Default)", "Dejavu Sans", "Garamond", "Courier New"];
var settingFontHandler = function () {
	var $html = $("html");

	$html.removeClass("font-sans font-serif font-monospace");

	switch (settings.font) {
	case "Dejavu Sans":
		$html.addClass("font-sans");
		break;
	case "Garamond":
		$html.	addClass("font-serif");
		break;
	case "Courier New":
		$html.	addClass("font-monospace");
		break;
	}
};
Setting.addList("font", {
	label    : "Font",
	list     : settingFontNames,
	onInit   : settingFontHandler,
	onChange : settingFontHandler
});


var settingFontSizeNames = ["(Default)", "large", "x-large", "xx-large"];
var settingFontSizeHandler = function () {
	var $html = $("html");

    $html.removeClass("fontsize-large fontsize-x-large fontsize-xx-large");

    switch (settings.fontsize) {
		case "large":
			$html.addClass("fontsize-large");
			break;
		case "x-large":
			$html.addClass("fontsize-x-large");
			break;
		case "xx-large":
			$html.addClass("fontsize-xx-large");
			break;
    }
};

Setting.addList("fontsize", {
	label    : "Font size",
	list     : settingFontSizeNames,
	onInit   : settingFontSizeHandler,
	onChange : settingFontSizeHandler
}); 

var settingDarkModeHandler = function () {
	if (settings.darkMode) { // is true
		$("html").addClass("dark-mode");
	}
	else { // is false
		$("html").removeClass("dark-mode");
	}
};
Setting.addToggle("darkMode", {
	label    : "Dark mode",
	default  : true,
	onInit   : settingDarkModeHandler,
	onChange : settingDarkModeHandler
});


Save.onLoad.add(function(save) {
	let variables = save.state.history[save.state.index].variables;
	let loadedVerses = variables.seenVerses;
	let loadedNames = variables.npcNames;
	let loadedNPCs = variables.metNPCs;
	let loadedPlaces = variables.placeNames;
	let memorizedVerses = recall("seenVerses", []);
	let memorizedNames = recall("npcNames", {});
	let memorizedNPCs = recall("metNPCs", []);
	let memorizedPlaces = recall("placeNames", {});

	let npcNames = {};
	for (const npc of setup.npcs) {
		if (loadedNames.hasOwnProperty(npc)) {
			npcNames[npc] = loadedNames[npc];
		} else if (memorizedNames.hasOwnProperty(npc)) {
			npcNames[npc] = memorizedNames[npc];
		}
	}
	memorize("npcNames", npcNames);

	let placeNames = {};
	for (const spot of setup.places) {
		if (loadedPlaces.hasOwnProperty(spot)) {
			placeNames[spot] = loadedPlaces[spot];
		} else if (memorizedPlaces.hasOwnProperty(spot)) {
			placeNames[spot] = memorizedPlaces[spot];
		}
	}
	memorize("placeNames", placeNames);

	if (loadedNPCs.length >= memorizedNPCs.length) {
		memorize("metNPCs", loadedNPCs);
	}

	if (loadedVerses.length >= memorizedVerses.length) {
		memorize("seenVerses", loadedVerses);
	}
});</script><tw-tag name="built-in" color="blue"></tw-tag><tw-tag name="gospel" color="green"></tw-tag><tw-tag name="spirit" color="blue"></tw-tag><tw-tag name="faith" color="blue"></tw-tag><tw-tag name="widget" color="blue"></tw-tag><tw-tag name="love" color="red"></tw-tag><tw-tag name="sin" color="blue"></tw-tag><tw-tag name="hope" color="yellow"></tw-tag><tw-tag name="death" color="purple"></tw-tag><tw-tag name="moment" color="green"></tw-tag><tw-tag name="righteousness" color="orange"></tw-tag><tw-tag name="truth" color="orange"></tw-tag><tw-tag name="crossover" color=""></tw-tag><tw-tag name="wilderness" color=""></tw-tag><tw-tag name="old_monument" color=""></tw-tag><tw-tag name="city_of_Zion" color=""></tw-tag><tw-tag name="slough" color=""></tw-tag><tw-tag name="gate" color=""></tw-tag><tw-tag name="manor" color=""></tw-tag><tw-tag name="gulf" color=""></tw-tag><tw-tag name="mountain_#1" color=""></tw-tag><tw-tag name="narrow_way" color=""></tw-tag><tw-tag name="tree" color=""></tw-tag><tw-tag name="mid-hill" color=""></tw-tag><tw-tag name="hilltop" color=""></tw-tag><tw-tag name="narrow_passage" color=""></tw-tag><tw-tag name="lodge" color=""></tw-tag><tw-tag name="foothill" color=""></tw-tag><tw-tag name="valley_#1" color=""></tw-tag><tw-tag name="borders_of_valleys" color=""></tw-tag><tw-tag name="valley_#2" color=""></tw-tag><tw-tag name="cave" color=""></tw-tag><tw-tag name="town_#2" color=""></tw-tag><tw-tag name="plain_#1" color=""></tw-tag><tw-tag name="plain_#2" color=""></tw-tag><tw-tag name="hill_#3" color=""></tw-tag><tw-tag name="meadow" color=""></tw-tag><tw-tag name="castle" color=""></tw-tag><tw-tag name="mountains" color=""></tw-tag><tw-tag name="mountain_#5" color=""></tw-tag><tw-tag name="hill_#6" color=""></tw-tag><tw-tag name="country_#3" color=""></tw-tag><tw-tag name="highway_#1" color=""></tw-tag><tw-tag name="country_#4" color=""></tw-tag><tw-tag name="country_#5" color=""></tw-tag><tw-tag name="hometown" color=""></tw-tag><tw-tag name="pit" color=""></tw-tag><tw-tag name="river_#2" color=""></tw-tag><tw-tag name="river_#1" color=""></tw-tag><tw-tag name="promise" color="blue"></tw-tag><tw-tag name="bible" color="red"></tw-tag><tw-tag name="prayer" color="green"></tw-tag><tw-tag name="journal" color="purple"></tw-tag><tw-tag name="anchor" color="yellow"></tw-tag><tw-passagedata pid="1" name="Cover" tags="moment" position="425,300" size="100,100">&lt;center&gt;
&lt;h1 id=&quot;story-title&quot;&gt;&lt;&lt;include StoryTitle&gt;&gt;
&lt;small&gt;from this world 
to that which is to come: 
delivered under the similitude of a&lt;/small&gt;
&lt;div id=&quot;story-subtitle&quot;&gt;DREAM&lt;/div&gt;&lt;/h1&gt;&lt;span id=&quot;story-caption&quot;&gt;Wherein is Diſcovered,
The manner of his ſetting out,
His Dangerous Journey; And ſafe
Arrival at the Deſired Countrey.&lt;/span&gt;

By &lt;&lt;include StoryAuthor&gt;&gt;

[[Begin|00-dream]]
&lt;small class=&quot;info&quot;&gt;Adjust &#39;&#39;Settings&#39;&#39; to help reading&lt;/small&gt;
&lt;/center&gt;</tw-passagedata><tw-passagedata pid="2" name="00-dream" tags="moment" position="550,300" size="100,100">[@] As I walked through the wilderness of this world, I lighted on a certain place where was a den, and laid me down in that place to sleep; and as I slept, I dreamed a dream. I [[dreamed , and behold,|01-FI-1]]…</tw-passagedata><tw-passagedata pid="3" name="01-FI-1" tags="moment hometown" position="675,300" size="100,100">[@]  I saw a man clothed with __rags__(Isaiah 64:6), standing in a certain place, with his face from his own house, a book in his hand, and a __great burden__ (Psalm 38:4), upon his back. 

[@] I looked and saw him open the book, and read therein; and as he read, he wept and trembled; and not being able longer to contain, he brake out with a lamentable cry.

[1] __What shall I do?__  (Acts 2:37)

[@] In this plight, therefore, he went [[home|01-HO-1]], and restrained himself as long as he could, that his wife and children should not perceive his distress; but he could not be silent long, because that his trouble increased.</tw-passagedata><tw-passagedata pid="4" name="01-FI-1-2" tags="moment fields" position="925,425" size="100,100">[@] Now I saw, upon a time, when he was walking in the fields, that he was (as he was wont) reading in his book, and greatly distressed in his mind; and as he read, he burst out, as he had done before, crying,

[1] __What shall I do to be saved?__ (Acts 16:30-31)

[@] I saw also that he looked this way, and that way, as if he would run; yet he stood still because (as I perceived) he could not tell which way to go. I looked then, and saw a man named Evangelist coming to him, and he asked,

[2]  Wherefore dost thou cry?

[1] Sir, I perceive, by the book in my hand, that I am __condemned to die__ (Job 10:21-22), and after that to come to __judgment__ (Hebrews 9:27); and I find that I am not willing to do the first, nor able to do the second.

[2] Why not willing to die, since this life is attended with so many __evils__ (Habakkuk 1:2-3)?

[1] Because, I fear that this burden that is upon my back will sink me lower than the grave, and I shall fall into __Tophet__ (Isaiah 30:33). And Sir, if I be not fit to go to prison, I am not fit to go to judgment, and from thence to execution; and the thoughts of these things make me cry. 

[2] If this be thy condition, why standest thou still?

[1] Because I know not whither to go.

[@] Then he gave him a  parchment roll, and there was written within, __&quot;Fly from the wrath to come.&quot;__ (Matthew 3:7) The man therefore read it, and looking upon Evangelist very carefully,

[1] Whither must I fly?

[2] (pointing with his finger over a very wide field) Do you see yonder __wicket-gate?__ (Matthew 7:13-14)

[1] No.

[2] Do you see yonder __shining light?__ (2 Peter 1:19)

[1] I think I do.

[2] Keep that __light in your eye__ (Psalm 119:105), and go up directly thereto, so shalt thou see the gate; at which, when thou knockest, it shall be told thee what thou shalt do.

[@] So I saw in my dream that the man began to run. Now he had not run far from his own door when his wife and children, perceiving it, began to cry after him to return; but the man __put his fingers in his ears, and ran on__ (Luke 14:26; Luke 14:33) crying,

[1] Life! life! Eternal life!

[@] So he __looked not behind him__ (Genesis 19:17), but fled towards the middle of the [[plain|01-PL-1-3-4]].  The neighbors also came out to __see him run__ (Jeremiah 20:10), and as he ran, some mocked, others threatened, and some cried after him to return; and among those that did so, there were two that were resolved to fetch him back by force. </tw-passagedata><tw-passagedata pid="5" name="01-PL-1-3-4" tags="moment plain_#1" position="800,425" size="100,100">[@] The name of the one was Obstinate and the name of the other Pliable.  Now by this time the man was got a good distance from them; but, however, they were resolved to pursue him, which they did, and in a little time they overtook him.

[1] Neighbors, wherefore are you come?

[3] To persuade you to go back with us.

[1] That can by no means be: you dwell, in the city of Destruction, the place also where I was born: I see it to be so; and dying there, sooner or later, you will sink lower than the grave, into a place that burns with fire and brimstone: be content, good neighbors, and go along with me.

[3] What, leave our friends and our comforts behind us!

[1] Yes, because that all which you forsake is not worthy to be compared with a little of __that I am seeking__ (2 Corinthians 4:18) to enjoy, and if you will go along with me, and hold it, you shall fare as I myself; for there, where I go, is __enough and to spare__ (Luke 15:17). Come away, and prove my words.

[3] What are the things you seek, since you leave all the world to find them?

[1] I seek an inheritance incorruptible, undefiled, and that fadeth not away, and it is laid up __in heaven__ (1 Peter 1:4), and safe there, to be bestowed, at the time appointed, on __them that diligently seek it__ (Hebrews 11:16). Read it so, if you will, in my book.

[3] Tush, way with your book; will you go back with us or no?

[1] No, not I, said the other, because __I have laid my hand to the plough__ (Luke 9:62).

[3] Come then, neighbor Pliable, let us turn again, and go home without him: there is a company of these crazy-headed coxcombs, that when they take a fancy by the end, are wiser in their own eyes than seven men that can render a reason.

[4] Don’t revile; if what the good Christian says is true, the things he looks after are better than ours: my heart inclines to go with my neighbor.

[3] What, more fools still! Be ruled by me, and go back; who knows whither such a brain-sick fellow will lead you? Go back, go back, and be wise.

[1] Nay, but do thou come with thy neighbor Pliable; there are such things to be had which I spoke of, and many more glories besides. If you believe not me, read here in this book, and for the truth of what is expressed therein, behold, all is confirmed __by the blood of Him__ (Hebrews 9:17-21) that made it.

[4] Well, neighbor Obstinate, I begin to come to a point; I intend to go along with this good man, and to cast in my lot with him: but, my good companion, do you know the way to this desired place? 

[1] I am directed by a man whose name is Evangelist, to speed me to a little gate that is before us, where we shall receive instructions about the way.

[4] Come then, good neighbor, let us be going.

[@] Then they went both together.

[3] And I will go back to my place, I will be no companion of such misled, fantastical fellows.

[@] Now I saw in my dream, that when Obstinate was gone back, Christian (for that was his name,) and Pliable went talking over the [[plain|01-PL-1-4]]; and thus they began their discourse.</tw-passagedata><tw-passagedata pid="6" name="01-PL-1-4" tags="moment plain_#1" position="675,425" size="100,100">[1] Come, neighbor Pliable, how do you do? I am glad you are persuaded to go along with me. Had even Obstinate himself but felt what I have felt of the powers and terrors of what is yet unseen, he would not thus lightly have given us the back.

[4] Come, neighbor Christian, since there are none but us two here, tell me now farther, what the things are, and how to be enjoyed, whither we are going.

[1] I can better conceive of them with my mind, than speak of them with my tongue: but yet, since you are desirous to know, I will read of them in my book.

[4] And do you think that the words of your book are certainly true?

[1] Yes, verily; for it was made by __ Him that cannot lie.__ (Titus 1:2)

[4] Well said; what things are they?

[1] There is an endless __kingdom__ (Isaiah 65:17) to be inhabited, and __everlasting life__ (John 10:27-29) to be given us, that we may inhabit that kingdom for ever.

[4] Well said; and what else?

[1] There are __crowns__ (2 Timothy 4:8) of glory to be given us; and garments that will make us __shine like the sun__ (Matthew 13:43; Revelation 22:5) in the firmament of heaven.

[4] This is very pleasant; and what else?

[1] There shall be no more crying, nor sorrow; for he that is owner of the place will __wipe all tears__ (Isaiah 25:8; Revelation 7:16-17; Revelation 21:4) from our eyes.

[4] And what company shall we have there?

[1] There we shall be with seraphims and cherubims; __creatures__ (Isaiah 6:2; 1 Thessalonians 4:16-17; Revelation 5:11) that will dazzle your eyes to look on them. There also you shall meet with thousands and ten thousands that have gone before us to that place; none of them are hurtful, but loving and holy; every one walking in the sight of God, and standing in his presence with acceptance for ever. 

[1] In a word, there we shall see __the elders__ (Revelation 4:4) with their golden crowns; there we shall see the __holy virgins__ (Revelation 14:1-5) with their golden harps; there we shall see __men__ (John 12:25), that by the world were cut in pieces, burnt in flames, eaten of beasts, drowned in the seas, for the love they bare to the Lord of the place; all well, and clothed with __immortality__ (2 Corinthians 5:2) as with a garment.

[4] The hearing of this is enough to ravish one’s heart. But are these things to be enjoyed? How shall we get to be sharers thereof?

[1] The Lord, the governor of the country, hath recorded that in this book; the substance of which is, if we be truly willing to have it, he will bestow it upon us __freely__ (Isaiah 55:1-2; John 6:37; John 7:37; Revelation 21:6; Revelation 22:17).

[4] Well, my good companion, glad am I to hear of these things: come on, let us mend our pace.

[1] I cannot go as fast as I would, by reason of this burden that is on my back.

[@] Now I saw in my dream, that just as they had ended this talk, they drew nigh to a very miry [[slough|01-SL-1-4]] that was in the midst of the plain: and they being heedless, did both fall suddenly into the bog.</tw-passagedata><tw-passagedata pid="7" name="StoryInit" tags="built-in" position="675,25" size="100,100">// Twine config
&lt;&lt;set Config.saves.maxAutoSaves = 1&gt;&gt;
&lt;&lt;set Config.addVisitedLinkClass = true&gt;&gt;

// Regular expressions
&lt;&lt;set setup.unsafeChars to new RegExp(&quot;[^A-Za-z0-9-:;,.!?()\[\]&#39;\&quot;*£$%/#~=+_|^¬@ ]\s&quot;, &quot;g&quot;)&gt;&gt;
&lt;&lt;set setup.hiddenText to new RegExp(&quot;[^/](linkappend|linkprepend|linkreplace)&quot;, &quot;g&quot;)&gt;&gt;
&lt;&lt;set setup.greekChars to new RegExp(&quot;[\u0370-\u03FF\u1F00-\u1FFF]&quot;)&gt;&gt;
&lt;&lt;set setup.verseDelimiter to new RegExp(&quot;[\s]*;[\s]*&quot;, &quot;g&quot;)&gt;&gt;
&lt;&lt;set setup.roundBrackets to new RegExp(&quot;[\(\)]&quot;)&gt;&gt;
&lt;&lt;set setup.undertone to new RegExp(&quot;[_]{2}([^_]+)[_]{2}[\s\(]*([^\)]+)[\)]&quot;, &quot;g&quot;)&gt;&gt;
&lt;&lt;set setup.makeUp to &quot;&lt;&lt;linkappend \&quot;$1\&quot;&gt;&gt;&lt;&lt;book \&quot;$2\&quot;&gt;&gt;&lt;&lt;/linkappend&gt;&gt;&quot;&gt;&gt;

// NPC variables
&lt;&lt;set setup.npcs to [ 
	&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10&quot;,
	&quot;11&quot;, &quot;12&quot;, &quot;13&quot;, &quot;14&quot;, &quot;15&quot;, &quot;16&quot;, &quot;17&quot;,
	&quot;21&quot;, &quot;Π&quot;, &quot;22&quot;, &quot;23&quot;, &quot;24&quot;, 
	&quot;Α&quot;, &quot;31&quot;, &quot;32&quot;, &quot;33&quot;, &quot;34&quot;, &quot;35&quot;, &quot;36&quot;, &quot;37&quot;, &quot;38&quot;, &quot;39&quot;,
	&quot;41&quot;, &quot;42&quot;, &quot;43&quot;, &quot;44&quot;, &quot;45&quot;, &quot;46&quot;, &quot;47&quot;, &quot;48&quot;, 
	&quot;51&quot;, &quot;52&quot;, &quot;53&quot;, &quot;54&quot;, &quot;55&quot;, &quot;56&quot;, &quot;57&quot;, 
	&quot;61&quot;, &quot;62&quot;, &quot;63&quot;, &quot;64&quot;, &quot;65&quot;, 
	&quot;71&quot;, &quot;72&quot;, &quot;73&quot;, &quot;74&quot;, &quot;75&quot;, &quot;76&quot;, &quot;77&quot;, &quot;78&quot;, &quot;79&quot;, 
	&quot;81&quot;, 
	&quot;91&quot;, &quot;92&quot;, &quot;93&quot;, &quot;94&quot;, &quot;95&quot;, &quot;96&quot;, &quot;97&quot;, &quot;κ&quot;, &quot;98&quot;, &quot;α&quot;, &quot;99&quot;, 
	&quot;101&quot;, &quot;λ&quot;, &quot;Ω&quot;, &quot;102&quot;, &quot;103&quot;, 
	&quot;201&quot;, &quot;202&quot;, &quot;203&quot;, 
	&quot;211&quot;,
	&quot;221&quot;, &quot;222&quot;, &quot;223&quot;, 
	&quot;231&quot;, 
	&quot;241&quot;, &quot;242&quot;, &quot;243&quot;, &quot;244&quot;, 
	&quot;251&quot;, &quot;252&quot;, &quot;253&quot;, 
	&quot;261&quot;, &quot;262&quot;, 
	&quot;@&quot;, &quot;©&quot;,
]&gt;&gt;
&lt;&lt;set setup.npcNameMax to 80&gt;&gt;
&lt;&lt;set $metNPCs to [&quot;@&quot;]&gt;&gt;
&lt;&lt;set $npcNames to {}&gt;&gt;
&lt;&lt;set $alphaNPCs to [&quot;21&quot;, &quot;211&quot;]&gt;&gt;
&lt;&lt;set $isAlphaRevealed to false&gt;&gt;

// &quot;The Book&quot; variables
&lt;&lt;set setup.bibleVersion to &quot;KJV&quot;&gt;&gt;
&lt;&lt;set setup.totalVerses to Story.filter(function (p) {
	return p.tags.includes(&quot;bible&quot;) and p.name.includes(setup.bibleVersion);
}).length&gt;&gt;
&lt;&lt;set $seenVerses to []&gt;&gt;

// Journal variables
&lt;&lt;set $journal to []&gt;&gt;
&lt;&lt;set $select_entry to &quot;*&quot;&gt;&gt;

// Settings variables
&lt;&lt;set $rename_npc to &quot;*&quot;&gt;&gt;
&lt;&lt;set $rename_place to &quot;*&quot;&gt;&gt;
&lt;&lt;set $select_verse to &quot;*&quot;&gt;&gt;
&lt;&lt;set $unseen_verse to &quot;*&quot;&gt;&gt;


// UI variables
&lt;&lt;set $hidden_text to 0&gt;&gt;
&lt;&lt;set $seenInterpreterRiddles to []&gt;&gt;
&lt;&lt;set $previous_moment to &quot;&quot;&gt;&gt;

// Pilgrims variables
&lt;&lt;set setup.stage to {}&gt;&gt;
&lt;&lt;set setup.stage[&quot;I&quot;] to [
	&quot;hometown&quot;,
	&quot;fields&quot;,
	&quot;plain_#1&quot;,
	&quot;slough&quot;,
	&quot;crossover&quot;,
	&quot;pit&quot;,
	&quot;mountain_#1&quot;,
	&quot;gate&quot;,
	&quot;garden&quot;,
	&quot;manor&quot;,
	&quot;tree&quot;
]&gt;&gt;
&lt;&lt;set setup.stage[&quot;II&quot;] to [
	&quot;gulf&quot;,
	&quot;narrow_way&quot;,
	&quot;crossroads_at_foothill&quot;,
	&quot;mid-hill&quot;,
	&quot;hilltop&quot;,
	&quot;narrow_passage&quot;,
	&quot;lodge&quot;,
	&quot;foothill&quot;,
	&quot;valley_#1&quot;,
	&quot;borders_of_valleys&quot;,
	&quot;valley_#2&quot;,
	&quot;cave&quot;
]&gt;&gt;
&lt;&lt;set setup.stage[&quot;III&quot;] to [
	&quot;ascent&quot;,
	&quot;wilderness&quot;,
	&quot;town_#2&quot;,
	&quot;plain_#2&quot;,
	&quot;hill_#3&quot;,
	&quot;old_monument&quot;,
	&quot;river_#1&quot;,
	&quot;meadow&quot;,
	&quot;castle&quot;
]&gt;&gt;
&lt;&lt;set setup.stage[&quot;IV&quot;] to [
	&quot;highway_#1&quot;,
	&quot;mountains&quot;,
	&quot;hill_#4&quot;,
	&quot;mountain_#5&quot;,
	&quot;by-way_to_hell&quot;,
	&quot;hill_#6&quot;,
	&quot;country_#3&quot;,
	&quot;lane&quot;,
	&quot;crossroads&quot;,
	&quot;highway_#2&quot;,
	&quot;country_#4&quot;,
	&quot;country_#5&quot;,
	&quot;river_#2&quot;,
	&quot;city_of_Zion&quot;
]&gt;&gt;
&lt;&lt;set setup.places to [].concat(
	setup.stage[&quot;I&quot;], 
	setup.stage[&quot;II&quot;],
	setup.stage[&quot;III&quot;],
	setup.stage[&quot;IV&quot;]
)&gt;&gt;
&lt;&lt;set setup.placeNameMax to 64&gt;&gt;
&lt;&lt;set $placeNames to {}&gt;&gt;
&lt;&lt;set $pilgrim to {}&gt;&gt;
&lt;&lt;set $pilgrim[&quot;1&quot;] to [&quot;hometown&quot;]&gt;&gt;
&lt;&lt;set $pilgrim[&quot;7&quot;] to [&quot;hometown&quot;]&gt;&gt;
&lt;&lt;set $pov to &quot;1&quot;&gt;&gt;
&lt;&lt;set $therein to &quot;&quot;&gt;&gt;

&lt;&lt;set $testing to true&gt;&gt;
&lt;&lt;if $testing&gt;&gt;
	&lt;&lt;include &quot;Test variables&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="8" name="Test variables" tags="" position="675,150" size="100,100">&lt;&lt;set $npcNames to {
	&quot;1&quot;: &quot;Christian&quot;,
	&quot;2&quot;: &quot;Evangelist&quot;,
	&quot;3&quot;: &quot;Ostinate&quot;,
	&quot;4&quot;: &quot;Pliable&quot;,
	&quot;5&quot;: &quot;Help&quot;,
	&quot;6&quot;: &quot;Mr. Worldly Wiseman&quot;,
	&quot;21&quot;: &quot;Goodwill&quot;,
	&quot;Π&quot;: &quot;Interpreter&quot;,
	&quot;22&quot;: &quot;Man-at-arms&quot;,
	&quot;23&quot;: &quot;Richman&quot;,
	&quot;24&quot;: &quot;Man-who-dreamt&quot;,
	&quot;Α&quot;: &quot;Shining Ones&quot;,
	&quot;31&quot;: &quot;Simple&quot;,
	&quot;32&quot;: &quot;Sloth&quot;,
	&quot;33&quot;: &quot;Presumption&quot;,
	&quot;34&quot;: &quot;Formalist&quot;,
	&quot;35&quot;: &quot;Hypocrisy&quot;,
	&quot;36&quot;: &quot;Timorous&quot;,
	&quot;37&quot;: &quot;Mistrust&quot;,
	&quot;38&quot;: &quot;Watchful&quot;,
	&quot;39&quot;: &quot;Discretion&quot;,
	&quot;41&quot;: &quot;Piety&quot;,
	&quot;42&quot;: &quot;Prudence&quot;,
	&quot;43&quot;: &quot;Charity&quot;,
	&quot;44&quot;: &quot;Apollyon&quot;,
	&quot;45&quot;: &quot;Shrewd&quot;,
	&quot;46&quot;: &quot;Instinct&quot;,
	&quot;47&quot;: &quot;Pope&quot;,
	&quot;48&quot;: &quot;Pagan&quot;,
	&quot;51&quot;: &quot;Faithful&quot;,
    &quot;52&quot;: &quot;Wanton&quot;,
    &quot;53&quot;: &quot;Adam the 1st&quot;,
    &quot;54&quot;: &quot;Moses&quot;,
    &quot;55&quot;: &quot;Discontent&quot;,
    &quot;56&quot;: &quot;Shame&quot;,
    &quot;57&quot;: &quot;Talkative&quot;,
    &quot;61&quot;: &quot;Lord Hate-good&quot;,
    &quot;62&quot;: &quot;Envy&quot;,
    &quot;63&quot;: &quot;Superstition&quot;,
    &quot;64&quot;: &quot;Pickthank&quot;,
    &quot;65&quot;: &quot;Jury&quot;,
    &quot;71&quot;: &quot;Hopeful&quot;,
    &quot;72&quot;: &quot;By-ends&quot;,
    &quot;73&quot;: &quot;Mr. Money-Love&quot;,
    &quot;74&quot;: &quot;Mr. Save-All&quot;,
    &quot;75&quot;: &quot;Mr. Hold-the-World&quot;,
    &quot;76&quot;: &quot;Demas&quot;,
    &quot;77&quot;: &quot;Vain-Confidence&quot;,
    &quot;78&quot;: &quot;Giant Despair&quot;,
    &quot;79&quot;: &quot;Diffidence&quot;,
    &quot;81&quot;: &quot;Shepherds&quot;,
    &quot;91&quot;: &quot;Ignorance&quot;,
    &quot;92&quot;: &quot;Turn-away&quot;,
    &quot;93&quot;: &quot;Little-Faith&quot;,
    &quot;94&quot;: &quot;Faint-Heart&quot;,
    &quot;95&quot;: &quot;Mistrust&quot;,
    &quot;96&quot;: &quot;Guilt&quot;,
    &quot;97&quot;: &quot;Flatterer&quot;,
    &quot;κ&quot;: &quot;Shining One&quot;,
    &quot;98&quot;: &quot;Atheist&quot;,
	&quot;α&quot;: &quot;Son of Man&quot;,
    &quot;99&quot;: &quot;Temporary&quot;,
    &quot;101&quot;: &quot;Gardener&quot;,
    &quot;λ&quot;: &quot;Shining Ones&quot;,
    &quot;Ω&quot;: &quot;Lamb of God&quot;,
    &quot;102&quot;: &quot;Vain-Hope&quot;,
    &quot;103&quot;: &quot;Men-on-walls&quot;,
//	&quot;@&quot;: &quot;Narrator&quot;,
//	&quot;©&quot;: &quot;Mr. Sagacity&quot;,
	&quot;7&quot;: &quot;Christina&quot;,
	&quot;8&quot;: &quot;Matthew&quot;,
	&quot;9&quot;: &quot;Samuel&quot;,
	&quot;10&quot;: &quot;Joseph&quot;,
	&quot;11&quot;: &quot;James&quot;,
	&quot;12&quot;: &quot;Timorous&quot;,
	&quot;13&quot;: &quot;Mercy&quot;,
	&quot;14&quot;: &quot;Mrs. Bat’s-Eyes&quot;,
	&quot;15&quot;: &quot;Mrs. Inconsiderate&quot;,
	&quot;16&quot;: &quot;Mrs. Light-Mind&quot;,
	&quot;17&quot;: &quot;Mrs. Know-Nothing&quot;,
	&quot;201&quot;: &quot;Ill-favored ones&quot;,
	&quot;202&quot;: &quot;Ill-favored ones&quot;,
	&quot;203&quot;: &quot;Secret&quot;,
	&quot;211&quot;: &quot;Keep&quot;,
	&quot;221&quot;: &quot;Reliever&quot;,
	&quot;222&quot;: &quot;Innocent&quot;,
	&quot;223&quot;: &quot;Minstrels&quot;,
	&quot;231&quot;: &quot;Mr. Great-Heart&quot;,
	&quot;241&quot;: &quot;Grim&quot;,
	&quot;242&quot;: &quot;Humble-Mind&quot;,
	&quot;243&quot;: &quot;Mr. Brisk&quot;, 
	&quot;244&quot;: &quot;Mr. Skill&quot;, 
	&quot;251&quot;: &quot;Country birds&quot;,
	&quot;252&quot;: &quot;Shepherd&quot;,
	&quot;253&quot;: &quot;Maul&quot;, 
	&quot;261&quot;: &quot;Old Honest&quot;, 
	&quot;262&quot;: &quot;Mr. Fearing&quot;, 
}&gt;&gt;
&lt;&lt;run memorize(&quot;npcNames&quot;, $npcNames)&gt;&gt;</tw-passagedata><tw-passagedata pid="9" name="StorySubtitle" tags="built-in" position="300,25" size="100,100">from this world to that which is to come: delivered under the similitude of a dream</tw-passagedata><tw-passagedata pid="10" name="StoryAuthor" tags="built-in" position="425,25" size="100,100">[[John Bunyan|00-credits]]</tw-passagedata><tw-passagedata pid="11" name="StoryTitle" tags="built-in" position="175,25" size="100,100">Pilgrim&#39;s Progreſs</tw-passagedata><tw-passagedata pid="12" name="PassageHeader" tags="built-in" position="925,25" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;if tags().includes(&quot;moment&quot;)&gt;&gt;
	&lt;&lt;include &quot;ui-clues&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if def recall(&quot;isAlphaRevealed&quot;)&gt;&gt;
	&lt;&lt;set $isAlphaRevealed to recall(&quot;isAlphaRevealed&quot;)&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if def recall(&quot;npcNames&quot;)&gt;&gt;
	&lt;&lt;set $npcNames to recall(&quot;npcNames&quot;)&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if def recall(&quot;metNPCs&quot;)&gt;&gt;
	&lt;&lt;set $metNPCs to recall(&quot;metNPCs&quot;)&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if def recall(&quot;placeNames&quot;)&gt;&gt;
	&lt;&lt;set $placeNames to recall(&quot;placeNames&quot;)&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if def recall(&quot;seenVerses&quot;)&gt;&gt;
	&lt;&lt;set $seenVerses to recall(&quot;seenVerses&quot;)&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="13" name="PassageDone" tags="built-in" position="1300,25" size="100,100">&lt;&lt;if tags().includes(&quot;moment&quot;)&gt;&gt;
	&lt;&lt;set _passage to Story.get(passage())&gt;&gt;
	&lt;&lt;set $previous_moment to _passage.name&gt;&gt;
	&lt;&lt;set _text to _passage.processText()&gt;&gt;
	&lt;&lt;for _person range setup.npcs&gt;&gt;
		&lt;&lt;set _say to &quot;[&quot; + _person + &quot;]&quot;&gt;&gt;
		// Update list of npcs met
		&lt;&lt;if _text.includes(_say)&gt;&gt;
			&lt;&lt;if not $metNPCs.includes(_person)&gt;&gt;
				&lt;&lt;run $metNPCs.push(_person)&gt;&gt;
				&lt;&lt;run memorize(&quot;metNPCs&quot;, $metNPCs)&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;locate _person&gt;&gt;
		&lt;&lt;/if&gt;&gt;

		// Replace user-defined name in passage text
		&lt;&lt;if $isAlphaRevealed and 
			$alphaNPCs.includes(_person) and
			$npcNames.hasOwnProperty(&quot;α&quot;)&gt;&gt;
			&lt;&lt;run _color.push(&quot;celestial&quot;)&gt;&gt;
			&lt;&lt;set _text to _text.replaceAll(_say, &quot;&lt;span class=&#39;&quot;+ _color.join(&quot; &quot;) +&quot;&#39;&gt;[&quot; + 
				&quot;α&quot; + &quot; &lt;span&gt;&quot; + $npcNames[&quot;α&quot;] + &quot;&lt;/span&gt;]&lt;/span&gt;&quot;)&gt;&gt;	
		&lt;&lt;elseif $npcNames.hasOwnProperty(_person)&gt;&gt;
			&lt;&lt;set _color to [&quot;named&quot;]&gt;&gt;
			&lt;&lt;if setup.greekChars.test(_person)&gt;&gt;
				&lt;&lt;run _color.push(&quot;celestial&quot;)&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;set _text to _text.replaceAll(_say, &quot;&lt;span class=&#39;&quot;+ _color.join(&quot; &quot;) +&quot;&#39;&gt;[&quot; +  
				_person + &quot; &lt;span&gt;&quot; + $npcNames[_person] + &quot;&lt;/span&gt;]&lt;/span&gt;&quot;)&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/for&gt;&gt;
	&lt;&lt;set _text to Story.get(&quot;PassageHeader&quot;).processText() + _text&gt;&gt;
	&lt;&lt;set _text to _text + Story.get(&quot;PassageFooter&quot;).processText()&gt;&gt;
    
    // Inject linkappend macros
    &lt;&lt;set _text to _text.replaceAll(setup.undertone, setup.makeUp)&gt;&gt;
    
    // Replace passage text
	&lt;&lt;set _container to &quot;#&quot;+ _passage.id.toLowerCase()&gt;&gt;
	&lt;&lt;replace _container&gt;&gt;&lt;&lt;= _text&gt;&gt;&lt;&lt;/replace&gt;&gt;

	// Refresh clues
	&lt;&lt;set _hidden to _passage.text.matchAll(setup.undertone)&gt;&gt;
	&lt;&lt;if def _hidden&gt;&gt;
		&lt;&lt;set $hidden_text to Array.from(_hidden).length&gt;&gt;
		&lt;&lt;redo &quot;clues&quot;&gt;&gt;
    &lt;&lt;else&gt;&gt;
  		&lt;&lt;set $hidden_text to 0&gt;&gt;
		&lt;&lt;redo &quot;clues&quot;&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="14" name="PassageFooter" tags="built-in" position="1050,25" size="100,100"></tw-passagedata><tw-passagedata pid="15" name="PasageReady" tags="built-in" position="1175,25" size="100,100"></tw-passagedata><tw-passagedata pid="16" name="StoryMenu" tags="built-in" position="800,25" size="100,100">[[Names|00-names]] 
[[Book|00-book]]
[[Journal|00-journal]]
[[Progress|00-pilgrimage]] </tw-passagedata><tw-passagedata pid="17" name="00-names" tags="" position="800,150" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;if ndef $rename_npc or $rename_npc eq &quot;*&quot;&gt;&gt;
	&lt;&lt;set $rename_npc to $metNPCs.last()&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;div class=&quot;header&quot;&gt;
&lt;&lt;do tag &quot;rename&quot;&gt;&gt;
	&lt;&lt;if ndef _input&gt;&gt;&lt;&lt;set _input to &quot;&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;label&gt;Rename [&lt;&lt;cycle &quot;$rename_npc&quot; autoselect&gt;&gt;
		&lt;&lt;optionsfrom $metNPCs&gt;&gt;
	&lt;&lt;/cycle&gt;&gt;] as&lt;/label&gt;&lt;br&gt; 
	&lt;&lt;do tag &quot;namebox&quot;&gt;&gt;
		&lt;&lt;set _input to &quot;&quot;&gt;&gt;
		&lt;&lt;if def $rename_npc and $npcNames.hasOwnProperty($rename_npc)&gt;&gt;
			&lt;&lt;set _input to $npcNames[$rename_npc]&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;textbox &quot;_input&quot; _input autofocus&gt;&gt;&lt;&lt;button &quot;&quot;&gt;&gt;
			&lt;&lt;redo &quot;names&quot;&gt;&gt;
		&lt;&lt;/button&gt;&gt;
	&lt;&lt;/do&gt;&gt;
&lt;&lt;/do&gt;&gt;
&lt;/div&gt;
&lt;&lt;do tag &quot;names&quot;&gt;&gt;
	&lt;&lt;set _input_name to _input.substr(0, setup.npcNameMax)&gt;&gt;
	&lt;&lt;set _input_name to _input_name.replace(setup.unsafeChars, &quot;&quot;)&gt;&gt;
	&lt;&lt;set _input_name to _input_name.replaceAll(&quot;‑&quot;, &quot;-&quot;)&gt;&gt;
	&lt;&lt;set _input_name to _input_name.trim()&gt;&gt;
	&lt;&lt;if def _unname_npc and setup.npcs.includes(_unname_npc)&gt;&gt;
		&lt;&lt;run delete $npcNames[_unname_npc]&gt;&gt;
		&lt;&lt;run memorize(&quot;npcNames&quot;, $npcNames)&gt;&gt;
	&lt;&lt;elseif _input_name.length gt 0 and setup.npcs.includes($rename_npc)&gt;&gt;
		&lt;&lt;set $npcNames[$rename_npc] to _input_name&gt;&gt;
		&lt;&lt;run memorize(&quot;npcNames&quot;, $npcNames)&gt;&gt;
	&lt;&lt;/if&gt;&gt;

	&lt;&lt;set _names to Object.keys($npcNames)&gt;&gt;
	&lt;&lt;if ndef _names or _names.length is 0&gt;&gt;
		&lt;span class=&quot;info&quot;&gt;&lt;/span&gt;&lt;br&gt;
	&lt;&lt;else&gt;&gt;
		&lt;span class=&quot;info&quot;&gt;Displaying &lt;&lt;=_names.length&gt;&gt; name(s).&lt;/span&gt;&lt;br&gt;
		&lt;&lt;for _person range setup.npcs&gt;&gt;
			&lt;&lt;if $npcNames.hasOwnProperty(_person)&gt;&gt;
			&lt;label&gt;&lt;&lt;=_person&gt;&gt; - &lt;/label&gt; 
			&lt;&lt;= &quot;&lt;nowiki&gt;&quot;+ $npcNames[_person] +&quot;&lt;/nowiki&gt;&quot;&gt;&gt;
			&lt;&lt;set _rename_tip to &quot;Rename &quot;+_person&gt;&gt;
			&lt;&lt;set _delete_tip to &quot;Unset name &quot;+_person&gt;&gt;		
			&lt;small class=&quot;ui ui-write&quot; @title=&quot;_rename_tip&quot;&gt;
					&lt;&lt;= &quot;&lt;&lt;link \&quot;\&quot;&gt;&gt;&lt;&lt;set \$rename_npc to \&quot;&quot;+ _person +&quot;\&quot;&gt;&gt;&lt;&lt;set \_input to \&quot;&quot;+ $npcNames[_person] +&quot;\&quot;&gt;&gt;&lt;&lt;redo \&quot;rename\&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;&quot;&gt;&gt;&lt;/small&gt;&lt;small class=&quot;ui ui-bin&quot; @title=&quot;_delete_tip&quot;&gt;&lt;&lt;= &quot;&lt;&lt;link \&quot;\&quot;&gt;&gt;&lt;&lt;set \_unname_npc to \&quot;&quot;+ _person +&quot;\&quot;&gt;&gt;&lt;&lt;redo \&quot;names\&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;&quot;&gt;&gt;&lt;/small&gt;&lt;br&gt;&lt;&lt;/if&gt;&gt;
		&lt;&lt;/for&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/do&gt;&gt;
&lt;&lt;done&gt;&gt;
	&lt;&lt;run $(&#39;.macro-cycle&#39;).on(&#39;click&#39;, () =&gt; $(document).trigger({
		type: &#39;:redo&#39;,
		detail: { tags : [ &#39;namebox&#39; ] }
		}))&gt;&gt;
&lt;&lt;/done&gt;&gt;
&lt;br&gt;
&lt;&lt;back &quot;Go Back&quot; $previous_moment&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="18" name="01-SL-1-4" tags="moment slough" position="550,425" size="100,100">[@] The name of the slough was Despond. Here, therefore, they wallowed for a time, being grievously bedaubed with the dirt; and Christian, because of the burden that was on his back, began to sink in the mire.

[4] Ah, neighbor Christian, where are you now?

[1] Truly, I do not know. 

[@] At this Pliable began to be offended, and angrily said to his fellow,

[4] Is this the happiness you have told me all this while of? If we have such ill speed at our first setting out, what may we expect between this and our journey’s end? May I get out again with my life, you shall possess the brave country alone for me.

[@] And with that he gave a desperate struggle or two, and got out of the mire on that side of the slough which was next to his own house: so away he went, and Christian saw him no more.

[@] Wherefore Christian was left to tumble in the [[Slough of Despond|01-SL-1-5]] alone;…  </tw-passagedata><tw-passagedata pid="19" name="01-SL-1-5" tags="moment slough" position="425,425" size="100,100">[@] …but still he endeavored to struggle to that side of the slough that was farthest from his own house, and next to the wicket-gate; the which he did, but could not get out because of the burden that was upon his back; but I beheld in my dream, that a man came to him, whose name was Help, and asked him what he did there. 

[1] Sir, I was bid to go this way by a man called Evangelist, who directed me also to yonder gate, that I might escape the wrath to come. And as I was going thither, I fell in here. 

[5] But why did not you look for the __steps__ (1 Samuel 12:23)?

[1] Fear followed me so hard that I fled the next way, and fell in.

[5] Give me thine hand. 

[@] So he gave him his hand, and he drew him out, and he set him upon __sound ground__ (Psalm 40:2), and bid him go on his way. Stepped to him that plucked him out,

[1] Sir, wherefore, since over this place is the way from the city of Destruction to yonder gate, is it, that this plat is not mended, that poor travellers might go thither with more security?

[5] This miry slough is such a place as cannot be mended: it is the descent whither the scum and filth that attends conviction for sin doth continually run, and therefore it is called the Slough of Despond; for still, as the sinner is awakened about his lost condition, there arise in his soul many fears and doubts, and discouraging apprehensions, which all of them get together, and settle in this place: and this is the reason of the badness of this ground. 

[5] It is not the pleasure of the King that this place should remain so bad. His laborers also have, by the direction of his Majesty’s surveyors, been for above this sixteen hundred years employed about this patch of ground, if perhaps it might have been mended: yea, and to my knowledge, there have been swallowed up at least twenty thousand cart loads, yea, millions of wholesome instructions, that have at all seasons been brought from all places of the King’s dominions, (and they that can tell, say, they are the best materials to make good ground of the place,) if so be it might have been __mended__ (Isaiah 35:3-4); but it is the Slough of Despond still, and so will be when they have done what they can. 

[5] True, there are, by the direction of the Lawgiver, certain good and substantial steps, placed even through the very midst of this slough; but at such time as this place doth much spew out its filth, as it doth against change of weather, these steps are hardly seen; or if they be, men, through the dizziness of their heads, step beside, and then they are bemired to purpose, notwithstanding the steps be there: but the ground is good when they are once got in at the gate.

[@] Now I saw in my dream, that…
* By this time Pliable was got home to [[his house.|01-PL-4]]
* As Christian was walking solitary by himself, he espied one afar off come [[crossing over the field|01-CR-1-6]] to meet him.</tw-passagedata><tw-passagedata pid="20" name="01-PL-4" tags="moment hometown" position="425,575" size="100,100">[@] So his neighbors came to visit him; and some of them called him wise man for coming back, and some called him fool for hazarding himself with Christian: others again did mock at his cowardliness, &lt;q&gt;Surely, since you began to venture, I would not have been so base as to have given out for a few difficulties.&lt;/q&gt;

[@] So Pliable sat sneaking among them. But at last he got more confidence, and then they all turned their tales, and began to deride poor Christian behind his back. And thus much concerning Pliable.

[@] Now as Christian was walking solitary by himself, he espied one afar off come [[crossing over the field|01-CR-1-6]] to meet him; and their hap was to meet just as they were crossing the way of each other.</tw-passagedata><tw-passagedata pid="21" name="01-CR-1-6" tags="moment crossover" position="550,575" size="100,100">[@] The gentleman’s name that met him was Mr. Worldly Wiseman: he dwelt in the town of Carnal Policy, a very great town, and also hard by from whence Christian came. 

[@] This man then, meeting with Christian, and having some inkling of him, (for Christian’s setting forth from the city of Destruction was much noised abroad, not only in the town where he dwelt, but also it began to be the town-talk in some other places)—Mr. Worldly Wiseman, therefore, having some guess of him, by beholding his laborious going, by observing his sighs and groans, and the like, began thus to enter into some talk with Christian. 

[6] How now, good fellow, whither away after this burdened manner?

[1] A burdened manner indeed, as ever I think poor creature had! And whereas you ask me, Whither away? I tell you, sir, I am going to yonder wicket-gate before me; for there, as I am informed, I shall be put into a way to be rid of my heavy burden. 

[6] Hast thou a wife and children?

[1] Yes; but I am so laden with this burden, that I cannot take that pleasure in them as formerly: methinks I am as if I had __none__ (1 Corinthians 7:29).

[6] Wilt thou hearken to me, if I give thee counsel? 

[1] If it be good, I will; for I stand in need of good counsel.

[6] I would advise thee, then, that thou with all speed get thyself rid of thy burden; for thou wilt never be settled in thy mind till then: nor canst thou enjoy the benefits of the blessings which God hath bestowed upon thee till then. 

[1] That is that which I seek for, even to be rid of this heavy burden: but get it off myself I cannot, nor is there any man in our country that can take it off my shoulders; therefore am I going this way, as I told you, that I may be rid of my burden.

[6] Who bid thee go this way to be rid of thy burden?

[1] A man that appeared to me to be a very great and honorable person: his name, as I remember, is Evangelist.

[6] I beshrew him for his counsel! there is not a more dangerous and troublesome way in the world than is that into which he hath directed thee; and that thou shalt find, if thou wilt be ruled by his counsel. Thou hast met with something, as I perceive, already; for I see the dirt of the Slough of Despond is upon thee: but that slough is the beginning of the sorrows that do attend those that go on in that way. 

[6] Hear me; I am older than thou: thou art like to meet with, in the way which thou goest, wearisomeness, painfulness, hunger, perils, nakedness, sword, lions, dragons, darkness, and, in a word, death, and what not. These things are certainly true, having been confirmed by many testimonies. And should a man so carelessly cast away himself, by giving heed to a stranger?

[1] Why, sir, this burden on my back is more terrible to me than are all these things which you have mentioned: nay, methinks I care not what I meet with in the way, if so be I can also meet with deliverance from my burden.

[6] How camest thou by thy burden at first?

[1] By reading this book in my hand.

[6] I thought so; and it has happened unto thee as to other weak men, who, meddling with things too high for them, do suddenly fall into thy distractions; which distractions do not only unman men, as thine I perceive have done thee, but they run them upon desperate ventures, to obtain they know not what.

[1] I know what I would obtain; it is ease from my heavy burden.

[6] But why wilt thou seek for ease this way, seeing so many dangers attend it? especially since (hadst thou but patience to hear me) I could direct thee to the obtaining of what thou desirest, without the dangers that thou in this way wilt run thyself into. Yea, and the remedy is at hand. Besides, I will add, that instead of those dangers, thou shalt meet with much safety, friendship, and content.

[1] Sir, I pray open this secret to me.

[6] Why, in yonder village (the village is named Morality) there dwells a gentleman whose name is Legality, a very judicious man, and a man of a very good name, that has skill to help men off with such burdens as thine is from their shoulders; yea to my knowledge, he hath done a great deal of good this way; aye, and besides, he hath skill to cure those that are somewhat crazed in their wits with their burdens. 

[6] To him, as I said, thou mayest go, and be helped presently. His house is not quite a mile from this place; and if he should not be at home himself, he hath a pretty young man to his son, whose name is Civility, that can do it (to speak on) as well as the old gentleman himself: there, I say, thou mayest be eased of thy burden; and if thou art not minded to go back to thy former habitation, (as indeed I would not wish thee,) thou mayest send for thy wife and children to this village, where there are houses now standing empty, one of which thou mayest have at a reasonable rate: provision is there also cheap and good; and that which will make thy life the more happy is, to be sure there thou shalt live by honest neighbors, in credit and good fashion. 

[@] Now was Christian somewhat at a stand; but presently he concluded,

[1] If this be true which this gentleman hath said, my wisest course is to take his advice: and with that he thus farther spake.

[1] Sir, which is my way to this honest man’s house? 

[6] Do you see yonder [[high hill|01-SI-1-2]]?

[1] Yes, very well. 

[6] By that hill you must go, and the first house you come at is his.

[@]  So Christian turned out of his way to go to Mr. Legality’s house for help: but, behold,… </tw-passagedata><tw-passagedata pid="22" name="01-SI-1-2" tags="moment mountain_#1" position="675,575" size="100,100">[@] When he was got now hard by the hill, it seemed so high, and also that side of it that was next the way-side did hang so much over, that Christian was afraid to venture further, lest the hill should fall on his head; wherefore there he stood still, and wotted not what to do.

[@] Also his burden now seemed heavier to him than while he was in his way. There came also __flashes of fire__ (Exodus 19:16), out of the hill, that made Christian afraid that he should be burnt: here therefore he did sweat and quake for __fear.__ (Hebrews 12:21)

[@] And now he began to be sorry that he had taken Mr. Worldly Wiseman’s counsel; and with that he saw Evangelist coming to meet him, at the sight also of whom he began to blush for shame. So Evangelist drew nearer and nearer; and coming up to him, he looked upon him, with a severe and dreadful countenance, and thus began to reason with Christian. 

[2] What doest thou here, Christian? 

[@] At which words Christian knew not what to answer; wherefore at present he stood speechless before him. 

[2] Art not thou the man that I found crying without the walls of the city of Destruction?

[1] Yes, dear sir, I am the man.

[2] Did not I direct thee the way to the little wicket-gate? 

[1] Yes, dear sir,

[2] How is it then thou art so quickly turned aside? For thou art now out of the way.

[1] I met with a gentleman so soon as I had got over the Slough of Despond, who persuaded me that I might, in the village before me, find a man that could take off my burden.

[2] What was he?

[1] He looked like a gentleman, and talked much to me, and got me at last to yield: so I came hither; but when I beheld this hill, and how it hangs over the way, I suddenly made a stand, lest it should fall on my head.

[2] What said that gentleman to you?

[1] Why, he asked me whither I was going; and I told him.

[2] And what said he then? 

[1] He asked me if I had a family; and I told him. But, said I, I am so laden with the burden that is on my back, that I cannot take pleasure in them as formerly. 

[2] And what said he then?

[1] He bid me with speed get rid of my burden; and I told him it was ease that I sought. And, said I, I am therefore going to yonder gate, to receive farther direction how I may get to the place of deliverance. So he said that he would show me a better way, and short, not so attended with difficulties as the way, sir, that you set me in; which way, said he, will direct you to a gentleman’s house that hath skill to take off these burdens: so I believed him, and turned out of that way into this, if haply I might be soon eased of my burden. But when I came to this place, and beheld things as they are, I stopped, for fear (as I said) of danger: but I now know not what to do.

[2] Stand still a little, that I show thee the words of God.
&gt; &lt;&lt;book &quot;Hebrews 12:25&quot;&gt;&gt;
moreover, 
&gt; &lt;&lt;book &quot;Hebrews 10:38&quot;&gt;&gt;
He also did thus apply them: Thou art the man that art running into this misery; thou hast begun to reject the counsel of the Most High, and to draw back thy foot from the way of peace, even almost to the hazarding of thy perdition.

[@] Then Christian fell down at his feet as dead, crying, 

[1] Woe is me, for I am undone!

[@] At the sight of which Evangelist caught him by the right hand, saying,

[2] __All manner of sin and blasphemies shall be forgiven unto men.__ (Matthew 12:31)  __Be not faithless, but believing.__ (John 20:27)

[@] Then Evangelist proceeded, saying, 

[2] Give more earnest heed to the things that I shall tell thee of. I will now show thee who it was that deluded thee, and who it was also to whom he sent thee. 

[2] The man that met thee is one Worldly Wiseman, and rightly is he so called; partly because he savoreth only the __doctrine of this world__ (1 John 4:5) (therefore he always goes to the town of Morality to church;) and partly because he loveth that doctrine best, for it saveth him best from __the cross__ (Galatians 6:12) : and because he is of this carnal temper, therefore he seeketh to pervert my ways, though right. Now there are three things in this man’s counsel that thou must utterly abhor. 
# His turning thee out of the way.
# His laboring to render the cross odious to thee.
# And his setting thy feet in that way that leadeth unto the administration of death.

[2] First, thou must abhor his turning thee out of the way; yea, and thine own consenting thereto; because this is to reject the counsel of God for the sake of the counsel of a Worldly Wiseman. The Lord says,
&gt; __Strive to enter in at the straight gate,…__ (Luke 13:24)
the gate to which I send thee;  
&gt; __…for strait is the gate that leadeth unto life, and few there be that find it.__ (Matthew 7:13-14)
From this little wicket-gate, and from the way thereto, hath this wicked man turned thee, to the bringing of thee almost to destruction: hate, therefore, his turning thee out of the way, and abhor thyself for hearkening to him. 

[2] Secondly, Thou must abhor his laboring to render the cross odious unto thee; for thou art to prefer it before the __treasures of Egypt__ (Hebrews 11:25-26). Besides, the King of glory hath told thee, that he that will save his life shall lose it. And he that comes after him, and hates not his father, and mother, and wife, and children, and brethren, and sisters, yea, and his own life also, he cannot be __his disciple__ (Mark 8:38; John 12:25; Matthew 10:39; Luke 14:26).

[2] I say, therefore, for a man to labor to persuade thee that that shall be thy death, without which, the truth hath said, thou canst not have eternal life, this doctrine thou must abhor.

[2] Thirdly, thou must hate his setting of thy feet in the way that leadeth to the administration of death. And for this thou must consider to whom he sent thee, and also how unable that person was to deliver thee from thy burden.

[2] He to whom thou wast sent for ease, being by name Legality, is the son of the __bond-woman__ (Galatians 4:21-27) which now is, and is in bondage with her children, and is, in a mystery, this Mount Sinai, which thou hast feared will fall on thy head. Now if she with her children are in bondage, how canst thou expect by them to be made free? 

[2] This Legality, therefore, is not able to set thee free from thy burden. No man was as yet ever rid of his burden by him; no, nor ever is like to be: ye cannot be justified by the works of the law; for by the deeds of the law no man living can be rid of his burden: Therefore Mr. Worldly Wiseman is an alien, and Mr. Legality is a cheat; and for his son Civility, notwithstanding his simpering looks, he is but a hypocrite, and cannot help thee. 

[2] Believe me, there is nothing in all this noise that thou hast heard of these sottish men, but a design to beguile thee of thy salvation, by turning thee from the way in which I had set thee. 

[@] After this, Evangelist called aloud to the heavens for confirmation of what he had said; and with that there came words and fire out of the mountain under which poor Christian stood, which made the hair of his flesh stand up. The words were pronounced:
&gt; &lt;&lt;book &quot;Galatians 3:10&quot;&gt;&gt;

[@] Now Christian looked for nothing but death, and began to cry out lamentably; even cursing the time in which he met with Mr. Worldly Wiseman; still calling himself a thousand fools for hearkening to his counsel. He also was greatly ashamed to think that this gentleman’s arguments, flowing only from the flesh, should have the prevalency with him so far as to cause him to forsake the right way. This done, he applied himself again to Evangelist in words and sense as follows.

[1] Sir, what think you? Is there any hope? May I now go back, and go up to the wicket-gate? Shall I not be abandoned for this, and sent back from thence ashamed? I am sorry I have hearkened to this man’s counsel; but may my sin be forgiven?

[2] Thy sin is very great, for by it thou hast committed two evils: thou hast forsaken the way that is good, to tread in forbidden paths. Yet will the man at the gate receive thee, for he has good-will for men; only, said he, take heed that thou turn not aside again, lest thou __perish__ (Psalm 2:12) from the way, when his wrath is kindled but a little.

[@] Then did Christian address himself to go back; and Evangelist, after he had kissed him, gave him one smile, and bid him God speed; So he went on with haste, neither spake he to any man by the way; nor if any asked him, would he vouchsafe them an answer. 

[@] He went like one that was all the while treading on forbidden ground, and could by no means think himself safe, till again he was got into the way which he had left to follow Mr. Worldly Wiseman’s counsel. So, in process of time, Christian got up to [[the gate|02-GA-1-21]].</tw-passagedata><tw-passagedata pid="23" name="Matthew 3:7 KJV" tags="bible" position="1850,300" size="100,100">But when he saw many of the Pharisees and Sadducees come to his baptism, he said unto them, O generation of vipers, who hath warned you to flee from the wrath to come?</tw-passagedata><tw-passagedata pid="24" name="01-HO-1" tags="moment hometown" position="800,300" size="100,100">[@] Wherefore at length he brake his mind to his wife and children; and thus he began to talk to them.

[1] O, my dear wife, and you the children of my bowels, I, your dear friend, am in myself undone by reason of a burden that lieth hard upon me; moreover, I am certainly informed that this our city will be burnt with fire from heaven; in which fearful overthrow, both myself, with thee my wife, and you my sweet babes, shall miserably come to ruin, except (the which yet I see not) some way of escape can be found whereby we may be delivered.

[@] At this his relations were sore amazed; not for that they believed that what he had said to them was true, but because they thought that some frenzy distemper had got into his head; therefore, it drawing towards night, and they hoping that sleep might settle his brains, with all haste they got him to bed.

[@] But the night was as troublesome to him as the day; wherefore, instead of sleeping, he spent it in sighs and tears. So when the morning was come, they would know how he did.

[1] Worse and worse.

[@] He also set to talking to them again; but they began to be hardened. They also thought to drive away his distemper by harsh and surly carriage to him; sometimes they would deride, sometimes they would chide, and sometimes they would quite neglect him.

[@] Wherefore he began to retire himself to his chamber to pray for and pity them, and also to condole his own misery; he would also walk solitarily in the [[fields|01-FI-1-2]], sometimes reading, and sometimes praying: and thus for some days he spent his time.</tw-passagedata><tw-passagedata pid="25" name="Isaiah 64:6 KJV" tags="bible" position="1050,300" size="100,100">But we are all as an unclean thing, and all our righteousnesses are as filthy rags; and we all do fade as a leaf; and our iniquities, like the wind, have taken us away.</tw-passagedata><tw-passagedata pid="26" name="Acts 2:37 KJV" tags="bible" position="1250,300" size="100,100">Now when they heard this, they were pricked in their heart, and said unto Peter and to the rest of the apostles, Men and brethren, what shall we do?</tw-passagedata><tw-passagedata pid="27" name="Psalm 38:4 KJV" tags="bible" position="1150,300" size="100,100">For mine iniquities are gone over mine head: as an heavy burden they are too heavy for me.</tw-passagedata><tw-passagedata pid="28" name="Habakkuk 1:2-3 KJV" tags="bible prayer" position="1650,300" size="100,100">O Lord, how long shall I cry, and thou wilt not hear! even cry out unto thee of violence, and thou wilt not save! Why dost thou shew me iniquity, and cause me to behold grievance? for spoiling and violence are before me: and there are that raise up strife and contention.</tw-passagedata><tw-passagedata pid="29" name="Luke 14:33 KJV" tags="bible" position="1350,400" size="100,100">(Jesus speaking) So likewise, whosoever he be of you that forsaketh not all that he hath, he cannot be my disciple.</tw-passagedata><tw-passagedata pid="30" name="Hebrews 9:27 KJV" tags="bible" position="1450,300" size="100,100">And as it is appointed unto men once to die, but after this the judgment:</tw-passagedata><tw-passagedata pid="31" name="Job 10:21-22 KJV" tags="bible" position="1550,300" size="100,100">Before I go whence I shall not return, even to the land of darkness and the shadow of death; A land of darkness, as darkness itself; and of the shadow of death, without any order, and where the light is as darkness.</tw-passagedata><tw-passagedata pid="32" name="Acts 16:30-31 KJV" tags="bible promise" position="1350,300" size="100,100">And brought them out, and said, Sirs, what must I do to be saved? And they said, Believe on the Lord Jesus Christ, and thou shalt be saved, and thy house.</tw-passagedata><tw-passagedata pid="33" name="Isaiah 30:33 KJV" tags="bible" position="1750,300" size="100,100">For Tophet is ordained of old; yea, for the king it is prepared; he hath made it deep and large: the pile thereof is fire and much wood; the breath of the Lord, like a stream of brimstone, doth kindle it.</tw-passagedata><tw-passagedata pid="34" name="Matthew 7:13-14 KJV" tags="bible promise" position="1950,300" size="100,100">(Jesus speaking) Enter ye in at the strait gate: for wide is the gate, and broad is the way, that leadeth to destruction, and many there be which go in thereat: Because strait is the gate, and narrow is the way, which leadeth unto life, and few there be that find it.</tw-passagedata><tw-passagedata pid="35" name="2 Peter 1:19 KJV" tags="bible promise" position="1050,400" size="100,100">We have also a more sure word of prophecy; whereunto ye do well that ye take heed, as unto a light that shineth in a dark place, until the day dawn, and the day star arise in your hearts:</tw-passagedata><tw-passagedata pid="36" name="Psalm 119:105 KJV" tags="bible prayer" position="1150,400" size="100,100">Thy word is a lamp unto my feet, and a light unto my path.</tw-passagedata><tw-passagedata pid="37" name="Luke 14:26 KJV" tags="bible" position="1250,400" size="100,100">(Jesus speaking) If any man come to me, and hate not his father, and mother, and wife, and children, and brethren, and sisters, yea, and his own life also, he cannot be my disciple.</tw-passagedata><tw-passagedata pid="38" name="Genesis 19:17 KJV" tags="bible" position="1450,400" size="100,100">And it came to pass, when they had brought them forth abroad, that he said, Escape for thy life; look not behind thee, neither stay thou in all the plain; escape to the mountain, lest thou be consumed.</tw-passagedata><tw-passagedata pid="39" name="Jeremiah 20:10 KJV" tags="bible" position="1550,400" size="100,100">For I heard the defaming of many, fear on every side. Report, say they, and we will report it. All my familiars watched for my halting, saying, Peradventure he will be enticed, and we shall prevail against him, and we shall take our revenge on him.</tw-passagedata><tw-passagedata pid="40" name="2 Corinthians 4:18 KJV" tags="bible" position="1650,400" size="100,100">While we look not at the things which are seen, but at the things which are not seen: for the things which are seen are temporal; but the things which are not seen are eternal.</tw-passagedata><tw-passagedata pid="41" name="Luke 15:17 KJV" tags="bible" position="1750,400" size="100,100">And when he came to himself, he said, How many hired servants of my father’s have bread enough and to spare, and I perish with hunger!</tw-passagedata><tw-passagedata pid="42" name="1 Peter 1:4 KJV" tags="bible promise" position="1850,400" size="100,100">To an inheritance incorruptible, and undefiled, and that fadeth not away, reserved in heaven for you,</tw-passagedata><tw-passagedata pid="43" name="Hebrews 11:16 KJV" tags="bible" position="1050,500" size="100,100">But now they desire a better country, that is, an heavenly: wherefore God is not ashamed to be called their God: for he hath prepared for them a city.</tw-passagedata><tw-passagedata pid="44" name="Luke 9:62 KJV" tags="bible" position="1150,500" size="100,100">And Jesus said unto him, No man, having put his hand to the plough, and looking back, is fit for the kingdom of God.</tw-passagedata><tw-passagedata pid="45" name="Hebrews 9:17-21 KJV" tags="bible" position="1250,500" size="100,100">For a testament is of force after men are dead: otherwise it is of no strength at all while the testator liveth. Whereupon neither the first testament was dedicated without blood. For when Moses had spoken every precept to all the people according to the law, he took the blood of calves and of goats, with water, and scarlet wool, and hyssop, and sprinkled both the book, and all the people, Saying, This is the blood of the testament which God hath enjoined unto you. Moreover he sprinkled with blood both the tabernacle, and all the vessels of the ministry.</tw-passagedata><tw-passagedata pid="46" name="Titus 1:2 KJV" tags="bible promise" position="1350,500" size="100,100">In hope of eternal life, which God, that cannot lie, promised before the world began;</tw-passagedata><tw-passagedata pid="47" name="00-book" tags="" position="925,150" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;div class=&quot;header&quot;&gt;&lt;/div&gt;
&lt;&lt;do tag &quot;unseen&quot;&gt;&gt;
	&lt;&lt;if $seenVerses.includes($unseen_verse)&gt;&gt;
		&lt;&lt;set _pos to $seenVerses.lastIndexOf($unseen_verse)&gt;&gt;
		&lt;&lt;set _unseen to $seenVerses.deleteAll($unseen_verse)&gt;&gt;
		&lt;&lt;if _unseen.length gt 0&gt;&gt;
			&lt;&lt;run memorize(&quot;seenVerses&quot;, $seenVerses)&gt;&gt;
			&lt;&lt;set $unseen_verse to &quot;*&quot;&gt;&gt;
			&lt;&lt;if _pos gt $seenVerses.length-1 or _pos lt 0&gt;&gt;
				&lt;&lt;set $select_verse to &quot;*&quot;&gt;&gt;
			&lt;&lt;else&gt;&gt;
				&lt;&lt;set $select_verse to $seenVerses[_pos]&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/do&gt;&gt;
&lt;&lt;do tag &quot;verse&quot;&gt;&gt;
	&lt;&lt;if $seenVerses.length is 0&gt;&gt;
		&lt;span class=&quot;info&quot;&gt;The book lays still.&lt;br&gt;
        &lt;q&gt;If that thou wilt not read, let it alone.&lt;/q&gt; &lt;&lt;include &quot;StoryAuthor&quot;&gt;&gt;&lt;/span&gt;&lt;br&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;set _verses to []&gt;&gt;
		&lt;&lt;if def _verse_tag&gt;&gt;
			&lt;&lt;for _v range $seenVerses&gt;&gt;
				&lt;&lt;if tags(_v).includes(_verse_tag)&gt;&gt;
					&lt;&lt;run _verses.push(_v)&gt;&gt;
				&lt;&lt;/if&gt;&gt;
			&lt;&lt;/for&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;set _verses to $seenVerses&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;if _verses.length gt 0&gt;&gt;
			&lt;&lt;if ndef $select_verse or $select_verse eq &quot;*&quot;&gt;&gt;
				&lt;&lt;set $select_verse to _verses.last()&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;fieldset class=&quot;verses&quot;&gt;
			&lt;legend&gt;
				&lt;&lt;cycle &quot;$select_verse&quot; autoselect&gt;&gt;
					&lt;&lt;optionsfrom _verses&gt;&gt;				
				&lt;&lt;/cycle&gt;&gt;
			&lt;/legend&gt;
			&lt;div id=&quot;selected-verse&quot;&gt;
				&lt;&lt;include $select_verse&gt;&gt;
			&lt;/div&gt;
		&lt;/fieldset&gt;
		&lt;div class=&quot;verses-footnote&quot;&gt;
		&lt;&lt;do tag &quot;cycle&quot;&gt;&gt;
			&lt;&lt;run setPageElement(&quot;selected-verse&quot;, $select_verse)&gt;&gt;
			&lt;&lt;set _info to (_verses.indexOf($select_verse)+1) +&quot; / &quot;+ _verses.length&gt;&gt;
			&lt;&lt;set _tags to tags($select_verse)&gt;&gt;
			&lt;&lt;for _tag range _tags&gt;&gt;
				&lt;&lt;if _tag eq &quot;bible&quot;&gt;&gt;
					&lt;&lt;continue&gt;&gt;
				&lt;&lt;elseif def _verse_tag and _verse_tag is _tag&gt;&gt;
					&lt;&lt;set _info to &quot;&lt;span class=\&quot;tag ui active\&quot; id=\&quot;&quot;+ _tag +&quot;\&quot;&gt;&lt;&lt;link \&quot;&quot;+ _tag.replaceAll(&quot;_&quot;, &quot; &quot;).toUpperFirst() +&quot;\&quot;&gt;&gt;&lt;&lt;unset _verse_tag&gt;&gt;&lt;&lt;redo \&quot;verse\&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&quot;+_info&gt;&gt;
				&lt;&lt;else&gt;&gt;
					&lt;&lt;set _info to &quot;&lt;span class=\&quot;tag ui\&quot; id=\&quot;&quot;+ _tag +&quot;\&quot;&gt;&lt;&lt;link \&quot;&quot;+ _tag.replaceAll(&quot;_&quot;, &quot; &quot;).toUpperFirst() +&quot;\&quot;&gt;&gt;&lt;&lt;set _verse_tag to \&quot;&quot;+ _tag +&quot;\&quot;&gt;&gt;&lt;&lt;redo \&quot;verse\&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&quot;+_info&gt;&gt;
				&lt;&lt;/if&gt;&gt;
			&lt;&lt;/for&gt;&gt;
			&lt;&lt;set _tip to &quot;Unseen verse &quot;+ $select_verse&gt;&gt;
			&lt;small class=&quot;info&quot;&gt;
				&lt;&lt;= _info&gt;&gt;
			&lt;/small&gt;
			&lt;small class=&quot;ui ui-bin&quot; @title=&quot;_tip&quot;&gt;
				&lt;&lt;= &quot;&lt;&lt;link \&quot;\&quot;&gt;&gt;&lt;&lt;set \$unseen_verse to \&quot;&quot;+ $select_verse +&quot;\&quot;&gt;&gt;&lt;&lt;redo \&quot;unseen\&quot;&gt;&gt;&lt;&lt;redo \&quot;verse\&quot;&gt;&gt;&lt;&lt;redo \&quot;ui-bar-fill\&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;&quot;&gt;&gt;
			&lt;/small&gt;
		&lt;&lt;/do&gt;&gt;
		&lt;/div&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;done&gt;&gt;
		&lt;&lt;run $(&#39;.macro-cycle&#39;).on(&#39;click&#39;, () =&gt; $(document).trigger({
			type: &#39;:redo&#39;,
			detail: { tags : [ &#39;cycle&#39; ] }
			}))&gt;&gt;
	&lt;&lt;/done&gt;&gt;
&lt;&lt;/do&gt;&gt;
&lt;br&gt;
&lt;&lt;back &quot;Go Back&quot; $previous_moment&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="48" name="ui-clues" tags="" position="175,150" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;div id=&quot;clues&quot; class=&quot;ui&quot;&gt;
	&lt;&lt;do tag &quot;clues&quot;&gt;&gt;
	&lt;&lt;if $hidden_text gt 0&gt;&gt;
		&lt;div class=&quot;ui-hidden-text&quot; title=&quot;hidden text&quot;&gt;
			&lt;&lt;= $hidden_text&gt;&gt;
		&lt;/div&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;/do&gt;&gt;
&lt;/div&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="49" name="John 10:27-29 KJV" tags="bible promise" position="1550,500" size="100,100">(Jesus speaking) My sheep hear my voice, and I know them, and they follow me: And I give unto them eternal life; and they shall never perish, neither shall any man pluck them out of my hand. My Father, which gave them me, is greater than all; and no man is able to pluck them out of my Father’s hand.</tw-passagedata><tw-passagedata pid="50" name="Isaiah 65:17 KJV" tags="bible promise" position="1450,500" size="100,100">For, behold, I create new heavens and a new earth: and the former shall not be remembered, nor come into mind.</tw-passagedata><tw-passagedata pid="51" name="2 Timothy 4:8 KJV" tags="bible promise" position="1650,500" size="100,100">Henceforth there is laid up for me a crown of righteousness, which the Lord, the righteous judge, shall give me at that day: and not to me only, but unto all them also that love his appearing.</tw-passagedata><tw-passagedata pid="52" name="Revelation 22:5 KJV" tags="bible promise" position="1850,500" size="100,100">And there shall be no night there; and they need no candle, neither light of the sun; for the Lord God giveth them light: and they shall reign for ever and ever.</tw-passagedata><tw-passagedata pid="53" name="Matthew 13:43 KJV" tags="bible promise" position="1750,500" size="100,100">(Jesus speaking) Then shall the righteous shine forth as the sun in the kingdom of their Father. Who hath ears to hear, let him hear.</tw-passagedata><tw-passagedata pid="54" name="Isaiah 25:8 KJV" tags="bible promise" position="1950,500" size="100,100">He will swallow up death in victory; and the Lord GOD will wipe away tears from off all faces; and the rebuke of his people shall he take away from off all the earth: for the Lord hath spoken it.</tw-passagedata><tw-passagedata pid="55" name="1 Thessalonians 4:16-17 KJV" tags="bible promise" position="1350,600" size="100,100">For the Lord himself shall descend from heaven with a shout, with the voice of the archangel, and with the trump of God: and the dead in Christ shall rise first: Then we which are alive and remain shall be caught up together with them in the clouds, to meet the Lord in the air: and so shall we ever be with the Lord.</tw-passagedata><tw-passagedata pid="56" name="Revelation 7:16-17 KJV" tags="bible promise" position="1050,600" size="100,100">They shall hunger no more, neither thirst any more; neither shall the sun light on them, nor any heat. For the Lamb which is in the midst of the throne shall feed them, and shall lead them unto living fountains of waters: and God shall wipe away all tears from their eyes.</tw-passagedata><tw-passagedata pid="57" name="Revelation 21:4 KJV" tags="bible promise" position="1150,600" size="100,100">And God shall wipe away all tears from their eyes; and there shall be no more death, neither sorrow, nor crying, neither shall there be any more pain: for the former things are passed away.</tw-passagedata><tw-passagedata pid="58" name="widget-vv" tags="widget" position="175,300" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;widget &quot;vv&quot; container&gt;&gt;
	&lt;&lt;set _class to []&gt;&gt;
	&lt;&lt;if _args[0]&gt;&gt;
		&lt;&lt;set _vv_passage to Story.get(_args[0])&gt;&gt;
		&lt;&lt;if _vv_passage.tags.includes(&quot;bible&quot;)&gt;&gt;
			&lt;&lt;run _class.push(&quot;verse&quot;)&gt;&gt;
			&lt;&lt;if not $seenVerses.includes(_vv_passage.name)&gt;&gt;
				&lt;&lt;run $seenVerses.push(_vv_passage.name)&gt;&gt;
				&lt;&lt;run memorize(&quot;seenVerses&quot;, $seenVerses)&gt;&gt;
				&lt;&lt;run _class.push(&quot;discovered&quot;)&gt;&gt;
				&lt;&lt;redo &quot;ui-bar-fill&quot;&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;set _class to _class.join(&quot; &quot;)&gt;&gt;
	&lt;q @class=&quot;_class&quot;&gt;_contents&lt;/q&gt;&lt;&lt;if _args[0]&gt;&gt; &lt;cite&gt;(_args[0])&lt;/cite&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="59" name="Isaiah 6:2 KJV" tags="bible" position="1250,600" size="100,100">Above it stood the seraphims: each one had six wings; with twain he covered his face, and with twain he covered his feet, and with twain he did fly.</tw-passagedata><tw-passagedata pid="60" name="Revelation 5:11 KJV" tags="bible" position="1450,600" size="100,100">And I beheld, and I heard the voice of many angels round about the throne and the beasts and the elders: and the number of them was ten thousand times ten thousand, and thousands of thousands;</tw-passagedata><tw-passagedata pid="61" name="Revelation 4:4 KJV" tags="bible" position="1550,600" size="100,100">And round about the throne were four and twenty seats: and upon the seats I saw four and twenty elders sitting, clothed in white raiment; and they had on their heads crowns of gold.</tw-passagedata><tw-passagedata pid="62" name="Revelation 14:1-5 KJV" tags="bible" position="1650,600" size="100,100">And I looked, and, lo, a Lamb stood on the mount Sion, and with him an hundred forty and four thousand, having his Father’s name written in their foreheads. And I heard a voice from heaven, as the voice of many waters, and as the voice of a great thunder: and I heard the voice of harpers harping with their harps: And they sung as it were a new song before the throne, and before the four beasts, and the elders: and no man could learn that song but the hundred and forty and four thousand, which were redeemed from the earth. These are they which were not defiled with women; for they are virgins. These are they which follow the Lamb whithersoever he goeth. These were redeemed from among men, being the firstfruits unto God and to the Lamb. And in their mouth was found no guile: for they are without fault before the throne of God.</tw-passagedata><tw-passagedata pid="63" name="John 12:25 KJV" tags="bible promise" position="1750,600" size="100,100">(Jesus speaking) He that loveth his life shall lose it; and he that hateth his life in this world shall keep it unto life eternal.</tw-passagedata><tw-passagedata pid="64" name="2 Corinthians 5:2 KJV" tags="bible" position="1850,600" size="100,100">For in this we groan, earnestly desiring to be clothed upon with our house which is from heaven:</tw-passagedata><tw-passagedata pid="65" name="Isaiah 55:1-2 KJV" tags="bible" position="1950,600" size="100,100">Ho, every one that thirsteth, come ye to the waters, and he that hath no money; come ye, buy, and eat; yea, come, buy wine and milk without money and without price. Wherefore do ye spend money for that which is not bread? and your labour for that which satisfieth not? hearken diligently unto me, and eat ye that which is good, and let your soul delight itself in fatness.</tw-passagedata><tw-passagedata pid="66" name="John 6:37 KJV" tags="bible promise" position="1050,700" size="100,100">(Jesus speaking) All that the Father giveth me shall come to me; and him that cometh to me I will in no wise cast out.</tw-passagedata><tw-passagedata pid="67" name="John 7:37 KJV" tags="bible" position="1150,700" size="100,100">In the last day, that great day of the feast, Jesus stood and cried, saying, If any man thirst, let him come unto me, and drink.</tw-passagedata><tw-passagedata pid="68" name="Revelation 21:6 KJV" tags="bible promise" position="1250,700" size="100,100">And he said unto me, It is done. I am Alpha and Omega, the beginning and the end. I will give unto him that is athirst of the fountain of the water of life freely.</tw-passagedata><tw-passagedata pid="69" name="Revelation 22:17 KJV" tags="bible promise" position="1350,700" size="100,100">And the Spirit and the bride say, Come. And let him that heareth say, Come. And let him that is athirst come. And whosoever will, let him take the water of life freely.</tw-passagedata><tw-passagedata pid="70" name="Psalm 40:2 KJV" tags="bible prayer" position="1450,700" size="100,100">He brought me up also out of an horrible pit, out of the miry clay, and set my feet upon a rock, and established my goings.</tw-passagedata><tw-passagedata pid="71" name="Isaiah 35:3-4 KJV" tags="bible promise" position="1550,700" size="100,100">Strengthen ye the weak hands, and confirm the feeble knees. Say to them that are of a fearful heart, Be strong, fear not: behold, your God will come with vengeance, even God with a recompence; he will come and save you.</tw-passagedata><tw-passagedata pid="72" name="1 Samuel 12:23 KJV" tags="bible prayer" position="1650,700" size="100,100">Moreover as for me, God forbid that I should sin against the Lord in ceasing to pray for you: but I will teach you the good and the right way:</tw-passagedata><tw-passagedata pid="73" name="1 Corinthians 7:29 KJV" tags="bible" position="1750,700" size="100,100">But this I say, brethren, the time is short: it remaineth, that both they that have wives be as though they had none;</tw-passagedata><tw-passagedata pid="74" name="Exodus 19:16 KJV" tags="bible" position="1850,700" size="100,100">And it came to pass on the third day in the morning, that there were thunders and lightnings, and a thick cloud upon the mount, and the voice of the trumpet exceeding loud; so that all the people that was in the camp trembled.</tw-passagedata><tw-passagedata pid="75" name="Hebrews 12:21 KJV" tags="bible" position="1950,700" size="100,100">And so terrible was the sight, that Moses said, I exceedingly fear and quake.</tw-passagedata><tw-passagedata pid="76" name="Hebrews 12:25 KJV" tags="bible" position="1050,800" size="100,100">See that ye refuse not him that speaketh. For if they escaped not who refused him that spake on earth, much more shall not we escape, if we turn away from him that speaketh from heaven:</tw-passagedata><tw-passagedata pid="77" name="Hebrews 10:38 KJV" tags="bible promise" position="1150,800" size="100,100">Now the just shall live by faith; but if any man draw back, my soul shall have no pleasure in him.</tw-passagedata><tw-passagedata pid="78" name="Matthew 12:31 KJV" tags="bible promise" position="1250,800" size="100,100">(Jesus speaking) Wherefore I say unto you, All manner of sin and blasphemy shall be forgiven unto men: but the blasphemy against the Holy Ghost shall not be forgiven unto men.</tw-passagedata><tw-passagedata pid="79" name="John 20:27 KJV" tags="bible" position="1350,800" size="100,100">(Jesus speaking) Then saith he to Thomas, reach hither thy finger, and behold my hands; and reach hither thy hand, and thrust it into my side: and be not faithless, but believing.</tw-passagedata><tw-passagedata pid="80" name="1 John 4:5 KJV" tags="bible" position="1450,800" size="100,100">They are of the world: therefore speak they of the world, and the world heareth them.</tw-passagedata><tw-passagedata pid="81" name="Galatians 6:12 KJV" tags="bible" position="1550,800" size="100,100">As many as desire to make a fair shew in the flesh, they constrain you to be circumcised; only lest they should suffer persecution for the cross of Christ.</tw-passagedata><tw-passagedata pid="82" name="Luke 13:24 KJV" tags="bible" position="1650,800" size="100,100">(Jesus speaking) Strive to enter in at the strait gate: for many, I say unto you, will seek to enter in, and shall not be able.</tw-passagedata><tw-passagedata pid="83" name="Hebrews 11:25-26 KJV" tags="bible" position="1750,800" size="100,100">Choosing rather to suffer affliction with the people of God, than to enjoy the pleasures of sin for a season; Esteeming the reproach of Christ greater riches than the treasures in Egypt: for he had respect unto the recompence of the reward.</tw-passagedata><tw-passagedata pid="84" name="Mark 8:38 KJV" tags="bible promise" position="1850,800" size="100,100">(Jesus speaking) Whosoever therefore shall be ashamed of me and of my words in this adulterous and sinful generation; of him also shall the Son of man be ashamed, when he cometh in the glory of his Father with the holy angels.</tw-passagedata><tw-passagedata pid="85" name="Matthew 10:39 KJV" tags="bible promise" position="1950,800" size="100,100">(Jesus speaking) He that findeth his life shall lose it: and he that loseth his life for my sake shall find it.</tw-passagedata><tw-passagedata pid="86" name="Galatians 4:21-27 KJV" tags="bible" position="1050,900" size="100,100">Tell me, ye that desire to be under the law, do ye not hear the law? For it is written, that Abraham had two sons, the one by a bondmaid, the other by a freewoman. But he who was of the bondwoman was born after the flesh; but he of the freewoman was by promise. Which things are an allegory: for these are the two covenants; the one from the mount Sinai, which gendereth to bondage, which is Agar. For this Agar is mount Sinai in Arabia, and answereth to Jerusalem which now is, and is in bondage with her children. But Jerusalem which is above is free, which is the mother of us all. For it is written, Rejoice, thou barren that bearest not; break forth and cry, thou that travailest not: for the desolate hath many more children than she which hath an husband.</tw-passagedata><tw-passagedata pid="87" name="Galatians 3:10 KJV" tags="bible" position="1150,900" size="100,100">For as many as are of the works of the law are under the curse: for it is written, Cursed is every one that continueth not in all things which are written in the book of the law to do them.</tw-passagedata><tw-passagedata pid="88" name="Psalm 2:12 KJV" tags="bible" position="1250,900" size="100,100">Kiss the Son, lest he be angry, and ye perish from the way, when his wrath is kindled but a little. Blessed are all they that put their trust in him.</tw-passagedata><tw-passagedata pid="89" name="02-GA-1-21" tags="moment gate" position="425,1000" size="100,100">[@] Now, over the gate there was written,
&gt; Knock, and it shall be __opened__ (Matthew 7:7) unto you.
He knocked, therefore, more than once or twice, saying,

[1]  
&gt; &lt;&lt;journal &quot;At the Wicket-gate&quot;&gt;&gt;
[@] At last there came a grave person to the gate, named Goodwill, who asked who was there, and whence he came, and what he would have.

[1]  Here is a poor burdened sinner. I come from the city of Destruction, but am going to Mount Zion, that I may be delivered from the wrath to come; I would therefore, sir, since I am informed that by this gate is the way thither, know if you are willing to let me in. 

[7]  I am willing with all my heart,…

[@] …and with that he opened the gate. So when Christian was stepping in, the other gave him a pull. Then said Christian, 

[1] What means that?

[7] A little distance from this gate there is erected a strong castle, of which Beelzebub is the captain: from thence both he and they that are with him, shoot arrows at those that come up to this gate, if haply they may die before they can enter in.

[1] I rejoice and tremble.

[@] So when he was got in, the man of the Gate asked him who directed him thither. 

[1] Evangelist bid me come hither and knock, as I did: and he said, that you, sir, would tell me what I must do. 

[7] An open door is set before thee, and no man can shut it. 

[1] Now I begin to reap the benefits of my hazards. 

[7] But how is it that you came alone?

[1] Because none of my neighbors saw their danger as I saw mine.

[7] Did any of them know of your coming?

[1] Yes, my wife and children saw me at the first, and called after me to turn again: also, some of my neighbors stood crying and calling after me to return; but I put my fingers in my ears, and so came on my way.

[7] But did none of them follow you, to persuade you to go back? 

[1] Yes, both Obstinate and Pliable; but when they saw that they could not prevail, Obstinate went railing back; but Pliable came with me a little way. 

[7] But why did he not come through?

[1]  We indeed came both together until we came to the Slough of Despond, into the which we also suddenly fell. And then was my neighbor Pliable discouraged, and would not venture farther. Wherefore, getting out again on the side next to his own house, he told me I should possess the brave country alone for him: so he went his way, and I came mine; he after Obstinate, and I to this gate. 

[7] Alas, poor man; is the celestial glory of so little esteem with him, that he counteth it not worth running the hazard of a few difficulties to obtain it?

[1] Truly, I have said the truth of Pliable; and if I should also say all the truth of myself, it will appear there is no betterment betwixt him and myself. It is true, he went back to his own house, but I also turned aside to go in the way of death, being persuaded thereto by the carnal arguments of one Mr. Worldly Wiseman. 

[7] Oh, did he light upon you? What, he would have had you seek for ease at the hands of Mr. Legality! They are both of them a very cheat. But did you take his counsel?

[1] Yes, as far as I durst. I went to find out Mr. Legality, until I thought that the mountain that stands by his house would have fallen upon my head; wherefore there I was forced to stop. 

[7] That mountain has been the death of many, and will be the death of many more: it is well you escaped being by it dashed in pieces.

[1]  Why truly I do not know what had become of me there, had not Evangelist happily met me again as I was musing in the midst of my dumps; but it was God’s mercy that he came to me again, for else I had never come hither. But now I am come, such a one as I am, more fit indeed for death by that mountain, than thus to stand talking with my Lord. But O, what a favor is this to me, that yet I am admitted entrance here!

[7] We make no objections against any, notwithstanding all that they have done before they come hither; they __in no wise are cast out. __ (John 6:37) 

[7] And therefore good Christian, come a little way with me, and I will teach thee about the way thou must go. Look before thee; dost thou see this narrow way? That is the way thou must go. It was cast up by the patriarchs, prophets, Christ, and his apostles, and it is as strait as a rule can make it; this is the way thou must go. 

[1] But, are there no turnings nor windings, by which a stranger may lose his way?

[7] Yes, there are many ways butt down upon this, and they are crooked and wide: but thus thou mayest distinguish the right from the wrong, the right only being __strait and narrow.__ (Matthew 7:14)

[@] Then I saw in my dream, that Christian asked him further, if he could not help him off with his burden that was upon his back. For as yet he had not got rid thereof; nor could he by any means get it off without help. He told him,

[7] As to thy burden, be content to bear it until thou comest to the place of deliverance; for there it will fall from thy back of itself.

[@] Then Christian began to gird up his loins, and to address himself to his journey. So the other told him, that by that he was gone some distance from the gate, he would come to the [[house of the Interpreter|02-IN-1]], at whose door he should knock, and he would show him excellent things. Then Christian took his leave of his friend, and he again bid him God speed. </tw-passagedata><tw-passagedata pid="90" name="Matthew 7:7 KJV" tags="bible promise" position="1050,1000" size="100,100">(Jesus speaking) Ask, and it shall be given you; seek, and ye shall find; knock, and it shall be opened unto you:</tw-passagedata><tw-passagedata pid="91" name="02-IN-1" tags="moment manor" position="550,1000" size="100,100">[@] Then he went on till he came at the house of the Interpreter, where he knocked over and over. At last one came to the door, and asked who was there

[1] Sir, here is a traveller, who was bid by an acquaintance of the good man of this house to call here for my profit; I would therefore speak with the master of the house.

[@] So he called for the master of the house, who, after a little time, came to Christian, and asked him what he would have.

[1] Sir, I am a man that am come from the city of Destruction, and am going to the Mount Zion; and I was told by the man that stands at the gate at the head of this way, that if I called here you would show me excellent things, such as would be helpful to me on my journey.

[Π] Come in; I will show thee that which will be profitable to thee.

[@] So he commanded his man to light the candle, and bid Christian follow him, &lt;&lt;include &quot;02-EX-1&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="92" name="Matthew 7:14 KJV" tags="bible" position="1150,1000" size="100,100">(Jesus speaking) Because strait is the gate, and narrow is the way, which leadeth unto life, and few there be that find it.</tw-passagedata><tw-passagedata pid="93" name="02-EX-1" tags="optional" position="675,1000" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;if ndef $seenInterpreterRiddles&gt;&gt;
	&lt;&lt;set $seenInterpreterRiddles to []&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $seenInterpreterRiddles.length lt 1&gt;&gt;
	so he had him into…
&lt;&lt;else&gt;&gt;
	[@] &lt;&lt;- either(
		&quot;Then he took him by the hand, and led him into…&quot;, 
		&quot;I saw moreover in my dream, that the Interpreter took him by the hand, and had him into…&quot;, 
		&quot;I saw also, that the Interpreter took him again by the hand, and led him into…&quot;, 
		&quot;So he took Christian by the hand again and led him into…&quot;, 
		&quot;Then I saw in my dream, that the Interpreter took Christian by the hand, and led him into…&quot;
	)&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/nobr&gt;&gt;
* A [[private room|02-PR-1]]
* A [[very large parlor|02-PA-1]] that was full of dust
* A [[little room|02-LI-1]] where sat two little children
* A [[place|02-FI-1]] where was a fire burning against a wall
* A [[pleasant place|02-DO-1-22]] where was built a stately palace
* A [[very dark room|02-DA-1-23]], where there sat a man in an iron cage
* A [[chamber|02-CH-1-24]] where there was one rising out of bed</tw-passagedata><tw-passagedata pid="94" name="02-PR-1" tags="moment manor" position="425,1200" size="100,100">[@] …so he had him into a private room, and bid his man open a door; the which when he had done, Christian saw the picture a very grave person hang up against the wall; and this was the fashion of it:
&gt; It had eyes lifted up to heaven, the best of books in his hand, the law of truth was written upon its lips, the world was behind its back; it stood as if it pleaded with men, and a crown of gold did hang over its head.
Then said Christian, 

[1] What means this?

[Π] The man whose picture this is, is one of a thousand: he can __beget children__ (1 Corinthians 4:15), __travail in birth__ (Galatians 4:19) with children, and nurse them himself when they are born.

[Π] And whereas thou seest him with his eyes lift up to heaven, the best of books in his hand, and the law of truth writ on his lips: it is to show thee, that his work is to know, and unfold dark things to sinners; even as also thou seest him stand as if he pleaded with men.

[Π] And whereas thou seest the world as cast behind him, and that a crown hangs over his head; that is to show thee, that slighting and despising the things that are present, for the love that he hath to his Master’s service, he is sure in the world that comes next, to have glory for his reward. 

[Π] Now, I have showed thee this picture first, because the man whose picture this is, is the only man whom the Lord of the place whither thou art going hath authorized to be thy guide in all difficult places thou mayest meet with in the way: wherefore take good heed to what I have showed thee, and bear well in thy mind what thou hast seen, lest in thy journey thou meet with some that pretend to lead thee right, but their way goes down to death.

&lt;&lt;nobr&gt;&gt;
&lt;&lt;run $seenInterpreterRiddles.push(passage())&gt;&gt;
&lt;&lt;include &quot;02-EX-1&quot;&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="95" name="1 Corinthians 4:15 KJV" tags="bible" position="1250,1000" size="100,100">For though ye have ten thousand instructers in Christ, yet have ye not many fathers: for in Christ Jesus I have begotten you through the gospel.</tw-passagedata><tw-passagedata pid="96" name="Galatians 4:19 KJV" tags="bible" position="1350,1000" size="100,100">My little children, of whom I travail in birth again until Christ be formed in you,</tw-passagedata><tw-passagedata pid="97" name="Romans 7:9 KJV" tags="bible" position="1450,1000" size="100,100">For I was alive without the law once: but when the commandment came, sin revived, and I died.</tw-passagedata><tw-passagedata pid="98" name="widget-book" tags="widget" position="50,300" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;widget &quot;book&quot;&gt;&gt;&lt;&lt;if _args[0]&gt;&gt;
	&lt;&lt;set _sources to _args[0].split(setup.verseDelimiter)&gt;&gt;
	&lt;&lt;set _src to either(_sources).replace(setup.roundBrackets, &quot;&quot;).trim()&gt;&gt;
	&lt;&lt;if not _src.includes(setup.bibleVersion)&gt;&gt;
		&lt;&lt;set _src += &quot; &quot;+ setup.bibleVersion&gt;&gt;
	&lt;&lt;/if&gt;&gt;&lt;&lt;vv _src&gt;&gt;&lt;&lt;include _src&gt;&gt;&lt;&lt;/vv&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="99" name="02-PA-1" tags="moment manor" position="550,1200" size="100,100">[@] Then he took him by the hand, and led him into a very large parlor that was full of dust, because never swept; he which after he had reviewed it a little while, the Interpreter called for a man to sweep. 

[@] Now, when he began to sweep, the dust began so abundantly to fly about, that Christian had almost therewith been choked. Then said the Interpreter to a damsel that stood by,

[Π] Bring hither water, and sprinkle the room;

[@] …the which when she had done, it was swept and cleansed with pleasure. Then said Christian, 

[1] What means this?

[Π] This parlor is the heart of a man that was never sanctified by the sweet grace of the Gospel. The dust is his original sin, and inward corruptions, that have defiled the whole man. He that began to sweep at first, is __the law__ (Romans 7:9); but she that brought water, and did sprinkle it, is the Gospel.

[Π] Now whereas thou sawest, that so soon as the first began to sweep, the dust did so fly about that the room by him could not be cleansed, but that thou wast almost choked therewith; this is to show thee, that the law, instead of cleansing the heart (by its working) from __sin__ (1 Corinthians 15:56), doth revive, put strength into, and __increase it__ (Romans 5:20) in the soul, even as it doth discover and forbid it; for it doth not give power to subdue. 

[Π] Again, as thou sawest the damsel sprinkle the room with water, upon which it was cleansed with pleasure, this is to show thee, that when the Gospel comes in the sweet and precious influences thereof to the heart, then, I say, even as thou sawest the damsel lay the dust by sprinkling the floor with water, so is sin vanquished and subdued, and the soul __made clean__ (John 15:3; Ephesians 5:26; Acts 15:9), through the __faith__ (Romans 16:25-26) of it, and consequently fit for the King of glory to inhabit.

&lt;&lt;nobr&gt;&gt;
&lt;&lt;run $seenInterpreterRiddles.push(passage())&gt;&gt;
&lt;&lt;include &quot;02-EX-1&quot;&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="100" name="1 Corinthians 15:56 KJV" tags="bible" position="1550,1000" size="100,100">The sting of death is sin; and the strength of sin is the law.</tw-passagedata><tw-passagedata pid="101" name="Romans 5:20 KJV" tags="bible" position="1650,1000" size="100,100">Moreover the law entered, that the offence might abound. But where sin abounded, grace did much more abound:</tw-passagedata><tw-passagedata pid="102" name="John 15:3 KJV" tags="bible" position="1750,1000" size="100,100">(Jesus speaking) Now ye are clean through the word which I have spoken unto you.</tw-passagedata><tw-passagedata pid="103" name="Ephesians 5:26 KJV" tags="bible" position="1850,1000" size="100,100">That he might sanctify and cleanse it with the washing of water by the word,</tw-passagedata><tw-passagedata pid="104" name="Acts 15:9 KJV" tags="bible" position="1950,1000" size="100,100">And put no difference between us and them, purifying their hearts by faith.</tw-passagedata><tw-passagedata pid="105" name="Romans 16:25-26 KJV" tags="bible" position="1050,1100" size="100,100">Now to him that is of power to stablish you according to my gospel, and the preaching of Jesus Christ, according to the revelation of the mystery, which was kept secret since the world began, But now is made manifest, and by the scriptures of the prophets, according to the commandment of the everlasting God, made known to all nations for the obedience of faith:</tw-passagedata><tw-passagedata pid="106" name="02-LI-1" tags="moment manor" position="675,1200" size="100,100">[@] I saw moreover in my dream, that the Interpreter took him by the hand, and had him into a little room, where sat two little children, each one in his chair. The name of the eldest was Passion, and the name of the other Patience. Passion seemed to be much discontented, but Patience was very quiet.

[1] What is the reason of the discontent of Passion?

[Π] The governor of them would have him stay for his best things till the beginning of the next year, but he will have all now; but Patience is willing to wait.

[@] Then I saw that one came to Passion, and brought him a bag of treasure, and poured it down at his feet: the which he took up, and rejoiced therein, and withal laughed Patience to scorn. But I beheld but a while, and he had lavished all away, and had nothing left him but rags.

[1] Expound this matter more fully to me.

[Π] These two lads are figures; Passion of the men of this world, and Patience of the men of that which is to come; for, as here thou seest, passion will have all now, this year, that is to say, in this world; so are the men of this world: They must have all their good things now; they cannot stay till the next year, that is, until the next world, for their portion of good. 

[@] That proverb, //“A bird in the hand is worth two in the bush,”// is of more authority with them than are all the divine testimonies of the good of the world to come.

[Π] But as thou sawest that he had quickly lavished all away, and had presently left him nothing but rags, so will it be with all such men at the end of this world. 

[1] Now I see that Patience has the best wisdom, and that upon many accounts.
# Because he stays for the best things. 
# And also because he will have the glory of his, when the other has nothing but rags. 

[Π] Nay, you may add another, to wit, the glory of the next world will never wear out; but these are suddenly gone. Therefore Passion had not so much reason to laugh at Patience because he had his good things first, as Patience will have to laugh at Passion because he had his best things last; for first must give place to last, because last must have his time to come: but last gives place to nothing, for there is not another to succeed. 

[Π] He, therefore, that hath his portion first, must needs have a time to spend it; but he that hath his portion last, must have it lastingly: therefore it is said of Dives,
&gt; &lt;&lt;book &quot;Luke 16:25&quot;&gt;&gt;

[1] Then I perceive it is not best to covet things that are now, but to wait for things to come.

[Π] You say truth: for the things that are seen are temporal, but the __things that are not seen are eternal.__ (2 Corinthians 4:18) But though this be so, yet since things present and our fleshly appetite are such near neighbors one to another; and again, because things to come and carnal sense are such strangers one to another; therefore it is, that the first of these so suddenly fall into amity, and that distance is so continued between the second. 

&lt;&lt;nobr&gt;&gt;
&lt;&lt;run $seenInterpreterRiddles.push(passage())&gt;&gt;
&lt;&lt;include &quot;02-EX-1&quot;&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="107" name="Luke 16:25 KJV" tags="bible" position="1150,1100" size="100,100">But Abraham said, Son, remember that thou in thy lifetime receivedst thy good things, and likewise Lazarus evil things: but now he is comforted, and thou art tormented.</tw-passagedata><tw-passagedata pid="108" name="02-FI-1" tags="moment manor" position="800,1200" size="100,100">[@] Then I saw in my dream, that the Interpreter took Christian by the hand, and led him into a place where was a fire burning against a wall, and one standing by it, always casting much water upon it, to quench it; yet did the fire burn higher and hotter.

[1] What means this?

[Π] This fire is the work of grace that is wrought in the heart; he that casts water upon it, to extinguish and put it out, is the devil: but in that thou seest the fire, notwithstanding, burn higher and hotter, thou shalt also see the reason of that. 

[@] So he had him about to the back side of the wall, where he saw a man with a vessel of oil in his hand, of the which he did also continually cast (but secretly) into the fire. 

[1] What means this?

[Π] This is Christ, who continually, with the oil of his grace, maintains the work already begun in the heart; by the means of which, notwithstanding what the devil can do, the souls of his people prove gracious still.

[Π] And in that thou sawest that the man stood behind the wall to maintain the fire; this is to teach thee, that it is hard for the tempted to see how this __work of grace__ (2 Corinthians 12:9) is maintained in the soul. 

&lt;&lt;nobr&gt;&gt;
&lt;&lt;run $seenInterpreterRiddles.push(passage())&gt;&gt;
&lt;&lt;include &quot;02-EX-1&quot;&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="109" name="2 Corinthians 12:9 KJV" tags="bible promise" position="1250,1100" size="100,100">And he said unto me, My grace is sufficient for thee: for my strength is made perfect in weakness. Most gladly therefore will I rather glory in my infirmities, that the power of Christ may rest upon me.</tw-passagedata><tw-passagedata pid="110" name="02-DO-1-22" tags="moment manor" position="925,1200" size="100,100">[@] I saw also, that the Interpreter took him again by the hand, and led him into a pleasant place, where was built a stately palace, beautiful to behold; at the sight of which Christian was greatly delighted. He saw also upon the top thereof certain persons walking, who were clothed all in gold. 

[1] May we go in thither?

[@] Then the Interpreter took him, and led him up towards the door of the palace; and behold, at the door stood a great company of men, as desirous to go in, but durst not. 

[@] There also sat a man at a little distance from the door, at a table-side, with a book and his inkhorn before him, to take the names of them that should enter therein; he saw also that in the doorway stood many men in armor to keep it, being resolved to do to the men that would enter, what hurt and mischief they could. Now was Christian somewhat in amaze.

[@] At last, when every man started back for fear of the armed men, Christian saw a man of a very stout countenance come up to the man that sat there to write, saying, 

[9] Set down my name, sir;

[@] …the which when he had done, he saw the man draw his sword, and put a helmet on his head, and rush towards the door upon the armed men, who laid upon him with deadly force; but the man, not at all discouraged, fell to cutting and hacking most fiercely. So after he had received and given many wounds to those that attempted to keep him out; he cut his way through them all, and pressed forward into the palace; at which there was a pleasant voice heard from those that were within, even of those that walked upon the top of the palace, saying, 
&gt; Come in, come in,
&gt; Eternal glory thou shalt win.
So he went in, and was clothed with such garments as they. Then Christian smiled, 

[1] I think verily I know the __meaning__ (Matthew 11:12; Acts 14:22) of this.

&lt;&lt;nobr&gt;&gt;
&lt;&lt;run $seenInterpreterRiddles.push(passage())&gt;&gt;
&lt;&lt;include &quot;02-EX-1&quot;&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="111" name="Matthew 11:12 KJV" tags="bible" position="1350,1100" size="100,100">(Jesus speaking) And from the days of John the Baptist until now the kingdom of heaven suffereth violence, and the violent take it by force.</tw-passagedata><tw-passagedata pid="112" name="Acts 14:22 KJV" tags="bible" position="1450,1100" size="100,100">Confirming the souls of the disciples, and exhorting them to continue in the faith, and that we must through much tribulation enter into the kingdom of God.</tw-passagedata><tw-passagedata pid="113" name="02-DA-1-23" tags="moment manor" position="425,1325" size="100,100">[1] Now,  let me go hence.

[Π] Nay,till I have showed thee a little more, and after that thou shalt go on thy way.

[@] So he took him by the hand again, and led him into a very dark room, where there sat a man in an iron cage.

[@] Now the man, to look on, seemed very sad; he sat with his eyes looking down to the ground, his hands folded together, and he sighed as if he would break his heart.

[1] What means this?

[@] At which the Interpreter bid him talk with the man.

[1] What art thou?

[10] I am what I was not once.

[1] What wast thou once?

[10] I was once a fair and flourishing professor, both in mine own eyes, and also in the eyes of others: I once was, as I thought, fair for the celestial city, and had then even joy at the __thoughts__ (Luke 8:13) that I should get thither.

[1] Well, but what art thou now?

[10] I am now a man of despair, and am shut up in it, as in this iron cage. I cannot get out; Oh now I cannot!

[1] But how camest thou into this condition?

[10] I left off to watch and be sober: I laid the reins upon the neck of my lusts; I sinned against the light of the word, and the goodness of God; I have grieved the Spirit, and he is gone; I tempted the devil, and he is come to me; I have provoked God to anger, and he has left me: I have so hardened my heart, that I cannot repent.

[1]  But is there no hope for such a man as this?

[Π] Ask him,

[1] Is there no hope, but you must be kept in the iron cage of despair?

[10] No, none at all. 

[1] Why, the Son of the Blessed is very pitiful.

[10] I have __crucified him__ (Hebrews 6:6)to myself afresh; I have __despised his person__ (Luke 19:14); I have despised his righteousness; I have counted his blood an unholy thing; I have done despite to the __spirit of grace__ (Hebrews 10:29); therefore I have shut myself out of all the promises and there now remains to me nothing but threatenings, dreadful threatenings, faithful threatenings of certain judgment and fiery indignation, which shall devour me as an adversary. 

[1] For what did you bring yourself into this condition?

[10] For the lusts, pleasures, and profits of this world; in the enjoyment of which I did then promise myself much delight: but now every one of those things also bite me, and gnaw me like a burning worm.

[1] But canst thou not now repent and turn?

[10] God hath denied me repentance. His word gives me no encouragement to believe; yea, himself hath shut me up in this iron cage: nor can all the men in the world let me out. Oh eternity! eternity! how shall I grapple with the misery that I must meet with in eternity?

[Π] Let this man’s misery be remembered by thee, and be an everlasting caution to thee.

[1] Well, this is fearful! God help me to watch and to be sober, and to pray that I may shun the cause of this man’s misery.

&lt;&lt;nobr&gt;&gt;
&lt;&lt;run $seenInterpreterRiddles.push(passage())&gt;&gt;
&lt;&lt;include &quot;02-EX-1&quot;&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="114" name="Luke 8:13 KJV" tags="bible" position="1550,1100" size="100,100">They on the rock are they, which, when they hear, receive the word with joy; and these have no root, which for a while believe, and in time of temptation fall away.</tw-passagedata><tw-passagedata pid="115" name="Hebrews 6:6 KJV" tags="bible" position="1650,1100" size="100,100">If they shall fall away, to renew them again unto repentance; seeing they crucify to themselves the Son of God afresh, and put him to an open shame.</tw-passagedata><tw-passagedata pid="116" name="Luke 19:14 KJV" tags="bible" position="1750,1100" size="100,100">But his citizens hated him, and sent a message after him, saying, We will not have this man to reign over us.</tw-passagedata><tw-passagedata pid="117" name="Hebrews 10:29 KJV" tags="bible" position="1850,1100" size="100,100">Of how much sorer punishment, suppose ye, shall he be thought worthy, who hath trodden under foot the Son of God, and hath counted the blood of the covenant, wherewith he was sanctified, an unholy thing, and hath done despite unto the Spirit of grace?</tw-passagedata><tw-passagedata pid="118" name="02-CH-1-24" tags="moment manor" position="550,1325" size="100,100">[1] Sir, is it not time for me to go on my way now?

[Π] Tarry till I shall show thee one thing more, and then thou shalt go on thy way. 

[@] So he took Christian by the hand again and led him into a chamber where there was one rising out of bed; and as he put on his raiment, he shook and trembled.

[1] Why doth this man thus tremble?

[@] The Interpreter then bid him tell to Christian the reason of his so doing. 

[24] This night, as I was in my sleep, I dreamed, and behold the heavens grew exceeding black; also it thundered and lightened in most fearful wise, that it put me into an agony. 

[24] So I looked up in my dream, and saw the clouds rack at an unusual rate; upon which I heard a great sound of a trumpet, and saw also a __man__ (Matthew 24:30; Daniel 7:9-10) sitting upon a cloud, attended with the thousands of heaven: they were all in flaming fire; also the heavens were in a burning flame. I heard then a voice, saying,
&gt; [Ω] Arise, ye dead, and come to __judgment.__ (1 Thessalonians 4:16; Jude 1:15; John 5:28-29; Revelation 20:11-14)
And with that the rocks rent, the graves opened, and the dead that were therein came forth: some of them were exceeding glad, and looked upward; and some sought to __hide themselves__ (Isaiah 26:21; Micah 7:16-17; Psalm 5:4) under the mountains.

[24] Then I saw the man that sat upon the cloud open the book, and bid the world draw near. Yet there was, by reason of a __fierce flame__ (Psalm 50:1-3; Malachi 3:2-3; 2 Thessalonians 1:8-10) that issued out and came from before him, a convenient distance between him and them, as between the judge and the prisoners at the bar. 

[24] I heard it also proclaimed to them that attended on the man that sat on the cloud,
&gt; [Ω] Gather together the tares, the chaff, and stubble, and cast them into the __burning lake.__ (Matthew 3:12; Matthew 18:30; Malachi 4:1)
And with that the bottomless pit opened, just whereabout I stood; out of the mouth of which there came, in an abundant manner, smoke, and coals of fire, with hideous noises. It was also said to the same persons,
&gt; [Ω] __Gather my wheat__ (Luke 3:17) into the garner.
And with that I saw many catched up and __carried away__ (1 Thessalonians 4:16-17) into the clouds, but I was left behind.

[24] I also sought to hide myself, but I could not, for the man that sat upon the cloud still kept his eye upon me; my sins also came into my mind, and my conscience did accuse me on every side. Upon this I awakened from my sleep.

[24] But what was it that made you so afraid of this sight?

[24] Why, I thought that the day of judgment was come, and that I was not ready for it: but this frightened me most, that the angels gathered up several, and left me behind; also the pit of hell opened her mouth just where I stood. My __conscience__ (Romans 2:14-15) too afflicted me; and, as I thought, the Judge had always his eye upon me, showing indignation in his countenance.

[Π] Hast thou considered all these things?

[1] Yes, and they put me in hope and fear. 

[Π] Well, keep all things so in thy mind, that they may be as a goad in thy sides, to prick thee forward in the way thou must go.

[@] Then Christian began to gird up his loins, and to address himself to his journey.

[Π] The Comforter be always with thee, good Christian, to guide thee in [[the way|03-SA-1]] that leads to the city

[@] So Christian went on his way, saying, 

[1] 
&gt; &lt;&lt;journal &quot;O good Interpreter&quot;&gt;&gt;

&lt;&lt;run $seenInterpreterRiddles.push(passage())&gt;&gt;</tw-passagedata><tw-passagedata pid="119" name="1 Corinthians 15:1 KJV" tags="bible" position="2075,1200" size="100,100">Moreover, brethren, I declare unto you the gospel which I preached unto you, which also ye have received, and wherein ye stand;</tw-passagedata><tw-passagedata pid="120" name="1 Thessalonians 4:16 KJV" tags="bible" position="1950,1100" size="100,100">For the Lord himself shall descend from heaven with a shout, with the voice of the archangel, and with the trump of God: and the dead in Christ shall rise first:</tw-passagedata><tw-passagedata pid="121" name="Jude 1:15 KJV" tags="bible" position="1050,1200" size="100,100">To execute judgment upon all, and to convince all that are ungodly among them of all their ungodly deeds which they have ungodly committed, and of all their hard speeches which ungodly sinners have spoken against him.</tw-passagedata><tw-passagedata pid="122" name="John 5:28-29 KJV" tags="bible promise" position="1150,1200" size="100,100">(Jesus speaking) Marvel not at this: for the hour is coming, in the which all that are in the graves shall hear his voice, And shall come forth; they that have done good, unto the resurrection of life; and they that have done evil, unto the resurrection of damnation.</tw-passagedata><tw-passagedata pid="123" name="2 Thessalonians 1:8-10 KJV" tags="bible" position="1250,1200" size="100,100">In flaming fire taking vengeance on them that know not God, and that obey not the gospel of our Lord Jesus Christ: Who shall be punished with everlasting destruction from the presence of the Lord, and from the glory of his power; When he shall come to be glorified in his saints, and to be admired in all them that believe (because our testimony among you was believed) in that day.</tw-passagedata><tw-passagedata pid="124" name="Revelation 20:11-14 KJV" tags="bible" position="1350,1200" size="100,100">And I saw a great white throne, and him that sat on it, from whose face the earth and the heaven fled away; and there was found no place for them. And I saw the dead, small and great, stand before God; and the books were opened: and another book was opened, which is the book of life: and the dead were judged out of those things which were written in the books, according to their works. And the sea gave up the dead which were in it; and death and hell delivered up the dead which were in them: and they were judged every man according to their works. And death and hell were cast into the lake of fire. This is the second death.</tw-passagedata><tw-passagedata pid="125" name="Isaiah 26:21 KJV" tags="bible promise" position="1450,1200" size="100,100">For, behold, the Lord cometh out of his place to punish the inhabitants of the earth for their iniquity: the earth also shall disclose her blood, and shall no more cover her slain. </tw-passagedata><tw-passagedata pid="126" name="Micah 7:16-17 KJV" tags="bible" position="1550,1200" size="100,100">The nations shall see and be confounded at all their might: they shall lay their hand upon their mouth, their ears shall be deaf. They shall lick the dust like a serpent, they shall move out of their holes like worms of the earth: they shall be afraid of the Lord our God, and shall fear because of thee.</tw-passagedata><tw-passagedata pid="127" name="Psalm 5:4 KJV" tags="bible" position="1650,1200" size="100,100">For thou art not a God that hath pleasure in wickedness: neither shall evil dwell with thee.</tw-passagedata><tw-passagedata pid="128" name="Psalm 50:1-3 KJV" tags="bible promise" position="1750,1200" size="100,100">The mighty God, even the Lord, hath spoken, and called the earth from the rising of the sun unto the going down thereof. Out of Zion, the perfection of beauty, God hath shined. Our God shall come, and shall not keep silence: a fire shall devour before him, and it shall be very tempestuous round about him. </tw-passagedata><tw-passagedata pid="129" name="Malachi 3:2-3 KJV" tags="bible" position="1850,1200" size="100,100">But who may abide the day of his coming? and who shall stand when he appeareth? for he is like a refiner’s fire, and like fullers’ sope: And he shall sit as a refiner and purifier of silver: and he shall purify the sons of Levi, and purge them as gold and silver, that they may offer unto the Lord an offering in righteousness.</tw-passagedata><tw-passagedata pid="130" name="Daniel 7:9-10 KJV" tags="bible" position="1950,1200" size="100,100">I beheld till the thrones were cast down, and the Ancient of days did sit, whose garment was white as snow, and the hair of his head like the pure wool: his throne was like the fiery flame, and his wheels as burning fire. A fiery stream issued and came forth from before him: thousand thousands ministered unto him, and ten thousand times ten thousand stood before him: the judgment was set, and the books were opened.</tw-passagedata><tw-passagedata pid="131" name="Matthew 24:30 KJV" tags="bible promise" position="1050,1300" size="100,100">And then shall appear the sign of the Son of man in heaven: and then shall all the tribes of the earth mourn, and they shall see the Son of man coming in the clouds of heaven with power and great glory.</tw-passagedata><tw-passagedata pid="132" name="Matthew 3:12 KJV" tags="bible promise" position="1150,1300" size="100,100">Whose fan is in his hand, and he will throughly purge his floor, and gather his wheat into the garner; but he will burn up the chaff with unquenchable fire.</tw-passagedata><tw-passagedata pid="133" name="Malachi 4:1 KJV" tags="bible promise" position="1350,1300" size="100,100">For, behold, the day cometh, that shall burn as an oven; and all the proud, yea, and all that do wickedly, shall be stubble: and the day that cometh shall burn them up, saith the Lord of hosts, that it shall leave them neither root nor branch.</tw-passagedata><tw-passagedata pid="134" name="Matthew 18:30 KJV" tags="bible promise" position="1250,1300" size="100,100">And he would not: but went and cast him into prison, till he should pay the debt.</tw-passagedata><tw-passagedata pid="135" name="Luke 3:17 KJV" tags="bible" position="1450,1300" size="100,100">Whose fan is in his hand, and he will throughly purge his floor, and will gather the wheat into his garner; but the chaff he will burn with fire unquenchable.</tw-passagedata><tw-passagedata pid="136" name="Romans 2:14-15 KJV" tags="bible" position="1550,1300" size="100,100">For when the Gentiles, which have not the law, do by nature the things contained in the law, these, having not the law, are a law unto themselves: Which shew the work of the law written in their hearts, their conscience also bearing witness, and their thoughts the mean while accusing or else excusing one another;</tw-passagedata><tw-passagedata pid="137" name="03-SA-1" tags="moment tree" position="425,1525" size="100,100">[@] Now I saw in my dream, that the highway up which Christian was to go, was fenced on either side with a wall, and that wall was called __Salvation__ (Isaiah 26:1).  

[@] Up this way, therefore, did burdened Christian run, but not without great difficulty, because of the load on his back. He ran thus till he came at a place somewhat ascending; and upon that place stood a cross, and a little below, in the bottom, a sepulchre. 

[@} So I saw in my dream, that just as Christian came up with the cross, his burden loosed from off his shoulders, and fell from off his back, and began to tumble, and so continued to do till it came to the mouth of the sepulchre, where it fell in, and I saw it no more. 

[@] Then was Christian glad and lightsome, and said with a merry heart,

[1] He hath given me rest by his sorrow, and life by his death.

[@] Then he stood still a while, to look and wonder; for it was very surprising to him that the sight of the cross should thus __ease him of his burden__ (Zechariah 12:10). He looked, therefore, and looked again, even till the springs that were in his head sent the waters down his cheeks.

[@] Now as he stood looking and weeping, behold, three Shining Ones came to him, and saluted him with,

[Α] Peace be to thee. 

[Α] __Thy sins be forgiven thee,__ (Mark 2:5)

[@] So the first said to him; the second stripped him of his rags, and __clothed him__ (Zechariah 3:4) with change of raiment; ; the third also __set a mark on his forehead__ (Ephesians 1:13), and gave him a roll with a seal upon it, which he bid him look on as he ran, and that he should give it in at the celestial gate: so they went their way. 

[@] Then Christian gave three leaps for joy, and went on singing, 

[1] 
&gt; //♫ &lt;&lt;journal &quot;Blest cross! blest sepulchre!&quot;&gt;&gt;♫//
[@] I saw then in my dream, that he went on thus, even until he came at the bottom, where he saw, a little [[out of the way|03-GU-1-31-32-33]], three men fast asleep, with fetters upon their heels.</tw-passagedata><tw-passagedata pid="138" name="Isaiah 26:1 KJV" tags="bible promise" position="1050,1525" size="100,100">In that day shall this song be sung in the land of Judah; We have a strong city; salvation will God appoint for walls and bulwarks.</tw-passagedata><tw-passagedata pid="139" name="Zechariah 12:10 KJV" tags="bible promise" position="1150,1525" size="100,100">And I will pour upon the house of David, and upon the inhabitants of Jerusalem, the spirit of grace and of supplications: and they shall look upon me whom they have pierced, and they shall mourn for him, as one mourneth for his only son, and shall be in bitterness for him, as one that is in bitterness for his firstborn.</tw-passagedata><tw-passagedata pid="140" name="Mark 2:5 KJV" tags="bible promise" position="1250,1525" size="100,100">When Jesus saw their faith, he said unto the sick of the palsy, Son, thy sins be forgiven thee.</tw-passagedata><tw-passagedata pid="141" name="Zechariah 3:4 KJV" tags="bible promise" position="1350,1525" size="100,100">And he answered and spake unto those that stood before him, saying, Take away the filthy garments from him. And unto him he said, Behold, I have caused thine iniquity to pass from thee, and I will clothe thee with change of raiment.</tw-passagedata><tw-passagedata pid="142" name="Ephesians 1:13 KJV" tags="bible promise" position="1450,1525" size="100,100">In whom ye also trusted, after that ye heard the word of truth, the gospel of your salvation: in whom also after that ye believed, ye were sealed with that holy Spirit of promise,</tw-passagedata><tw-passagedata pid="143" name="03-GU-1-31-32-33" tags="moment gulf" position="550,1525" size="100,100">[@] The name of the one was Simple, of another Sloth, and of the third Presumption. Christian then seeing them lie in this case, went to them, if peradventure he might awake them, and cried, 

[1] You are like them that sleep on the top of a __mast__ (Proverbs 23:34), for the Dead Sea is under you, a gulf that hath no bottom:  awake, therefore, and come away; be willing also, and I will help you off with your irons.

[1] If he that goeth about like a __roaring lion__ (1 Peter 5:8), comes by, you will certainly become a prey to his teeth. 

[@] With that they looked upon him, and began to reply in this sort:

[31] I see no danger;
[32] Yet a little more sleep;
[33] Every tub must stand upon its own bottom.

[@] And so they lay down to sleep again, and Christian went on [[his way|03-SA-1-34-35]].

[@] Yet he was troubled to think that men in that danger should so little esteem the kindness of him that so freely offered to help them, both by awakening of them, counselling of them, and proffering to help them off with their irons.</tw-passagedata><tw-passagedata pid="144" name="Proverbs 23:34 KJV" tags="bible" position="1550,1525" size="100,100">Yea, thou shalt be as he that lieth down in the midst of the sea, or as he that lieth upon the top of a mast.</tw-passagedata><tw-passagedata pid="145" name="1 Peter 5:8 KJV" tags="bible" position="1650,1525" size="100,100">Be sober, be vigilant; because your adversary the devil, as a roaring lion, walketh about, seeking whom he may devour:</tw-passagedata><tw-passagedata pid="146" name="03-SA-1-34-35" tags="moment narrow_way" position="675,1525" size="100,100">[@] And as he was troubled thereabout, he espied two men come tumbling over the wall, on the left hand of the narrow way; and they made up apace to him. The name of the one was Formalist, and the name of the other Hypocrisy. So, as I said, they drew up unto him, who thus entered with them into discourse.

[1] Gentlemen, whence came you, and whither do you go?

[34] and [35] We were born in the land of Vain-glory, and are going, for praise, to Mount Zion. 

[1] Why came you not in at the gate which standeth at the beginning of the way? Know ye not that it is written,
&gt; &lt;&lt;book &quot;John 10:1 KJV&quot;&gt;&gt;
[34] and [35] To go to the gate for entrance was by all our countrymen counted too far about; and that therefore our usual way was to make a short cut of it, and to climb over the wall, as we had done.

[1] But will it not be counted a trespass against the Lord of the city whither we are bound, thus to violate his revealed will?

[34] and [35] As for that, thou needed not to trouble thy head thereabout: for what we did we had custom for, and could produce, if need were, testimony that would witness it for more than a thousand years.

[1] But, will you stand a trial at law?

[34] and [35] That custom, it being of so long standing as above a thousand years, would doubtless now be admitted as a thing legal by an impartial judge: and besides, if we get into the way, what matter is it which way we get in? If we are in, we are in: thou art but in the way, who, as we perceive, came in at the gate; and we also are in the way, that came tumbling over the wall: wherein now is thy condition better than ours?

[1] I walk by the rule of my Master: you walk by the rude working of your fancies. You are counted thieves already by the Lord of the way: therefore I doubt you will not be found true men at the end of the way. You come in by yourselves without his direction, and shall go out by yourselves without his mercy.

[34] and [35]  (…)

[@] To this they made him but little answer; only they bid him look to himself. Then I saw that they went on, every man in his way, without much conference one with another, save that these two men told Christian,

[34] and [35] As to laws and ordinances, we doubted not but that we should as conscientiously do us as thou. Therefore, we see not wherein thou differest from us, but by the coat that is on thy back, which was, as we trow, given thee by some of thy neighbors, to hide the shame of thy nakedness.

[1] By laws and ordinances you will not be saved, since you came not in by __the door__ (Galatians 2:16). And as for this coat that is on my back, it was given me by the Lord of the place whither I go; and that, as you say, to cover my nakedness with. And I take it as a token of kindness to me; for I had nothing but rags before. And besides, thus I comfort myself as I go. Surely, think I, when I come to the gate of the city, the Lord thereof will know me for good, since I have his coat on my back; a coat that he gave me freely in the day that he stripped me of my rags.

[1] I have, moreover, a mark in my forehead, of which perhaps you have taken no notice, which one of my Lord’s most intimate associates fixed there in the day that my burden fell off my shoulders. I will tell you, moreover, that I had then given me a roll sealed, to comfort me by reading as I go on the way; I was also bid to give it in at the celestial gate, in token of my certain going in after it: all which things I doubt you want, and want them because you came not in at the gate.

[34] and [35]  (…)

[@] To these things they gave him no answer; only they looked upon each other, and laughed. 

[@] Then I saw that they went all on, save that Christian kept before, who had no more talk but with himself, and that sometimes sighingly, and sometimes comfortably: also he would be often reading in the roll that one of the Shining Ones gave him, by which he was refreshed.

[@] I beheld then, that they all went on till they came to the [[foot of the hill Difficulty|03-FO-1-34-35]].</tw-passagedata><tw-passagedata pid="147" name="John 10:1 KJV" tags="bible" position="1750,1525" size="100,100">(Jesus speaking) Verily, verily, I say unto you, He that entereth not by the door into the sheepfold, but climbeth up some other way, the same is a thief and a robber.</tw-passagedata><tw-passagedata pid="148" name="Galatians 2:16 KJV" tags="bible" position="1850,1525" size="100,100">Knowing that a man is not justified by the works of the law, but by the faith of Jesus Christ, even we have believed in Jesus Christ, that we might be justified by the faith of Christ, and not by the works of the law: for by the works of the law shall no flesh be justified.</tw-passagedata><tw-passagedata pid="149" name="Isaiah 49:10 KJV" tags="bible promise" position="1950,1525" size="100,100">They shall not hunger nor thirst; neither shall the heat nor sun smite them: for he that hath mercy on them shall lead them, even by the springs of water shall he guide them.</tw-passagedata><tw-passagedata pid="150" name="03-AR-1" tags="moment mid-hill" position="925,1525" size="100,100">[@] Now about the midway to the top of the hill was a pleasant Arbor, made by the Lord of the hill for the refreshment of weary travellers.

[@] Thither, therefore, Christian got, where also he sat down to rest him: then he pulled his roll out of his bosom, and read therein to his comfort; he also now began afresh to take a review of the coat or garment that was given to him as he stood by the cross. 

[@] Thus pleasing himself awhile, he at last fell into a slumber, and thence into a fast sleep, which detained him in that place until it was almost night; and in his sleep his roll fell out of his hand.

[1] &lt;span class=&quot;icon&quot;&gt;&amp;#x1F4A4;&lt;/span&gt;

[@] Now, as he was sleeping, there came one to him, and awaked him, saying,
&gt; &lt;&lt;book &quot;Proverbs 6:6 KJV&quot;&gt;&gt;
[@] And with that, Christian suddenly started up, and sped him on his way, and went apace till he came to the [[top of the hill|03-TO-1-36-37]].</tw-passagedata><tw-passagedata pid="151" name="Proverbs 6:6 KJV" tags="bible" position="1050,1625" size="100,100">Go to the ant, thou sluggard; consider her ways, and be wise:</tw-passagedata><tw-passagedata pid="152" name="03-TO-1-36-37" tags="moment hilltop" position="925,1650" size="100,100">[@] Now when he was got up to the top of the hill, there came two men running amain; the name of the one was Timorous, and of the other Mistrust: to whom Christian said,

[1] Sirs, what’s the matter? You run the wrong way.

[36] We were going to the city of Zion, and had got up that difficult place: but, he farther we go, the more danger we meet with; wherefore we turned, and are going back again.

[37] Yes, for just before us lie a couple of lions in the way, whether sleeping or waking we know not; and we could not think, if we came within reach, but they would presently pull us in pieces.

[1] You make me afraid; but whither shall I fly to be safe? If I go back to mine own country, that is prepared for fire and brimstone, and I shall certainly perish there; if I can get to the celestial city, I am sure to be in safety there: I must venture. To go back is nothing but death: to go forward is fear of death, and life everlasting beyond it: I will yet go forward.

[@] So Mistrust and Timorous ran down the hill, and Christian went on his way. But thinking again of what he had heard from the men, he felt in his bosom for his roll, that he might read therein and be comforted; but he felt, and found it not

[@] Then was Christian in great distress, and knew not what to do; for he wanted that which used to relieve him, and that which should have been his pass into the celestial city. Here, therefore, he began to be much perplexed, and knew not what to do. 

[@] At last he bethought himself that he had slept in the [[arbor|03-MI-1]] that is on the side of the hill; and falling down upon his knees, he asked God forgiveness for that foolish act, and then went back to look for his roll.</tw-passagedata><tw-passagedata pid="153" name="03-MI-1" tags="moment mid-hill" position="800,1650" size="100,100">[@] But all the way he went back, who can sufficiently set forth the sorrow of Christian’s heart? Sometimes he sighed, sometimes he wept, and oftentimes he chid himself for being so foolish to fall asleep in that place, which was erected only for a little refreshment from his weariness. 

[@] Thus, therefore, he went back, carefully looking on this side and on that, all the way as he went, if happily he might find his roll, that had been his comfort so many times in his journey. He went thus till he came again in sight of the arbor where he sat and slept; but that sight renewed his sorrow the more, by bringing again, even afresh, his __evil of sleeping__ (Revelation 2:4; 1 Thessalonians 5:6-8) unto his mind. Thus, therefore, he now went on, bewailing his sinful sleep, saying,

[1] O wretched man that I am, that I should sleep in the daytime! that I should sleep in the midst of difficulty! that I should so indulge the flesh as to use that rest for ease to my flesh which the Lord of the hill hath erected only for the relief of the spirits of pilgrims! 

[1] How many steps have I taken in vain! Thus it happened to Israel; for their sin they were sent back again by the way of the Red Sea; and I am made to tread those steps with sorrow, which I might have trod with delight, had it not been for this sinful sleep. How far might I have been on my way by this time! I am made to tread those steps thrice over, which I needed not to have trod but once: yea, now also I am like to be benighted, for the day is almost spent. O that I had not slept!

[@] Now by this time he was come to the arbor again, where for a while he sat down and wept; but at last, (as Providence would have it,) looking sorrowfully down under the settle, there he espied his roll, the which he with trembling and haste catched up, and put it into his bosom.

[@] But who can tell how joyful this man was when he had gotten his roll again? For this roll was the assurance of his life, and acceptance at the desired haven. Therefore he laid it up in his bosom, gave thanks to God for directing his eye to the place where it lay, and with joy and tears betook himself again to his journey.

[@] But O how nimbly did he go up the rest of the hill! Yet before he got up, the sun went down upon Christian; and this made him again recall the vanity of his sleeping to his remembrance; and thus he again began to condole with himself:

[1] Oh thou sinful sleep! how for thy sake am I like to be benighted in my journey! I must walk without the sun, darkness must cover the path of my feet, and I must hear the noise of the doleful creatures, because of my sinful sleep!

[@] Now also he remembered the story that Mistrust and Timorous told him of, how they were frighted with the sight of the lions. Then said Christian to himself again,

[1] These beasts range in the night for their prey; and if they should meet with me in the dark, how should I shift them? how should I escape being by them torn in pieces?

[@] Thus he went on his way. But while he was bewailing his unhappy miscarriage, he lift up his eyes, and behold there was a very [[stately palace|03-GA-1-38-39]] before him, the name of which was Beautiful, and it stood by the highway-side.</tw-passagedata><tw-passagedata pid="154" name="Revelation 2:4 KJV" tags="bible" position="1150,1625" size="100,100">Nevertheless I have somewhat against thee, because thou hast left thy first love.</tw-passagedata><tw-passagedata pid="155" name="1 Thessalonians 5:6-8 KJV" tags="bible" position="1250,1625" size="100,100">Therefore let us not sleep, as do others; but let us watch and be sober. For they that sleep sleep in the night; and they that be drunken are drunken in the night. But let us, who are of the day, be sober, putting on the breastplate of faith and love; and for an helmet, the hope of salvation.</tw-passagedata><tw-passagedata pid="156" name="03-GA-1-38-39" tags="moment narrow_passage" position="675,1650" size="100,100">[@] So I saw in my dream that he made haste, and went forward, that if possible he might get lodging there. Now before he had gone far, he entered into a very narrow passage, which was about a furlong off the Porter’s lodge, and looking very narrowly before him as he went, he espied two lions in the way.

[@] Now, thought he, I see the dangers that Mistrust and Timorous were driven back by. (The lions were chained, but he saw not the chains.) Then he was afraid, and thought also himself to go back after them; for he thought nothing but death was before him.

[@] But the Porter at the lodge, whose name is Watchful, perceiving that Christian made a halt, as if he would go back, cried unto him, saying, 

[38] __Is thy strength so small?__ (Mark 4:40) Fear not the lions, for they are chained, and are placed there for trial of faith where it is, and for discovery of those that have none: keep in the midst of the path, and no hurt shall come unto thee.

[@] Then I saw that he went on, trembling for fear of the lions, but taking good heed to the directions of the Porter; he heard them roar, but they did him no harm. Then he clapped his hands, and went on till he came and stood before the gate where the Porter was. Then said Christian to the Porter,

[1] Sir, what house is this? and may I lodge here to-night?

[38] This house was built by the Lord of the hill, and he built it for the relief and security of pilgrims.

[@] The Porter also asked whence he was, and whither he was going. 

[1] I am come from the city of Destruction, and am going to Mount Zion: but because the sun is now set, I desire, if I may, to lodge here to-night.

[38] What is your name?

[1] My name is now Christian, but my name at the first was Graceless: I came of the race of __Japheth__ (Genesis 9:27), whom God will persuade to dwell in the tents of Shem.

[38] But how does it happen that you come so late? The sun is set.

[1] I had been here sooner, but that, wretched man that I am, I slept in the arbor that stands on the hill-side! Nay, I had, notwithstanding that, been here much sooner, but that in my sleep I lost my evidence, and came without it to the brow of the hill; and then feeling for it, and not finding it, I was forced with sorrow of heart to go back to the place where I slept my sleep, where I found it; and now I am come.

[38] Well, I will call out one of the virgins of this place, who will, if she likes your talk, bring you in to the rest of the family, according to the rules of the house.

[@] So Watchful the Porter rang a bell, at the sound of which came out of the door of the house a grave and beautiful damsel, named Discretion, and asked why she was called.

[38] This man is on a journey from the city of Destruction to Mount Zion; but being weary and benighted, he asked me if he might lodge here to-night: so I told him I would call for thee, who, after discourse had with him, mayest do as seemeth thee good, even according to the law of the house.

[@] Then she asked him whence he was, and whither he was going; and he told her. She asked him also how he got into the way; and he told her. Then she asked him what he had seen and met with in the way, and he told her. And at last she asked his name. So he said,

[1] It is Christian; and I have so much the more a desire to lodge here to-night, because, by what I perceive, this place was built by the Lord of the hill for the relief and security of pilgrims.

[@] So she smiled, but the water stood in her eyes; and after a little pause she said,

[39] I will call forth two or three more of the family.

[@] So she ran to the door, and called out Prudence, Piety, and Charity, who, after a little more discourse with him, had him into the family; and many of them meeting him at the threshold of the house, saying,

[39] Come in, thou blessed of the Lord; this house was built by the Lord of the hill on purpose to entertain such pilgrims in.

[@] Then he bowed his head, and followed them into the [[house|03-HO-1-41-42-43]].</tw-passagedata><tw-passagedata pid="157" name="Mark 4:40 KJV" tags="bible" position="1350,1625" size="100,100">And he said unto them, Why are ye so fearful? how is it that ye have no faith?</tw-passagedata><tw-passagedata pid="158" name="Genesis 9:27 KJV" tags="bible" position="1450,1625" size="100,100">God shall enlarge Japheth, and he shall dwell in the tents of Shem; and Canaan shall be his servant.</tw-passagedata><tw-passagedata pid="159" name="03-HO-1-41-42-43" tags="moment lodge" position="550,1650" size="100,100">[@] So when he was come in and sat down, they gave him something to drink, and consented together that, until supper was ready, some of them should have some particular discourse with Christian, for the best improvement of time; and they appointed Piety, Prudence, and Charity to discourse with him: and thus they began.

[41] Come, good Christian, since we have been so loving to you as to receive you into our house this night, let us, if perhaps we may better ourselves thereby, talk with you of all things that have happened to you in your pilgrimage.

[1] With a very good will; and I am glad that you are so well disposed.

[41] What moved you at first to betake yourself to a pilgrim’s life? 

[1] I was driven out of my native country by a dreadful sound that was in mine ears; to wit, that unavoidable destruction did attend me, if I abode in that place where I was.

[41] But how did it happen that you came out of your country this way?

[1] It was as God would have it; for when I was under the fears of destruction, I did not know whither to go; but by chance there came a man, even to me, as I was trembling and weeping, whose name is Evangelist, and he directed me to the Wicket-gate, which else I should never have found, and so set me into the way that hath led me directly to this house. 

[41] But did you not come by the house of the Interpreter?

[1] Yes, and did see such things there, the remembrance of which will stick by me as long as I live, especially three things: to wit, how Christ, in despite of Satan, maintains his work of grace in the heart; how the man had sinned himself quite out of hopes of God’s mercy; and also the dream of him that thought in his sleep the day of judgment was come.

[41] Why, did you hear him tell his dream?

[1] Yes, and a dreadful one it was, I thought; it made my heart ache as he was telling of it, but yet I am glad I heard it.

[41] Was this all you saw at the house of the Interpreter?

[1] No; he took me, and had me where he showed me a stately palace, and how the people were clad in gold that were in it; and how there came a venturous man, and cut his way through the armed men that stood in the door to keep him out; and how he was bid to come in, and win eternal glory. Methought those things did ravish my heart. I would have stayed at that good man’s house a twelvemonth, but that I knew I had farther to go. 

[41] And what saw you else in the way?

[1]  Saw? Why, I went but a little farther, and I saw One, as I thought in my mind, hang bleeding upon a tree; and the very sight of him made my burden fall off my back; for I groaned under a very heavy burden, but then it fell down from off me. It was a strange thing to me, for I never saw such a thing before: yea, and while I stood looking up, (for then I could not forbear looking,) three Shining Ones came to me

[1] One of them testified that my sins were forgiven me; another stripped me of my rags, and gave me this broidered coat which you see; and the third set the mark which you see in my forehead, and gave me this sealed roll, (and with that he plucked it out of his bosom.) 

[41] But you saw more than this, did you not?

[1] The things that I have told you were the best: yet some other I saw, as, namely, I saw three men, Simple, Sloth, and Presumption, lie asleep, a little out of the way, as I came, with irons upon their heels; but do you think I could awake them?

[1] I also saw Formality and Hypocrisy come tumbling over the wall, to go, as they pretended, to Zion; but they were quickly lost, even as I myself did tell them, but they would not believe.

[1] But, above all, I found it hard work to get up this hill, and as hard to come by the lions’ mouths; and, truly, if it had not been for the good man, the porter that stands at the gate, I do not know but that, after all, I might have gone back again; but I thank God I am here, and thank you for receiving me.

[@] Then Prudence thought good to ask him a few questions, and desired his answer to them.

[42] Do you not think sometimes of the country from whence you came?

[1] Yea, but with much shame and detestation. Truly, if I had been mindful of that country from whence I came out, I might have had opportunity to have returned; but now I desire a better country, that is, a __heavenly one.__ (Hebrews 11:15-16)

[42] Do you not yet bear away with you some of the things that then you were conversant withal?

[1] Yes, but greatly against my will; especially my inward and carnal cogitations, with which all my countrymen, as well as myself, were delighted. But now all those things are my grief; and might I but choose mine own things, I would choose never to think of those things more: but __when I would be a doing that which is best, that which is worst is with me.__ (Romans 7:15,21) 

[42] Do you not find sometimes as if those things were vanquished, which at other times are your perplexity?

[1] Yes: when I think what I saw at the cross, that will do it; and when I look upon my broidered coat, that will do it; and when I look into the roll that I carry in my bosom, that will do it; and when my thoughts wax warm about whither I am going, that will do it.

[42] And what is it that makes you so desirous to go to Mount Zion?

[1] Why, there I hope to see Him alive that did hang dead on the cross; and there I hope to be rid of all those things that to this day are in me an annoyance to me: there they say __there is no death__ (Isaiah 25:8; Revelation 21:4); and there I shall dwell with such company as I like best. For, to tell you the truth, I love Him because I was by Him eased of my burden; and I am weary of my inward sickness. I would fain be where I shall die no more, and with the company that shall continually cry, //Holy, holy, holy.//

[@] Then said Charity to Christian,

[43] Have you a family? Are you a married man?

[1] I have a wife and four small children. 

[43] But you should have talked to them, and have endeavored to show them the danger of staying behind. 

[1] So I did; and told them also what God had shown to me of the destruction of our city; but I seemed to them as one that mocked, and __they believed me not.__ (Genesis 19:14)

[43] And did you pray to God that he would bless your counsel to them? 

[1] Yes, and that with much affection; for you must think that my wife and poor children were very dear to me. 

[43] But did you tell them of your own sorrow, and fear of destruction? for I suppose that destruction was visible enough to you.

[1] Yes, over, and over, and over. They might also see my fears in my countenance, in my tears, and also in my trembling under the apprehension of the judgment that did hang over our heads; but all was not sufficient to prevail with them to come with me.

[43] But what could they say for themselves, why they came not? 

[1] Why, my wife was afraid of losing this world, and my children were given to the foolish delights of youth; so, what by one thing, and what by another, they left me to wander in this manner alone. 

[43] But did you not, with your vain life, damp all that you, by words, used by way of persuasion to bring them away with you?

[1] Indeed, I cannot commend my life, for I am conscious to myself of many failings therein. I know also, that a man, by his conversation, may soon overthrow what, by argument or persuasion, he doth labor to fasten upon others for their good. Yet this I can say, I was very wary of giving them occasion, by any unseemly action, to make them averse to going on pilgrimage. Yea, for this very thing, they would tell me I was too precise, and that I denied myself of things (for their sakes) in which they saw no evil. Nay, I think I may say, that if what they saw in me did hinder them, it was my great tenderness in sinning against God, or of doing any wrong to my neighbor.

[43] Indeed, Cain hated his brother, because __his own works were evil__ (1 John, 3:12), and his brother’s righteous; and if thy wife and children have been offended with thee for this, they thereby show themselves to be implacable to good; __thou hast delivered thy soul__ (Ezekiel 3:19) from their blood. 

[@] Now I saw in my dream, that thus they sat talking together until supper was ready. So when they had made ready, they sat down to meat.

[@] Now the table was furnished with fat things, and with wine that was well refined; and all their talk at the table was about the Lord of the hill; as, namely, about what he had done, and wherefore he did what he did, and why he had builded that house; and by what they said, 

[1] I perceived that he had been a great warrior, and had fought with and slain him that had the __power of death__ (Hebrews 2:14-15); but not without great danger to himself, which made me love him the more. 

[1] For, as they said, and as I believe, he did it with the loss of much blood. But that which put the glory of grace into all he did, was, that he did it out of pure love to his country.

[1] And besides, there were some of them of the household that said they had been and spoke with him since he did die on the cross; and they have attested that they had it from his own lips, that he is such a lover of poor pilgrims, that the like is not to be found from the east to the west.

[1] They, moreover, gave an instance of what they affirmed; and that was, he had stripped himself of his glory that he might do this for the poor; and that they heard him say and affirm, that he would not dwell in the mountain of Zion alone. They said, moreover, that he had made many pilgrims princes, though by nature they were __beggars born,__ (1 Samuel 2:8) and their original had been the __dunghill.__ (Psalm 113:7)

[@] Thus they discoursed together till late at night; and after they had committed themselves to their Lord for protection, they betook themselves to rest. The pilgrim they laid in a [[large upper chamber|03-CH-1]], whose window opened towards the sun-rising. </tw-passagedata><tw-passagedata pid="160" name="Hebrews 11:15-16 KJV" tags="bible promise" position="1550,1625" size="100,100">And truly, if they had been mindful of that country from whence they came out, they might have had opportunity to have returned. But now they desire a better country, that is, an heavenly: wherefore God is not ashamed to be called their God: for he hath prepared for them a city.</tw-passagedata><tw-passagedata pid="161" name="Romans 7:15,21 KJV" tags="bible" position="1650,1625" size="100,100">For that which I do I allow not: for what I would, that do I not; but what I hate, that do I. I find then a law, that, when I would do good, evil is present with me.</tw-passagedata><tw-passagedata pid="162" name="Genesis 19:14 KJV" tags="bible" position="1750,1625" size="100,100">And Lot went out, and spake unto his sons in law, which married his daughters, and said, Up, get you out of this place; for the Lord will destroy this city. But he seemed as one that mocked unto his sons in law. </tw-passagedata><tw-passagedata pid="163" name="1 John, 3:12 KJV" tags="bible" position="1850,1625" size="100,100">Not as Cain, who was of that wicked one, and slew his brother. And wherefore slew he him? Because his own works were evil, and his brother&#39;s righteous.</tw-passagedata><tw-passagedata pid="164" name="Ezekiel 3:19 KJV" tags="bible promise" position="1950,1625" size="100,100">Yet if thou warn the wicked, and he turn not from his wickedness, nor from his wicked way, he shall die in his iniquity; but thou hast delivered thy soul.</tw-passagedata><tw-passagedata pid="165" name="Hebrews 2:14-15 KJV" tags="bible" position="1050,1725" size="100,100">Forasmuch then as the children are partakers of flesh and blood, he also himself likewise took part of the same; that through death he might destroy him that had the power of death, that is, the devil; And deliver them who through fear of death were all their lifetime subject to bondage.</tw-passagedata><tw-passagedata pid="166" name="1 Samuel 2:8 KJV" tags="bible promise" position="1150,1725" size="100,100">He raiseth up the poor out of the dust, and lifteth up the beggar from the dunghill, to set them among princes, and to make them inherit the throne of glory: for the pillars of the earth are the Lord’s, and he hath set the world upon them.</tw-passagedata><tw-passagedata pid="167" name="Psalm 113:7 KJV" tags="bible promise" position="1250,1725" size="100,100">He raiseth up the poor out of the dust, and lifteth the needy out of the dunghill;</tw-passagedata><tw-passagedata pid="168" name="03-CH-1" tags="moment lodge" position="425,1650" size="100,100">[@] The name of the chamber was Peace, where he slept till break of day, and then he awoke and sang, 

[1] 
&gt; //♪&lt;&lt;journal &quot;Peace in Difficulty&quot;&gt;&gt;♫//
[@] So in the morning they all got up; and, after some more discourse, they told him that he should not depart till they had shown him the rarities of that place.
&lt;&lt;include &quot;03-RA-1&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="169" name="Hebrews 11:33-34 KJV" tags="bible promise" position="1350,1725" size="100,100">Who through faith subdued kingdoms, wrought righteousness, obtained promises, stopped the mouths of lions, Quenched the violence of fire, escaped the edge of the sword, out of weakness were made strong, waxed valiant in fight, turned to flight the armies of the aliens.</tw-passagedata><tw-passagedata pid="170" name="03-RA-1" tags="optional" position="425,1750" size="100,100">* And first they had him into [[the study|03-ST-1-41-42-43]]
* The next day they took him, and had him into [[the armory|03-AR-1-41-42-43]]
* They had him to the [[top of the house|03-TO-1-41-42-43]]</tw-passagedata><tw-passagedata pid="171" name="03-ST-1-41-42-43" tags="moment lodge" position="550,1875" size="100,100">[@] And first they had him into the study, where they showed him records of the greatest antiquity; in which, as I remember my dream, they showed him the pedigree of the Lord of the hill, that he was the Son of the Ancient of days, and came by eternal generation. 

[@] Here also was more fully recorded the acts that he had done, and the names of many hundreds that he had taken into his service; and how he had placed them in such habitations that could neither by length of days, nor decays of nature, be dissolved. 

[@] Then they read to him some of the __worthy acts__ (Hebrews 11:33-34 KJV) that some of his servants had done; as how they had subdued kingdoms, wrought righteousness, obtained promises, stopped the mouths of lions, quenched the violence of fire, escaped the edge of the sword, out of weakness were made strong, waxed valiant in fight, and turned to flight the armies of the aliens.

[@] Then they read again another part of the records of the house, where it was shown how willing their Lord was to receive into his favor any, even any, though they in time past had offered great affronts to his person and proceedings. 

[@] Here also were several other histories of many other famous things, of all which Christian had a view; as of things both ancient and modern, together with prophecies and predictions of things that have their certain accomplishment, both to the dread and amazement of enemies, and the comfort and solace of pilgrims.
&lt;&lt;include &quot;03-RA-1&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="172" name="03-AR-1-41-42-43" tags="moment lodge" position="675,1875" size="100,100">[@] The next day they took him, and had him into the armory, where they showed him all manner of furniture which their Lord had provided for pilgrims, as sword, shield, helmet, breastplate, all-prayer, and shoes that would not wear out. And there was here enough of this to harness out as many men for the service of their Lord as there be stars in the heaven for multitude.

[@] They also showed him some of the engines with which some of his servants had done wonderful things. 

[@] They showed him Moses’ rod; the hammer and nail with which Jael slew Sisera; the pitchers, trumpets, and lamps too, with which Gideon put to flight the armies of Midian. 

[@] Then they showed him the ox-goad wherewith Shamgar slew six hundred men. They showed him also the jawbone with which Samson did such mighty feats. They showed him moreover the sling and stone with which David slew Goliath of Gath; and the sword also with which their Lord will kill the man of sin, in the day that he shall rise up to the prey. 

[@] They showed him besides many excellent things, with which Christian was much delighted. This done, they went to their rest again.
&lt;&lt;include &quot;03-RA-1&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="173" name="03-TO-1-41-42-43" tags="moment lodge" position="800,1875" size="100,100">[@] Then I saw in my dream, that on the morrow he got up to go forward, but they desired him to stay till the next day also; and then, said they, we will, if the day be clear, show you the Delectable Mountains; which, they said, would yet farther add to his comfort, because they were nearer the desired haven than the place where at present he was; so he consented and stayed. 

[@] When the morning was up, they had him to the top of the house, and bid him look south. So he did, and __behold, at a great distance__ (Isaiah 33:16-17), he saw a most pleasant mountainous country, beautified with woods, vineyards, fruits of all sorts, flowers also, with springs and fountains, very delectable to behold. 

[@] Then he asked the name of the country. They said, 

[43] It is Immanuel’s land; and it is as common as this hill is, to and for all the pilgrims.  And when thou comest there, from thence thou mayest see to the gate of the celestial city, as the shepherds that live there will make appear. 

[@] Now he bethought himself of setting forward, and they were willing he should. But first, said they, 

[41] and [42] 
Let us go again into the armory. 

[@] So they did; and when he came there, they harnessed him from head to foot with what was of proof, lest perhaps he should meet with assaults in the way.

[@] He being therefore thus accoutred, walked out with his friends to [[the gate|03-GA-1-38]].</tw-passagedata><tw-passagedata pid="174" name="Isaiah 33:16-17 KJV" tags="bible promise" position="1450,1725" size="100,100">He shall dwell on high: his place of defence shall be the munitions of rocks: bread shall be given him; his waters shall be sure. Thine eyes shall see the king in his beauty: they shall behold the land that is very far off.</tw-passagedata><tw-passagedata pid="175" name="03-GA-1-38" tags="moment lodge" position="925,1875" size="100,100">[@] …and there he asked the Porter if he saw any pilgrim pass by. Then the Porter answered,

[38] Yes.

[1] Pray, did you know him?

[38] I asked his name, and he told me it was Faithful.

[1] O, I know him; he is my townsman, my near neighbor; he comes from the place where I was born. How far do you think he may be before?

[38] He is got by this time [[below the hill|04-FO-1-39-41-42-43]].

[1] Well, good Porter, the Lord be with thee, and add to all thy plain blessings much increase for the kindness that thou hast showed me.</tw-passagedata><tw-passagedata pid="176" name="04-FO-1-39-41-42-43" tags="moment foothill" position="925,2050" size="100,100">[@] Then he began to go forward; but Discretion, Piety, Charity, and Prudence would accompany him down to the foot of the hill.

[@] So they went on together, reiterating their former discourses, till they came to go down the hill. Then said Christian,

[1] As it was difficult coming up, so, so far as I can see, it is dangerous going down.

[42] Yes, so it is; for it is a hard matter for a man to go down into the valley of Humiliation, as thou art now, and to catch no slip by the way; therefore, we are come out to accompany thee down the hill.

[@] So he began to go down, but very warily; yet he caught a slip or two.

[@] Then I saw in my dream, that these good companions, when Christian was got down to the bottom of the hill, gave him a loaf of bread, a bottle of wine, and a cluster of raisins; and then he went on [[his way|04-HU-1-44]],
&gt; &lt;&lt;journal &quot;Difficulty in hindsight&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="177" name="04-HU-1-44" tags="moment valley_#1" position="800,2050" size="100,100">[@] But now, in this valley of Humiliation, poor Christian was hard put to it; for he had gone but a little way before he espied a foul fiend coming over the field to meet him: his name is Apollyon.

[@] Then did Christian begin to be afraid, and to cast in his mind whether to go back, or to stand his ground. But he considered again, that he had no armor for his back, and therefore thought that to turn the back to him might give him greater advantage with ease to pierce him with his darts; therefore he resolved to venture and stand his ground: for, thought he,

[1] Had I no more in mine eye than the saving of my life, it would be the best way to stand.

[@] So he went on, and Apollyon met him. Now the monster was hideous to behold: he was clothed with scales like a fish, and they are his pride; he had wings like a dragon, and feet like a bear, and out of his belly came fire and smoke; and his mouth was as the mouth of a lion. When he was come up to Christian, he beheld him with a disdainful countenance, and thus began to question him.

[44] Whence came you, and whither are you bound?

[1] I am come from the city of Destruction, which is the place of all evil, and I am going to the city of Zion.

[44] By this I perceive thou art one of my subjects; for all that country is mine, and I am the prince and god of it. How is it, then, that thou hast run away from thy king? Were it not that I hope thou mayest do me more service, I would strike thee now at one blow to the ground.

[1] I was, indeed, born in your dominions, but your service was hard, and your wages such as a man could not live on; for the __wages of sin is death__ (Romans 6:23); therefore, when I was come to years, I did, as other considerate persons do, look out if perhaps I might mend myself.

[44] There is no prince that will thus lightly lose his subjects, neither will I as yet lose thee; but since thou complainest of thy service and wages, be content to go back, and what our country will afford I do here promise to give thee.

[1] But I have let myself to another, even to the King of princes; and how can I with fairness go back with thee?

[44] Thou hast done in this according to the proverb, //“changed a bad for a worse;”// but it is ordinary for those that have professed themselves his servants, after a while to give him the slip, and return again to me. Do thou so too, and all shall be well.

[1] I have given him my faith, and sworn my allegiance to him; how then can I go back from this, and not be hanged as a traitor.

[44] Thou didst the same by me, and yet I am willing to pass by all, if now thou wilt yet turn again and go back.

[1] What I promised thee was in my non-age: and besides, I count that the Prince, under whose banner I now stand, is able to absolve me, yea, and to pardon also what I did as to my compliance with thee. And besides, O thou destroying Apollyon, to speak truth, I like his service, his wages, his servants, his government, his company, and country, better than thine; therefore leave off to persuade me farther: I am his servant, and I will follow him.

[44] Consider again, when thou art in cool blood, what thou art like to meet with in the way that thou goest. Thou knowest that for the most part his servants come to an ill end, because they are transgressors against me and my ways. How many of them have been put to shameful deaths! And besides, thou countest his service better than mine; whereas he never yet came from the place where he is, to deliver any that served him out of their enemies’ hands: but as for me, how many times, as all the world very well knows, have I delivered, either by power or fraud, those that have faithfully served me, from him and his, though taken by them! And so will I deliver thee.

[1] His forbearing at present to deliver them, is on purpose to try their love, whether they will cleave to him to the end: and as for the ill end thou sayest they come to, that is most glorious in their account. For, for present deliverance, they do not much expect it; for they stay for their glory; and then they shall have it, when their Prince comes in his and the glory of the angels.

[44] Thou hast already been unfaithful in thy service to him; and how dost thou think to receive wages of him?

[1] Wherein, O Apollyon, have I been unfaithful to him?

[44] Thou didst faint at first setting out, when thou wast almost choked in the gulf of Despond. Thou didst attempt wrong ways to be rid of thy burden, whereas thou shouldst have stayed till thy Prince had taken it off. Thou didst sinfully sleep, and lose thy choice things. Thou wast almost persuaded also to go back at the sight of the lions. And when thou talkest of thy journey, and of what thou hast seen and heard, thou art inwardly desirous of vainglory in all that thou sayest or doest.

[1] All this is true, and much more which thou hast left out; but the Prince whom I serve and honor is merciful, and ready to forgive. But besides, these infirmities possessed me in thy country, for there I sucked them in, and I have groaned under them, been sorry for them, and have obtained pardon of my Prince.

[@] Then Apollyon broke out into a grievous rage, saying,

[44] I am an enemy to this Prince; I hate his person, his laws, and people: I am come out on purpose to withstand thee. 

[1] Apollyon, beware what you do, for I am in the King’s highway, the way of holiness; therefore take heed to yourself.

[@] Then Apollyon straddled quite over the whole breadth of the way, and said,

[44] I am void of fear in this matter. Prepare thyself to die; for I swear by my infernal den, that thou shalt go no farther: here will I spill thy soul. And with that he threw a flaming dart at his breast; but Christian had a shield in his hand, with which he caught it, and so prevented the danger of that.

[@] Then did Christian draw, for he saw it was time to bestir him; and Apollyon as fast made at him, throwing darts as thick as hail; by the which, notwithstanding all that Christian could do to avoid it, Apollyon wounded him in his head, his hand, and foot.

[@] This made Christian give a little back: Apollyon, therefore, followed his work amain, and Christian again took courage, and resisted as manfully as he could. This sore combat lasted for above half a day, even till Christian was almost quite spent: for you must know, that Christian, by reason of his wounds, must needs grow weaker and weaker.

[@] Then Apollyon, espying his opportunity, began to gather up close to Christian, and wrestling with him, gave him a dreadful fall; and with that Christian’s sword flew out of his hand. Then said Apollyon,

[44] I am sure of thee now: 

[@] …and with that he had almost pressed him to death, so that Christian began to despair of life. But, as God would have it, while Apollyon was fetching his last blow, thereby to make a full end of this good man, Christian nimbly reached out his hand for his sword, and caught it, saying,

[1] __Rejoice not against me, O mine enemy: when I fall, I shall arise__ (Micah 7:8);

[@] …and with that gave him a deadly thrust, which made him give back, as one that had received his mortal wound. Christian perceiving that, made at him again, saying,

[1] __Nay, in all these things we are more than conquerors, through Him that loved us.__  (Romans 8:37)

[@] And with that Apollyon spread forth his dragon wings, and sped him away, that Christian __saw him no more__ (James 4:7).

[@] In this combat no man can imagine, unless he had seen and heard, as I did, what yelling and hideous roaring Apollyon made all the time of the fight; he spake like a dragon: and on the other side, what sighs and groans burst from Christian’s heart. 

[@] I never saw him all the while give so much as one pleasant look, till he perceived he had wounded Apollyon with his two-edged sword; then, indeed, he did smile, and look upward! But it was the dreadfullest sight that ever I saw.

[@] So when the battle was over, Christian said,

[1] 
&gt; &lt;&lt;journal &quot;Victory in Humiliation&quot;&gt;&gt;

[@] Then there came to him a hand with some of the leaves of the tree of life, the which Christian took and applied to the wounds that he had received in the battle, and was healed immediately.

[@] He also sat down in that place to eat bread, and to drink of the bottle that was given him a little before: so, being refreshed, he addressed himself to his journey with his sword drawn in his hand; for he said, 

[1] I know not but some other enemy may be at hand.

[@] But he met with no other affront from Apollyon quite through this valley. 

[@] Now at the end of this valley was another, called the [[Valley of the Shadow of Death|04-BO-1-45-46]]; and Christian must needs go through it, because the way to the Celestial City lay through the midst of it.</tw-passagedata><tw-passagedata pid="178" name="Romans 6:23 KJV" tags="bible promise" position="1050,2000" size="100,100">For the wages of sin is death; but the gift of God is eternal life through Jesus Christ our Lord.</tw-passagedata><tw-passagedata pid="179" name="Micah 7:8 KJV" tags="bible prayer" position="1150,2000" size="100,100">Rejoice not against me, O mine enemy: when I fall, I shall arise; when I sit in darkness, the Lord shall be a light unto me.</tw-passagedata><tw-passagedata pid="180" name="Romans 8:37 KJV" tags="bible anchor" position="1250,2000" size="100,100">Nay, in all these things we are more than conquerors through him that loved us.</tw-passagedata><tw-passagedata pid="181" name="James 4:7 KJV" tags="bible promise" position="1350,2000" size="100,100">Submit yourselves therefore to God. Resist the devil, and he will flee from you.</tw-passagedata><tw-passagedata pid="182" name="04-BO-1-45-46" tags="moment borders_of_valleys" position="675,2050" size="100,100">[@] I saw then in my dream, that when Christian was got to the borders of the Shadow of Death, there met him two men, children of them that brought up an __evil report__ (Numbers 13:3) of the good land, making haste to go back; to whom Christian spake as follows. 

[1] Whither are you going?

[45] and [46] Back, back; and we would have you do so too, if either life or peace is prized by you.

[1] Why, what’s the matter?

[45] and [46] Matter! We were going that way as you are going, and went as far as we durst: and indeed we were almost past coming back; for had we gone a little further, we had not been here to bring the news to thee.

[1] But what have you met with?

[45] and [46] Why, we were almost in the Valley of the Shadow of Death, but that by good hap we looked before us, and saw __the danger__ (Psalm 44:19; Psalm 107:19) before we came to it.

[1] But what have you seen?

[45] and [46] Seen! Why the valley itself, which is __as dark as pitch__ (Job 3:5): we also saw there the hobgoblins, satyrs, and dragons of the pit: we heard also in that valley a continual howling and yelling, as of a people under unutterable misery, who there sat bound in affliction and irons: and over that valley hang the discouraging clouds of confusion: Death also doth always spread his wings over it. In a word, it is __every whit dreadful, being utterly without order.__ (Job 10:22) 

[1] I perceive not yet, by what you have said, but that __this is my way__ (Psalm 44:18-19; Jeremiah 2:6) to the desired haven.

[45] and [46] Be it thy way; we will not choose it for ours.

[@] So they parted, and Christian went on [[his way|04-SH-1]], but still with his sword drawn in his hand, for fear lest he should be assaulted.</tw-passagedata><tw-passagedata pid="183" name="Numbers 13:3 KJV" tags="bible" position="1450,2000" size="100,100">And they brought up an evil report of the land which they had searched unto the children of Israel, saying, The land, through which we have gone to search it, is a land that eateth up the inhabitants thereof; and all the people that we saw in it are men of a great stature.</tw-passagedata><tw-passagedata pid="184" name="Psalm 44:19 KJV" tags="bible prayer" position="1550,2000" size="100,100">Though thou hast sore broken us in the place of dragons, and covered us with the shadow of death.</tw-passagedata><tw-passagedata pid="185" name="Psalm 107:19 KJV" tags="bible prayer" position="1650,2000" size="100,100">Then they cry unto the Lord in their trouble, and he saveth them out of their distresses.</tw-passagedata><tw-passagedata pid="186" name="Job 3:5 KJV" tags="bible prayer" position="1750,2000" size="100,100">Let darkness and the shadow of death stain it; let a cloud dwell upon it; let the blackness of the day terrify it.</tw-passagedata><tw-passagedata pid="187" name="Job 10:22 KJV" tags="bible" position="1850,2000" size="100,100">A land of darkness, as darkness itself; and of the shadow of death, without any order, and where the light is as darkness.</tw-passagedata><tw-passagedata pid="188" name="Psalm 44:18-19 KJV" tags="bible prayer" position="1950,2000" size="100,100">Our heart is not turned back, neither have our steps declined from thy way; Though thou hast sore broken us in the place of dragons, and covered us with the shadow of death. </tw-passagedata><tw-passagedata pid="189" name="Jeremiah 2:6 KJV" tags="bible" position="1050,2100" size="100,100">Neither said they, Where is the Lord that brought us up out of the land of Egypt, that led us through the wilderness, through a land of deserts and of pits, through a land of drought, and of the shadow of death, through a land that no man passed through, and where no man dwelt?</tw-passagedata><tw-passagedata pid="190" name="04-SH-1" tags="moment valley_#2" position="550,2050" size="100,100">[@] I saw then in my dream, so far as this valley reached, there was on the right hand a very deep ditch; that ditch is it into which the blind have led the blind in all ages, and have both there miserably perished. 

[@] Again, behold, on the left hand there was a very dangerous quag, into which, if even a good man falls, he finds no bottom for his foot to stand on: into that quag king David once did fall, and had no doubt therein been smothered, had not He that is able __plucked him out__ (Psalm 69:14).

[@] The pathway was here also exceeding narrow, and therefore good Christian was the more put to it; for when he sought, in the dark, to shun the ditch on the one hand, he was ready to tip over into the mire on the other; also, when he sought to escape the mire, without great carefulness he would be ready to fall into the ditch. 

[@] Thus he went on, and I heard him here sigh bitterly; for besides the danger mentioned above, the pathway was here so dark, that ofttimes when he lifted up his foot to go forward, he knew not where, or upon what he should set it next.

[@] About the midst of this valley I perceived the mouth of hell to be, and it stood also hard by the wayside. Now, thought Christian,

[1] What shall I do?

[@] And ever and anon the flame and smoke would come out in such abundance, with sparks and hideous noises, (things that cared not for Christian’s sword, as did Apollyon before,) that he was forced to put up his sword, and betake himself to another weapon, called __All-prayer__ (Ephesians 6:18); so he cried, in my hearing, 

[1] __O Lord, I beseech thee, deliver my soul.__ (Psalm 116:4)

[@] Thus he went on a great while, yet still the flames would be reaching towards him; also he heard doleful voices, and rushings to and fro, so that sometimes he thought he should be torn in pieces, or trodden down like mire in the streets.

[@] This frightful sight was seen, and these dreadful noises were heard by him for several miles together; and coming to a place where he thought he heard a company of fiends coming forward to meet him, he stopped, and began to muse what he had best to do.

[@] Sometimes he had half a thought to go back; then again he thought he might be half-way through the valley. He remembered also, how he had already vanquished many a danger; and that the danger of going back might be much more than for to go forward.

[@] So he resolved to go on; yet the fiends seemed to come nearer and nearer. But when they were come even almost at him, he cried out with a most vehement voice,

[1] I will walk in the strength of the Lord God.

[@] So they gave back, and came no farther.

[@] One thing I would not let slip. I took notice that now poor Christian was so confounded that he did not know his own voice; and thus I perceived it. 

[@] Just when he was come over against the mouth of the burning pit, one of the wicked ones got behind him, and stepped up softly to him, and whisperingly suggested many grievous blasphemies to him, which he verily thought had proceeded from his own mind.

[@] This put Christian more to it than any thing that he met with before, even to think that he should now blaspheme Him that he loved so much before. Yet if he could have helped it, he would not have done it; but he had not the discretion either to stop his ears, or to know from whence these blasphemies came.

[@] When Christian had travelled in this disconsolate condition some considerable time, he thought he heard the voice of a man, as going before him, saying,
&gt; __Though I walk through the Valley of the Shadow of Death, I will fear no evil, for thou art with me.__ (Psalm 23:4)
Then was he glad, and that for these reasons: 

[1]
* Firstly, because I gathered from thence, that some who fear God are in this valley as well as myself.
* Secondly, for that I perceived God is with them, though in that dark and dismal state. And why not, with me? Though by reason of the impediment that attends this place, __I cannot perceive it __ (Job 9:11).
* Thirdly, for that I hoped (could I overtake them) to have company by and by. 

[@] So he went on, and called to him that was before; but he knew not what to answer, for that he also thought himself to be alone. And by and by the day broke: then said Christian

[1] __He hath turned the shadow of death into the morning.__ (Amos 5:8)

[@] Now morning being come, he looked back, not out of desire to return, but to see, by the light of the day, what hazards he had gone through in the dark. So he saw more perfectly the ditch that was on the one hand, and the quag that was on the other; also how narrow the way was which led betwixt them both.

[@] Also now he saw the hobgoblins, and satyrs, and dragons of the pit, but all afar off; for after break of day they came not nigh; yet they were discovered to him, according to that which is written,
&gt; &lt;&lt;book &quot;Job 12:22 KJV&quot;&gt;&gt;
[@] Now was Christian much affected with this deliverance from all the dangers of his solitary way; which dangers, though he feared them much before, yet he saw them more clearly now, because the light of the day made them conspicuous to him.

[@] And about this time the sun was rising, and this was another mercy to Christian; for you must note, that though the first part of the Valley of the Shadow of Death was dangerous, yet this second part, which he was yet to go, was, if possible, far more dangerous; for, from the place where he now stood, even to the end of the valley, the way was all along set so full of snares, traps, gins, and nets here, and so full of pits, pitfalls, deep holes, and shelvings-down there, that had it now been dark, as it was when he came the first part of the way, had he had a thousand souls, they had in reason been cast away; but, as I said, just now the sun was rising. Then said he, 

[1] __His candle shineth on my head, and by his light I go through darkness.__ (Job 29:3)

[@] In this light, therefore, he came to the [[end of the valley|04-EN-1-47-48]].</tw-passagedata><tw-passagedata pid="191" name="Psalm 69:14 KJV" tags="bible prayer" position="1150,2100" size="100,100">Deliver me out of the mire, and let me not sink: let me be delivered from them that hate me, and out of the deep waters.</tw-passagedata><tw-passagedata pid="192" name="Ephesians 6:18 KJV" tags="bible prayer" position="1250,2100" size="100,100">Praying always with all prayer and supplication in the Spirit, and watching thereunto with all perseverance and supplication for all saints;</tw-passagedata><tw-passagedata pid="193" name="Psalm 116:4 KJV" tags="bible prayer" position="1350,2100" size="100,100">Then called I upon the name of the Lord; O Lord, I beseech thee, deliver my soul.</tw-passagedata><tw-passagedata pid="194" name="Psalm 23:4 KJV" tags="bible prayer" position="1450,2100" size="100,100">Yea, though I walk through the valley of the shadow of death, I will fear no evil: for thou art with me; thy rod and thy staff they comfort me.</tw-passagedata><tw-passagedata pid="195" name="Job 9:11 KJV" tags="bible" position="1550,2100" size="100,100">Lo, he goeth by me, and I see him not: he passeth on also, but I perceive him not.</tw-passagedata><tw-passagedata pid="196" name="Amos 5:8 KJV" tags="bible prayer" position="1650,2100" size="100,100">Seek him that maketh the seven stars and Orion, and turneth the shadow of death into the morning, and maketh the day dark with night: that calleth for the waters of the sea, and poureth them out upon the face of the earth: The Lord is his name:</tw-passagedata><tw-passagedata pid="197" name="Job 12:22 KJV" tags="bible" position="1750,2100" size="100,100">He discovereth deep things out of darkness, and bringeth out to light the shadow of death.</tw-passagedata><tw-passagedata pid="198" name="Job 29:3 KJV" tags="bible prayer" position="1850,2100" size="100,100">When his candle shined upon my head, and when by his light I walked through darkness;</tw-passagedata><tw-passagedata pid="199" name="04-EN-1-47-48" tags="moment cave" position="425,2050" size="100,100">[@] Now I saw in my dream, that at the end of the valley lay blood, bones, ashes, and mangled bodies of men, even of pilgrims that had gone this way formerly; and while I was musing what should be the reason, I espied a little before me a cave, where two giants, Pope and Pagan, dwelt in old times; by whose power and tyranny the men whose bones, blood, ashes, etc., lay there, were cruelly put to death.

[@] But by this place Christian went without much danger, whereat I somewhat wondered; but I have learnt since, that Pagan has been dead many a day; and as for the other, though he be yet alive, he is, by reason of age, and also of the many shrewd brushes that he met with in his younger days, grown so crazy and stiff in his joints that he can now do little more than sit in his cave’s mouth, grinning at pilgrims as they go by, and biting his nails because he cannot come at them.

[@] So I saw that Christian went on his way; yet, at the sight of the old man that sat at the mouth of the cave, he could not tell what to think, especially because he spoke to him, though he could not go after him, saying,

[47] You will never mend, till more of you be burned.

[@] But he held his peace, and set a good face on it; and so went by, and catched no hurt. Then sang Christian, 

[1] 
&gt; //♭♩&lt;&lt;journal &quot;O world of wonders&quot;&gt;&gt;♫♯//
[@] Now, as Christian went on his way, he came to a [[little ascent|05-AS-1-51]], which was cast up on purpose that pilgrims might see before them.</tw-passagedata><tw-passagedata pid="200" name="05-AS-1-51" tags="moment ascent" position="425,2250" size="100,100">[@] Up there, therefore, Christian went; and looking forward, he saw Faithful before him upon his journey: Then said Christian aloud,

[1] Ho, ho; so-ho; stay, and I will be your companion.

[@] At that Faithful looked behind him; to whom Christian cried again,

[1] Stay, stay, till I come up to you.

[@] But Faithful answered,

[51] No, I am upon my life, and the avenger of blood is behind me.

[@] At this Christian was somewhat moved, and putting to all his strength, he quickly got up with Faithful, and did also overrun him; so the last was first. 

[@] Then did Christian vaingloriously smile, because he had gotten the start of his brother; but not taking good heed to his feet, he suddenly stumbled and fell, and could not rise again until Faithful came up to help him.

[@] Then I saw in my dream, they went very lovingly on together, and had sweet discourse of all things that had happened to them in their pilgrimage; and thus Christian began. 

[1] My honored and well-beloved brother Faithful, I am glad that I have overtaken you, and that God has so tempered our spirits that we can walk as companions in this so pleasant a path.

[51] I had thought, my dear friend, to have had your company quite from our town, but you did get the start of me; wherefore I was forced to come thus much of the way alone.

[1] 
&lt;&lt;include &quot;05-RE-51&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="201" name="Jeremiah 29:18-19 KJV" tags="bible promise" position="1050,2250" size="100,100">And I will persecute them with the sword, with the famine, and with the pestilence, and will deliver them to be removed to all the kingdoms of the earth, to be a curse, and an astonishment, and an hissing, and a reproach, among all the nations whither I have driven them: Because they have not hearkened to my words, saith the Lord, which I sent unto them by my servants the prophets, rising up early and sending them; but ye would not hear, saith the Lord.</tw-passagedata><tw-passagedata pid="202" name="2 Peter 2:22 KJV" tags="bible" position="1150,2250" size="100,100">But it is happened unto them according to the true proverb, The dog is turned to his own vomit again; and the sow that was washed to her wallowing in the mire.</tw-passagedata><tw-passagedata pid="203" name="Genesis 39:11-13 KJV" tags="bible" position="1250,2250" size="100,100">And it came to pass about this time, that Joseph went into the house to do his business; and there was none of the men of the house there within. And she caught him by his garment, saying, Lie with me: and he left his garment in her hand, and fled, and got him out. And it came to pass, when she saw that he had left his garment in her hand, and was fled forth,</tw-passagedata><tw-passagedata pid="204" name="Proverbs 22:14 KJV" tags="bible" position="1350,2250" size="100,100">The mouth of strange women is a deep pit: he that is abhorred of the Lord shall fall therein.</tw-passagedata><tw-passagedata pid="205" name="Proverbs 5:5 KJV" tags="bible" position="1450,2250" size="100,100">Her feet go down to death; her steps take hold on hell.</tw-passagedata><tw-passagedata pid="206" name="Job 31:1 KJV" tags="bible" position="1550,2250" size="100,100">I made a covenant with mine eyes; why then should I think upon a maid?</tw-passagedata><tw-passagedata pid="207" name="Ephesians 4:22 KJV" tags="bible" position="1650,2250" size="100,100">That ye put off concerning the former conversation the old man, which is corrupt according to the deceitful lusts;</tw-passagedata><tw-passagedata pid="208" name="1 John 2:16 KJV" tags="bible" position="1750,2250" size="100,100">For all that is in the world, the lust of the flesh, and the lust of the eyes, and the pride of life, is not of the Father, but is of the world.</tw-passagedata><tw-passagedata pid="209" name="Romans 7:24 KJV" tags="bible prayer" position="1850,2250" size="100,100">O wretched man that I am! who shall deliver me from the body of this death?</tw-passagedata><tw-passagedata pid="210" name="05-RE-51" tags="optional" position="550,2250" size="100,100">* How long did you stay in the [[city of Destruction?|05-DE-51]]
* Did you hear no talk of neighbor [[Pliable?|05-DE-4-51]]
* Tell me now what [[you have met|05-PI-51-52]] with in the way as you came;
* Did you meet with no [[other assault|05-DI-51-53-54]] as you came?
* Did you not see [[the house|05-LO-38-51]] that stood there on the top of the hill?
* Did you meet nobody in the [[Valley of Humility?|05-HU-51-55-56]]
* Did you meet nobody else in [[that valley|05-SH-51]]?</tw-passagedata><tw-passagedata pid="211" name="05-DE-51" tags="moment hometown" position="425,2400" size="100,100">[1] How long did you stay in the city of Destruction before you set out after me on your pilgrimage?

[51] Till I could stay no longer; for there was a great talk presently after you were gone out, that our city would, in a short time, with fire from heaven, be burnt down to the ground.

[1] What, did your neighbors talk so?

[51] Yes, it was for a while in every body’s mouth.

[1] What, and did no more of them but you come out to escape the danger?

[51] Though there was, as I said, a great talk thereabout, yet I do not think they did firmly believe it; for, in the heat of the discourse, I heard some of them deridingly speak of you and of your desperate journey, for so they called this your pilgrimage. But I did believe, and do still, that the end of our city will be with fire and brimstone from above; and therefore I have made my escape.
&lt;&lt;include &quot;05-RE-51&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="212" name="05-DE-4-51" tags="moment hometown" position="550,2400" size="100,100">[1] Did you hear no talk of neighbor Pliable?

[51] Yes, Christian, I heard that he followed you till he came to the Slough of Despond, where, as some said, he fell in; but he would not be known to have so done: but I am sure he was soundly bedabbled with that kind of dirt.

[1] And what said the neighbors to him?

[51] He hath, since his going back, been had greatly in derision, and that among all sorts of people: some do mock and despise him, and scarce will any set him on work. He is now seven times worse than if he had never gone out of the city.

[1] But why should they be so set against him, since they also despise the way that he forsook?

[51] O, they say, Hang him; he is a turncoat; he was not true to his profession! I think God has __stirred up even His enemies__ (Jeremiah 29:18-19) to hiss at him, and make him a proverb, because he hath forsaken the way.

[1] Had you no talk with him before you came out?

[51] I met him once in the streets, but he leered away on the other side, as one ashamed of what he had done; So I spake not to him.

[1] Well, at my first setting out I had hopes of that man; but now I fear he will perish in the overthrow of the city. For it has happened to him according to the true proverb, __The dog is turned to his vomit again, and the sow that was washed to her wallowing in the mire.__ (2 Peter 2:22 KJV)

[51] These are my fears of him too; but who can hinder that which will be?

[1] Well, neighbor Faithful, let us leave him, and talk of things that more immediately concern ourselves.
&lt;&lt;include &quot;05-RE-51&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="213" name="05-PI-51-52" tags="moment pit" position="675,2400" size="100,100">[1] Tell me now what you have met with in the way as you came; for I know you have met with some things, or else it may be writ for a wonder.

[51] I escaped the slough that I perceive you fell into, and got up to the gate without that danger; only I met with one whose name was Wanton, that had like to have done me mischief.

[1] It was well you escaped her net: Joseph was hard put to it by her, and he __escaped her__ (Genesis 39:11-13) as you did; but it had like to have cost him his life. But what did she do to you?

[51] You cannot think (but that you know something) what a flattering tongue she had; she lay at me hard to turn aside with her, promising me all manner of content.

[1] Nay, she did not promise you the content of a good conscience.

[51] You know what I mean; all carnal and fleshly content. 

[1] Thank God that you escaped her: __the abhorred of the Lord shall fall into her pit__ (Proverbs 22:14).

[51] Nay, I know not whether I did wholly escape her or no.

[1] Why, I trow you did not consent to her desires?

[51] No, not to defile myself; for I remembered an old writing that I had seen, which said, 
&gt; __Her steps take hold on Hell.__ (Proverbs 5:5)
So __I shut mine eyes__ (Job 31:1), because I would not be bewitched with her looks. Then she railed on me, and I went my way.
&lt;&lt;include &quot;05-RE-51&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="214" name="05-DI-51-53-54" tags="moment mid-hill" position="800,2400" size="100,100">[1] Did you meet with no other assault as you came?

[51] When I came to the foot of the hill called Difficulty, I met with a very aged man, who asked me what I was, and whither bound. I told him that I was a pilgrim, going to the Celestial City. 

[51] Then said the old man,
&gt; [53] Thou lookest like an honest fellow; wilt thou be content to dwell with me for the wages that I shall give thee?
[51] Then I asked his name, and where he dwelt?
&gt; [53] My name was Adam the First, and that I dwelt in the town of __Deceit__ (Ephesians 4:22).
[51] I asked him then what was his work, and what the wages that he would give.
&gt; [53] My work was many delights; and my wages, that thou should be my heir at last.
[51] I further asked him, what house he kept, and what other servants he had. 
&gt; [53] My house was maintained with all the dainties of the world, and that my servants were those of my own begetting.
[51] Then I asked how many children he had.
&gt; [53] I had but __three daughters__ (1 John 2:16), the Lust of the Flesh, the Lust of the Eyes, and the Pride of Life; thou should marry them if thou would.
[51] Then I asked, how long time he would have me live with him;
&gt; [53] …as long as I lived.
[1] Well, and what conclusion came the old man and you to at last?

[51] Why, at first I found myself somewhat inclinable to go with the man, for I thought he spake very fair; but looking in his forehead, as I talked with him, I saw there written, “Put off the old man with his deeds.” 

[1] And how then?

[51] Then it came burning hot into my mind, that, whatever he said, and however he flattered, when he got me home to his house he would sell me for a slave.

[51] So I bid him forbear to talk, for I would not come near the door of his house. Then he reviled me, 
&gt; [53] I would send such a one after thou that should make thy way bitter to thy soul.
[51] So I turned to go away from him; but just as I turned myself to go thence, I felt him take hold of my flesh, and give me such a deadly twitch back, that I thought he had pulled part of me after himself: this made me cry,  __“O wretched man.”__ (Romans 7:24).  So I went on my way up the hill.

[51] Now, when I had got above half-way up, I looked behind me, and saw one coming after me, swift as the wind; so he overtook me just about the place where the settle stands.

[1] Just there, did I sit down to rest me; but being overcome with sleep, I there lost this roll out of my bosom. 

[51] But, good brother, hear me out. So soon as the man overtook me, it was but a word and a blow; for down he knocked me, and laid me for dead. But when I was a little come to myself again I asked him wherefore he served me so.
&gt; [54] Because of thy secret inclining to Adam the First.
[51] And with that he struck me another deadly blow on the breast, and beat me down backward; so I lay at his foot as dead as before. So when I came to myself again I cried him mercy: but he said,
&gt; [54] I know not how to show mercy;
[51] …and with that he knocked me down again. He had doubtless made an end of me, but that one came by and bid him forbear.

[1] Who was that that bid him forbear?

[51] I did not know him at first: but as he went by, I perceived the holes in his hands and in his side: Then I concluded that he was our Lord. So I went up the hill.

[1] That man that overtook you was Moses. He spareth none; neither knoweth he how to shew mercy to those that transgress the law.

[51] I know it very well; it was not the first time that he has met with me. ‘Twas he that came to me when I dwelt securely at home, and that told me he would burn my house over my head if I stayed there.
&lt;&lt;include &quot;05-RE-51&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="215" name="05-HU-51-55-56" tags="moment valley_#1" position="425,2525" size="100,100">[1] Did you meet nobody in the Valley of Humility?

[51] Yes, I met with one Discontent, who would willingly have persuaded me to go back again with him: his reason was, for that the valley was altogether without honor.
&gt; [55] …to go there was the way to disoblige all thy friends, as Pride, Arrogancy, Self-Conceit, Worldly Glory, with others, who thou knew, would be very much offended if thou made such a fool of thyself as to wade through this valley.
[1] Well, and how did you answer him?

[51] I told him, that although all these that he named, might claim a kindred of me, and that rightly, (for indeed they were my relations according to the flesh,) yet since I became a pilgrim they have disowned me, and I also have rejected them; and therefore they were to me now no more than if they had never been of my lineage.

[51] I told him, moreover, that as to this valley, he had quite misrepresented the thing; for before honor is humility, and a haughty spirit before a fall. Therefore, said I, I had rather go through this valley to the honor that was so accounted by the wisest, than choose that which he esteemed most worthy of our affections.

[1] Met you with nothing else in that valley?

[51] Yes, I met with Shame; but of all the men that I met with on my pilgrimage, he, I think, bears the wrong name. The other would be said nay, after a little argumentation, and somewhat else; but this bold-faced Shame would never have done.

[1] Why, what did he say to you?

[51] What? why, he objected against religion itself.
&gt; [56] It was a pitiful, low, sneaking business for a man to mind religion. A tender conscience was an unmanly thing; and that for a man to watch over his words and ways, so as to tie up himself from that hectoring liberty that the brave spirits of the times accustomed themselves unto, would make him the ridicule of the times.
&gt; 
&gt; [56] I objected also, that but __few of the mighty, rich, or wise__ (1 Corinthians 1:26;  John 7:48), were ever of thy opinion; nor any of them neither, before they were __persuaded to be fools__ (1 Corinthians 3:18), and to be of a voluntary fondness to __venture the loss__ (Philippians 3:7-9)  of all for nobody knows what.
&gt;
&gt; [56] I, moreover, objected the base and low estate and condition of those that were chiefly the pilgrims of the times in which they lived; also their ignorance and want of understanding in all natural science.
[51] Yea, he did hold me to it at that rate also, about a great many more things than here I relate; as, that…
&gt; [56] …it was a shame to sit whining and mourning under a sermon, and a shame to come sighing and groaning home; it was a shame to ask thy neighbor forgiveness for petty faults, or to make restitution where thou have taken from any.
&gt;
&gt; [56] Religion made a man grow strange to the great, because of a few vices, which I called by finer names, and made my own and respect the base, because of the same religious fraternity: And is not this, a shame?
[1] And what did you say to him?

[51] Say? I could not tell what to say at first. Yea, he put me so to it, that my blood came up in my face; even this Shame fetched it up, and had almost beat me quite off. But at last I began to consider, that that which is highly esteemed among men, is had in __abomination with God__ (Luke 16:15).

[51] And I thought again, this Shame tells me what men are; but he tells me nothing what God, or the word of God is. And I thought, moreover, that at the day of doom we shall not be doomed to death or life according to the hectoring spirits of the world, but according to the wisdom and law of the Highest.

[51] Therefore, thought I, what God says is best, is indeed best, though all the men in the world are against it. Seeing, then, that God prefers his religion; seeing God prefers a tender Conscience; seeing they that make themselves fools for the kingdom of heaven are wisest, and that the poor man that loveth Christ is richer than the greatest man in the world that hates him;

[51] Shame, depart, thou art an enemy to my salvation. Shall I entertain thee against my sovereign Lord? How then shall I look him in the face at his coming? Should I now be __ashamed of his ways and servants__ (Mark 8:38), how can I expect the blessing?

[51] But indeed this Shame was a bold villain; I could scarcely shake him out of my company; yea, he would be haunting of me, and continually whispering me in the ear, with some one or other of the infirmities that attend religion.

[51] But at last I told him, that it was but in vain to attempt farther in this business; for those things that he disdained, in those did I see most glory: and so at last I got past this importunate one. And when I had shaken him off, then I began to sing, 
&gt; // ♩ &lt;&lt;journal &quot;Trials of Shame&quot;&gt;&gt;♬//

[1] I am glad, my brother, that thou didst withstand this villain so bravely; for of all, as thou sayest, I think he has the wrong name; for he is so bold as to follow us in the streets, and to attempt to put us to shame before all men; that is, to make us ashamed of that which is good. But if he was not himself audacious, he would never attempt to do as he does.

[1] But let us still resist him; for, notwithstanding all his bravadoes, he promoteth the fool, and none else. 
&gt; __“The wise shall inherit glory,” said Solomon; “but shame shall be the promotion of fools.”__ (Proverbs 3:35 KJV)
[51] I think we must cry to Him for help against Shame, that would have us to be valiant for truth upon the earth.

[1] You say true;
&lt;&lt;include &quot;05-RE-51&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="216" name="05-LO-38-51" tags="moment lodge" position="925,2400" size="100,100">
[1] But did you not see the house that stood there on the top of the hill, on the side of which Moses met you?

[51] Yes, and the lions too, before I came at it. But, for the lions, I think they were asleep, for it was about noon; and because I had so much of the day before me, I passed by the Porter, and came down the hill.

[1] He told me, indeed, that he saw you go by; but I wish you had called at the house, for they would have showed you so many rarities that you would scarce have forgot them to the day of your death. But pray tell me,…
&lt;&lt;include &quot;05-RE-51&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="217" name="1 Corinthians 1:26 KJV" tags="bible" position="1950,2250" size="100,100">For ye see your calling, brethren, how that not many wise men after the flesh, not many mighty, not many noble, are called:</tw-passagedata><tw-passagedata pid="218" name="1 Corinthians 3:18 KJV" tags="bible prayer" position="1050,2350" size="100,100">Let no man deceive himself. If any man among you seemeth to be wise in this world, let him become a fool, that he may be wise.</tw-passagedata><tw-passagedata pid="219" name="John 7:48 KJV" tags="bible" position="1250,2350" size="100,100">Have any of the rulers or of the Pharisees believed on him?</tw-passagedata><tw-passagedata pid="220" name="Philippians 3:7-9 KJV" tags="bible prayer" position="1150,2350" size="100,100">But what things were gain to me, those I counted loss for Christ. Yea doubtless, and I count all things but loss for the excellency of the knowledge of Christ Jesus my Lord: for whom I have suffered the loss of all things, and do count them but dung, that I may win Christ, And be found in him, not having mine own righteousness, which is of the law, but that which is through the faith of Christ, the righteousness which is of God by faith:</tw-passagedata><tw-passagedata pid="221" name="Luke 16:15 KJV" tags="bible prayer" position="1350,2350" size="100,100">And he said unto them, Ye are they which justify yourselves before men; but God knoweth your hearts: for that which is highly esteemed among men is abomination in the sight of God.</tw-passagedata><tw-passagedata pid="222" name="Proverbs 3:35 KJV" tags="bible" position="1450,2350" size="100,100">The wise shall inherit glory: but shame shall be the promotion of fools.</tw-passagedata><tw-passagedata pid="223" name="05-SH-51" tags="moment valley_#2" position="550,2525" size="100,100">[1] Christian: You say true; but did you meet nobody else in that valley?

[51] No, not I; for I had sunshine all the rest of the way through that, and also through the Valley of the Shadow of Death.

[1] ‘Twas well for you; I am sure it fared far otherwise with me. I had for a long season, as soon almost as I entered into that valley, a dreadful combat with that foul fiend Apollyon; yea, I thought verily he would have killed me, especially when he got me down, and crushed me under him, as if he would have crushed me to pieces; for as he threw me, my sword flew out of my hand: nay, he told me he was sure of me; but I cried to God, and he heard me, and delivered me out of all my troubles.

[1] Then I entered into the Valley of the Shadow of Death, and had no light for almost half the way through it. I thought I should have been killed there over and over; but at last day brake, and the sun rose, and I went through that which was behind with far more ease and quiet.

[@] Moreover, I saw in my dream, that as they  [[went on|05-CO-1-51-57]],…</tw-passagedata><tw-passagedata pid="224" name="05-CO-1-51-57" tags="moment wilderness" position="675,2525" size="100,100">[@] Faithful, as he chanced to look on one side, saw a man whose name was Talkative, walking at a distance beside them; for in this place there was room enough for them all to walk. He was a tall man, and something more comely at a distance than at hand. To this man Faithful addressed himself in this manner.

[51] Friend, whither away? Are you going to the heavenly country?

[57]  I am going to the same place.

[51] That is well; then I hope we shall have your good company?

[57] With a very good will, will I be your companion.
&lt;&lt;include &quot;05-DI-1-51-57&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="225" name="05-DI-1-51-57" tags="optional" position="800,2525" size="100,100">* [[Faithfull and Talkative|05-DI-51-57]]
* [[Faithful and Christian|05-DI-1-51]]
* [[Faithful and Talkative again|05-CH-51-57]]
* [[Christian and Faithful again|05-RO-1-51]]</tw-passagedata><tw-passagedata pid="226" name="05-DI-51-57" tags="moment wilderness" position="425,2700" size="100,100">[51] Come on, then, and let us go together, and let us spend our time in discoursing of things that are profitable.

[57] To talk of things that are good, to me is very acceptable, with you or with any other; and I am glad that I have met with those that incline to so good a work; for, to speak the truth, there are but few who care thus to spend their time as they are in their travels, but choose much rather to be speaking of things to no profit; and this hath been a trouble to me.

[51] That is, indeed, a thing to be lamented; for what thing so worthy of the use of the tongue and mouth of men on earth, as are the things of the God of heaven?

[57] I like you wonderful well, for your saying is full of conviction; and I will add, What thing is so pleasant, and what so profitable, as to talk of the things of God? What things so pleasant? that is, if a man hath any delight in things that are wonderful. 

[57] For instance, if a man doth delight to talk of the history, or the mystery of things; or if a man doth love to talk of miracles, wonders, or signs, where shall he find things recorded so delightful, and so sweetly penned, as in the holy Scripture?

[51] That is true; but to be profited by such things in our talk, should be our chief design.

[57] That’s it that I said; for to talk of such things is most profitable; for by so doing a man may get knowledge of many things; as of the vanity of earthly things, and the benefit of things above. Thus in general; but more particularly, by this a man may learn the necessity of the new birth, the insufficiency of our works, the need of Christ’s righteousness, etc.

[57] Besides, by this a man may learn what it is to repent, to believe, to pray, to suffer, or the like: by this, also, a man may learn what are the great promises and consolations of the Gospel, to his own comfort. Farther, by this a man may learn to refute false opinions, to vindicate the truth, and also to instruct the ignorant.

[51] All this is true; and glad am I to hear these things from you.

[57] Alas! the want of this is the cause that so few understand the need of faith, and the necessity of a work of grace in their soul, in order to eternal life; but ignorantly live in the works of the law, by which a man can by no means obtain the kingdom of heaven.

[51] But, by your leave, heavenly knowledge of these is the gift of God; no man attaineth to them by human industry, or only by the talk of them.

[57] All this I know very well; for a man can receive nothing, except it be given him from heaven: all is of grace, not of works. I could give you a hundred scriptures for the confirmation of this.

[51] Well, then, said Faithful, what is that one thing that we shall at this time found our discourse upon?

[57] What you will. I will talk of things heavenly, or things earthly; things moral, or things evangelical; things sacred, or things profane; things past, or things to come; things foreign, or things at home; things more essential, or things circumstantial: provided that all be done to our profit.
&lt;&lt;include &quot;05-DI-1-51-57&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="227" name="05-DI-1-51" tags="moment wilderness" position="550,2700" size="100,100">[@] Now did Faithful begin to wonder; and stepping to Christian, (for he walked all this while by himself,) he said to him, but softly,

[51] What a brave companion have we got! Surely, this man will make a very excellent pilgrim.

[@] At this Christian modestly smiled, and said

[1] This man, with whom you are so taken, will beguile with this tongue of his, twenty of them that know him not.

[51] Do you know him, then? 

[1] Know him? Yes, better than he knows himself.

[51] Pray what is he?

[1] His name is Talkative: he dwelleth in our town. I wonder that you should be a stranger to him, only I consider that our town is large.

[51] Whose son is he? And whereabout doth he dwell?

[1] He is the son of one Say-well. He dwelt in Prating-Row; and he is known to all that are acquainted with him by the name of Talkative of Prating-Row; and, notwithstanding his fine tongue, he is but a sorry fellow.

[51] Well, he seems to be a very pretty man.

[1] That is, to them that have not a thorough acquaintance with him, for he is best abroad; near home he is ugly enough. Your saying that he is a pretty man, brings to my mind what I have observed in the work of a painter, whose pictures show best at a distance; but very near, more unpleasing.

[51] But I am ready to think you do but jest, because you smiled.

[1] God forbid that I should jest (though I smiled) in this matter, or that I should accuse any falsely. I will give you a further discovery of him. This man is for any company, and for any talk; as he talketh now with you, so will he talk when he is on the ale-bench; and the more drink he hath in his crown, the more of these things he hath in his mouth. Religion hath no place in his heart, or house, or conversation; all he hath lieth in his tongue, and his religion is to make a noise therewith.

[51] Say you so? Then am I in this man greatly deceived.

[1] Deceived! you may be sure of it. Remember the proverb, __“They say, and do not;”__ (Matthew 23:3) but the kingdom of God is not in word, but __in power__ (1 Corinthians 4:20). He talketh of prayer, of repentance, of faith, and of the new birth; but he knows but only to talk of them.

[1] I have been in his family, and have observed him both at home and abroad; and I know what I say of him is the truth. His house is as empty of religion as the white of an egg is of savor. There is there neither prayer, nor sign of repentance for sin; yea, the brute, in his kind, serves God far better than he.

[1] He is the very stain, reproach, and shame of religion to __all that know him__ (Romans 2:24-25); it can hardly have a good word in all that end of the town where he dwells, through him. Thus say the common people that know him, “A saint abroad, and a devil at home.” His poor family finds it so; he is such a churl, such a railer at, and so unreasonable with his servants, that they neither know how to do for or speak to him.

[1] Men that have any dealings with him say, It is better to deal with a Turk than with him, for fairer dealings they shall have at their hands. This Talkative (if it be possible) will go beyond them, defraud, beguile, and overreach them.

[1] Besides, he brings up his sons to follow his steps; and if he finds in any of them a foolish timorousness, (for so he calls the first appearance of a tender conscience,) he calls them fools and blockheads, and by no means will employ them in much, or speak to their commendation before others.

[1] For my part, I am of opinion that he has, by his wicked life, caused many to stumble and fall; and will be, if God prevents not, the ruin of many more.

[51] Well, my brother, I am bound to believe you, not only because you say you know him, but also because, like a Christian, you make your reports of men. For I cannot think that you speak these things of ill-will, but because it is even so as you say.

[1] Had I known him no more than you, I might, perhaps, have thought of him as at the first you did; yea, had I received this report at their hands only that are enemies to religion, I should have thought it had been a slander-a lot that often falls from bad men’s mouths upon good men’s names and professions.

[1] But all these things, yea, and a great many more as bad, of my own knowledge, I can prove him guilty of. Besides, good men are ashamed of him; they can neither call him brother nor friend; the very naming of him among them makes them blush, if they know him.

[51] Well, I see that saying and doing are two things, and hereafter I shall better observe this distinction.

[1] They are two things indeed, and are as diverse as are the soul and the body; for, as the body without the soul is but a dead carcass, so saying, if it be alone, is but a dead carcass also. The soul of religion is the practical part. 
&gt; &lt;&lt;book &quot;James 1:27 KJV&quot;&gt;&gt;
This, Talkative is not aware of; he thinks that hearing and saying will make a good Christian; and thus he __deceiveth his own soul__ (James 1:22-26). Hearing is but as the sowing of the seed; talking is not sufficient to prove that fruit is indeed in the heart and life. And let us assure ourselves, that at the day of doom men shall be judged __according to their fruits__ (Matthew 13:23). 

[1] It will not be said then, Did you believe? but, Were you doers, or talkers only? and accordingly shall they be judged. The end of the world is compared to __our harvest__ (Matthew 13:30), and you know men at harvest regard nothing but fruit. Not that any thing can be accepted that is not of faith; but I speak this to show you how insignificant the profession of Talkative will be at that day.

[51] This brings to my mind that of Moses, by which he describeth the beast that is clean ( Leviticus 11; Deuteronomy 14). He is such an one that parteth the hoof, and cheweth the cud; not that parteth the hoof only, or that cheweth the cud only. The hare cheweth the cud, but yet is unclean, because he parteth not the hoof.

[51] And this truly resembleth Talkative: he cheweth the cud, he seeketh knowledge; he cheweth upon the word, but he divideth not the hoof. He parteth not with the way of sinners; but, as the hare, he retaineth the foot of the dog or bear, and therefore he is unclean.

[1] You have spoken, for aught I know, the true gospel sense of these texts. And I will add another thing: Paul calleth some men, yea, and those great talkers too, __sounding brass, and tinkling cymbals__ (1 Corinthians 13:1,3); that is, as he expounds them in another place, things __without life__ (1 Corinthians 14:7) giving sound. Things without life; that is, without the true faith and grace of the gospel; and consequently, things that shall never be placed in the kingdom of heaven among those that are the children of life; though their sound, by their talk, be as if it were the tongue or voice of an angel.

[51] Well, I was not so fond of his company at first, but I am as sick of it now. What shall we do to be rid of him? 

[1] Take my advice, and do as I bid you, and you shall find that he will soon be sick of your company too, except God shall touch his heart, and turn it.

[51] What would you have me to do? 

[1] Why, go to him, and enter into some serious discourse about the power of religion; and ask him plainly, (when he has approved of it, for that he will,) whether this thing be set up in his heart, house, or conversation.
&lt;&lt;include &quot;05-DI-1-51-57&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="228" name="05-CH-51-57" tags="moment wilderness" position="675,2700" size="100,100">[@] Then Faithful stepped forward again, and said to Talkative,

[51] Come, what cheer? How is it now?

[57] Thank you, well: I thought we should have had a great deal of talk by this time.

[51] Well, if you will, we will fall to it now; and since you left it with me to state the question, let it be this: 
&lt;&lt;include &quot;05-QU-51-57&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="229" name="Matthew 23:3 KJV" tags="bible" position="1550,2350" size="100,100">(Jesus speaking) All therefore whatsoever they bid you observe, that observe and do; but do not ye after their works: for they say, and do not.</tw-passagedata><tw-passagedata pid="230" name="1 Corinthians 4:20 KJV" tags="bible prayer" position="1650,2350" size="100,100">For the kingdom of God is not in word, but in power.</tw-passagedata><tw-passagedata pid="231" name="Romans 2:24-25 KJV" tags="bible" position="1750,2350" size="100,100">For the name of God is blasphemed among the Gentiles through you, as it is written. For circumcision verily profiteth, if thou keep the law: but if thou be a breaker of the law, thy circumcision is made uncircumcision.</tw-passagedata><tw-passagedata pid="232" name="James 1:27 KJV" tags="bible prayer" position="1850,2350" size="100,100">Pure religion and undefiled before God and the Father is this, To visit the fatherless and widows in their affliction, and to keep himself unspotted from the world.</tw-passagedata><tw-passagedata pid="233" name="James 1:22-26 KJV" tags="bible prayer" position="1950,2350" size="100,100">But be ye doers of the word, and not hearers only, deceiving your own selves. For if any be a hearer of the word, and not a doer, he is like unto a man beholding his natural face in a glass: For he beholdeth himself, and goeth his way, and straightway forgetteth what manner of man he was. But whoso looketh into the perfect law of liberty, and continueth therein, he being not a forgetful hearer, but a doer of the work, this man shall be blessed in his deed. If any man among you seem to be religious, and bridleth not his tongue, but deceiveth his own heart, this man’s religion is vain.</tw-passagedata><tw-passagedata pid="234" name="Matthew 13:23 KJV" tags="bible promise" position="1050,2450" size="100,100">(Jesus speaking) But he that received seed into the good ground is he that heareth the word, and understandeth it; which also beareth fruit, and bringeth forth, some an hundredfold, some sixty, some thirty.</tw-passagedata><tw-passagedata pid="235" name="Matthew 13:30 KJV" tags="bible promise" position="1150,2450" size="100,100">Let both grow together until the harvest: and in the time of harvest I will say to the reapers, Gather ye together first the tares, and bind them in bundles to burn them: but gather the wheat into my barn.</tw-passagedata><tw-passagedata pid="236" name="1 Corinthians 13:1,3 KJV" tags="bible prayer" position="1250,2450" size="100,100">Though I speak with the tongues of men and of angels, and have not charity, I am become as sounding brass, or a tinkling cymbal. And though I bestow all my goods to feed the poor, and though I give my body to be burned, and have not charity, it profiteth me nothing.</tw-passagedata><tw-passagedata pid="237" name="1 Corinthians 14:7 KJV" tags="bible" position="1350,2450" size="100,100">And even things without life giving sound, whether pipe or harp, except they give a distinction in the sounds, how shall it be known what is piped or harped?</tw-passagedata><tw-passagedata pid="238" name="05-QU-51-57" tags="optional" position="800,2700" size="100,100">* How doth the [[saving grace of God discover itself|05-GR-51-57]] when it is in the heart of man?
* Doth your [[life and conversation testify the same|05-TE-1-51-57]]?</tw-passagedata><tw-passagedata pid="239" name="05-GR-51-57" tags="moment wilderness" position="800,2850" size="100,100">[51] Well, if you will, we will fall to it now; and since you left it with me to state the question, let it be this: How doth the saving grace of God discover itself when it is in the heart of man?

[57] I perceive, then, that our talk must be about the power of things. Well, it is a very good question, and I shall be willing to answer you. And take my answer in brief, thus: First, where the grace of God is in the heart, it causeth there a great outcry against sin. Secondly-

[51] Nay, hold; let us consider of one at once. I think you should rather say, it shows itself by inclining the soul to abhor its sin.

[57] Why, what difference is there between crying out against, and abhorring of sin?

[51] Oh! a great deal. A man may cry out against sin, of policy; but he cannot abhor it but by virtue of a godly antipathy against it. I have heard many cry out against sin in the pulpit, who yet can abide it well enough in the heart, house, and conversation.  Joseph’s mistress __cried out__ (Genesis 39:15) with a loud voice, as if she had been very holy; but she would willingly, notwithstanding that, have committed uncleanness with him. Some cry out against sin, even as the mother cries out against her child in her lap, when she calleth it slut and naughty girl, and then falls to hugging and kissing it.

[57] You lie at the catch, I perceive.

[51] No, not I; I am only for setting things right. But what is the second thing whereby you would prove a discovery of a work of grace in the heart?

[57] Great knowledge of gospel mysteries.

[51] This sign should have been first: but, first or last, it is also false; for knowledge, great knowledge, may be obtained in the mysteries of the Gospel, and yet no work of grace in the soul. Yea, __if a man have all knowledge, he may yet be nothing__ (1 Corinthians 13:2), and so, consequently, be no child of God. 

[51] When Christ said, “Do you know all these things?” and the disciples answered, Yes, he added, “Blessed are ye if ye do them.” He doth not lay the blessing in the knowing of them, but __in the doing__ (John 13:17) of them. For there is a knowledge that is not attended with doing: 
&gt; __He that knoweth his Master’s will, and doeth it not.__ (Luke 12:47) 
A man may know like an angel, and yet be no Christian: therefore your sign of it is not true. Indeed, to know is a thing that pleaseth talkers and boasters; but to do is that which pleaseth God. Not that the heart can be good without knowledge, for without that the heart is naught.

[57] There are, therefore, two sorts of knowledge, knowledge that resteth in the bare speculation of things, and knowledge that is accompanied with the grace of faith and love, which puts a man upon doing even the will of God from the heart: the first of these will serve the talker; but without the other, the true Christian is not content. 
&gt; &lt;&lt;book &quot;Psalm 119:34&quot;&gt;&gt;
[57] You lie at the catch again: this is not for edification.

[51] Well, if you please, propound another sign how this work of grace discovereth itself where it is. 

[57] Not I, for I see we shall not agree.

[51] Well, if you will not, will you give me leave to do it?

[57] You may use your liberty. 

[51] A work of grace in the soul discovereth itself, either to him that hath it, or to standers-by.

[51] To him that hath it, thus: It gives him __conviction of sin__  (Psalm 38:18; Jeremiah 31:19; John 16:8), especially the defilement of his nature, and the sin of unbelief, for the sake of which he is sure __to be damned__ (Romans 7:24; Mark 16:16) , if he findeth not mercy at God’s hand, __by faith in Jesus Christ__ (Galatians 2:16; Revelation 1:6). This sight and sense of things worketh in him sorrow and shame for sin.

[51] To others it is thus discovered:
# By an experimental confession of his faith in Christ
# By a life answerable to that confession;
to wit, a life of holiness-heart-holiness, family-holiness, (if he hath a family,) and by conversation-holiness in the world; which in the general teacheth him inwardly to __abhor his sin__ (Job 42:5-6; Ezekiel 20:43), and himself for that, in secret; to suppress it in his family, and to promote __holiness__ (Matthew 5:8;  Ezekiel 36:25; Philippians 3:17-20) in the world: not by talk only, as a hypocrite or talkative person may do, but by a __practical subjection in faith and love__ (Psalm 50:23; John 14:15; Romans 10:10; Philippians 1:27) to the power of the word.

[51] And now, sir, as to this brief description of the work of grace, and also the discovery of it, if you have aught to object, object; if not, then give me leave to propound to you a second question.

[57] Nay, my part is not now to object, but to hear; let me, therefore, have your second question.

[51]
&lt;&lt;include &quot;05-QU-51-57&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="240" name="Genesis 39:15 KJV" tags="bible" position="1450,2450" size="100,100">And it came to pass, when he heard that I lifted up my voice and cried, that he left his garment with me, and fled, and got him out.</tw-passagedata><tw-passagedata pid="241" name="1 Corinthians 13:2 KJV" tags="bible prayer" position="1550,2450" size="100,100">And though I have the gift of prophecy, and understand all mysteries, and all knowledge; and though I have all faith, so that I could remove mountains, and have not charity, I am nothing.</tw-passagedata><tw-passagedata pid="242" name="Psalm 119:34 KJV" tags="bible prayer" position="1850,2450" size="100,100">Give me understanding, and I shall keep thy law; yea, I shall observe it with my whole heart.</tw-passagedata><tw-passagedata pid="243" name="Psalm 38:18 KJV" tags="bible prayer" position="1950,2450" size="100,100">For I will declare mine iniquity; I will be sorry for my sin.</tw-passagedata><tw-passagedata pid="244" name="Jeremiah 31:19 KJV" tags="bible prayer" position="1050,2550" size="100,100">Surely after that I was turned, I repented; and after that I was instructed, I smote upon my thigh: I was ashamed, yea, even confounded, because I did bear the reproach of my youth.</tw-passagedata><tw-passagedata pid="245" name="John 16:8 KJV" tags="bible promise" position="1150,2550" size="100,100">(Jesus speaking) And when he is come, he will reprove the world of sin, and of righteousness, and of judgment:</tw-passagedata><tw-passagedata pid="246" name="Mark 16:16 KJV" tags="bible promise" position="1250,2550" size="100,100">(Jesus speaking) He that believeth and is baptized shall be saved; but he that believeth not shall be damned.</tw-passagedata><tw-passagedata pid="247" name="Revelation 1:6 KJV" tags="bible prayer" position="1350,2550" size="100,100">And hath made us kings and priests unto God and his Father; to him be glory and dominion for ever and ever. Amen.</tw-passagedata><tw-passagedata pid="248" name="John 13:17 KJV" tags="bible promise" position="1650,2450" size="100,100">(Jesus speaking) If ye know these things, happy are ye if ye do them.</tw-passagedata><tw-passagedata pid="249" name="Luke 12:47 KJV" tags="bible promise" position="1750,2450" size="100,100">And that servant, which knew his lord&#39;s will, and prepared not himself, neither did according to his will, shall be beaten with many stripes.</tw-passagedata><tw-passagedata pid="250" name="Job 42:5-6 KJV" tags="bible prayer" position="1450,2550" size="100,100">I have heard of thee by the hearing of the ear: but now mine eye seeth thee. Wherefore I abhor myself, and repent in dust and ashes. </tw-passagedata><tw-passagedata pid="251" name="Psalm 50:23 KJV" tags="bible promise" position="1550,2550" size="100,100">Whoso offereth praise glorifieth me: and to him that ordereth his conversation aright will I shew the salvation of God.</tw-passagedata><tw-passagedata pid="252" name="Ezekiel 20:43 KJV" tags="bible promise" position="1650,2550" size="100,100">And there shall ye remember your ways, and all your doings, wherein ye have been defiled; and ye shall lothe yourselves in your own sight for all your evils that ye have committed.</tw-passagedata><tw-passagedata pid="253" name="Matthew 5:8 KJV" tags="bible promise" position="1750,2550" size="100,100">(Jesus speaking) Blessed are the pure in heart: for they shall see God.</tw-passagedata><tw-passagedata pid="254" name="John 14:15 KJV" tags="bible" position="1850,2550" size="100,100">(Jesus speaking) If ye love me, keep my commandments.</tw-passagedata><tw-passagedata pid="255" name="Romans 10:10 KJV" tags="bible promise" position="1950,2550" size="100,100">For with the heart man believeth unto righteousness; and with the mouth confession is made unto salvation.</tw-passagedata><tw-passagedata pid="256" name="Ezekiel 36:25 KJV" tags="bible promise" position="1050,2650" size="100,100">Then will I sprinkle clean water upon you, and ye shall be clean: from all your filthiness, and from all your idols, will I cleanse you.</tw-passagedata><tw-passagedata pid="257" name="Philippians 1:27 KJV" tags="bible prayer" position="1150,2650" size="100,100">Only let your conversation be as it becometh the gospel of Christ: that whether I come and see you, or else be absent, I may hear of your affairs, that ye stand fast in one spirit, with one mind striving together for the faith of the gospel;</tw-passagedata><tw-passagedata pid="258" name="Philippians 3:17-20 KJV" tags="bible" position="1250,2650" size="100,100">Brethren, be followers together of me, and mark them which walk so as ye have us for an ensample. (For many walk, of whom I have told you often, and now tell you even weeping, that they are the enemies of the cross of Christ: Whose end is destruction, whose God is their belly, and whose glory is in their shame, who mind earthly things.) For our conversation is in heaven; from whence also we look for the Saviour, the Lord Jesus Christ:</tw-passagedata><tw-passagedata pid="259" name="05-TE-1-51-57" tags="moment wilderness" position="925,2850" size="100,100">[51] It is this: Do you experience this first part of the description of it; and doth your life and conversation testify the same? Or standeth your religion in word or tongue, and not in deed and truth?

[51] Pray, if you incline to answer me in this, say no more than you know the God above will say Amen to, and also nothing but what your conscience can justify you in; for not he that commendeth himself is approved, but whom the Lord commendeth. Besides, to say I am thus and thus, when my conversation, and all my neighbors, tell me I lie, is great wickedness.

[@] Then Talkative at first began to blush; but, recovering himself, thus he replied:

[57] You come now to experience, to conscience, and to God; and to appeal to him for justification of what is spoken. This kind of discourse I did not expect; nor am I disposed to give an answer to such questions, because I count not myself bound thereto, unless you take upon you to be a catechiser; and though you should so do, yet I may refuse to make you my judge. But I pray, will you tell me why you ask me such questions?

[51] Because I saw you forward to talk, and because I knew not that you had aught else but notion.

[51] Besides, to tell you all the truth, I have heard of you that you are a man whose religion lies in talk, and that your conversation gives this your mouth-profession the lie. 

[51] They say you are a spot among Christians, and that religion fareth the worse for your ungodly conversation; that some have already stumbled at your wicked ways, and that more are in danger of being destroyed thereby: your religion, and an ale-house, and covetousness, and uncleanness, and swearing, and lying, and vain company-keeping, etc., will stand together. The proverb is true of you which is said of a harlot, to wit, “That she is a shame to all women:” so are you a shame to all professors.

[57] Since you are so ready to take up reports, and to judge so rashly as you do, I cannot but conclude you are some peevish or melancholy man, not fit to be discoursed with; and so adieu.
&lt;&lt;include &quot;05-DI-1-51-57&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="260" name="1 Timothy 6:5 KJV" tags="bible prayer" position="1350,2650" size="100,100">Perverse disputings of men of corrupt minds, and destitute of the truth, supposing that gain is godliness: from such withdraw thyself.</tw-passagedata><tw-passagedata pid="261" name="05-RO-1-51" tags="moment wilderness" position="925,2700" size="100,100">[@] Then up came Christian, and said to his brother, 

[1] I told you how it would happen; your words and his lusts could not agree. He had rather leave your company than reform his life.

[1] But he is gone, as I said: let him go; the loss is no man’s but his own. He has saved us the trouble of going from him; for he continuing (as I suppose he will do) as he is, would have been but a blot in our company: besides, the apostle says, 
&gt; __From such withdraw thyself.__ (1 Timothy 6:5)
[51] But I am glad we had this little discourse with him; it may happen that he will think of it again: however, I have dealt plainly with him, and so am clear of his blood if he perisheth.

[1] You did well to talk so plainly to him as you did. There is but little of this faithful dealing with men now-a-days, and that makes religion to stink so in the nostrils of many as it doth; for they are these talkative fools, whose religion is only in word, and who are debauched and vain in their conversation, that (being so much admitted into the fellowship of the godly) do puzzle the world, blemish Christianity, and grieve the sincere.

[1] I wish that all men would deal with such as you have done; then should they either be made more conformable to religion, or the company of saints would be too hot for them.

[51] 
&gt; //&lt;&lt;journal &quot;Heart-work&quot;&gt;&gt;//
[@] Thus they went on, talking of what they had seen by the way, and so made that way easy, which would otherwise no doubt have been tedious to them, for now they went through a [[wilderness|06-WI-1-2-51]].</tw-passagedata><tw-passagedata pid="262" name="06-WI-1-2-51" tags="moment wilderness" position="425,3100" size="100,100">[@] Now when they were got almost quite out of this wilderness, Faithful chanced to cast his eye back, and espied one coming after them, and he knew him. Faithful to his brother,

[51] Oh, who comes yonder?

[@] Then Christian looked, and said,

[1] It is my good friend Evangelist.

[51] Aye, and my good friend too, for ‘twas he that set me on the way to the gate.

[@] Now was Evangelist come up unto them, and thus saluted them.

[2] Peace be with you, dearly beloved, and peace be to your helpers.

[1] Welcome, welcome, my good Evangelist: the sight of thy countenance brings to my remembrance thy ancient kindness and unwearied labors for my eternal good.

[51] And a thousand times welcome, thy company, O sweet Evangelist; how desirable is it to us poor pilgrims!

[2] How hath it fared with you, my friends, since the time of our last parting? What have you met with, and how have you behaved yourselves?

[@] Then Christian and Faithful told him of all things that had happened to them in the way; and how, and with what difficulty, they had arrived to that place.

[2] Right glad am I, not that you have met with trials, but that you have been victors, and for that you have, notwithstanding many weaknesses, continued in the way to this very day.

[2] I say, right glad am I of this thing, and that for mine own sake and yours: 
* I have sowed, and you have reaped; and the day is coming, when both he that soweth, and they that reap, shall __rejoice together,__ (John 4:36); 
* That is, if you hold out: for in due season __ye shall reap__ (Galatians 6:9).
* The crown is before you, and it is an incorruptible one; so run that __ye may obtain it.__ (1 Corinthians 9:24-27)
* Some there be that set out for this crown, and after they have gone far for it, another comes in and takes it from them: hold fast, therefore, that you have; __let no man take your crown.__ (Revelation 3:11)
* You are not yet out of the __gunshot of the devil;__ (Hebrews 12:4)
* Let the kingdom be always before you, and believe steadfastly concerning the __things that are invisible__ (2 Corinthians 4:18). Let nothing that is on this side the other world get within you. And, above all, 
* Look well to your own hearts and to the lusts thereof; for they are __“deceitful above all things, and desperately wicked.”__ (Jeremiah 17:9). 
* Set your faces like a flint; you have all power in heaven and earth on your side.

[@] Then Christian thanked him for his exhortations; but told him withal, that they would have him speak farther to them for their help the rest of the way; and the rather, for that they well knew that he was a prophet, and could tell them of things that might happen unto them, and also how they might resist and overcome them. 

[@] To which request Faithful also consented. So Evangelist began as followeth.

[2] My sons, you have heard in the word of the truth of the Gospel, that you must __through many tribulations__ (Acts 14:22) enter into the kingdom of heaven; and again, that __in every city, bonds and afflictions abide you__ (Acts 20:23-24); and therefore you cannot expect that you should go long on your pilgrimage without them, in some sort or other.

[2] You have found something of the truth of these testimonies upon you already, and more will immediately follow: for now, as you see, you are almost out of this wilderness, and therefore you will soon come into a town that you will by and by see before you; and in that town you will be hardly beset with enemies, who will strain hard but they will kill you; and be you sure that one or both of you must seal the testimony which you hold, with blood; but be you faithful unto death, and the King will give you a __crown of life__ (Revelation 2:10).

[2] He that shall die there, although his death will be unnatural, and his pain, perhaps, great, he will yet have the better of his fellow; not only because he will be arrived at the Celestial City soonest, but because he will escape many miseries that the other will meet with in the rest of his journey.

[2] But when you are come to the town, and shall find fulfilled what I have here related, then remember your friend, and quit yourselves like men, and __commit the keeping of your souls to God__ (1 Peter 4:19)  in well doing, as unto a faithful Creator.

[@] Then I saw in my dream, that when they were got out of the wilderness, they presently saw a [[town|06-VA]] before them,… </tw-passagedata><tw-passagedata pid="263" name="John 4:36 KJV" tags="bible promise" position="1050,3100" size="100,100">And he that reapeth receiveth wages, and gathereth fruit unto life eternal: that both he that soweth and he that reapeth may rejoice together.</tw-passagedata><tw-passagedata pid="264" name="Galatians 6:9 KJV" tags="bible prayer" position="1150,3100" size="100,100">And let us not be weary in well doing: for in due season we shall reap, if we faint not.</tw-passagedata><tw-passagedata pid="265" name="1 Corinthians 9:24-27 KJV" tags="bible prayer" position="1250,3100" size="100,100">Know ye not that they which run in a race run all, but one receiveth the prize? So run, that ye may obtain. And every man that striveth for the mastery is temperate in all things. Now they do it to obtain a corruptible crown; but we an incorruptible. I therefore so run, not as uncertainly; so fight I, not as one that beateth the air: But I keep under my body, and bring it into subjection: lest that by any means, when I have preached to others, I myself should be a castaway.</tw-passagedata><tw-passagedata pid="266" name="Revelation 3:11 KJV" tags="bible promise" position="1350,3100" size="100,100">Behold, I come quickly: hold that fast which thou hast, that no man take thy crown.</tw-passagedata><tw-passagedata pid="267" name="Hebrews 12:4 KJV" tags="bible" position="1450,3100" size="100,100">Ye have not yet resisted unto blood, striving against sin.</tw-passagedata><tw-passagedata pid="268" name="Jeremiah 17:9 KJV" tags="bible" position="1550,3100" size="100,100">The heart is deceitful above all things, and desperately wicked: who can know it?</tw-passagedata><tw-passagedata pid="269" name="Acts 20:23-24 KJV" tags="bible prayer" position="1650,3100" size="100,100">Save that the Holy Ghost witnesseth in every city, saying that bonds and afflictions abide me. But none of these things move me, neither count I my life dear unto myself, so that I might finish my course with joy, and the ministry, which I have received of the Lord Jesus, to testify the gospel of the grace of God.</tw-passagedata><tw-passagedata pid="270" name="Revelation 2:10 KJV" tags="bible promise" position="1750,3100" size="100,100">Fear none of those things which thou shalt suffer: behold, the devil shall cast some of you into prison, that ye may be tried; and ye shall have tribulation ten days: be thou faithful unto death, and I will give thee a crown of life.</tw-passagedata><tw-passagedata pid="271" name="1 Peter 4:19 KJV" tags="bible promise" position="1850,3100" size="100,100">Wherefore let them that suffer according to the will of God commit the keeping of their souls to him in well doing, as unto a faithful Creator.</tw-passagedata><tw-passagedata pid="272" name="06-VA" tags="moment town_#2" position="550,3100" size="100,100">[@] …and the name of that town is Vanity; and at the town there is a fair kept, called Vanity Fair. It is kept all the year long. It beareth the name of Vanity Fair, because the town where it is kept is __lighter than vanity__ (Psalm 62:9); and also because all that is there sold, or that cometh thither, is vanity; as is the saying of the wise, 
&gt; All that cometh is __vanity.__ (Ecclesiastes 11:8; Isaiah 40:17)
[@] This fair is no new-erected business but a thing of ancient standing. I will show you the original of it.

[@] Almost five thousand years ago there were pilgrims walking to the Celestial City, as these two honest persons are: and Beelzebub, Apollyon, and Legion, with their companions, perceiving by the path that the pilgrims made, that their way to the city lay through this town of Vanity, they contrived here to set up a fair; a fair wherein should be sold all sorts of vanity, and that it should last all the year long.

[@] Therefore, at this fair are all such merchandise sold as houses, lands, trades, places, honors, preferments, titles, countries, kingdoms, lusts, pleasures; and delights of all sorts, as harlots, wives, husbands, children, masters, servants, lives, blood, bodies, souls, silver, gold, pearls, precious stones, and what not.

[@] And moreover, at this fair there is at all times to be seen jugglings, cheats, games, plays, fools, apes, knaves, and rogues, and that of every kind.

[@] Here are to be seen, too, and that for nothing, thefts, murders, adulteries, false-swearers, and that of a blood-red color.

[@] And, as in other fairs of less moment, there are the several rows and streets under their proper names, where such and such wares are vended; so here, likewise, you have the proper places, rows, streets, (namely, countries and kingdoms,) where the wares of this fair are soonest to be found.

[@] Here is the Britain Row, the French Row, the Italian Row, the Spanish Row, the German Row, where several sorts of vanities are to be sold. But, as in other fairs, some one commodity is as the chief of all the fair; so the ware of Rome and her merchandise is greatly promoted in this fair; only our English nation, with some others, have taken a dislike thereat.

[@] Now, as I said, the way to the Celestial City lies just through this town, where this lusty fair is kept; and he that will go to the city, and yet not go through this town, must needs go __out of the world.__ (1 Corinthians 4:10)

[@] The Prince of princes himself, when here, went through this town to his own country, and that upon a fair-day too; yea, and, as I think, it was Beelzebub, the chief lord of this fair, that invited him to buy of his vanities, yea, would have made him lord of the fair, would he but have done him reverence as he went through the town.

[@] Yea, because he was such a person of honor, Beelzebub had him from street to street, and showed him all the kingdoms of the world in a little time, that he might, if possible, allure that blessed One to cheapen and buy some of his vanities; but he had no mind to the merchandise, and therefore left the town, without laying out so much as one farthing upon __these vanities.__ (Matthew 4:8-9; Luke 4:5-7). This fair, therefore, is an ancient thing, of long standing, and a very great fair.

[@] Now, these pilgrims, as I said, must needs go through [[this fair|06-FA-1-51]]. </tw-passagedata><tw-passagedata pid="273" name="Psalm 62:9 KJV" tags="bible" position="1950,3100" size="100,100">Surely men of low degree are vanity, and men of high degree are a lie: to be laid in the balance, they are altogether lighter than vanity.</tw-passagedata><tw-passagedata pid="274" name="Ecclesiastes 11:8 KJV" tags="bible" position="1050,3200" size="100,100">But if a man live many years, and rejoice in them all; yet let him remember the days of darkness; for they shall be many. All that cometh is vanity.</tw-passagedata><tw-passagedata pid="275" name="Isaiah 40:17 KJV" tags="bible" position="1150,3200" size="100,100">All nations before him are as nothing; and they are counted to him less than nothing, and vanity.</tw-passagedata><tw-passagedata pid="276" name="1 Corinthians 4:10 KJV" tags="bible" position="1250,3200" size="100,100">We are fools for Christ’s sake, but ye are wise in Christ; we are weak, but ye are strong; ye are honourable, but we are despised.</tw-passagedata><tw-passagedata pid="277" name="Matthew 4:8-9 KJV" tags="bible" position="1350,3200" size="100,100">Again, the devil taketh him up into an exceeding high mountain, and sheweth him all the kingdoms of the world, and the glory of them; And saith unto him, All these things will I give thee, if thou wilt fall down and worship me.</tw-passagedata><tw-passagedata pid="278" name="Luke 4:5-7 KJV" tags="bible" position="1450,3200" size="100,100">And the devil, taking him up into an high mountain, shewed unto him all the kingdoms of the world in a moment of time. And the devil said unto him, All this power will I give thee, and the glory of them: for that is delivered unto me; and to whomsoever I will I give it. If thou therefore wilt worship me, all shall be thine.</tw-passagedata><tw-passagedata pid="279" name="1 Corinthians 4:9-10 KJV" tags="bible" position="1550,3200" size="100,100">For I think that God hath set forth us the apostles last, as it were appointed to death: for we are made a spectacle unto the world, and to angels, and to men. We are fools for Christ’s sake, but ye are wise in Christ; we are weak, but ye are strong; ye are honourable, but we are despised.</tw-passagedata><tw-passagedata pid="280" name="1 Corinthians 2:7-8 KJV" tags="bible" position="1650,3200" size="100,100">But we speak the wisdom of God in a mystery, even the hidden wisdom, which God ordained before the world unto our glory: Which none of the princes of this world knew: for had they known it, they would not have crucified the Lord of glory.</tw-passagedata><tw-passagedata pid="281" name="Psalm 119:37 KJV" tags="bible prayer" position="1750,3200" size="100,100">Turn away mine eyes from beholding vanity; and quicken thou me in thy way.</tw-passagedata><tw-passagedata pid="282" name="Philippians 3:20-21 KJV" tags="bible promise" position="1850,3200" size="100,100">For our conversation is in heaven; from whence also we look for the Saviour, the Lord Jesus Christ: Who shall change our vile body, that it may be fashioned like unto his glorious body, according to the working whereby he is able even to subdue all things unto himself. </tw-passagedata><tw-passagedata pid="283" name="Proverbs 23:23 KJV" tags="bible" position="1050,3300" size="100,100">Buy the truth, and sell it not; also wisdom, and instruction, and understanding.</tw-passagedata><tw-passagedata pid="284" name="Hebrews 11:13-16 KJV" tags="bible promise" position="1150,3300" size="100,100">These all died in faith, not having received the promises, but having seen them afar off, and were persuaded of them, and embraced them, and confessed that they were strangers and pilgrims on the earth. For they that say such things declare plainly that they seek a country. And truly, if they had been mindful of that country from whence they came out, they might have had opportunity to have returned. But now they desire a better country, that is, an heavenly: wherefore God is not ashamed to be called their God: for he hath prepared for them a city.</tw-passagedata><tw-passagedata pid="285" name="1 Peter 3:9 KJV" tags="bible prayer" position="1250,3300" size="100,100">Not rendering evil for evil, or railing for railing: but contrariwise blessing; knowing that ye are thereunto called, that ye should inherit a blessing.</tw-passagedata><tw-passagedata pid="286" name="06-FA-1-51" tags="moment town_#2" position="675,3100" size="100,100">[@] Well, so they did; but behold, even as they entered into the fair, all the people in the fair were moved; and the town itself, as it were, in a hubbub about them, and that for several reasons: for,

[@] First, The Pilgrims were clothed with such kind of raiment as was diverse from the raiment of any that traded in that fair. The people, therefore, of the fair made a great gazing upon them: some said __they were fools__ (1 Corinthians 4:9-10); some, they were bedlams; and some, they were outlandish men.

[@] Secondly, And as they wondered at their apparel, so they did likewise at their speech; for few could understand __what they said__ (1 Corinthians 2:7-8). They naturally spoke the language of Canaan; but they that kept the fair were the men of this world: so that from one end of the fair to the other, they seemed barbarians each to the other.

[@] Thirdly, But that which did not a little amuse the merchandisers was, that these pilgrims set very light by all their wares. They cared not so much as to look upon them; and if they called upon them to buy, they would put their fingers in their ears, and cry, 

[1] and [51] __Turn away mine eyes from beholding vanity __ (Psalm 119:37), 

[@] …and look upward, signifying that their trade and traffic was __in heaven__ (Philippians 3:20-21). One chanced, mockingly, beholding the carriage of the men, to say unto them, “What will ye buy?” But they, looking gravely upon him, said, 

[1] and [51]  __We buy the truth.__ (Proverbs 23:23)

[@] At that there was an occasion taken to despise the men the more; some mocking, some taunting, some speaking reproachfully, and some calling upon others to smite them. At last, things came to an hubbub and great stir in the fair, insomuch that all order was confounded. 

[@] Now was word presently brought to the great one of the fair, who quickly came down, and deputed some of his most trusty friends to take those men into examination about whom the fair was almost overturned.
&lt;&lt;include &quot;06-KE-1-51&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="287" name="06-TR-51-61" tags="moment town_#2" position="675,3275" size="100,100">[@] When the time was come, they were brought before their enemies and arraigned. The judge’s name was Lord Hate-good; their indictment was one and the same in substance, though somewhat varying in form; the contents whereof was this:

[61] Ye were enemies to, and disturbers of, the trade; that ye had made commotions and divisions in the town, and had won a party to thy own most dangerous opinions, in contempt of the law of our prince.

[@] Then Faithful began to answer, that he had only set himself against that which had set itself against Him that is higher than the highest. And, said he, 

[51] …as for disturbance, I make none, being myself a man of peace: the parties that were won to us, were won by beholding our truth and innocence, and they are only turned from the worse to the better. And as to the king you talk of, since he is Beelzebub, the enemy of our Lord, I defy him and all his angels. 

[@] Then proclamation was made, that they that had ought to say for their lord the king against the prisoner at the bar, should forthwith appear, and give in their evidence. 

[@] So there came in three witnesses, to wit, Envy, Superstition, and Pickthank. They were then asked if they knew the prisoner at the bar; and what they had to say for their lord the king against him.
&lt;&lt;include &quot;06-TE-51-61-62-63-64&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="288" name="06-TE-51-61-62-63-64" tags="optional" position="800,3275" size="100,100">* [[Envy|06-TE-61-62]]  stood forth to testify
* [[Superstition|06-TE-63]] called forth to testify
* [[Pickthank|06-TE-64]] sworn to testify
* [[Faithful|06-TE-51-61]] spoke in his own defence
* The judge called to [[the jury|06-JU-61-65]] 
* [[Faithful|06-VA-1-51]] was condemed according to laws of the town.</tw-passagedata><tw-passagedata pid="289" name="06-TE-61-62" tags="moment town_#2" position="425,3425" size="100,100">[@] Then stood forth Envy, and said to this effect:

[62] My lord, I have known this man a long time, and will attest upon my oath before this honorable bench, that he is-

[61] Hold; give him his oath.

[@] So they sware him. Then he said,

[62] My lord, this man, notwithstanding his plausible name, is one of the vilest men in our country; he neither regardeth prince nor people, law nor custom, but doeth all that he can to possess all men with certain of his disloyal notions, which he in the general calls principles of faith and holiness. 

[62] And in particular, I heard him once myself affirm, that Christianity and the customs of our town of Vanity were diametrically opposite, and could not be reconciled. By which saying, my lord, he doth at once not only condemn all our laudable doings, but us in the doing of them.

[61] Hast thou any more to say?

[62] My lord, I could say much more, only I would not be tedious to the court. Yet if need be, when the other gentlemen have given in their evidence, rather than any thing shall be wanting that will dispatch him, I will enlarge my testimony against him. 

[@] So he was bid to stand by.
&lt;&lt;include &quot;06-TE-51-61-62-63-64&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="290" name="06-TE-63" tags="moment town_#2" position="550,3425" size="100,100">[@] Then they called Superstition, and bid him look upon the prisoner. They also asked, what he could say for their lord the king against him. Then they sware him; so he began. 

[63] My lord, I have no great acquaintance with this man, nor do I desire to have further knowledge of him. However, this I know, that he is a very pestilent fellow, from some discourse that I had with him the other day, in this town; for then, talking with him, I heard him say, that our religion was naught, and such by which a man could by no means please God.

[63] Which saying of his, my lord, your lordship very well knows what necessarily thence will follow, to wit, that we still do worship in vain, are yet in our sins, and finally shall be damned: and this is that which I have to say.
&lt;&lt;include &quot;06-TE-51-61-62-63-64&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="291" name="06-TE-64" tags="moment town_#2" position="675,3425" size="100,100">[@] Then was Pickthank sworn, and bid say what he knew in the behalf of their lord the king against the prisoner at the bar.

[64] My lord, and you gentlemen all, this fellow I have known of a long time, and have heard him speak things that ought not to be spoken; for he hath railed on our noble prince Beelzebub, and hath spoken contemptibly of his honorable friends, whose names are, the Lord Old Man, the Lord Carnal Delight, the Lord Luxurious, the Lord Desire of Vain Glory, my old Lord Lechery, Sir Having Greedy, with all the rest of our nobility: and he hath said, moreover, that if all men were of his mind, if possible, there is not one of these noblemen should have any longer a being in this town. 

[64] Besides, he hath not been afraid to rail on you, my lord, who are now appointed to be his judge, calling you an ungodly villain, with many other such like vilifying terms, with which he hath bespattered most of the gentry of our town.
&lt;&lt;include &quot;06-TE-51-61-62-63-64&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="292" name="06-TE-51-61" tags="moment town_#2" position="800,3425" size="100,100">[@] When this Pickthank had told his tale, the judge directed his speech to the prisoner at the bar, saying,

[61] Thou runagate, heretic, and traitor, hast thou heard what these honest gentlemen have witnessed against thee?

[51] May I speak a few words in my own defence?

[61] Sirrah, sirrah, thou deservest to live no longer, but to be slain immediately upon the place; yet, that all men may see our gentleness towards thee, let us hear what thou, vile runagate, hast to say.

[51] Firstly I say, then, in answer to what Mr. Envy hath spoken, I never said aught but this, that what rule, or laws, or custom, or people, were flat against the word of God, are diametrically opposite to Christianity. If I have said amiss in this, convince me of my error, and I am ready here before you to make my recantation.

[51] Secondly, as to the second, to wit, Mr. Superstition, and his charge against me, I said only this, that in the worship of God there is required a divine faith; but there can be no divine faith without a divine revelation of the will of God. Therefore, whatever is thrust into the worship of God that is not agreeable to divine revelation, cannot be done but by a human faith; which faith will not be profitable to eternal life.

[51] Thirdly, as to what Mr. Pickthank hath said, I say, (avoiding terms, as that I am said to rail, and the like,) that the prince of this town, with all the rabblement, his attendants, by this gentleman named, are more fit for a being in hell than in this town and country. 

[51] And so the Lord have mercy upon me.
&lt;&lt;include &quot;06-TE-51-61-62-63-64&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="293" name="06-JU-61-65" tags="moment town_#2" position="925,3425" size="100,100">[@] Then the judge called to the jury, (who all this while stood by to hear and observe,) 

[61] Gentlemen of the jury, you see this man about whom so great an uproar hath been made in this town; you have also heard what these worthy gentlemen have witnessed against him; also, you have heard his reply and confession: it lieth now in your breasts to hang him, or save his life; but yet I think meet to instruct you in our law.
#  There was an act made in the days of Pharaoh the Great, servant to our prince, that, lest those of a contrary religion should multiply and grow too strong for him, their males should be __thrown into the river__ (Exodus 1:22).
# There was also an act made in the days of Nebuchadnezzar the Great, another of his servants, that whoever would not fall down and worship his golden image, should be __thrown into a fiery furnace__ (Daniel 3:6).
# There was also an act made in the days of Darius, that whoso for some time called upon any god but him, should be __cast into the lion’s den__ (Daniel 6:7).

[61] Now, the substance of these laws this rebel has broken, not only in thought, (which is not to be borne,) but also in word and deed; which must, therefore, needs be intolerable.

[61] For that of Pharaoh, his law was made upon a supposition to prevent mischief, no crime being yet apparent; but here is a crime apparent. For the second and third, you see he disputeth against our religion; and for the treason that he hath already confessed, he deserveth to die the death.

[@] Then went the jury out, whose names were Mr. Blindman, Mr. No-good, Mr. Malice, Mr. Love-lust, Mr. Live-loose, Mr. Heady, Mr. High-mind, Mr. Enmity, Mr. Liar, Mr. Cruelty, Mr. Hate-light, and Mr. Implacable; who every one gave in his private verdict against him among themselves, and afterwards unanimously concluded to bring him in guilty before the judge.

[@] And first among themselves, 
[65] 
&gt; &lt;span&gt;Mr. Blindman, the foreman, said, 
//I see clearly that this man is a heretic.//

//Away with such a fellow from the earth,// said Mr. No-good.

//Aye, for I hate the very looks of him,// said Mr. Malice.

//I could never endure him,// said Mr. Love-lust.

//Nor I, for he would always be condemning my way,// said Mr. Live-loose.

//Hang him, hang him,// said Mr. Heady.

//A sorry scrub,// said Mr. High-mind. 

//My heart riseth against him,// said Mr. Enmity.

//He is a rogue,// said Mr. Liar.

//Hanging is too good for him,// said Mr. Cruelty.

//Let us dispatch him out of the way,// said Mr. Hate-light. 

Then said Mr. Implacable,
//Might I have all the world given me, I could not be reconciled to him; therefore let us forthwith bring him in guilty of death.//&lt;/span&gt;
&lt;&lt;include &quot;06-TE-51-61-62-63-64&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="294" name="Exodus 1:22 KJV" tags="bible" position="1350,3300" size="100,100">And Pharaoh charged all his people, saying, Every son that is born ye shall cast into the river, and every daughter ye shall save alive.</tw-passagedata><tw-passagedata pid="295" name="Daniel 3:6 KJV" tags="bible" position="1450,3300" size="100,100">And whoso falleth not down and worshippeth shall the same hour be cast into the midst of a burning fiery furnace.</tw-passagedata><tw-passagedata pid="296" name="Daniel 6:7 KJV" tags="bible" position="1550,3300" size="100,100">All the presidents of the kingdom, the governors, and the princes, the counsellors, and the captains, have consulted together to establish a royal statute, and to make a firm decree, that whosoever shall ask a petition of any God or man for thirty days, save of thee, O king, he shall be cast into the den of lions.</tw-passagedata><tw-passagedata pid="297" name="06-VA-1-51" tags="moment town_#2" position="425,3575" size="100,100">[@] And so they did; therefore he was presently condemned to be had from the place where he was, to the place from whence he came, and there to be put to the most cruel death that could be invented.

[@] They therefore brought him out, to do with him according to their law; and first they scourged him, then they buffeted him, then they lanced his flesh with knives; after that, they stoned him with stones, then pricked him with their swords; and last of all, they burned him to ashes at the stake. 

[@] Thus came Faithful to his end.

[@] Now I saw, that there stood behind the multitude a chariot and a couple of horses waiting for Faithful, who (so soon as his adversaries had dispatched him) was taken up into it, and straightway was carried up through the clouds with sound of trumpet, the nearest way to the celestial gate.

[@] But as for Christian, he had some respite, and was remanded back to prison: so he there remained for a space.

[@] But he who overrules all things, having the power of their rage in his own hand, so wrought it about, that Christian for that time escaped them, and went [[his way.|07-OU-1-71-72]]

[@] And as he went, he sang, saying,
&gt; //♭♩&lt;&lt;journal &quot;Eulogy to Faithful&quot;&gt;&gt;♪//</tw-passagedata><tw-passagedata pid="298" name="06-KE-1-51" tags="optional" position="800,3100" size="100,100">* The men were [[brought to examination|06-CA-1-51]] and  put into the cage;
* The two men were [[brought before their examiners again|06-CH-1-51]], and were charged;
* They brought them forth to [[their trial|06-TR-51-61]], in order to their condemnation.</tw-passagedata><tw-passagedata pid="299" name="06-CA-1-51" tags="moment town_#2" position="425,3275" size="100,100">[@] So the men were brought to examination; and they that sat upon them asked them whence they came, whither they went, and what they did there in such an unusual garb. The men told them they were pilgrims and strangers in the world, and that they were going to __their own country__ (Hebrews 11:13-16), which was the heavenly Jerusalem; and that they had given no occasion to the men of the town, nor yet to the merchandisers, thus to abuse them, and to let them in their journey, except it was for that, when one asked them what they would buy, they said they would buy the truth.

[@] But they that were appointed to examine them did not believe them to be any other than bedlams and mad, or else such as came to put all things into a confusion in the fair. 

[@] Therefore they took them and beat them, and besmeared them with dirt, and then put them into the cage, that they might be made a spectacle to all the men of the fair.

[@] There, therefore, they lay for some time, and were made the objects of any man’s sport, or malice, or revenge; the great one of the fair laughing still at all that befell them.

[@] But the men __being patient__ (1 Peter 3:9), and not rendering railing for railing, but contrariwise blessing, and giving good words for bad, and kindness for injuries done, some men in the fair, that were more observing and less prejudiced than the rest, began to check and blame the baser sort for their continual abuses done by them to the men.

[@] They, therefore, in an angry manner let fly at them again, counting them as bad as the men in the cage, and telling them that they seemed confederates, and should be made partakers of their misfortunes. The others replied that, for aught they could see, the men were quiet and sober, and intended nobody any harm; and that there were many that traded in their fair that were more worthy to be put into the cage, yea, and pillory too, than were the men that they had abused.

[@] Thus, after divers words had passed on both sides, (the men behaving themselves all the while very wisely and soberly before them,) they fell to some blows among themselves, and did harm one to another.
&lt;&lt;include &quot;06-KE-1-51&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="300" name="06-CH-1-51" tags="moment town_#2" position="550,3275" size="100,100">[@] Then were these two poor men brought before their examiners again, and were charged as being guilty of the late hubbub that had been in the fair. So they beat them pitifully, and hanged irons upon them, and led them in chains up and down the fair, for an example and terror to others, lest any should speak in their behalf, or join themselves unto them.

[@] But Christian and Faithful behaved themselves yet more wisely, and received the ignominy and shame that was cast upon them with so much meekness and patience, that it won to their side (though but few in comparison of the rest) several of the men in the fair. This put the other party yet into a greater rage, insomuch that they concluded the death of these two men.

[@] Wherefore they threatened that neither cage nor irons should serve their turn, but that they should die for the abuse they had done, and for deluding the men of the fair.

[@] Then were they remanded to the cage again, until further order should be taken with them. So they put them in, and made their feet fast in the stocks.

[@] Here, also, they called again to mind what they had heard from their faithful friend Evangelist, and were the more confirmed in their way and sufferings by what he told them would happen to them. They also now comforted each other, that whose lot it was to suffer, even he should have the best of it: therefore each man secretly wished that he might have that preferment. But committing themselves to the all-wise disposal of Him that ruleth all things, with much content they abode in the condition in which they were, until they should be otherwise disposed of.

[@] Then a convenient time being appointed,
&lt;&lt;include &quot;06-KE-1-51&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="301" name="07-OU-1-71-72" tags="moment plain_#2" position="425,3850" size="100,100">[@] Now I saw in my dream, that Christian went not forth alone; for there was one whose name was Hopeful, (being so made by the beholding of Christian and Faithful in their words and behavior, in their sufferings at the fair,) who joined himself unto him, and entering into a brotherly covenant, told him

[71] I would be your companion.

[@] Thus one died to bear testimony to the truth, and another rises out of his ashes to be a companion with Christian in his pilgrimage. This Hopeful also told Christian,

[71] There were many more of the men in the fair that would take their time, and follow after.

[@] So I saw, that quickly after they were got out of the fair, they overtook one that was going before them, whose name was By-ends; so they said to him,

[1] and [71] What countryman, sir? and how far go you this way?

[72] I came from the town of Fair-speech, and I was going to the Celestial City;

[1] From __Fair-speech__ (Proverbs 26:25)? Is there any good that lives there?

[72] Yes, I hope so.

[1] Pray, sir, what may I call you?

[72] I am a stranger to you, and you to me: if you be going this way, I shall be glad of your company; if not, I must be content.

[1] This town of Fair-speech, I have heard of; and, as I remember, they say it’s a wealthy place.

[72] Yes, I will assure you that it is; and I have very many rich kindred there.

[1] Pray, who are your kindred there, if a man may be so bold?

[72] Almost the whole town; and in particular my Lord Turn-about, my Lord Time-server, my Lord Fair-speech, from whose ancestors that town first took its name; also, Mr. Smooth-man, Mr. Facing-both-ways, Mr. Any-thing; and the parson of our parish, Mr. Two-tongues, was my mother’s own brother, by father’s side; and, to tell you the truth, I am become a gentleman of good quality; yet my great-grandfather was but a waterman, looking one way and rowing another, and I got most of my estate by the same occupation.

[1] Are you a married man? 

[72] Yes, and my wife is a very virtuous woman, the daughter of a virtuous woman; she was my Lady Feigning’s daughter; therefore she came of a very honorable family, and is arrived to such a pitch of breeding, that she knows how to carry it to all, even to prince and peasant.

[72] ‘Tis true, we somewhat differ in religion from those of the stricter sort, yet but in two small points: First, we never strive against wind and tide. Secondly, we are always most zealous when religion goes in his silver slippers; we love much to walk with him in the street, if the sun shines and the people applaud him.

[@] Then Christian stepped a little aside to his fellow Hopeful, saying,

[1] It runs in my mind that this is one By-ends, of Fair-speech; and if it be he, we have as very a knave in our company as dwelleth in all these parts.

[71] Ask him; methinks he should not be ashamed of his name.

[@] So Christian came up with him again, and said,

[1] Sir, you talk as if you knew something more than all the world doth; and, if I take not my mark amiss, I deem I have half a guess of you. Is not your name Mr. By-ends of Fair-speech?

[72] This is not my name, but indeed it is a nickname that is given me by some that cannot abide me, and I must be content to bear it as a reproach, as other good men have borne theirs before me.

[1] But did you never give an occasion to men to call you by this name?

[72] Never, never! The worst that ever I did to give them an occasion to give me this name was, that I had always the luck to jump in my judgment with the present way of the times, whatever it was, and my chance was to get thereby: but if things are thus cast upon me, let me count them a blessing; but let not the malicious load me therefore with reproach.

[1] I thought, indeed, that you were the man that I heard of; and to tell you what I think, I fear this name belongs to you more properly than you are willing we should think it doth.

[72] Well if you will thus imagine, I cannot help it; you shall find me a fair company-keeper, if you will still admit me your associate.

[1] If you will go with us, you must go against wind and tide; the which, I perceive, is against your opinion: you must also own Religion in his rags, as well as when in his silver slippers; and stand by him, too, when bound in irons, as well as when he walketh the streets with applause.

[72] You must not impose, nor lord it over my faith; leave me to my liberty, and let me go with you. 

[1] Not a step farther, unless you will do, in what I propound, as we.

[72] I shall never desert my old principles, since they are harmless and profitable. If I may not go with you, I must do as I did before you overtook me, even go by myself, until some overtake me that will be glad of my company.

[@] Now I saw in my dream, that Christian and Hopeful forsook him, and kept their distance before him; but one of them, looking back, saw three men following Mr. By-ends;… 
&lt;&lt;include &quot;07-IN-1-71-72-73-74-75&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="302" name="Proverbs 26:25 KJV" tags="bible" position="1050,3850" size="100,100">When he speaketh fair, believe him not: for there are seven abominations in his heart.</tw-passagedata><tw-passagedata pid="303" name="07-OU-72-73-74-75" tags="moment plain_#2" position="425,4000" size="100,100">[@] …and, behold, as they came up with him, he made them a very low congee; and they also gave him a compliment. The men’s names were, Mr. Hold-the-world, Mr. Money-love, and Mr. Save-all, men that Mr. By-ends had formerly been acquainted with; for in their minority they were schoolfellows, and taught by one Mr. Gripeman, a schoolmaster in Lovegain, which is a market-town in the county of Coveting, in the North.

[@] This Schoolmaster taught them the art of getting, either by violence, cozenage, flattering, lying, or by putting on a guise of religion; and these four gentlemen had attained much of the art of their master, so that they could each of them have kept such a school themselves.

[@] Well, when they had, as I said, thus saluted each other, Mr. Money-love said to Mr. By-ends,

[73] Who are they upon the road before us? (For Christian and Hopeful were yet within view.)

[72] They are a couple of far country-men, that, after their mode, are going on pilgrimage.

[73] Alas! why did they not stay, that we might have had their good company? for they, and we, and you, sir, I hope, are all going on pilgrimage.

[72] We are so, indeed; but the men before us are so rigid, and love so much their own notions, and do also so lightly esteem the opinions of others, that let a man be ever so godly, yet if he jumps not with them in all things, they thrust him quite out of their company.

[74] That is bad; but we read of some that are righteous overmuch, and such men’s rigidness prevails with them to judge and condemn all but themselves. But I pray, what, and how many, were the things wherein you differed?

[72] Why, they, after their headstrong manner, conclude that it is their duty to rush on their journey all weathers, and I am for waiting for wind and tide. They are for hazarding all for God at a clap; and I am for taking all advantages to secure my life and estate. They are for holding their notions, though all other men be against them; but I am for religion in what, and so far as the times and my safety will bear it. They are for religion when in rags and contempt; but I am for him when he walks in his silver slippers, in the sunshine, and with applause.

[75] Aye, and hold you there still, good Mr. By-ends; for, for my part, I can count him but a fool, that having the liberty to keep what he has, shall be so unwise as to lose it.

[75] Let us be wise as serpents. It is best to make hay while the sun shines. You see how the bee lieth still in winter, and bestirs her only when she can have profit with pleasure. God sends sometimes rain, and sometimes sunshine: if they be such fools to go through the first, yet let us be content to take fair weather along with us.

[75] For my part, I like that religion best that will stand with the security of God’s good blessings unto us; for who can imagine, that is ruled by his reason, since God has bestowed upon us the good things of this life, but that he would have us keep them for his sake? Abraham and Solomon grew rich in religion; and Job says, that a good man shall lay up gold as dust; but he must not be such as the men before us, if they be as you have described them.

[74] I think that we are all agreed in this matter; and therefore there needs no more words about it.

[73] No, there needs no more words about this matter, indeed; for he that believes neither Scripture nor reason, (and you see we have both on our side,) neither knows his own liberty nor seeks his own safety.

[72] My brethren, we are, as you see, going all on pilgrimage;….
&lt;&lt;include &quot;07-IN-1-71-72-73-74-75&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="304" name="07-IN-1-71-72-73-74-75" tags="optional" position="550,3850" size="100,100">* [[By-ends greeted the three men;|07-OU-72-73-74-75]]
* [[By-ends propounded to the men|07-LI-72-73-74-75]] if one should take up religion for betterment in this life;
* [[By-ends and his company asked Christian and Hopeful|07-LI-1-71-72-73-74-75]] the same question.</tw-passagedata><tw-passagedata pid="305" name="07-LI-72-73-74-75" tags="moment plain_#2" position="550,4000" size="100,100">[72] My brethren, give me leave to propound unto you this question.

[72] Suppose a man, a minister, or a tradesman, etc., should have an advantage lie before him to get the good blessings of this life, yet so as that he can by no means come by them, except, in appearance at least, he becomes extraordinary zealous in some points of religion that he meddled not with before; may he not use this means to attain his end, and yet be a right honest man?

[73] I see the bottom of your question; and with these gentlemen’s good leave, I will endeavor to shape you an answer.

[73] And first, to speak to your question as it concerneth a minister himself: suppose a minister, a worthy man, possessed but of a very small benefice, and has in his eye a greater, more fat and plump by far; he has also now an opportunity of getting it, yet so as by being more studious, by preaching more frequently and zealously, and, because the temper of the people requires it, by altering of some of his principles; for my part, I see no reason why a man may not do this, provided he has a call, aye, and more a great deal besides, and yet be an honest man. For why?
# His desire of a greater benefice is lawful, (this cannot be contradicted,) since it is set before him by Providence; so then he may get it if he can, making no question for conscience’ sake.
# Besides, his desire after that benefice makes him more studious, a more zealous preacher, etc., and so makes him a better man, yea, makes him better improve his parts, which is according to the mind of God.
# Now, as for his complying with the temper of his people, by deserting, to serve them, some of his principles, this argueth,  
## That he is of a self-denying temper. 
## Of a sweet and winning deportment. And, 
## So more fit for the ministerial function.
# I conclude, then, that a minister that changes a small for a great, should not, for so doing, be judged as covetous; but rather, since he is improved in his parts and industry thereby, be counted as one that pursues his call, and the opportunity put into his hand to do good.
[73] And now to the second part of the question, which concerns the tradesman you mentioned.

[73] Suppose such an one to have but a poor employ in the world, but by becoming religious he may mend his market, perhaps get a rich wife, or more and far better customers to his shop; for my part, I see no reason but this may be lawfully done. For why? 
# To become religious is a virtue, by what means soever a man becomes so.
# Nor is it unlawful to get a rich wife, or more custom to my shop.
# Besides, the man that gets these by becoming religious, gets that which is good of them that are good, by becoming good himself; so then here is a good wife, and good customers, and good gain, and all these by becoming religious, which is good: therefore, to become religious to get all these is a good and profitable design. 

[@] This answer, thus made by Mr. Money-love to Mr. By-ends’ question, was highly applauded by them all; wherefore they concluded, upon the whole, that it was most wholesome and advantageous.

[@] And because, as they thought, no man was able to contradict it; and because Christian and Hopeful were yet within call, they jointly agreed to assault them with the question as soon as they overtook them; and the rather, because they had opposed Mr. By-ends before.
&lt;&lt;include &quot;07-IN-1-71-72-73-74-75&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="306" name="07-LI-1-71-72-73-74-75" tags="moment plain_#2" position="675,4000" size="100,100">[@] So they called after them, and they stopped and stood still till they came up to them; but they concluded, as they went, that not Mr. By-ends, but old Mr. Hold-the-world should propound the question to them, because, as they supposed, their answer to him would be without the remainder of that heat that was kindled betwixt Mr. By-ends and them at their parting a little before. 

[@] So they came up to each other, and after a short salutation, Mr. Hold-the-world propounded the question to Christian and his fellow, and then bid them to answer if they could. Then said Christian,

[1] Even a babe in religion may answer ten thousand such questions. For if it be unlawful to __follow Christ for loaves__ (John 6:26), as it is;  how much more abominable is it to make of him and religion a stalking-horse to get and enjoy the world! Nor do we find any other than heathens, hypocrites, devils, and wizards, that are of this opinion.
# Heathens: for when Hamor and Shechem had a mind to the daughter and cattle of Jacob, and saw that there was no way for them to come at them but by being circumcised, they said to their companions, If every male of us be circumcised, as they are circumcised, shall not their cattle, and their substance, and every beast of theirs be ours? Their daughters and their cattle were that which they sought to obtain, and their religion the stalking-horse they made use of to come at them. Read the __whole story__ (Genesis 34:20-24).
# The __hypocritical Pharisees__ (Luke 20:46-47) were also of this religion: long prayers were their pretence, but to get widows’ houses was their intent; and greater damnation was from God their judgment.
# Judas the devil was also of this religion: he was religious for the bag, that he might be possessed of what was put therein; but he was lost, cast away, and the very son of perdition.
# Simon the wizard was of this religion too; for he would have had the Holy Ghost, that he might have got money therewith: and __his sentence__ (Acts 8:19-22) from Peter’s mouth was according. 
# Neither will it go out of my mind, but that that man who takes up religion for the world, will throw away religion for the world; for so surely as Judas designed the world in becoming religious, so surely did he also sell religion and his Master for the same. 

[1] To answer the question, therefore, affirmatively, as I perceive you have done, and to accept of, as authentic, such answer, is heathenish, hypocritical, and devilish; and your reward will be according to your works.

[@] Then they stood staring one upon another, but had not wherewith to answer Christian. Hopeful also approved of the soundness of Christian’s answer; so there was a great silence among them.

[@] Then said Christian to his fellow, 

[1] If these men cannot stand before the sentence of men, what will they do with the sentence of God? And if they are mute when dealt with by vessels of clay, what will they do when they shall be rebuked by the flames of a devouring fire?

[@] Then Christian and Hopeful outwent them again, and went till they came at a [[delicate plain|07-MI-1-71-72-73-74-75-76]], called Ease, where they went with much content; but that plain was but narrow, so they were quickly got over it. </tw-passagedata><tw-passagedata pid="307" name="John 6:26 KJV" tags="bible" position="1150,3850" size="100,100">Jesus answered them and said, Verily, verily, I say unto you, Ye seek me, not because ye saw the miracles, but because ye did eat of the loaves, and were filled.</tw-passagedata><tw-passagedata pid="308" name="Genesis 34:20-24 KJV" tags="bible" position="1250,3850" size="100,100">And Hamor and Shechem his son came unto the gate of their city, and communed with the men of their city, saying, These men are peaceable with us; therefore let them dwell in the land, and trade therein; for the land, behold, it is large enough for them; let us take their daughters to us for wives, and let us give them our daughters. Only herein will the men consent unto us for to dwell with us, to be one people, if every male among us be circumcised, as they are circumcised. Shall not their cattle and their substance and every beast of theirs be ours? only let us consent unto them, and they will dwell with us. And unto Hamor and unto Shechem his son hearkened all that went out of the gate of his city; and every male was circumcised, all that went out of the gate of his city.</tw-passagedata><tw-passagedata pid="309" name="Luke 20:46-47 KJV" tags="bible" position="1350,3850" size="100,100">Beware of the scribes, which desire to walk in long robes, and love greetings in the markets, and the highest seats in the synagogues, and the chief rooms at feasts; Which devour widows’ houses, and for a shew make long prayers: the same shall receive greater damnation.</tw-passagedata><tw-passagedata pid="310" name="Acts 8:19-22 KJV" tags="bible" position="1450,3850" size="100,100">Saying, Give me also this power, that on whomsoever I lay hands, he may receive the Holy Ghost. But Peter said unto him, Thy money perish with thee, because thou hast thought that the gift of God may be purchased with money. Thou hast neither part nor lot in this matter: for thy heart is not right in the sight of God. Repent therefore of this thy wickedness, and pray God, if perhaps the thought of thine heart may be forgiven thee.</tw-passagedata><tw-passagedata pid="311" name="07-MI-1-71-72-73-74-75-76" tags="moment hill_#3" position="800,4000" size="100,100">[@] Now at the farther side of that plain was a little hill, called Lucre, and in that hill a silver-mine, which some of them that had formerly gone that way, because of the rarity of it, had turned aside to see; but going too near the brim of the pit, the ground, being deceitful under them, broke, and they were slain: some also had been maimed there, and could not, to their dying day, be their own men again.

[@] Then I saw in my dream, that a little off the road, over against the silver-mine, stood Demas (gentleman-like) to call passengers to come and see; who said to Christian and his fellow,

[76] Ho! turn aside hither, and I will show you a thing. 

[1] What thing so deserving as to turn us out of the way to see it?

[76] Here is a silver-mine, and some digging in it for treasure; if you will come, with a little pains you may richly provide for yourselves.

[71] Let us go see.

[1] Not I,  I have heard of this place before now, and how many there have been slain; and besides, that treasure is a snare to those that seek it, for it hindereth them in their pilgrimage.

[@] Then Christian called to Demas, saying, 

[1] Is not the place __dangerous__ (Hosea 9:6)? Hath it not hindered many in their pilgrimage?

[76] Not very dangerous, except to those that are careless; but withal he blushed as he spake.

[@]Then said Christian to Hopeful, 

[1] Let us not stir a step, but still keep on our way.

[71] I will warrant you, when By-ends comes up, if he hath the same invitation as we, he will turn in thither to see.

[1] No doubt thereof, for his principles lead him that way, and a hundred to one but he dies there.

[@] Then Demas called again, saying,

[76] But will you not come over and see?

[1] Demas, thou art an enemy to the right ways of the Lord of this way, and hast been already condemned for __thine own turning aside__ (2 Timothy 4:10), by one of his Majesty’s judges; and why seekest thou to bring us into the like condemnation? Besides, if we at all turn aside, our Lord the King will certainly hear thereof, and will there put us to shame, where we would stand with boldness before him.

[76] I also was one of your fraternity; and that if you would tarry a little, I also myself would walk with you.

[1] What is thy name? Is it not the same by which I have called thee?

[76] Yes, my name is Demas; I am the son of Abraham.

[1] I know you; __Gehazi__ (2 Kings 5:20-27) was your great-grandfather, and __Judas__ (Matthew 26:14-15) your father, and you have trod in their steps; it is but a devilish prank that thou usest: thy father was __hanged for a traitor__ (Matthew 27:3-5), and thou deservest no better reward. Assure thyself, that when we come to the King, we will tell him of this thy behavior. 

[@] Thus they went their way.

[@] By this time By-ends and his companions were come again within sight, and they at the first beck went over to Demas. Now, whether they fell into the pit by looking over the brink thereof, or whether they went down to dig, or whether they were smothered in the bottom by the damps that commonly arise, of these things I am not certain; but this I observed, that they were never seen again in the way. 

[@] Then sang Christian,
&gt; //♭♩&lt;&lt;journal &quot;Lucre hill&quot;&gt;&gt;//
[@] Now I saw that, just on the [[other side of this plain|07-MO-1-71]],…</tw-passagedata><tw-passagedata pid="312" name="Hosea 9:6 KJV" tags="bible" position="1550,3850" size="100,100">For, lo, they are gone because of destruction: Egypt shall gather them up, Memphis shall bury them: the pleasant places for their silver, nettles shall possess them: thorns shall be in their tabernacles.</tw-passagedata><tw-passagedata pid="313" name="2 Timothy 4:10 KJV" tags="bible" position="1650,3850" size="100,100">For Demas hath forsaken me, having loved this present world, and is departed unto Thessalonica; Crescens to Galatia, Titus unto Dalmatia.</tw-passagedata><tw-passagedata pid="314" name="2 Kings 5:20-27 KJV" tags="bible" position="1750,3850" size="100,100">But Gehazi, the servant of Elisha the man of God, said, Behold, my master hath spared Naaman this Syrian, in not receiving at his hands that which he brought: but, as the Lord liveth, I will run after him, and take somewhat of him. So Gehazi followed after Naaman. And when Naaman saw him running after him, he lighted down from the chariot to meet him, and said, Is all well? And he said, All is well. My master hath sent me, saying, Behold, even now there be come to me from mount Ephraim two young men of the sons of the prophets: give them, I pray thee, a talent of silver, and two changes of garments. And Naaman said, Be content, take two talents. And he urged him, and bound two talents of silver in two bags, with two changes of garments, and laid them upon two of his servants; and they bare them before him. And when he came to the tower, he took them from their hand, and bestowed them in the house: and he let the men go, and they departed. But he went in, and stood before his master. And Elisha said unto him, Whence comest thou, Gehazi? And he said, Thy servant went no whither. And he said unto him, Went not mine heart with thee,</tw-passagedata><tw-passagedata pid="315" name="Matthew 26:14-15 KJV" tags="bible" position="1850,3850" size="100,100">Then one of the twelve, called Judas Iscariot, went unto the chief priests, And said unto them, What will ye give me, and I will deliver him unto you? And they covenanted with him for thirty pieces of silver.</tw-passagedata><tw-passagedata pid="316" name="Matthew 27:3-5 KJV" tags="bible" position="1950,3850" size="100,100">Then Judas, which had betrayeth him, when he saw that he was condemned, repented himself, and brought again the thirty pieces of silver to the chief priests and elders, Saying, I have sinned in that I have betrayed the innocent blood. And they said, What is that to us? see thou to that. And he cast down the pieces of silver in the temple, and departed, and went and hanged himself.</tw-passagedata><tw-passagedata pid="317" name="07-MO-1-71" tags="moment old_monument" position="925,4000" size="100,100">[@] …the pilgrims came to a place where stood an old monument, hard by the highway-side, at the sight of which they were both concerned, because of the strangeness of the form thereof; for it seemed to them as if it had been a woman transformed into the shape of a pillar. 

[@] Here, therefore, they stood looking and looking upon it, but could not for a time tell what they should make thereof.

[@] At last Hopeful espied, written above upon the head thereof, a writing in an unusual hand; but he being no scholar, called to Christian (for he was learned) to see if he could pick out the meaning: so he came, and after a little laying of letters together, he found the same to be this,
&gt; Remember Lot’s wife.
So he read it to his fellow; after which they both concluded that that was the pillar of salt into which Lot’s wife was turned, for her __looking back__ (Genesis 19:26) with a covetous heart when she was going from Sodom for safety. Which sudden and amazing sight gave them occasion for this discourse.

[1] Ah, my brother, this is a seasonable sight: it came opportunely to us after the invitation which Demas gave us to come over to view the hill Lucre; and had we gone over, as he desired us, and as thou wast inclined to do, my brother, we had, for aught I know, been made, like this woman, a spectacle for those that shall come after to behold.

[71] I am sorry that I was so foolish, and am made to wonder that I am not now as Lot’s wife; for wherein was the difference betwixt her sin and mine? She only looked back, and I had a desire to go see. Let grace be adored; and let me be ashamed that ever such a thing should be in mine heart.

[1] Let us take notice of what we see here, for our help from time to come. This woman escaped one judgment, for she fell not by the destruction of Sodom; yet she was destroyed by another, as we see: she is turned into a pillar of salt.

[71] True, and she may be to us both caution and example; caution, that we should shun her sin; or a sign of what judgment will overtake such as shall not be prevented by this caution: so __Korah__(Numbers 16:31-32), __Dathan, and Abiram__ (Numbers 26:9-10), with the two hundred and fifty men that perished in their sin, did also become a sign or example to others to beware.

[71] But above all, I muse at one thing, to wit, how Demas and his fellows can stand so confidently yonder to look for that treasure, which this woman but for looking behind her after, (for we read not that she stepped one foot out of the way,) was turned into a pillar of salt; especially since the judgment which overtook her did make her an example within sight of where they are; for they cannot choose but see her, did they but lift up their eyes.

[1] It is a thing to be wondered at, and it argueth that their hearts are grown desperate in the case; and I cannot tell who to compare them to so fitly, as to them that pick pockets in the presence of the judge, or that will cut purses under the gallows.

[1] It is said of the men of Sodom, that they were “sinners exceedingly,” because they were sinners “before the Lord,” that is, in his eyesight, and notwithstanding the kindnesses that he had shown them; for the land of Sodom was now __like the garden of Eden__ (Genesis 13:10-13) as heretofore. This, therefore, provoked him the more to jealousy, and made their plague as hot as the fire of the Lord out of heaven could make it. 

[1] And it is most rationally to be concluded, that such, even such as these are, that shall sin in the sight, yea, and that too in despite of such examples that are set continually before them, to caution them to the contrary, must be partakers of severest judgments.

[71] Doubtless thou hast said the truth; but what a mercy is it, that neither thou, but especially I, am not made myself this example! This ministereth occasion to us to thank God, to fear before him, and always to remember Lot’s wife.

[@] I saw then that they went on their way to a [[pleasant river|07-RI-1-71]], which David the king called __“the river of God;”__ (Psalm 65:9)  but John, __“the river of the water of life.”__  (Revelation 22:1; Ezekiel 47:1-9)</tw-passagedata><tw-passagedata pid="318" name="Genesis 19:26 KJV" tags="bible" position="1050,3950" size="100,100">But his wife looked back from behind him, and she became a pillar of salt.</tw-passagedata><tw-passagedata pid="319" name="Numbers 16:31-32 KJV" tags="bible" position="1150,3950" size="100,100">And it came to pass, as he had made an end of speaking all these words, that the ground clave asunder that was under them: And the earth opened her mouth, and swallowed them up, and their houses, and all the men that appertained unto Korah, and all their goods.</tw-passagedata><tw-passagedata pid="320" name="Numbers 26:9-10 KJV" tags="bible" position="1250,3950" size="100,100">And the sons of Eliab; Nemuel, and Dathan, and Abiram. This is that Dathan and Abiram, which were famous in the congregation, who strove against Moses and against Aaron in the company of Korah, when they strove against the Lord: And the earth opened her mouth, and swallowed them up together with Korah, when that company died, what time the fire devoured two hundred and fifty men: and they became a sign.</tw-passagedata><tw-passagedata pid="321" name="Genesis 13:10-13 KJV" tags="bible" position="1350,3950" size="100,100">And Lot lifted up his eyes, and beheld all the plain of Jordan, that it was well watered every where, before the Lord destroyed Sodom and Gomorrah, even as the garden of the Lord, like the land of Egypt, as thou comest unto Zoar. Then Lot chose him all the plain of Jordan; and Lot journeyed east: and they separated themselves the one from the other. Abram dwelled in the land of Canaan, and Lot dwelled in the cities of the plain, and pitched his tent toward Sodom. But the men of Sodom were wicked and sinners before the Lord exceedingly.</tw-passagedata><tw-passagedata pid="322" name="Psalm 65:9 KJV" tags="bible" position="1450,3950" size="100,100">Thou visitest the earth, and waterest it: thou greatly enrichest it with the river of God, which is full of water: thou preparest them corn, when thou hast so provided for it.</tw-passagedata><tw-passagedata pid="323" name="Revelation 22:1 KJV" tags="bible" position="1550,3950" size="100,100">And he shewed me a pure river of water of life, clear as crystal, proceeding out of the throne of God and of the Lamb.</tw-passagedata><tw-passagedata pid="324" name="Ezekiel 47:1-9 KJV" tags="bible" position="1650,3950" size="100,100">Afterward he brought me again unto the door of the house; and, behold, waters issued out from under the threshold of the house eastward: for the forefront of the house stood toward the east, and the waters came down from under from the right side of the house, at the south side of the altar. 

Then brought he me out of the way of the gate northward, and led me about the way without unto the utter gate by the way that looketh eastward; and, behold, there ran out waters on the right side. 

And when the man that had the line in his hand went forth eastward, he measured a thousand cubits, and he brought me through the waters; the waters were to the ancles. 

Again he measured a thousand, and brought me through the waters; the waters were to the knees. Again he measured a thousand, and brought me through; the waters were to the loins. 

Afterward he measured a thousand; and it was a river that I could not pass over: for the waters were risen, waters to swim in, a river that could not be passed over.

And he said unto me, Son of man, hast thou seen this? Then he brought me, and caused me to return to the brink of the river. Now when I had returned, behold, at the bank of the river were very many trees on the one side and on the other. 

Then said he unto me, These waters issue out toward the east country, and go down into the desert, and go into the sea: which being brought forth into the sea, the waters shall be healed. And it shall come to pass, that every thing that liveth, which moveth, whithersoever the rivers shall come, shall live: and there shall be a very great multitude of fish, because these waters shall come thither: for they shall be healed; and every thing shall live whither the river cometh.</tw-passagedata><tw-passagedata pid="325" name="07-RI-1-71" tags="moment river_#1" position="925,4125" size="100,100">[@] Now their way lay just upon the bank of this river: here, therefore, Christian and his companion walked with great delight; they drank also of the water of the river, which was pleasant and enlivening to their weary spirits. 

[@] Besides, on the banks of this river, on either side, were green trees with all manner of fruit; and the leaves they ate to prevent surfeits, and other diseases that are incident to those that heat their blood by travel. On either side of the river was also a meadow, curiously beautified with lilies; and it was green all the year long.

[@] In this meadow they lay down and slept, for here they might __lie down safely__ (Psalm 23:2; Isaiah 14:30). When they awoke they gathered again of the fruit of the trees, and drank again of the water of the river, and then lay down again to sleep. Thus they did several days and nights. Then they sang; 

[1] and [71]
&gt; //♪&lt;&lt;journal &quot;River of God&quot;&gt;&gt;♫♬//
[@] So when they were disposed to go on, (for they were not as yet at their journey’s end,) they ate, and drank, and [[departed|07-ME-1-71-77]].</tw-passagedata><tw-passagedata pid="326" name="Psalm 23:2 KJV" tags="bible prayer" position="1750,3950" size="100,100">He maketh me to lie down in green pastures: he leadeth me beside the still waters.</tw-passagedata><tw-passagedata pid="327" name="Isaiah 14:30 KJV" tags="bible promise" position="1850,3950" size="100,100">And the firstborn of the poor shall feed, and the needy shall lie down in safety: and I will kill thy root with famine, and he shall slay thy remnant.</tw-passagedata><tw-passagedata pid="328" name="Numbers 21:4 KJV" tags="bible" position="1950,3950" size="100,100">And they journeyed from mount Hor by the way of the Red sea, to compass the land of Edom: and the soul of the people was much discouraged because of the way.</tw-passagedata><tw-passagedata pid="329" name="07-ME-1-71-77" tags="moment meadow" position="800,4125" size="100,100">[@] Now I beheld in my dream, that they had not journeyed far, but the river and the way for a time parted, at which they were not a little sorry; yet they durst not go out of the way.

[@] Now the way from the river was rough, and their feet tender by reason of their travels; so the souls of the pilgrims were much __discouraged because of the way__ (Numbers 21:4). Wherefore, still as they went on, they wished for a better way.

[@] Now, a little before them, there was on the left hand of the road a meadow, and a stile to go over into it, and that meadow is called By-path meadow. Then said Christian to his fellow,

[1] If this meadow lieth along by our wayside, let’s go over into it.

[@] Then he went to the stile to see, and behold a path lay along by the way on the other side of the fence. 

[1] It is according to my wish, said Christian; here is the easiest going; come, good Hopeful, and let us go over.

[71] But how if this path should lead us out of the way?

[1] That is not likely,… 

[71] Look, doth it not go along by the wayside?

[@] So Hopeful, being persuaded by his fellow, went after him over the stile. When they were gone over, and were got into the path, they found it very easy for their feet; and withal, they, looking before them, espied a man walking as they did, and his name was Vain-Confidence: so they called after him, and asked him whither that way led. He said,

[77] To the Celestial Gate.

[1] Look, did not I tell you so? by this you may see we are right.

[@] So they followed, and he went before them. But behold the night came on, and it grew very dark; so that they that went behind lost the sight of him that went before.

[@] He therefore that went before, (Vain-Confidence by name,) not seeing the way before him, fell into a deep pit, which was on purpose there made, by the prince of those grounds, to catch vain-glorious fools withal, and was __dashed in pieces__ (Isaiah 9:16) with his fall.

[@] Now, Christian and his fellow heard him fall. So they called to know the matter, but there was none to answer, only they heard a groaning. Then said Hopeful,

[71] Where are we now?

[@] Then was his fellow silent, as mistrusting that he had led him out of the way; and now it began to rain, and thunder, and lighten in a most dreadful manner, and the water rose amain. Then Hopeful groaned in himself, saying, 

[71] Oh that I had kept on my way!

[1] Who could have thought that this path should have led us out of the way?

[71] I was afraid on’t at the very first, and therefore gave you that gentle caution. I would have spoke plainer, but that you are older than I.

[1] Good brother, be not offended; I am sorry I have brought thee out of the way, and that I have put thee into such imminent danger. Pray, my brother, forgive me; I did not do it of an evil intent.

[71] Be comforted, my brother, for I forgive thee; and believe, too, that this shall be for our good.

[1] I am glad I have with me a merciful brother: but we must not stand here; let us try to go back again.

[71] But, good brother, let me go before.

[1] No, if you please, let me go first, that if there be any danger, I may be first therein, because by my means we are both gone out of the way. 

[71] No, you shall not go first, for your mind being troubled may lead you out of the way again. 

[@] Then for their encouragement they heard the voice of one saying, 
&gt; __Let thine heart be toward the highway, even the way that thou wentest: turn again.__ (Jeremiah 31:21)
But by this time the waters were greatly risen, by reason of which the way of going back was very dangerous. (Then I thought that it is easier going out of the way when we are in, than going in when we are out.) 

[@] Yet they adventured to go back; but it was so dark, and the flood was so high, that in their going back they had like to have been drowned nine or ten times. Neither could they, with all the skill they had, get again to the stile that night. 

[@] Wherefore at last, lighting under [[a little shelter|07-CA-1-71-78-79]], they sat down there till the day brake; but being weary, they fell asleep.</tw-passagedata><tw-passagedata pid="330" name="Isaiah 9:16 KJV" tags="bible" position="1050,4050" size="100,100">For the leaders of this people cause them to err; and they that are led of them are destroyed.</tw-passagedata><tw-passagedata pid="331" name="Jeremiah 31:21 KJV" tags="bible" position="1150,4050" size="100,100">Set thee up waymarks, make thee high heaps: set thine heart toward the highway, even the way which thou wentest: turn again, O virgin of Israel, turn again to these thy cities.</tw-passagedata><tw-passagedata pid="332" name="07-CA-1-71-78-79" tags="moment castle" position="675,4125" size="100,100">[@] Now there was, not far from the place where they lay, a castle, called Doubting Castle, the owner whereof was Giant Despair, and it was in his grounds they now were sleeping: wherefore he, getting up in the morning early, and walking up and down in his fields, caught Christian and Hopeful asleep in his grounds.

[@] Then with a grim and surly voice, he bid them awake, and asked them whence they were, and what they did in his grounds. They told him, 

[1] and [71] We are pilgrims, we have lost our way.

[78] You have this night trespassed on me by trampling in and lying on my grounds, and therefore you must go along with me.

[@] So they were forced to go, because he was stronger than they. They also had but little to say, for they knew themselves in a fault. The giant, therefore, drove them before him, and put them into his castle, into a very dark dungeon, nasty and stinking to the spirits of these two men.

[@] Here, then, they lay from Wednesday morning till Saturday night, without one bit of bread, or drop of drink, or light, or any to ask how they did; they were, therefore, here in evil case, and were __far from friends and acquaintance__ (Psalm 88:18).
&lt;&lt;include &quot;07-DU-1-71-78&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="333" name="Psalm 88:18 KJV" tags="bible prayer" position="1250,4050" size="100,100">Lover and friend hast thou put far from me, and mine acquaintance into darkness.</tw-passagedata><tw-passagedata pid="334" name="Job. 7:15 KJV" tags="bible prayer" position="1350,4050" size="100,100">So that my soul chooseth strangling, and death rather than my life.</tw-passagedata><tw-passagedata pid="335" name="Exodus 20:13 KJV" tags="bible" position="1450,4050" size="100,100">Thou shalt not kill.</tw-passagedata><tw-passagedata pid="336" name="1 John 3:15 KJV" tags="bible promise" position="1550,4050" size="100,100">Whosoever hateth his brother is a murderer: and ye know that no murderer hath eternal life abiding in him.</tw-passagedata><tw-passagedata pid="337" name="07-HI-1-71" tags="moment highway_#1" position="925,4300" size="100,100">[@] Now, when they were gone over the stile, they began to contrive with themselves what they should do at that stile, to prevent those that shall come after from falling into the hands of Giant Despair.

[@] So they consented to erect there a pillar, and to engrave upon the side thereof this sentence:
&gt; &lt;span class=&quot;icon&quot;&gt;&amp;#xf071;&lt;/span&gt; &#39;&#39;Over this stile is the way to Doubting Castle, which is kept by Giant Despair, who despiseth the King of’ the Celestial country, and seeks to destroy his holy pilgrims.&#39;&#39;
Many, therefore, that followed after, read what was written, and escaped the danger. This done, they sang as follows: 

[1] and [71]
&gt; //♯♬&lt;&lt;journal &quot;Doubting meadow&quot;&gt;&gt;♫//
[@] They went then till they came to the [[Delectable Mountains|08-MO-1-71-81]], which mountains belong to the Lord of that hill of which we have spoken before.</tw-passagedata><tw-passagedata pid="338" name="07-DU-1-71-78" tags="optional" position="550,4125" size="100,100">* [[Wednesday|07-WE-1-71-78-79]]
* [[Thursday|07-TH-1-71-78-79]]
* [[Friday|07-FR-1-54-61-62]]
* [[Saturday|07-SA-1-71-78-79]]</tw-passagedata><tw-passagedata pid="339" name="07-WE-1-71-78-79" tags="moment castle" position="425,4300" size="100,100">[@] Now in this place Christian had double sorrow, because it was through his unadvised counsel that they were brought into this distress.

[@] Now Giant Despair had a wife, and her name was Diffidence: so when he was gone to bed he told his wife what he had done, to wit, that he had taken a couple of prisoners, and cast them into his dungeon for trespassing on his grounds. 

[@] Then he asked her also what he had best do further to them. So she asked him what they were, whence they came, and whither they were bound, and he told her. Then she counseled him, that when he arose in the morning he should beat them without mercy.
&lt;&lt;include &quot;07-DU-1-71-78&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="340" name="07-TH-1-71-78-79" tags="moment castle" position="550,4300" size="100,100">[@] So when Giant Despair arose, he getteth him a grievous crab-tree cudgel, and goes down into the dungeon to them, and there first falls to rating of them as if they were dogs, although they gave him never a word of distaste. 

[@] Then he falls upon them, and beats them fearfully, in such sort that they were not able to help themselves, or to turn them upon the floor.

[@] This done, he withdraws and leaves them there to condole their misery, and to mourn under their distress: so all that day they spent the time in nothing but sighs and bitter lamentations.

[@] The next night, she, talking with her husband further about them, and understanding that they were yet alive, did advise him to counsel them to make away with themselves.
&lt;&lt;include &quot;07-DU-1-71-78&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="341" name="07-FR-1-54-61-62" tags="moment castle" position="675,4300" size="100,100">[@] So when morning was come, Giant Despair went to them in a surly manner, as before, and perceiving them to be very sore with the stripes that he had given them the day before, he told them, 

[78] You are never like to come out of this place, your only way would be forthwith to make an end of yourselves, either with knife, halter, or poison; for why, should you choose to live, seeing it is attended with so much bitterness?

[1] and [71] Let us go.

[@] With that he looked ugly upon them, and rushing to them, had doubtless made an end of them himself, but that he fell into one of his fits, (for he sometimes in sunshiny weather fell into fits,) and lost for a time the use of his hands; wherefore he withdrew, and left them as before to consider what to do.

[@] Then did the prisoners consult between themselves whether it was best to take his counsel or no; and thus they began to discourse:

[1] Brother, what shall we do? The life that we now live is miserable. For my part, I know not whether it is best to live thus, or to die out of hand. My soul chooseth strangling rather than life, and the grave is more easy for me than __this dungeon__ (Job. 7:15). Shall we be ruled by the giant?

[71] Indeed our present condition is dreadful, and death would be far more welcome to me than thus for ever to abide; but yet, let us consider, the Lord of the country to which we are going hath said,
&gt; Thou shalt __do no murder,__ (Exodus 20:13)
no, not to another man’s person; much more, then, are we forbidden to take his counsel to kill ourselves. Besides, he that kills another, can but commit murder upon his body; but for one to kill himself, is to kill body and soul at once.

[71] And moreover, my brother, thou talkest of ease in the grave; but hast thou forgotten the hell whither for certain the murderers go? for __“no murderer hath eternal life”__ (1 John 3:15), etc.

[71] And let us consider again, that all the law is not in the hand of Giant Despair: others, so far as I can understand, have been taken by him as well as we, and yet have escaped out of his hands. Who knows but that God, who made the world, may cause that Giant Despair may die; or that, at some time or other, he may forget to lock us in; or that he may, in a short time, have another of his fits before us, and may lose the use of his limbs?

[71] And if ever that should come to pass again, for my part, I am resolved to pluck up the heart of a man, and to try my utmost to get from under his hand. I was a fool that I did not try to do it before.

[71] But, however, my brother, let us be patient, and endure a while: the time may come that may give us a happy release; but let us not be our own murderers. 

[@] With these words Hopeful at present did moderate the mind of his brother; so they continued together in the dark that day, in their sad and doleful condition.

[@] Well, towards evening the giant goes down into the dungeon again, to see if his prisoners had taken his counsel. But when he came there he found them alive; and truly, alive was all; for now, what for want of bread and water, and by reason of the wounds they received when he beat them, they could do little but breathe.

[@] But I say, he found them alive; at which he fell into a grievous rage, and told them,

[78] You have disobeyed my counsel, it should be worse with you than if you had never been born.

[@] At this they trembled greatly, and I think that Christian fell into a swoon; but coming a little to himself again, they renewed their discourse about the giant’s counsel, and whether yet they had best take it or no. 

[@] Now Christian again seemed for doing it; but Hopeful made his second reply as followeth:

[71] My brother, rememberest thou not how valiant thou hast been heretofore? Apollyon could not crush thee, nor could all that thou didst hear, or see, or feel, in the Valley of the Shadow of Death. What hardship, terror, and amazement hast thou already gone through; and art thou now nothing but fears! Thou seest that I am in the dungeon with thee, a far weaker man by nature than thou art.

[71] Also this giant hath wounded me as well as thee, and hath also cut off the bread and water from my mouth, and with thee I mourn without the light.

[71] But let us exercise a little more patience. Remember how thou playedst the man at Vanity Fair, and wast neither afraid of the chain nor cage, nor yet of bloody death: wherefore let us (at least to avoid the shame that it becomes not a Christian to be found in) bear up with patience as well as we can.

[@] Now night being come again, and the giant and his wife being in bed, she asked him concerning the prisoners, and if they had taken his counsel: to which he replied,

[78] They are sturdy rogues; they choose rather to bear all hardships than to make away with themselves.

[79] Take them into the castle-yard to-morrow, and show them the bones and skulls of those that thou hast already dispatched, and make them believe, ere a week comes to an end, thou wilt tear them in pieces, as thou hast done their fellows before them.
&lt;&lt;include &quot;07-DU-1-71-78&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="342" name="07-SA-1-71-78-79" tags="moment castle" position="800,4300" size="100,100">[@] So when the morning was come, the giant goes to them again, and takes them into the castle-yard, and shows them as his wife had bidden him.

[78] These were pilgrims, as you are, once, and they trespassed on my grounds, as you have done; and when I thought fit I tore them in pieces; and so within ten days I will do you: get you down to your den again.

[@] And with that he beat them all the way thither. They lay, therefore, all day on Saturday in a lamentable case, as before.

[@] Now, when night was come, and when Mrs. Diffidence and her husband the giant was got to bed, they began to renew their discourse of their prisoners; and withal, the old giant wondered that he could neither by his blows nor counsel bring them to an end. And with that his wife replied,

[79] I fear that they live in hopes that some will come to relieve them; or that they have picklocks about them, by the means of which they hope to escape.

[78] And sayest thou so, my dear? I will therefore search them in the morning.

[@] Well, on Saturday, about midnight they began to pray, and continued in prayer till almost break of day.

[@] Now, a little before it was day, good Christian, as one half amazed, brake out into this passionate speech:

[1] What a fool am I, thus to lie in a stinking dungeon, when I may as well walk at liberty! I have a key in my bosom, called Promise, that will, I am persuaded, open any lock in Doubting Castle.

[71] That is good news; good brother, pluck it out of thy bosom, and try.

[@] Then Christian pulled it out of his bosom, and began to try at the dungeon-door, whose bolt, as he turned the key, gave back, and the door flew open with ease, and Christian and Hopeful both came out.

[@] Then he went to the outward door that leads into the castle-yard, and with his key opened that door also.

[@] After he went to the iron gate, for that must be opened too; but that lock went desperately hard, yet the key did open it.

[@] They then thrust open the gate to make their escape with speed; but that gate, as it opened, made such a creaking, that it waked Giant Despair, who hastily rising to pursue his prisoners, felt his limbs to fail, for his fits took him again, so that he could by no means go after them.

[@] Then they went on, and came to the [[King’s highway|07-HI-1-71]], and so were safe, because they were out of his jurisdiction.</tw-passagedata><tw-passagedata pid="343" name="08-MO-1-71-81" tags="moment mountains" position="425,4675" size="100,100">[@] So they went up to the mountains, to behold the gardens and orchards, the vineyards and fountains of water; where also they drank and washed themselves, and did freely eat of the vineyards.

[@] Now, there were on the tops of these mountains shepherds feeding their flocks, and they stood by the highway-side. The pilgrims, therefore, went to them, and leaning upon their staffs, (as is common with weary pilgrims when they stand to talk with any by the way,) they asked,

[1] and [71] Whose Delectable Mountains are these; and whose be the sheep that feed upon them?

[81] These mountains are Emmanuel’s land, and they are within sight of his city; and the sheep also are his, and __he laid down his life for them__ (John 10:11,15). 

[1] Is this the way to the Celestial City?

[81] You are just in your way.

[1] How far is it thither?

[81] Too far for any but those who shall get thither indeed.

[1] Is the way safe or dangerous?

[81] Safe for those for whom it is to be safe; but __transgressors shall fall therein.__ (Hosea 14:9) 

[1] Is there in this place any relief for pilgrims that are weary and faint in the way?

[81] The Lord of these mountains hath given us a charge not to be forgetful to __entertain strangers__ (Hebrews 13:2); therefore the good of the place is before you.

[@] I saw also in my dream, that when the shepherds perceived that they were wayfaring men, they also put questions to them, (to which they made answer as in other places,) as, Whence came you? and, How got you into the way? and, By what means have you so persevered therein? for but few of them that begin to come hither, do show their face on these mountains. 

[@] But when the shepherds heard their answers, being pleased therewith, they looked very lovingly upon them, and said,

[81] Welcome to the Delectable Mountains.

[@] The shepherds, I say, whose names were Knowledge, Experience, Watchful, and Sincere, took them by the hand, and had them to their tents, and made them partake of that which was ready at present. They said moreover,

[81] We would that you should stay here a while, to be acquainted with us, and yet more to solace yourselves with the good of these Delectable Mountains

[@] Then they told them that they were content to stay. So they went to their rest that night, because it was very late.

[@] Then I saw in my dream, that in the morning the shepherds called up Christian and Hopeful to walk with them upon the mountains. So they went forth with them, and walked a while, having a pleasant prospect on every side. Then said the shepherds one to another,

[81] Shall we show these pilgrims some wonders?
&lt;&lt;include &quot;08-WO-1-71-81&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="344" name="John 10:11,15 KJV" tags="bible promise" position="1050,4675" size="100,100">(Jesus speaking) &quot;I am the good shepherd: the good shepherd giveth his life for the sheep. As the Father knoweth me, even so know I the Father: and I lay down my life for the sheep.&quot;</tw-passagedata><tw-passagedata pid="345" name="Hosea 14:9 KJV" tags="bible promise" position="1150,4675" size="100,100">Who is wise, and he shall understand these things? prudent, and he shall know them? for the ways of the Lord are right, and the just shall walk in them: but the transgressors shall fall therein.</tw-passagedata><tw-passagedata pid="346" name="Hebrews 13:2 KJV" tags="bible" position="1250,4675" size="100,100">Be not forgetful to entertain strangers: for thereby some have entertained angels unawares.</tw-passagedata><tw-passagedata pid="347" name="08-WO-1-71-81" tags="" position="550,4675" size="100,100">* [[Error hill|08-ER-1-71-81]]
* [[Caution mountain|08-CA-1-71-81]]
* [[A door on the side of a hill|08-BY-1-71-81]]
* [[Clear hill|08-CL-1-71-81]]</tw-passagedata><tw-passagedata pid="348" name="08-ER-1-71-81" tags="moment hill_#4" position="425,4825" size="100,100">[@] So when they had concluded to do it, they had them first to the top of a hill called Error, which was very steep on the farthest side, and bid them look down to the bottom.

[@] So Christian and Hopeful looked down, and saw at the bottom several men dashed all to pieces by a fall that they had had from the top. Then said Christian,

[1] What meaneth this?

[81] Have you not heard of them that were made to err, by hearkening to __Hymenius and Philetus__  (2 Timothy 2:17-18), as concerning the faith of the resurrection of the body?

[1] and [71] Yes.

[81] Those that you see lie dashed in pieces at the bottom of this mountain are they; and they have continued to this day unburied, as you see, for an example to others to take heed how they clamber too high, or how they come too near the brink of this mountain.
&lt;&lt;include &quot;08-WO-1-71-81&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="349" name="08-CA-1-71-81" tags="moment mountain_#5" position="550,4825" size="100,100">[@] Then I saw that they had them to the top of another mountain, and the name of that is Caution, and bid them look afar off; which, when they did, they perceived, as they thought, several men walking up and down among the tombs that were there; and they perceived that the men were blind, because they stumbled sometimes upon the tombs, and because they could not get out from among them. Then said Christian,

[1] What means this?

[81] Did you not see, a little below these mountains, a stile that led into a meadow, on the left hand of this way?

[1] and [71] Yes.

[81] From that stile there goes a path that leads directly to Doubting Castle, which is kept by Giant Despair; and these men (pointing to them among the tombs) came once on pilgrimage, as you do now, even until they came to that same stile.

[81] And because the right way was rough in that place, they chose to go out of it into that meadow, and there were taken by Giant Despair, and cast into Doubting Castle; where after they had a while been kept in the dungeon, he at last did put out their eyes, and led them among those tombs, where he has left them to wander to this very day, that the saying of the wise man might be fulfilled, 
&gt; __He that wandereth out of the way of understanding shall remain in the congregation of the dead.__  (Proverbs 21:16)
[@] Then Christian and Hopeful looked upon one another, with tears gushing out, but yet said nothing to the shepherds.
&lt;&lt;include &quot;08-WO-1-71-81&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="350" name="08-BY-1-71-81" tags="moment by-way_to_hell" position="675,4825" size="100,100">[@] Then I saw in my dream, that the shepherds had them to another place in a bottom, where was a door on the side of a hill; and they opened the door, and bid them look in. 

[@] They looked in, therefore, and saw that within it was very dark and smoky; they also thought that they heard there a rumbling noise, as of fire, and a cry of some tormented, and that they smelt the scent of brimstone. Then said Christian,

[1] What means this? 

[81] This is a by-way to hell, a way that hypocrites go in at; namely, such as sell their birthright, with Esau; such as sell their Master, with Judas; such as blaspheme the Gospel, with Alexander; and that lie and dissemble, with Ananias and Sapphira his wife.

[@] Then said Hopeful to the shepherds,

[71] I perceive that these had on them, even every one, a show of pilgrimage, as we have now; had they not?

[81] Yes, and held it a long time, too.

[71] How far might they go on in pilgrimage in their day, since they, notwithstanding, were miserably cast away?

[81] Some farther, and some not so far as these mountains. 

[@] Then said the pilgrims one to the other, 

[1] and [71] We had need to cry to the Strong for strength.

[81] Aye, and you will have need to use it, when you have it, too.
&lt;&lt;include &quot;08-WO-1-71-81&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="351" name="08-CL-1-71-81" tags="moment hill_#6" position="800,4825" size="100,100">[@] By this time the pilgrims had a desire to go forward, and the shepherds a desire they should; so they walked together towards the end of the mountains. Then said the shepherds one to another,

[81] Let us here show the pilgrims the gates of the Celestial City, if they have skill to look through our perspective glass.

[@] The pilgrims lovingly accepted the motion: so they had them to the top of a high hill, called Clear, and gave them the glass to look. 

[@] Then they tried to look; but the remembrance of that last thing that the shepherds had shown them made their hands shake, by means of which impediment they could not look steadily through the glass; yet they thought they saw something like the gate, and also some of the glory of the place. Then they went away, and sang, 

[1] and [71]
&gt; //♫&lt;&lt;journal &quot;Clear hill&quot;&gt;&gt;♪//
[@] When they were about to depart, one of the shepherds gave them a note of the way. Another of them bid them beware of the Flatterer. The third bid them take heed that they slept not upon Enchanted Ground. And the fourth bid them God speed.

[@] So I awoke from my [[dream.|09-CO-1-71-91]]</tw-passagedata><tw-passagedata pid="352" name="2 Timothy 2:17-18 KJV" tags="bible" position="1350,4675" size="100,100">And their word will eat as doth a canker: of whom is Hymenaeus and Philetus; Who concerning the truth have erred, saying that the resurrection is past already; and overthrow the faith of some.</tw-passagedata><tw-passagedata pid="353" name="Proverbs 21:16 KJV" tags="bible" position="1450,4675" size="100,100">The man that wandereth out of the way of understanding shall remain in the congregation of the dead.</tw-passagedata><tw-passagedata pid="354" name="09-CO-1-71-91" tags="moment country_#3" position="425,5125" size="100,100">[@] And I slept, and dreamed again, and saw the same two pilgrims going down the mountains along the highway towards the city.

[@] Now, a little below these mountains, on the left hand, lieth the country of Conceit, from which country there comes into the way in which the pilgrims walked, a little crooked lane. Here, therefore, they met with a very brisk lad that came out of that country, and his name was Ignorance. So Christian asked him from what parts he came, and whither he was going. 

[91] Sir, I was born in the country that lieth off there, a little on the left hand, and I am going to the Celestial City.

[1] But how do you think to get in at the gate, for you may find some difficulty there?

[91] As other good people do.

[1] But what have you to show at that gate, that the gate should be opened to you?

[91] I know my Lord’s will, and have been a good liver; I pay every man his own; I pray, fast, pay tithes, and give alms, and have left my country for whither I am going.

[1] But thou camest not in at the wicket-gate, that is at the head of this way; thou camest in hither through that same crooked lane, and therefore I fear, however thou mayest think of thyself, when the reckoning-day shall come, thou wilt have laid to thy charge, that thou art a thief and a robber, instead of getting admittance into the city.

[91] Gentlemen, ye be utter strangers to me; I know you not: be content to follow the religion of your country, and I will follow the religion of mine. I hope all will be well. And as for the gate that you talk of, all the world knows that is a great way off of our country.

[91] I cannot think that any man in all our parts doth so much as know the way to it; nor need they matter whether they do or no, since we have, as you see, a fine, pleasant, green lane, that comes down from our country, the next way into the way.

[@] When Christian saw that the man was wise in his own conceit, he said to Hopeful whisperingly,

[1] There is __more hope of a fool__ (Proverbs 26:12) than of him. When he that is __a fool walketh__ (Ecclesiastes 10:3) by the way, his wisdom faileth him, and he saith to every one that he is a fool.

[1] What, shall we talk farther with him, or outgo him at present, and so leave him to think of what he hath heard already, and then stop again for him afterwards, and see if by degrees we can do any good to him?

[71] 
&gt; &lt;&lt;journal &quot;Ignorance I&quot;&gt;&gt;
[71] It is not good, I think, to say so to him all at once; let us pass him by, if you will, and talk to him anon, even as he is able to bear it. 

[@] So they both [[went on|09-LA-1-71-92]], and Ignorance he came after. </tw-passagedata><tw-passagedata pid="355" name="Proverbs 26:12 KJV" tags="bible" position="1075,5125" size="100,100">Seest thou a man wise in his own conceit? there is more hope of a fool than of him.</tw-passagedata><tw-passagedata pid="356" name="Ecclesiastes 10:3 KJV" tags="bible" position="1175,5125" size="100,100">Yea also, when he that is a fool walketh by the way, his wisdom faileth him, and he saith to every one that he is a fool.</tw-passagedata><tw-passagedata pid="357" name="Matthew 12:45 KJV" tags="bible" position="1275,5125" size="100,100">(Jesus speaking) Then goeth he, and taketh with himself seven other spirits more wicked than himself, and they enter in and dwell there: and the last state of that man is worse than the first. Even so shall it be also unto this wicked generation.</tw-passagedata><tw-passagedata pid="358" name="Proverbs 5:2 KJV" tags="bible" position="1375,5125" size="100,100">His own iniquities shall take the wicked himself, and he shall be holden with the cords of his sins.</tw-passagedata><tw-passagedata pid="359" name="09-EV-1-71-91" tags="" position="800,5500" size="100,100">* Hopeful thought of [[his former life|09-FO-1-71]] in Vanity Fair;
* Hopeful met [[Faithful who introduced him to Lord Jesus|09-GO-1-51-71]];
* Hopeful recounted [[how Jesus Christ revealed unto him|09-PR-1-51-71]].
* They called upon Ignorance to [[walk with them|09-DE-1-71-91]].
* The pilgrims dwelt on [[danger of being ignorant|10-DE-1-71]]
* The pilgrims were reminiscent of someone named [[Temporary|10-GR-1-71]].</tw-passagedata><tw-passagedata pid="360" name="09-LA-1-71-92" tags="moment lane" position="550,5125" size="100,100">[@] Now, when they had passed him a little way, they entered into a very dark lane, where they met a man whom __seven devils__ (Matthew 12:45) had bound with seven __strong cords__ (Proverbs 5:2), and were carrying him back to the door that they saw on the side of the hill.

[@] Now good Christian began to tremble, and so did Hopeful, his companion; yet, as the devils led away the man, Christian looked to see if he knew him; and he thought it might be one Turn-away, that dwelt in the town of Apostacy.

[@] But he did not perfectly see his face, for he did hang his head like a thief that is found; but being gone past, Hopeful looked after him, and espied on his back a paper with this inscription, 
&gt; Wanton professor, and damnable apostate.
[@] Then said Christian to his fellow, 

[1] Now I call to remembrance that which was told me of a thing that happened to a good man hereabout. The name of the man was [[Little-Faith|09-DE-1-71-93-94-95-96]]; but a good man, and he dwelt in the town of Sincere.</tw-passagedata><tw-passagedata pid="361" name="09-DE-1-71-93-94-95-96" tags="moment lane" position="675,5125" size="100,100">[1] The thing was this. At the entering in at this passage, there comes down from Broadway-gate, a lane, called Dead-Man’s lane; so called because of the murders that are commonly done there; and this Little-Faith going on pilgrimage, as we do now, chanced to sit down there and sleep.

[1] Now there happened at that time to come down the lane from Broadway-gate, three sturdy rogues, and their names were Faint-Heart, Mistrust, and Guilt, three brothers; and they, espying Little-Faith where he was, came galloping up with speed.

[1] Now the good man was just awaked from his sleep, and was getting up to go on his journey. So they came up all to him, and with threatening language bid him stand. At this, Little-Faith looked as white as a sheet, and had neither power to fight nor fly. Then said Faint-Heart,
&gt; [94] Deliver thy purse;
[1] …but he making no haste to do it, (for he was loth to lose his money,) Mistrust ran up to him, and thrusting his hand into his pocket, pulled out thence a bag of silver. Then he cried out,
&gt; [93] Thieves, thieves!
[1] With that, Guilt, with a great club that was in his hand, struck Little-Faith on the head, and with that blow felled him flat to the ground, where he lay bleeding as one that would bleed to death.

[1] All this while the thieves stood by. But at last, they hearing that some were upon the road, and fearing lest it should be one Great-Grace, that dwells in the town of Good-Confidence, they betook themselves to their heels, and left this good man to shift for himself.

[1] Now, after a while, Little-Faith came to himself, and getting up, made shift to scramble on his way. This was the story. 

[71] But did they take from him all that ever he had?

[1] No; the place where his jewels were they never ransacked; so those he kept still. But, as I was told, the good man was much afflicted for his loss; for the thieves got most of his spending-money. That which they got not, as I said, were jewels; also, he had a little odd money left, but scarce enough to bring him to his journey’s end.

[1] Nay, (if I was not misinformed,) he was forced to beg as he went, to __keep himself alive__(1 Peter 4:18), for his jewels he might not sell; but beg and do what he could, he went, as we say, with many a hungry belly the most part of the rest of the way.

[71] But is it not a wonder they got not from him his certificate, by which he was to receive his admittance at the Celestial Gate?

[1] It is a wonder; but they got not that, though they missed it not through any good cunning of his; for he, being dismayed by their coming upon him, had neither power nor skill to hide any thing; so it was more by __good providence__ (2 Timothy 1:12-14; 2 Peter 2:9) than by his endeavor that they missed of that good thing.

[71] But it must needs be a comfort to him they got not this jewel from him.

[1] It might have been great comfort to him, had he used it as he should; but they that told me the story said that he made but little use of it all the rest of the way, and that because of the dismay that he had in their taking away his money. Indeed, he forgot it a great part of the rest of his journey; and besides, when at any time it came into his mind, and he began to be comforted therewith, then would fresh thoughts of his loss come again upon him, and these thoughts would swallow up all. 

[71] Alas, poor man, this could not but be a great grief to him.

[1] Grief? Aye, a grief indeed! Would it not have been so to any of us, had we been used as he, to be robbed and wounded too, and that in a strange place, as he was?

[1] It is a wonder he did not die with grief, poor heart. I was told that he scattered almost all the rest of the way with nothing but doleful and bitter complaints; telling, also, to all that overtook him, or that he overtook in the way as he went, where he was robbed, and how; who they were that did it, and what he had lost; how he was wounded, and that he hardly escaped with life.
&lt;&lt;include &quot;09-FA-1-71&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="362" name="1 Peter 4:18 KJV" tags="bible" position="1475,5125" size="100,100">And if the righteous scarcely be saved, where shall the ungodly and the sinner appear?</tw-passagedata><tw-passagedata pid="363" name="2 Timothy 1:12-14 KJV" tags="bible prayer" position="1575,5125" size="100,100">For the which cause I also suffer these things: nevertheless I am not ashamed: for I know whom I have believed, and am persuaded that he is able to keep that which I have committed unto him against that day. Hold fast the form of sound words, which thou hast heard of me, in faith and love which is in Christ Jesus. That good thing which was committed unto thee keep by the Holy Ghost which dwelleth in us.</tw-passagedata><tw-passagedata pid="364" name="2 Peter 2:9 KJV" tags="bible promise" position="1675,5125" size="100,100">The Lord knoweth how to deliver the godly out of temptations, and to reserve the unjust unto the day of judgment to be punished:</tw-passagedata><tw-passagedata pid="365" name="Hebrews 12:16 KJV" tags="bible" position="1775,5125" size="100,100">Lest there be any fornicator, or profane person, as Esau, who for one morsel of meat sold his birthright.</tw-passagedata><tw-passagedata pid="366" name="Genesis 25:32 KJV" tags="bible" position="1875,5125" size="100,100">And Esau said, Behold, I am at the point to die: and what profit shall this birthright do to me?</tw-passagedata><tw-passagedata pid="367" name="Jeremiah 2:24 KJV" tags="bible" position="1975,5125" size="100,100">A wild ass used to the wilderness, that snuffeth up the wind at her pleasure; in her occasion who can turn her away? all they that seek her will not weary themselves; in her month they shall find her.</tw-passagedata><tw-passagedata pid="368" name="09-JE-1-71" tags="moment lane" position="675,5250" size="100,100">[71] But it is a wonder that his necessity did not put him upon selling or pawning some of his jewels, that he might have wherewith to relieve himself in his journey.

[1] Thou talkest like one upon whose head is the shell to this very day. For what should he pawn them? or to whom should he sell them? In all that country where he was robbed, his jewels were not accounted of; nor did he want that relief which could from thence be administered to him.

[1] Besides, had his jewels been missing at the gate of the Celestial City, he had (and that he knew well enough) been excluded from an inheritance there, and that would have been worse to him than the appearance and villany of ten thousand thieves.

[71] Why art thou so tart, my brother? __Esau sold his birthright__ (Hebrews 12:16), and that for a mess of pottage; and that birthright was his greatest jewel: and if he, why might not Little-Faith do so too?

[1] Esau did sell his birthright indeed, and so do many besides, and by so doing exclude themselves from the chief blessing, as also that caitiff did; but you must put a difference betwixt Esau and Little-Faith, and also betwixt their estates.

[1] Esau’s birthright was typical; but Little-Faith’s jewels were not so. Esau’s belly was his god; but Little-Faith’s belly was not so. Esau’s want lay in his fleshy appetite; Little-Faith’s did not so. Besides, Esau could see no further than to the fulfilling of his lusts: For I am at the point to die, said he: and __what good will this birthright do me?__ (Genesis 25:32)

[1] But Little-Faith, though it was his lot to have but a little faith, was by his little faith kept from such extravagances, and made to see and prize his jewels more than to sell them, as Esau did his birthright.

[1] You read not any where that Esau had faith, no, not so much as a little; therefore no marvel, where the flesh only bears sway, (as it will in that man where no faith is to resist,) if he sells his birthright and his soul and all, and that to the devil of hell; for it is with such as it is with __the ass__ (Jeremiah 2:24), who in her occasion cannot be turned away: when their minds are set upon their lusts, they will have them, whatever they cost.

[1] But Little-Faith was of another temper; his mind was on things divine; his livelihood was upon things that were spiritual, and from above: therefore, to what end should he that is of such a temper sell his jewels (had there been any that would have bought them) to fill his mind with empty things? Will a man give a penny to fill his belly with hay? or can you persuade the turtle-dove to live upon carrion, like the crow?

[1] Though faithless ones can, for carnal lusts, pawn, or mortgage, or sell what they have, and themselves outright to boot; yet they that have faith, saving faith, though but a little of it, cannot do so. Here, therefore, my brother, is thy mistake.

[71]  I acknowledge it; but yet your severe reflection had almost made me angry. 

[1] Why, I did but compare thee to some of the birds that are of the brisker sort, who will run to and fro in untrodden paths with the shell upon their heads: but pass by that, and consider the matter under debate, and all shall be well betwixt thee and me. 
&lt;&lt;include &quot;09-FA-1-71&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="369" name="09-RO-1-71-91" tags="moment" position="800,5250" size="100,100">[71] But, Christian, these three fellows, I am persuaded in my heart, are but a company of cowards: would they have run else, think you, as they did, at the noise of one that was coming on the road? Why did not Little-Faith pluck up a greater heart? He might, methinks, have stood one brush with them, and have yielded when there had been no remedy.

[1] That they are cowards, many have said, but few have found it so in the time of trial. As for a great heart, Little-Faith had none; and I perceive by thee, my brother, hadst thou been the man concerned, thou art but for a brush, and then to yield. And verily, since this is the height of thy stomach now they are at a distance from us, should they appear to thee as they did to him, they might put thee to second thoughts.

[1] But consider again, that they are but journeymen thieves; They serve under the king of the bottomless pit, who, if need be, will come to their aid himself, and his voice is as the __roaring of a lion. __ (1 Peter 5:8)

[71] I myself have been engaged as this Little-Faith was, and I found it a terrible thing. These three villains set upon me, and I beginning like a Christian to resist, they gave but a call, and in came their master. I would, as the saying is, have given my life for a penny, but that, as God would have it, I was clothed with armor of proof.

[1] Aye, and yet, though I was so harnessed, I found it hard work to quit myself like a man: no man can tell what in that combat attends us, but he that hath been in the battle himself. 

[71] Well, but they ran, you see, when they did but suppose that one Great-Grace was in the way.

[1] True, they have often fled, both they and their master, when Great-Grace hath but appeared; and no marvel, for he is the King’s champion. But I trow you will put some difference between Little-Faith and the King’s champion. All the King’s subjects are not his champions; nor can they, when tried, do such feats of war as he.

[1] Is it meet to think that a little child should handle Goliath as David did? or that there should be the strength of an ox in a wren? Some are strong, some are weak; some have great faith, some have little: this man was one of the weak, and therefore he went to the wall.

[71]  I would it had been Great-Grace, for their sakes.

[1] If it had been he, he might have had his hands full: for I must tell you, that though Great-Grace is excellent good at his weapons, and has, and can, so long as he keeps them at sword’s point, do well enough with them; yet if they get within him, even Faint-Heart, Mistrust, or the other, it shall go hard but they will throw up his heels. And when a man is down, you know, what can he do? 

[1] Whoso looks well upon Great-Grace’s face, will see those scars and cuts there that shall easily give demonstration of what I say.

[1] Yea, once I heard that he should say, (and that when he was in the combat,) We despaired even of life. How did these sturdy rogues and their fellows __make David groan, mourn, and roar__ (Psalm 88:1-2; Psalm 88:9-10; Psalm 88:13-14)! Yea, Heman, and Hezekiah too, though champions in their days, were forced to bestir them when by these assaulted; and yet, notwithstanding, they had their coats soundly brushed by them. Peter, upon a time, would go try what he could do; but though some do say of him that he is the prince of the apostles, they handled him so that they made him at last afraid of a sorry girl. 

[1] Besides, their king is at their whistle; he is never out of hearing; and if at any time they be put to the worst, he, if possible, comes in to help them; and of him it is said,
&gt; &lt;&lt;book &quot;Job 41:26-29 KJV&quot;&gt;&gt;
What can a man do in this case? It is true, if a man could at every turn have Job’s horse, and had skill and courage to ride him, he might do notable things.
&gt; &lt;&lt;book &quot;Job 39:19-25 KJV&quot;&gt;&gt;
[1] But for such footmen as thee and I are, let us never desire to meet with an enemy, nor vaunt as if we could do better, when we hear of others that have been foiled, nor be tickled at the thoughts of our own manhood; for such commonly come by the worst when tried. 

[1] Witness Peter, of whom I made mention before: he would swagger, aye, he would; he would, as his vain mind prompted him to say, do better and stand more for his Master than all men: but who so foiled and run down by those villains as he?

[1] When, therefore, we hear that such robberies are done on the King’s highway, two things become us to do.
# To go out harnessed, and be sure to take a shield with us: for it was for want of that, that he who laid so lustily at Leviathan could not make him yield; for, indeed, if that be wanting, he fears us not at all. Therefore, he that had skill hath said, &lt;&lt;book &quot;Ephesians 6:16 KJV&quot;&gt;&gt;
# It is good, also, that we desire of the King a convoy, yea, that he will go with us himself. This made David rejoice when in the Valley of the Shadow of Death; and Moses was rather for dying where he stood, than __to go one step without his God.__ (Exodus 33:15)

[1] O, my brother, if he will but go along with us, __what need we be afraid of__ (Psalm 3:5-8; Psalm 27:1-3) ten thousands that shall set themselves against us? But without him, the proud helpers __fall under the slain.__ (Isaiah 10:4)

[1] I, for my part, have been in the fray before now; and though (through the goodness of Him that is best) I am, as you see, alive, yet I cannot boast of any manhood.

[1] Glad shall I be if I meet with no more such brunts; though I fear we are not got beyond all danger. However, since the lion and the bear have not as yet devoured me, I hope God will also deliver us from the next uncircumcised Philistine.
&gt; //♭♩&lt;&lt;journal &quot;Poor Little-Faith&quot;&gt;&gt;♬♯//
[@] So they [[went on|09-NE-1-71-97]], and Ignorance followed. </tw-passagedata><tw-passagedata pid="370" name="Psalm 88:1-2 KJV" tags="bible prayer" position="1075,5225" size="100,100">O Lord God of my salvation, I have cried day and night before thee: Let my prayer come before thee: incline thine ear unto my cry;</tw-passagedata><tw-passagedata pid="371" name="Psalm 88:9-10 KJV" tags="bible prayer" position="1175,5225" size="100,100">Mine eye mourneth by reason of affliction: Lord, I have called daily upon thee, I have stretched out my hands unto thee. Wilt thou shew wonders to the dead? shall the dead arise and praise thee? Selah.</tw-passagedata><tw-passagedata pid="372" name="Psalm 88:13-14 KJV" tags="bible prayer" position="1275,5225" size="100,100">But unto thee have I cried, O Lord; and in the morning shall my prayer prevent thee. Lord, why castest thou off my soul? why hidest thou thy face from me?</tw-passagedata><tw-passagedata pid="373" name="Job 41:26-29 KJV" tags="bible" position="1375,5225" size="100,100">The sword of him that layeth at him cannot hold: the spear, the dart, nor the habergeon. He esteemeth iron as straw, and brass as rotten wood. The arrow cannot make him flee: slingstones are turned with him into stubble. Darts are counted as stubble: he laugheth at the shaking of a spear.</tw-passagedata><tw-passagedata pid="374" name="Job 39:19-25 KJV" tags="bible" position="1475,5225" size="100,100">Hath thou given the horse strength? hast thou clothed his neck with thunder? Canst thou make him afraid as a grasshopper? the glory of his nostrils is terrible. He paweth in the valley, and rejoiceth in his strength: he goeth on to meet the armed men. He mocketh at fear, and is not affrighted; neither turneth he back from the sword. The quiver rattleth against him, the glittering spear and the shield. He swalloweth the ground with fierceness and rage: neither believeth he that it is the sound of the trumpet. He saith among the trumpets, Ha, ha; and he smelleth the battle afar off, the thunder of the captains, and the shouting.</tw-passagedata><tw-passagedata pid="375" name="Ephesians 6:16 KJV" tags="bible prayer" position="1575,5225" size="100,100">Above all, taking the shield of faith, wherewith ye shall be able to quench all the fiery darts of the wicked.</tw-passagedata><tw-passagedata pid="376" name="Exodus 33:15 KJV" tags="bible prayer" position="1675,5225" size="100,100">And he said unto him, If thy presence go not with me, carry us not up hence.</tw-passagedata><tw-passagedata pid="377" name="Psalm 27:1-3 KJV" tags="bible prayer" position="1875,5225" size="100,100">The Lord is my light and my salvation; whom shall I fear? the Lord is the strength of my life; of whom shall I be afraid? When the wicked, even mine enemies and my foes, came upon me to eat up my flesh, they stumbled and fell. Though an host should encamp against me, my heart shall not fear: though war should rise against me, in this will I be confident.</tw-passagedata><tw-passagedata pid="378" name="Psalm 3:5-8 KJV" tags="bible prayer" position="1775,5225" size="100,100">I laid me down and slept; I awaked; for the Lord sustained me. I will not be afraid of ten thousands of people, that have set themselves against me round about. Arise, O Lord; save me, O my God: for thou hast smitten all mine enemies upon the cheek bone; thou hast broken the teeth of the ungodly. Salvation belongeth unto the Lord: thy blessing is upon thy people. Selah.</tw-passagedata><tw-passagedata pid="379" name="Isaiah 10:4 KJV" tags="bible promise" position="1975,5225" size="100,100">Without me they shall bow down under the prisoners, and they shall fall under the slain. For all this his anger is not turned away, but his hand is stretched out still.</tw-passagedata><tw-passagedata pid="380" name="09-NE-1-71-97" tags="moment crossroads" position="800,5375" size="100,100">[@] They went then till they came at a place where they saw a way put itself into their way, and seemed withal to lie as strait as the way which they should go; and here they knew not which of the two to take, for both seemed strait before them: therefore here they stood still to consider.

[@] And as they were thinking about the way, behold a man black of flesh, but covered with a very light robe, come to them, and asked them,

[97] Why you stand here?

[1] and [71] We are going to the Celestial City, but know not which of these ways to take.

[97] Follow me, it is thither that I am going.

[@] So they followed him in the way that but now came into the road, which by degrees turned, and turned them so far from the city that they desired to go to, that in a little time their faces were turned away from it; yet they follow him.

[@] But by and by, before they were aware, he led them both within the compass of a net, in which they were both so entangled that they knew not what to do; and with that the white robe fell off the black man’s back.

[@] Then they saw where they were. Wherefore there they lay crying some time, for they could not get themselves out. Then said Christian to his fellow,

[1] Now do I see myself in an error. Did not the shepherds bid us beware of the Flatterer? As is the saying of the wise man, so we have found it this day,
&gt; &lt;&lt;book &quot;Proverbs 29:5 KJV&quot;&gt;&gt;
[71] They also gave us a note of directions about the way, for our more sure finding thereof; but therein we have also forgotten to read, and have not kept ourselves from the paths of the destroyer. Here David was wiser than we; for saith he,
&gt; &lt;&lt;book &quot;Psalm 17:4 KJV&quot;&gt;&gt;
[@] Thus they lay bewailing themselves in the net. At last they espied a Shining One coming towards them with a whip of small cords in his hand. When he was come to the place where they were, he asked them,

[κ] Whence you came? and what you do here?

[1] and [71] We are poor pilgrims going to Zion, but were led out of their way by a black man clothed in white, who bid us follow him, for he was going thither too.

[κ] It is Flatterer, a false apostle, that hath transformed himself into an __angel of light.__  (Daniel 11:32; 2 Corinthians 11:13-14)

[@] So he rent the net, and let the men out. Then said he to them,

[κ] Follow me, that I may set you in your way again.

[@] So he led them back to the way which they had left to follow the Flatterer. Then he asked them, saying, 

[κ] Where did you lie the last night?

[1] and [71] With the shepherds upon the Delectable Mountains.

[κ] Had you not of the shepherds a note of direction for the way?

[1] and [71] Yes.

[κ] Did you not, when you were at a stand, pluck out and read your note?

[1] and [71] No.

[κ] Why?

[1] and [71] We forgot.

[κ] Did the shepherds not bid you beware of the Flatterer?

[1] and [71] Yes; but we did not imagine that this __fine-spoken man__  (Romans 16:17-18)  had been he.

[@] Then I saw in my dream, that he commanded them to lie down; which when they did, he __chastised them sore__ (Deuteronomy 25:2), to __teach them the good way__ (2 Chronicles 6:27) wherein they should walk; and as he chastised them, he said,

[κ] &lt;&lt;book &quot;Revelation 3:19&quot;&gt;&gt;

[@] This done, he bids them to go on their way, and take good heed to the other directions of the shepherds. So they thanked him for all his kindness, and went softly [[along the right way|09-HI-1-71-98]], singing,

[1] and [71]
&gt; //♩&lt;&lt;journal &quot;Pride of life&quot;&gt;&gt;♬//</tw-passagedata><tw-passagedata pid="381" name="Proverbs 29:5 KJV" tags="bible" position="1075,5325" size="100,100">A man that flattereth his neighbour spreadeth a net for his feet.</tw-passagedata><tw-passagedata pid="382" name="Psalm 17:4 KJV" tags="bible prayer" position="1175,5325" size="100,100">Concerning the words of men, by the word of thy lips I have kept me from the paths of the destroyer.</tw-passagedata><tw-passagedata pid="383" name="Daniel 11:32 KJV" tags="bible promise" position="1275,5325" size="100,100">And such as do wickedly against the covenant shall he corrupt by flatteries: but the people that do know their God shall be strong, and do exploits.</tw-passagedata><tw-passagedata pid="384" name="2 Corinthians 11:13-14 KJV" tags="bible" position="1375,5325" size="100,100">For such are false apostles, deceitful workers, transforming themselves into the apostles of Christ. And no marvel; for Satan himself is transformed into an angel of light.</tw-passagedata><tw-passagedata pid="385" name="Romans 16:17-18 KJV" tags="bible" position="1475,5325" size="100,100">Now I beseech you, brethren, mark them which cause divisions and offences contrary to the doctrine which ye have learned; and avoid them. For they that are such serve not our Lord Jesus Christ, but their own belly; and by good words and fair speeches deceive the hearts of the simple.</tw-passagedata><tw-passagedata pid="386" name="Deuteronomy 25:2 KJV" tags="bible" position="1575,5325" size="100,100">And it shall be, if the wicked man be worthy to be beaten, that the judge shall cause him to lie down, and to be beaten before his face, according to his fault, by a certain number.</tw-passagedata><tw-passagedata pid="387" name="2 Chronicles 6:27 KJV" tags="bible prayer" position="1675,5325" size="100,100">Then hear thou from heaven, and forgive the sin of thy servants, and of thy people Israel, when thou hast taught them the good way, wherein they should walk; and send rain upon thy land, which thou hast given unto thy people for an inheritance.</tw-passagedata><tw-passagedata pid="388" name="Revelation 3:19 KJV" tags="bible" position="1775,5325" size="100,100">As many as I love, I rebuke and chasten: be zealous therefore, and repent.</tw-passagedata><tw-passagedata pid="389" name="09-HI-1-71-98" tags="moment highway_#2" position="925,5375" size="100,100">[@] Now, after awhile, they perceived afar off, one coming softly, and alone, all along the highway, to meet them. Then said Christian to his fellow,

[1] Yonder is a man with his back towards Zion, and he is coming to meet us.

[71] I see him; let us take heed to ourselves now, lest he should prove a Flatterer also.

[@] So he drew nearer and nearer, and at last came up to them. His name was Atheist, and he asked them whither they were going.

[1] We are going to Mount Zion.

[@] Then Atheist fell into a very great laughter.

[1] What’s the meaning of your laughter?

[98] I laugh to see what ignorant persons you are, to take upon you so tedious a journey, and yet are like to have nothing but your travel for your pains.

[1] Why, man, do you think we shall not be received?

[98] Received! There is not such a place as you dream of in all this world.

[1] But there is in the world to come. 

[98] When I was at home in mine own country I heard as you now affirm, and from that hearing went out to see, and have been seeking this city these twenty years, but __find no more of it__ (Ecclesiastes 10:15; Jeremiah 17:15) than I did the first day I set out. 

[1] We have both heard, and believe, that there is such a place to be found.

[98] Had not I, when at home, believed, I had not come thus far to seek; but finding none, (and yet I should, had there been such a place to be found, for I have gone to seek it farther than you,) I am going back again, and will seek to refresh myself with the things that I then cast away for hopes of that which I now see is not.

[@] Then said Christian to Hopeful his companion,

[1] Is it true which this man hath said?

[71] Take heed, he is one of the Flatterers. Remember what it cost us once already for our hearkening to such kind of fellows. What! no Mount Zion? Did we not see from the Delectable Mountains the gate of the city? Also, are we not now to __walk by faith?__ (2 Corinthians 5:7)

[71] Let us go on, lest the man with the whip overtake us again. You should have taught me that lesson, which I will sound you in the ears withal:
&gt; &lt;&lt;book &quot;Proverbs 19:27 KJV&quot;&gt;&gt;
I say, my brother, cease to hear him, and let us believe to the saving of the soul. 

[1] My brother, I did not put the question to thee, for that I doubted of the truth of our belief myself, but to prove thee, and to fetch from thee a fruit of the honesty of thy heart. 

[1] As for this man, I know that he is blinded by the God of this world. Let thee and me go on, knowing that we have belief of the truth; and __no lie is of the truth.__ (1 John 5:21)

[71] Now do I rejoice in hope of the glory of God. 

[@] So they [[turned away from the man|09-GR-1-71]]; and he, laughing at them, went his way.</tw-passagedata><tw-passagedata pid="390" name="Ecclesiastes 10:15 KJV" tags="bible" position="1875,5325" size="100,100">The labour of the foolish wearieth every one of them, because he knoweth not how to go to the city.</tw-passagedata><tw-passagedata pid="391" name="Jeremiah 17:15 KJV" tags="bible" position="1975,5325" size="100,100">Behold, they say unto me, Where is the word of the Lord? let it come now.</tw-passagedata><tw-passagedata pid="392" name="2 Corinthians 5:7 KJV" tags="bible" position="1075,5425" size="100,100">(For we walk by faith, not by sight:)</tw-passagedata><tw-passagedata pid="393" name="Proverbs 19:27 KJV" tags="bible" position="1175,5425" size="100,100">Cease, my son, to hear the instruction that causeth to err from the words of knowledge.</tw-passagedata><tw-passagedata pid="394" name="1 John 5:21 KJV" tags="bible prayer" position="1275,5425" size="100,100">Little children, keep yourselves from idols. Amen.</tw-passagedata><tw-passagedata pid="395" name="09-GR-1-71" tags="moment country_#4" position="925,5500" size="100,100">[@] I then saw in my dream, that they went on until they came into a certain country whose air naturally tended to make one drowsy, if he came a stranger into it. And here Hopeful began to be very dull, and heavy to sleep: wherefore he said unto Christian,

[71] I do now begin to grow so drowsy that I can scarcely hold open mine eyes; let us lie down here, and take one nap.

[1] By no means, said the other; lest, sleeping, we never awake more.

[71] Why, my brother? sleep is sweet to the laboring man; we may be refreshed, if we take a nap.

[1] Do you not remember that one of the shepherds bid us beware of the Enchanted Ground? He meant by that, that we should beware of sleeping; wherefore 
&gt; let us not sleep, as do others; but let us __watch and be sober.__ (1 Thessalonians 5:6)
[71]  I acknowledge myself in a fault; and had I been here alone, I had by sleeping run the danger of death. I see it is true that the wise man saith,
&gt; __Two are better than one.__ (Ecclesiastes 4:9)
Hitherto hath thy company been my mercy; and thou shalt have a good reward for thy labor.

[1] Now, to prevent drowsiness in this place, let us fall into good discourse.

[71] With all my heart.

[1] Where shall we begin?

[71] Where God began with us. But do you begin, if you please.

[1] I will sing you first this song: 
&gt; //♪&lt;&lt;journal &quot;Enchanted&quot;&gt;&gt;♪//
[@] Then Christian began, and said,

[1] I will ask you a question. How came you to think at first of doing what you do now?

[71] Do you mean, how came I at first to look after the good of my soul?

[1] Yes, that is my meaning.
&lt;&lt;include &quot;09-EV-1-71-91&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="396" name="1 Thessalonians 5:6 KJV" tags="bible" position="1375,5425" size="100,100">Therefore let us not sleep, as do others; but let us watch and be sober.</tw-passagedata><tw-passagedata pid="397" name="Ecclesiastes 4:9 KJV" tags="bible" position="1475,5425" size="100,100">Two are better than one; because they have a good reward for their labour.</tw-passagedata><tw-passagedata pid="398" name="Romans 6:21-23 KJV" tags="bible promise" position="1575,5425" size="100,100">What fruit had ye then in those things whereof ye are now ashamed? for the end of those things is death. But now being made free from sin, and become servants to God, ye have your fruit unto holiness, and the end everlasting life. For the wages of sin is death; but the gift of God is eternal life through Jesus Christ our Lord. </tw-passagedata><tw-passagedata pid="399" name="Ephesians 5:6 KJV" tags="bible" position="1675,5425" size="100,100">Let no man deceive you with vain words: for because of these things cometh the wrath of God upon the children of disobedience.</tw-passagedata><tw-passagedata pid="400" name="Luke 17:10 KJV" tags="bible" position="1775,5425" size="100,100">So likewise ye, when ye shall have done all those things which are commanded you, say, We are unprofitable servants: we have done that which was our duty to do.</tw-passagedata><tw-passagedata pid="401" name="Hebrews 10:12-21 KJV" tags="bible promise" position="1875,5425" size="100,100">But this man, after he had offered one sacrifice for sins for ever, sat down on the right hand of God; From henceforth expecting till his enemies be made his footstool. For by one offering he hath perfected for ever them that are sanctified. Whereof the Holy Ghost also is a witness to us: for after that he had said before, This is the covenant that I will make with them after those days, saith the Lord, I will put my laws into their hearts, and in their minds will I write them; And their sins and iniquities will I remember no more. Now where remission of these is, there is no more offering for sin.

Having therefore, brethren, boldness to enter into the holiest by the blood of Jesus, By a new and living way, which he hath consecrated for us, through the veil, that is to say, his flesh; And having an high priest over the house of God;</tw-passagedata><tw-passagedata pid="402" name="Romans 4:5 KJV" tags="bible" position="1975,5425" size="100,100">But to him that worketh not, but believeth on him that justifieth the ungodly, his faith is counted for righteousness.</tw-passagedata><tw-passagedata pid="403" name="Colossians 1:14 KJV" tags="bible promise" position="1075,5525" size="100,100">In whom we have redemption through his blood, even the forgiveness of sins:</tw-passagedata><tw-passagedata pid="404" name="1 Peter 1:19 KJV" tags="bible" position="1175,5525" size="100,100">But with the precious blood of Christ, as of a lamb without blemish and without spot:</tw-passagedata><tw-passagedata pid="405" name="Matthew 11:28 KJV" tags="bible promise" position="1275,5525" size="100,100">(Jesus speaking) Come unto me, all ye that labour and are heavy laden, and I will give you rest.</tw-passagedata><tw-passagedata pid="406" name="Matthew 24:35 KJV" tags="bible promise" position="1375,5525" size="100,100">(Jesus speaking) Heaven and earth shall pass away, but my words shall not pass away.</tw-passagedata><tw-passagedata pid="407" name="Psalm 95:6 KJV" tags="bible prayer" position="1475,5525" size="100,100">O come, let us worship and bow down: let us kneel before the Lord our maker.</tw-passagedata><tw-passagedata pid="408" name="Daniel 6:10 KJV" tags="bible prayer" position="1575,5525" size="100,100">Now when Daniel knew that the writing was signed, he went into his house; and his windows being open in his chamber toward Jerusalem, he kneeled upon his knees three times a day, and prayed, and gave thanks before his God, as he did aforetime.</tw-passagedata><tw-passagedata pid="409" name="Jeremiah 29:12-13 KJV" tags="bible promise" position="1675,5525" size="100,100">Then shall ye call upon me, and ye shall go and pray unto me, and I will hearken unto you. And ye shall seek me, and find me, when ye shall search for me with all your heart.</tw-passagedata><tw-passagedata pid="410" name="Exodus 25:22 KJV" tags="bible promise" position="1775,5525" size="100,100">And there I will meet with thee, and I will commune with thee from above the mercy seat, from between the two cherubims which are upon the ark of the testimony, of all things which I will give thee in commandment unto the children of Israel. </tw-passagedata><tw-passagedata pid="411" name="Leviticus 16:2 KJV" tags="bible" position="1875,5525" size="100,100">And the Lord said unto Moses, Speak unto Aaron thy brother, that he come not at all times into the holy place within the vail before the mercy seat, which is upon the ark; that he die not: for I will appear in the cloud upon the mercy seat.</tw-passagedata><tw-passagedata pid="412" name="Numbers 7:89 KJV" tags="bible prayer" position="1975,5525" size="100,100">And when Moses was gone into the tabernacle of the congregation to speak with him, then he heard the voice of one speaking unto him from off the mercy seat that was upon the ark of testimony, from between the two cherubims: and he spake unto him.</tw-passagedata><tw-passagedata pid="413" name="Hebrews 4:16 KJV" tags="bible prayer" position="1075,5625" size="100,100">Let us therefore come boldly unto the throne of grace, that we may obtain mercy, and find grace to help in time of need.</tw-passagedata><tw-passagedata pid="414" name="Habakkuk 2:3 KJV" tags="bible promise" position="1175,5625" size="100,100">For the vision is yet for an appointed time, but at the end it shall speak, and not lie: though it tarry, wait for it; because it will surely come, it will not tarry.</tw-passagedata><tw-passagedata pid="415" name="Ephesians 1:18-19 KJV" tags="bible prayer" position="1275,5625" size="100,100">The eyes of your understanding being enlightened; that ye may know what is the hope of his calling, and what the riches of the glory of his inheritance in the saints, And what is the exceeding greatness of his power to us-ward who believe, according to the working of his mighty power,</tw-passagedata><tw-passagedata pid="416" name="Acts 16:31 KJV" tags="bible promise" position="1375,5625" size="100,100">And they said, Believe on the Lord Jesus Christ, and thou shalt be saved, and thy house.</tw-passagedata><tw-passagedata pid="417" name="John 6:35 KJV" tags="bible promise" position="1475,5625" size="100,100">And Jesus said unto them, I am the bread of life: he that cometh to me shall never hunger; and he that believeth on me shall never thirst.</tw-passagedata><tw-passagedata pid="418" name="1 Timothy 1:15 KJV" tags="bible" position="1575,5625" size="100,100">This is a faithful saying, and worthy of all acceptation, that Christ Jesus came into the world to save sinners; of whom I am chief.</tw-passagedata><tw-passagedata pid="419" name="Romans 10:4 KJV" tags="bible" position="1675,5625" size="100,100">For Christ is the end of the law for righteousness to every one that believeth.</tw-passagedata><tw-passagedata pid="420" name="Romans 4:25 KJV" tags="bible promise" position="1775,5625" size="100,100">Who was delivered for our offences, and was raised again for our justification. </tw-passagedata><tw-passagedata pid="421" name="Revelation 1:5 KJV" tags="bible promise" position="1875,5625" size="100,100">And from Jesus Christ, who is the faithful witness, and the first begotten of the dead, and the prince of the kings of the earth. Unto him that loved us, and washed us from our sins in his own blood,</tw-passagedata><tw-passagedata pid="422" name="1 Timothy 2:5 KJV" tags="bible" position="1975,5625" size="100,100">For there is one God, and one mediator between God and men, the man Christ Jesus;</tw-passagedata><tw-passagedata pid="423" name="Hebrews 7:25 KJV" tags="bible prayer" position="1075,5725" size="100,100">Wherefore he is able also to save them to the uttermost that come unto God by him, seeing he ever liveth to make intercession for them.</tw-passagedata><tw-passagedata pid="424" name="09-FO-1-71" tags="moment country_#4" position="425,5650" size="100,100">[71] I continued a great while in the delight of those things which were seen and sold at our fair; things which I believe now would have, had I continued in them still, drowned me in perdition and destruction.

[1] What things were they?

[71] All the treasures and riches of the world. Also I delighted much in rioting, reveling, drinking, swearing, lying, uncleanness, Sabbath-breaking, and what not, that tended to destroy the soul.

[71] But I found at last, by hearing and considering of things that are divine, which, indeed, I heard of you, as also of beloved Faithful, that was put to death for his faith and good living in Vanity Fair, that the __end of these things is death__ (Romans 6:21-23); and that for these things’ sake, the __wrath of God__  (Ephesians 5:6) cometh upon the children of disobedience.

[1] And did you presently fall under the power of this conviction?

[71] No, I was not willing presently to know the evil of sin, nor the damnation that follows upon the commission of it; but endeavored, when my mind at first began to be shaken with the word, to shut mine eyes against the light thereof.

[1] But what was the cause of your carrying of it thus to the first workings of God’s blessed Spirit upon you?

[71] The causes were,
# I was ignorant that this was the work of God upon me. I never thought that by awakenings for sin, God at first begins the conversion of a sinner.
# Sin was yet very sweet to my flesh, and I was loth to leave it.
# I could not tell how to part with mine old companions, their presence and actions were so desirable unto me.
# The hours in which convictions were upon me, were such troublesome and such heart-affrighting hours, that I could not bear, no not so much as the remembrance of them upon my heart. 
[1]  Then, as it seems, sometimes you got rid of your trouble?

[71] Yes, verily, but it would come into my mind again; and then I should be as bad, nay, worse than I was before.

[1] Why, what was it that brought your sins to mind again?

[71] Many things; as,
# If I did but meet a good man in the streets; or,
# If I have heard any read in the Bible; or,
# If mine head did begin to ache; or,
# If I were told that some of my neighbors were sick; or,
# If I heard the bell toll for some that were dead; or,
# If I thought of dying myself; or,
# If I heard that sudden death happened to others.
# But especially when I thought of myself, that I must quickly come to judgment.
[1] And could you at any time, with ease, get off the guilt of sin, when by any of these ways it came upon you?

[71] No, not I; for then they got faster hold of my conscience; and then, if I did but think of going back to sin, (though my mind was turned against it,) it would be double torment to me.

[1] And how did you do then?

[71] I thought I must endeavor to mend my life; for else, thought I, I am sure to be damned. 

[1] And did you endeavor to mend?

[71] Yes, and fled from, not only my sins, but sinful company too, and betook me to religious duties, as praying, reading, weeping for sin, speaking truth to my neighbors, etc. These things did I, with many others, too much here to relate.

[1] And did you think yourself well then?

[71] Yes, for a while; but at the last my trouble came tumbling upon me again, and that over the neck of all my reformations.

[1] How came that about, since you were now reformed?

[71] There were several things brought it upon me, especially such sayings as these: 
&gt; //All our righteousnesses are as __filthy rags.__ (Isaiah 64:6)
By the works of the law shall __no flesh be justified.__ (Galatians 2:16)
When ye have done all these things, say, __We are unprofitable__ (Luke 17:10);//
with many more such like. From whence I began to reason with myself thus: 
&gt; &lt;span&gt;If all my righteousnesses are as filthy rags; 
if by the deeds of the law no man can be justified; and if, 
when we have done all, we are yet unprofitable, &lt;/span&gt;
then is it but a folly to think of heaven by the law. 

[71] I farther thought thus: If a man runs a hundred pounds into the shopkeeper’s debt, and after that shall pay for all that he shall fetch; yet if his old debt stands still in the book uncrossed, the shopkeeper may sue him for it, and cast him into prison, till he shall pay the debt.

[1] Well, and how did you apply this to yourself?

[71] Why, I thought thus with myself: I have by my sins run a great way into God’s book, and my now reforming will not pay off that score; therefore I should think still, under all my present amendments, But how shall I be freed from that damnation that I brought myself in danger of by my former transgressions?

[1] A very good application: but pray go on.

[71] Another thing that hath troubled me ever since my late amendments, is, that if I look narrowly into the best of what I do now, I still see sin, new sin, mixing itself with the best of that I do; so that now I am forced to conclude, that notwithstanding my former fond conceits of myself and duties, I have committed sin enough in one day to send me to hell, though my former life had been faultless.

[1] And what did you do then?

[71] Do! I could not tell what to do, until I broke my mind to Faithful; for he and I were well acquainted.
&lt;&lt;include &quot;09-EV-1-71-91&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="425" name="09-GO-1-51-71" tags="moment country_#4" position="550,5650" size="100,100">[71] And he told me, that unless I could obtain the righteousness of a man that never had sinned, neither mine own, nor all the righteousness of the world, could save me. 

[1] And did you think he spake true?

[71] Had he told me so when I was pleased and satisfied with my own amendments, I had called him fool for his pains; but now, since I see my own infirmity, and the sin which cleaves to my best performance, I have been forced to be of his opinion.

[1] But did you think, when at first he suggested it to you, that there was such a man to be found, of whom it might justly be said, that he never committed sin?

[71] I must confess the words at first sounded strangely; but after a little more talk and company with him, I had full conviction about it.

[1] And did you ask him what man this was, and how you must be justified by him?

[71] Yes, and he told me it was the __Lord Jesus__ (Hebrews 10:12-21), that dwelleth on the right hand of the Most High. 

[71] And thus, said he, you must be justified by him, even __by trusting to what he hath done__ (Romans 4:5; Colossians 1:14; 1 Peter 1:19) by himself in the days of his flesh, and suffered when he did hang on the tree. 

[71] I asked him further, how that man’s righteousness could be of that efficacy, to justify another before God. And he told me he was the mighty God, and did what he did, and died the death also, not for himself, but for me; to whom his doings, and the worthiness of them, should be imputed, if I believed on him.

[1] And what did you do then?

[71] I made my objections against my believing, for that I thought he was not willing to save me.

[1] And what said Faithful to you then?

[71] He bid me go to him and see. Then I said it was presumption. He said, No; for __I was invited__  (Matthew 11:28) to come.
&lt;&lt;include &quot;09-EV-1-71-91&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="426" name="09-PR-1-51-71" tags="moment country_#4" position="675,5650" size="100,100">[71] Then he gave me a book of Jesus’ inditing, to encourage me the more freely to come; and he said concerning that book, that every jot and tittle thereof __stood firmer than heaven and earth.__ (Matthew 24:35)

[71] Then I asked him what I must do when I came; and he told me I must __entreat upon my knees__ (Psalm 95:6; Daniel 6:10), __with all my heart and soul__ (Jeremiah 29:12-13), the Father to reveal him to me. 

[71] Then I asked him further, how I must make my supplications to him; and he said,
&gt; [51] Go, and thou shalt __find him upon a mercy-seat__ ((Exodus 25:22; Leviticus 16:2; Numbers 7:89; Hebrews 4:16)), where he sits all the year long to give pardon and forgiveness to them that come.
[71] I told him, that I knew not what to say when I came; and he bid say to this effect: 
&gt; //&lt;&lt;journal &quot;Hopeful&#39;s prayer&quot;&gt;&gt;//
[1] And did you do as you were bidden?

[71] Yes, over, and over, and over.

[1] And did the Father reveal the Son to you?

[71] Not at the first, nor second, nor third, nor fourth, nor fifth, no, nor at the sixth time neither.

[1] What did you do then?

[71] What? why I could not tell what to do. 

[1] Had you not thoughts of leaving off praying?

[71] Yes; an hundred times twice told.

[1] And what was the reason you did not?

[71] I believed that it was true which hath been told me, to wit, that without the righteousness of this Christ, all the world could not save me; and therefore, thought I with myself, if I leave off, I die, and I can but die at the throne of grace. And withal this came into my mind:
&gt; &lt;&lt;book &quot;Habakkuk 2:3&quot;&gt;&gt;
So I continued praying until the Father showed me his Son.

[1] And how was he revealed unto you?

[71] I did not see him with my bodily eyes, but with the __eyes of my understanding__ (Ephesians 1:18-19); and thus it was. 

[71] One day I was very sad, I think sadder than at any one time in my life; and this sadness was through a fresh sight of the greatness and vileness of my sins. 

[71] And as I was then looking for nothing but hell, and the everlasting damnation of my soul, suddenly, as I thought, I saw the Lord Jesus looking down from heaven upon me, and saying,
&gt; [α] &lt;&lt;book &quot;Acts 16:31 KJV&quot;&gt;&gt;
But I replied, 
&gt; Lord, I am a great, a very great sinner: and he answered,
&gt; [α] &lt;&lt;book &quot;2 Corinthians 12:9 KJV&quot;&gt;&gt;
Then I said, 
&gt;  But, Lord, what is believing? And then I saw from that saying,
&gt; [α] &lt;&lt;book &quot;John 6:35 KJV&quot;&gt;&gt;
that believing and coming was all one; and that he that came, that is, that ran out in his heart and affections after salvation by Christ, he indeed believed in Christ.

[71] Then the water stood in mine eyes, and I asked further, 
&gt; But, Lord, may such a great sinner as I am be indeed accepted of thee, and be saved by thee? And I heard him say,
&gt; [α] &lt;&lt;book &quot;John 6:37 KJV&quot;&gt;&gt;
Then I said, 
&gt;  But how, Lord, must I consider of thee in my coming to thee, that my faith may be placed aright upon thee? 
[α] 
&gt; &lt;span&gt;Christ Jesus came into the world to save __sinners.__ (1 Timothy 1:15)
He is the end of the law for __righteousness to every one that believes.__ (Romans 10:4) 
He died for our sins, and rose again __for our justification.__ (Romans 4:25) 
__He loved us, and washed us from our sins in his own blood.__ (Revelation 1:5) 
He is __the Mediator__ (1 Timothy 2:5) between God and us. 
He ever liveth to __make intercession for us.__ (Hebrews 7:25)&lt;/span&gt; 
[71] From all which I gathered, that I must look for righteousness in his person, and for satisfaction for my sins by his blood: that what he did in obedience to his Father’s law, and in submitting to the penalty thereof, was not for himself, but for him that will accept it for his salvation, and be thankful.

[71] And now was my heart full of joy, mine eyes full of tears, and mine affections running over with love to the name, people, and ways of Jesus Christ. 

[1] This was a revelation of Christ to your soul indeed. But tell me particularly what effect this had upon your spirit.

[71] It made me see that all the world, notwithstanding all the righteousness thereof, is in a state of condemnation. It made me see that God the Father, though he be just, can justly justify the coming sinner. It made me greatly ashamed of the vileness of my former life, and confounded me with the sense of mine own ignorance; for there never came a thought into my heart before now that showed me so the beauty of Jesus Christ. It made me love a holy life, and long to do something for the honor and glory of the name of the Lord Jesus. 

[71] Yea, I thought that had I now a thousand gallons of blood in my body, I could spill it all for the sake of the Lord Jesus. 
&lt;&lt;include &quot;09-EV-1-71-91&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="427" name="09-DE-1-71-91" tags="moment country_#4" position="800,5650" size="100,100">[@] I saw then in my dream, that Hopeful looked back, and saw Ignorance, whom they had left behind, coming after. Look, said he to Christian,

[71] How far yonder youngster loitereth behind.

[1] Aye, aye, I see him: he careth not for our company. 

[71] But I trow it would not have hurt him, had he kept pace with us hitherto.

[1] That is true; but I warrant you he thinketh otherwise. 

[71] That I think he doth; but, however, let us tarry for him. (So they did.) 

[@] Then Christian said to him,

[1] Come away, man; why do you stay so behind?

[91] I take my pleasure in walking alone, even more a great deal than in company, unless I like it the better.

[@] Then said Christian to Hopeful, (but softly,)

[1] Did I not tell you he cared not for our company? 

[@] But, however, said he, 

[1] Come up, and let us talk away the time in this solitary place. 

[@] Then, directing his speech to Ignorance, he said, 

[1] Come, how do you do? How stands it between God and your soul now?

[91] I hope, well; for I am always full of good motions, that come into my mind to comfort me as I walk

[1] What good motions? Pray tell us. 

[91] Why, I think of God and heaven.

[1] So do the devils and damned souls.

[91] But I think of them, and desire them.

[1] So do many that are never like to come there.
&gt; __The soul of the sluggard desireth, and hath nothing.__ (Proverbs 13:4)
[91] But I think of them, and leave all for them.

[1] That I doubt: for to leave all is a very hard matter; yea, a harder matter than many are aware of. But why, or by what, art thou persuaded that thou hast left all for God and heaven?

[91] My heart tells me so. 

[1] The wise man says, 
&gt; __He that trusteth in his own heart is a fool.__ (Proverbs 28:26)
[91] That is spoken of an evil heart; but mine is a good one.

[1] But how dost thou prove that?

[91] It comforts me in hopes of heaven. 

[1] That may be through its deceitfulness; for a man’s heart may minister comfort to him in the hopes of that thing for which he has yet no ground to hope.

[91] But my heart and life agree together; and therefore my hope is well-grounded.

[1] Who told thee that thy heart and life agree together?

[91] My heart tells me so.

[1] “Ask my fellow if I be a thief.” Thy heart tells thee so! Except the word of God beareth witness in this matter, other testimony is of no value.

[91] But is it not a good heart that hath good thoughts? and is not that a good life that is according to God’s commandments?

[1] Yes, that is a good heart that hath good thoughts, and that is a good life that is according to God’s commandments; but it is one thing indeed to have these, and another thing only to think so. 

[91] Pray, what count you good thoughts, and a life according to God’s commandments? 

[1] There are good thoughts of divers kinds; some respecting ourselves, some God, some Christ, and some other things. 

[91] What be good thoughts respecting ourselves?

[1] Such as agree with the word of God.

[91] When do our thoughts of ourselves agree with the word of God? 

[1] When we pass the same judgment upon ourselves which the word passes. To explain myself: the word of God saith of persons in a natural condition, 
&gt; __There is none righteous, there is none that doeth good.__ (Romans 3:10-12)
It saith also, that,
&gt; every imagination of the __heart of man is only evil, and that continually.__ (Genesis 6:5)
And again, 
&gt; The imagination of __man’s heart is evil from his youth.__ (Genesis 8:21)
[1] Now, then, when we think thus of ourselves, having sense thereof, then are our thoughts good ones, because according to the word of God.

[91] I will never believe that my heart is thus bad. 

[1] Therefore thou never hadst one good thought concerning thyself in thy life. But let me go on. As the word passeth a judgment upon our hearts, so it passeth a judgment upon our ways; and when the thoughts of our hearts and ways agree with the judgment which the word giveth of both, then are both good, because agreeing thereto.

[91] Make out your meaning.

[1] Why, the word of God saith, that __man’s ways are crooked ways__ (Psalm 125:5; Proverbs 2:15; Romans 3:12), not good but perverse; it saith, they are naturally out of the good way, that they have not known it.

[1] Now, when a man thus thinketh of his ways, I say, when he doth sensibly, and with heart-humiliation, thus think, then hath he good thoughts of his own ways, because his thoughts now agree with the judgment of the word of God. 

[91] What are good thoughts concerning God?

[1] Even, as I have said concerning ourselves, when our thoughts of God do agree with what the word saith of him; and that is, when we think of his being and attributes as the word hath taught, of which I cannot now discourse at large.

[1] But to speak of him with reference to us: then have we right thoughts of God when we think that he knows us better than we know ourselves, and can see sin in us when and where we can see none in ourselves; when we think he knows our inmost thoughts, and that our heart, with all its depths, is always open unto his eyes; also when we think that all our righteousness stinks in his nostrils, and that therefore he cannot abide to see us stand before him in any confidence, even in all our best performances. 

[91] Do you think that I am such a fool as to think that God can see no further than I; or that I would come to God in the best of my performances?

[1] Why, how dost thou think in this matter?

[91] Why, to be short, I think I must believe in Christ for justification.

[1] How! think thou must believe in Christ, when thou seest not thy need of him! Thou neither seest thy original nor actual infirmities; but hast such an opinion of thyself, and of what thou doest, as plainly renders thee to be one that did never see the necessity of Christ’s personal righteousness to justify thee before God. How, then, dost thou say, I believe in Christ?

[91] I believe well enough, for all that.

[1] How dost thou believe?

[91] I believe that Christ died for sinners; and that I shall be justified before God from the curse, through his gracious acceptance of my obedience to his laws. Or thus, Christ makes my duties, that are religious, acceptable to his Father by virtue of his merits, and so shall I be justified.

[1] Let me give an answer to this confession of thy faith.
# Thou believest with a fantastical faith; for this faith is nowhere described in the word.
# Thou believest with a false faith; because it taketh justification from the personal righteousness of Christ, and applies it to thy own.
# This faith maketh not Christ a justifier of thy person, but of thy actions; and of thy person for thy action’s sake, which is false.

Therefore this faith is deceitful, even such as will leave thee under wrath in the day of God Almighty: for true justifying faith puts the soul, as sensible of its lost condition by the law, upon flying for refuge unto Christ’s righteousness; (which righteousness of his is not an act of grace by which he maketh, for justification, thy obedience accepted with God, but his personal obedience to the law, in doing and suffering for us what that required at our hands;) this righteousness, I say, true faith accepteth; under the skirt of which the soul being shrouded, and by it presented as spotless before God, it is accepted, and acquitted from condemnation.

[1] What! would you have us trust to what Christ in his own person has done without us? This conceit would loosen the reins of our lust, and tolerate us to live as we list: for what matter how we live, if we may be justified by Christ’s personal righteousness from all, when we believe it?

[1] Ignorance is thy name, and as thy name is, so art thou: even this thy answer demonstrateth what I say. Ignorant thou art of what justifying righteousness is, and as ignorant how to secure thy soul, through the faith of it, from the heavy wrath of God.

[1] Yea, thou also art ignorant of the true effects of saving faith in this righteousness of Christ, which is to bow and win over the heart to God in Christ, to love his name, his word, ways, and people, and not as thou ignorantly imaginest.

[71] Ask him if ever he had Christ revealed to him from heaven.

[91] What! you are a man for revelations! I do believe, that what both you and all the rest of you say about that matter, is but the fruit of distracted brains. 

[71] Why, man, Christ is so hid in God from the natural apprehensions of the flesh, that he cannot by any man be savingly known, unless God the Father reveals him to him.

[91] That is your faith, but not mine, yet mine, I doubt not, is as good as yours, though I have not in my head so many whimsies as you.

[1] Give me leave to put in a word. You ought not so slightly to speak of this matter: for this I will boldly affirm, even as my good companion hath done, that no man can know Jesus Christ but by the revelation of the Father: yea, and faith too, by which the soul layeth hold upon Christ, (if it be right,) must be wrought by the __exceeding greatness of his mighty power__ (Matthew 11:27; 1 Corinthians 12:3; Ephesians 1:17-19); the working of which faith, I perceive, poor Ignorance, thou art ignorant of. 

[1] Be awakened, then, see thine own wretchedness, and fly to the Lord Jesus; and by his righteousness, which is the righteousness of God, (for he himself is God,) thou shalt be delivered from condemnation.  

[91] You go so fast I cannot keep pace with you; do you go on before: I must stay a while behind.

[@] Then they said,
&gt; &lt;&lt;journal &quot;Ignorance II&quot;&gt;&gt;
[@] Then Christian addressed himself thus to his fellow:

[1] Well, come, my good Hopeful, I perceive that thou and I must walk by ourselves again. 
&lt;&lt;include &quot;09-EV-1-71-91&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="428" name="Proverbs 13:4 KJV" tags="bible" position="1175,5725" size="100,100">The soul of the sluggard desireth, and hath nothing: but the soul of the diligent shall be made fat.</tw-passagedata><tw-passagedata pid="429" name="Romans 3:10-12 KJV" tags="bible" position="1375,5725" size="100,100">As it is written, There is none righteous, no, not one: There is none that understandeth, there is none that seeketh after God. They are all gone out of the way, they are together become unprofitable; there is none that doeth good, no, not one.</tw-passagedata><tw-passagedata pid="430" name="Genesis 6:5 KJV" tags="bible" position="1475,5725" size="100,100">And GOD saw that the wickedness of man was great in the earth, and that every imagination of the thoughts of his heart was only evil continually.</tw-passagedata><tw-passagedata pid="431" name="Genesis 8:21 KJV" tags="bible promise" position="1575,5725" size="100,100">And the Lord smelled a sweet savour; and the Lord said in his heart, I will not again curse the ground any more for man’s sake; for the imagination of man’s heart is evil from his youth; neither will I again smite any more every thing living, as I have done.</tw-passagedata><tw-passagedata pid="432" name="Proverbs 28:26 KJV" tags="bible" position="1275,5725" size="100,100">He that trusteth in his own heart is a fool: but whoso walketh wisely, he shall be delivered.</tw-passagedata><tw-passagedata pid="433" name="Psalm 125:5 KJV" tags="bible promise" position="1675,5725" size="100,100">As for such as turn aside unto their crooked ways, the Lord shall lead them forth with the workers of iniquity: but peace shall be upon Israel.</tw-passagedata><tw-passagedata pid="434" name="Proverbs 2:15 KJV" tags="bible" position="1775,5725" size="100,100">Whose ways are crooked, and they froward in their paths:</tw-passagedata><tw-passagedata pid="435" name="Romans 3:12 KJV" tags="bible" position="1875,5725" size="100,100">They are all gone out of the way, they are together become unprofitable; there is none that doeth good, no, not one.</tw-passagedata><tw-passagedata pid="436" name="Matthew 11:27 KJV" tags="bible promise" position="1975,5725" size="100,100">All things are delivered unto me of my Father: and no man knoweth the Son, but the Father; neither knoweth any man the Father, save the Son, and he to whomsoever the Son will reveal him.</tw-passagedata><tw-passagedata pid="437" name="1 Corinthians 12:3 KJV" tags="bible prayer" position="1075,5825" size="100,100">Wherefore I give you to understand, that no man speaking by the Spirit of God calleth Jesus accursed: and that no man can say that Jesus is the Lord, but by the Holy Ghost.</tw-passagedata><tw-passagedata pid="438" name="Ephesians 1:17-19 KJV" tags="bible prayer" position="1175,5825" size="100,100">That the God of our Lord Jesus Christ, the Father of glory, may give unto you the spirit of wisdom and revelation in the knowledge of him: The eyes of your understanding being enlightened; that ye may know what is the hope of his calling, and what the riches of the glory of his inheritance in the saints, And what is the exceeding greatness of his power to us-ward who believe, according to the working of his mighty power,</tw-passagedata><tw-passagedata pid="439" name="10-DE-1-71" tags="moment country_#4" position="425,6075" size="100,100">[@] So I saw in my dream, that they went on apace before, and Ignorance he came hobbling after. Then said Christian to his companion,

[1] I much pity this poor man: it will certainly go ill with him at last.

[71] Alas! there are abundance in our town in his condition, whole families, yea, whole streets, and that of pilgrims too; and if there be so many in our parts, how many, think you, must there be in the place where he was born?

[1] Indeed, the word saith,
&gt; __He hath blinded their eyes, lest they should see__ (John 12:40), etc
But, now we are by ourselves, what do you think of such men? Have they at no time, think you, convictions of sin, and so, consequently, fears that their state is dangerous?

[71] Nay, do you answer that question yourself, for you are the elder man. 

[1] Then I say, sometimes (as I think) they may; but they being naturally ignorant, understand not that such convictions tend to their good; and therefore they do desperately seek to stifle them, and presumptuously continue to flatter themselves in the way of their own hearts.

[71] I do believe, as you say, that fear tends much to men’s good, and to make them right at their beginning to go on pilgrimage.

[1] Without all doubt it doth, if it be right; for so says the word,
&gt; __The fear of the Lord__ (Job 28:28; Psalm 111:10; Proverbs 1:7; Proverbs 9:10) is the beginning of wisdom. 
[71] How will you describe right fear?

[1] True or right fear is discovered by three things: 
# By its rise; it is caused by saving convictions for sin.
# It driveth the soul to lay fast hold of Christ for salvation.
# It begetteth and continueth in the soul a great reverence of God, his word, and ways; keeping it tender, and making it afraid to turn from them, to the right hand or to the left, to any thing that may dishonor God, break its peace, grieve the Spirit, or cause the enemy to speak reproachfully.

[71] Well said; I believe you have said the truth. Are we now almost got past the Enchanted Ground?

[1] Why? are you weary of this discourse?

[71] No, verily, but that I would know where we are.

[1] We have not now above two miles further to go thereon. But let us return to our matter.

[1] Now, the ignorant know not that such conviction as tend to put them in fear, are for their good, and therefore they seek to stifle them. 

[71] How do they seek to stifle them?

[1] 
# They think that those fears are wrought by the devil, (though indeed they are wrought of God,) and thinking so, they resist them, as things that directly tend to their overthrow.
# They also think that these fears tend to the spoiling of their faith; when, alas for them, poor men that they are, they have none at all; and therefore they harden their hearts against them.
# They presume they ought not to fear, and therefore, in despite of them, wax presumptuously confident.
# They see that those fears tend to take away from them their pitiful old self-holiness, and therefore they resist them with all their might.

[71] I know something of this myself; for before I knew myself it was so with me.
&lt;&lt;include &quot;09-EV-1-71-91&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="440" name="John 12:40 KJV" tags="bible" position="1075,6075" size="100,100">(Jesus speaking) He hath blinded their eyes, and hardened their heart; that they should not see with their eyes, nor understand with their heart, and be converted, and I should heal them.</tw-passagedata><tw-passagedata pid="441" name="Job 28:28 KJV" tags="bible" position="1175,6075" size="100,100">And unto man he said, Behold, the fear of the Lord, that is wisdom; and to depart from evil is understanding.</tw-passagedata><tw-passagedata pid="442" name="Psalm 111:10 KJV" tags="bible" position="1275,6075" size="100,100">The fear of the Lord is the beginning of wisdom: a good understanding have all they that do his commandments: his praise endureth for ever.</tw-passagedata><tw-passagedata pid="443" name="Proverbs 1:7 KJV" tags="bible" position="1375,6075" size="100,100">The fear of the Lord is the beginning of knowledge: but fools despise wisdom and instruction.</tw-passagedata><tw-passagedata pid="444" name="Proverbs 9:10 KJV" tags="bible" position="1475,6075" size="100,100">The fear of the Lord is the beginning of wisdom: and the knowledge of the holy is understanding.</tw-passagedata><tw-passagedata pid="445" name="10-GR-1-71" tags="moment country_#4" position="550,6075" size="100,100">[1] Well, we will leave, at this time, our neighbor Ignorance by himself, and fall upon another profitable question.

[71] With all my heart; but you shall still begin.

[1] Well then, did you not know, about ten years ago, one Temporary in your parts, who was a forward man in religion then?

[71] Know him! yes; he dwelt in Graceless, a town about two miles off of Honesty, and he dwelt next door to one Turnback.

[1] Right; he dwelt under the same roof with him. Well, that man was much awakened once: I believe that then he had some sight of his sins, and of the wages that were due thereto.

[71] I am of your mind, for (my house not being above three miles from him) he would oft-times come to me, and that with many tears. Truly I pitied the man, and was not altogether without hope of him; but one may see, it is not every one that cries, “Lord, Lord!” 

[1] He told me once that he was resolved to go on pilgrimage, as we go now; but all of a sudden he grew acquainted with one Save-self, and then he became a stranger to me.

[71] Now, since we are talking about him, let us a little inquire into the reason of the sudden backsliding of him and such others.

[1] It may be very profitable; but do you begin. 

[71] Well, then, there are, in my judgment, four reasons for it:

[71] Firstly, though the consciences of such men are awakened, yet their minds are not changed: therefore, when the power of guilt weareth away, that which provoked them to be religious ceaseth; wherefore they naturally turn to their own course again; even as we see the dog that is sick of what he hath eaten, so long as his sickness prevails, he vomits and casts up all; not that he doth this of a free mind, (if we may say a dog has a mind,) but because it troubleth his stomach: but now, when his sickness is over, and so his stomach eased, his desires being not at all alienated from his vomit, he turns him about, and licks up all; and so it is true which is written, 
&gt; __The dog is turned to his own vomit again.__ (2 Peter 2:22)
Thus, I say, being hot for heaven, by virtue only of the sense and fear of the torments of hell, as their sense and fear of damnation chills and cools, so their desires for heaven and salvation cool also. So then it comes to pass, that when their guilt and fear is gone, their desires for heaven and happiness die, and they return to their course again.

[71] Another reason is, they have slavish fears that do overmaster them: I speak now of the fears that they have of men;
&gt; For the __fear of man__ (Proverbs 29:25) bringeth a snare. 
So then, though they seem to be hot for heaven so long as the flames of hell are about their ears, yet, when that terror is a little over, they betake themselves to second thoughts, namely, that it is good to be wise and not to run (for they know not what) the hazard of losing all, or at least of bringing themselves into unavoidable and unnecessary troubles; and so they fall in with the world again.

[71] Thirdly, the shame that attends religion lies also as a block in their way: they are proud and haughty, and religion in their eye is low and contemptible: therefore when they have lost their sense of hell and the wrath to come, they return again to their former course.

[71] The fourth reason: guilt, and to meditate terror, are grievous to them; they like not to see their misery before they come into it; though perhaps the sight of at it first, if they loved that sight, might make them fly whither the righteous fly and are safe; but because they do, as I hinted before, even shun the thoughts of guilt and terror, therefore, when once they are rid of their awakenings about the terrors and wrath of God, they harden their hearts gladly, and choose such ways as will harden them more and more.

[1] You are pretty near the business, for the bottom of all is for want of a change in their mind and will.

[1] And therefore they are but like the felon that standeth before the judge: he quakes and trembles, and seems to repent most heartily, but the bottom of all is the fear of the halter: not that he hath any detestation of the offence, as it is evident; because, let but this man have his liberty, and he will be a thief, and so a rogue still; whereas, if his mind was changed, he would be otherwise.

[71] Now I have showed you the reason of their going back, do you show me the manner thereof.

[1] So I will willingly. 
# They draw off their thoughts, all that they may, from the remembrance of God, death, and judgment to come.
# Then they cast off by degrees private duties, as closet prayer, curbing their lusts, watching, sorrow for sin, and the like. 
# Then they shun the company of lively and warm Christians.
# After that, they grow cold to public duty, as hearing, reading, godly conference, and the like.
# They then begin to pick holes, as we say, in the coats of some of the godly, and that devilishly, that they may have a seeming color to throw religion (for the sake of some infirmities they have espied in them) behind their backs.
# Then they begin to adhere to, and associate themselves with, carnal, loose, and wanton men.
# Then they give way to carnal and wanton discourses in secret; and glad are they if they can see such things in any that are counted honest, that they may the more boldly do it through their example.
# After this they begin to play with little sins openly.
# And then, being hardened, they show themselves as they are. Thus, being launched again into the gulf of misery, unless a miracle of grace prevent it, they everlastingly perish in their own deceivings.

[@] Now I saw in my dream, that by this time the pilgrims were got over the Enchanted Ground, and entering into the [[country of Beulah|10-BE-1-71-101]],…</tw-passagedata><tw-passagedata pid="446" name="Proverbs 29:25 KJV" tags="bible promise" position="1575,6075" size="100,100">The fear of man bringeth a snare: but whoso putteth his trust in the Lord shall be safe.</tw-passagedata><tw-passagedata pid="447" name="10-BE-1-71-101" tags="moment country_#5" position="675,6075" size="100,100">[@] …the country of __Beulah__ (Isaiah 62:4), whose air was very sweet and pleasant; the way lying directly through it, they solaced themselves there for a season.

[@] Yea, here they heard continually the singing of birds, and saw every day the flowers appear in the earth, and heard the voice of the turtle __in the land__ (Song of Solomon 2:10-12). In this country the sun shineth night and day: wherefore this was beyond the Valley of the Shadow of Death, and also out of the reach of Giant Despair; neither could they from this place so much as see Doubting Castle.

[@] Here they were within sight of the city they were going to; also here met them some of the inhabitants thereof; for in this land the shining ones commonly walked, because it was upon the borders of heaven. In this land also the contract between the Bride and the Bridegroom was renewed; yea, here,
&gt; as the bridegroom rejoiceth over the bride, so doth __God rejoice over them.__ (Isaiah 62:5)
Here they had no want of corn and wine; for in this place they met with abundance of what they had sought for in all their pilgrimage. Here they heard voices from out of the city, loud voices, saying,
&gt; __Say ye to the daughter of Zion, Behold, thy salvation cometh! Behold, his reward is with him!__ (Isaiah 62:11)
Here all the inhabitants of the country called them
&gt;__the holy People, the redeemed of the Lord, sought out__ (Isaiah 62:12), etc.
[@] Now, as they walked in this land, they had more rejoicing than in parts more remote from the kingdom to which they were bound; and drawing near to the city, they had yet a more perfect view thereof: It was builded of pearls and precious stones, also the streets thereof were paved with gold; so that, by reason of the natural glory of the city, and the reflection of the sunbeams upon it, Christian with desire fell sick; Hopeful also had a fit or two of the same disease: wherefore here they lay by it a while, crying out because of their pangs,
&gt; If you see my Beloved, tell him that __I am sick of love.__ (Song of Solomon 5:8)
[@] But, being a little strengthened, and better able to bear their sickness, they walked on their way, and came yet nearer and nearer, where were orchards, vineyards, and gardens, and their gates opened into the highway.

[@] Now, as they came up to these places, behold the gardener stood in the way; to whom the pilgrims said,

[1] and [71] Whose goodly vineyards and gardens are these?

[101] They are the King’s, and are planted here for his own delight, and also for the solace of pilgrims.

[@] So the gardener had them into the vineyards, and bid them __refresh themselves__ (Deuteronomy 23:24) with the dainties; he also showed them there the King’s walks and arbors where he delighted to be: And here they tarried and slept. 

[@] Now I beheld in my dream, that they talked more in their sleep at this time than ever they did in all their journey; and, being in a muse thereabout, the gardener said even to me,

[101] Wherefore musest thou at the matter? It is the nature of the fruit of the grapes of these vineyards,
&gt; …to go down so sweetly as to cause the lips of them that are asleep to speak. (Song of Solomon 7:9)
[@] So I saw that when they awoke, they addressed themselves to go up to the city.

[@] But, as I said, the reflection of the sun upon the city (for the city was pure gold,) was so extremely __glorious__ (Revelation 21:18), that they could not as yet __with open face__ (2 Corinthians 3:18) behold it, but through an instrument made for that purpose. 

[@] So I saw, that as they went on, there met them two men in raiment that shone like gold, also their faces shone as the light.

[@] These men asked the pilgrims whence they came; and they told them. They also asked them where they had lodged, what difficulties and dangers, what comforts and pleasures, they had met with in the way; and they told them. Then said the men that met them, 

[λ] You have but two difficulties more to meet with, and then you are in the City. 

[@] Christian then and his companion asked the men to go along with them: so they told them that they would; But, said they,

[λ] You must obtain it by your own faith.

[@] So I saw in my dream, that they went on together till they came [[in sight of the gate|10-RI-1-71]].</tw-passagedata><tw-passagedata pid="448" name="Isaiah 62:4 KJV" tags="bible promise" position="1675,6075" size="100,100">Thou shalt no more be termed Forsaken; neither shall thy land any more be termed Desolate: but thou shalt be called Hephzibah, and thy land Beulah: for the Lord delighteth in thee, and thy land shall be married.</tw-passagedata><tw-passagedata pid="449" name="Song of Solomon 2:10-12 KJV" tags="bible" position="1775,6075" size="100,100">My beloved spake, and said unto me, Rise up, my love, my fair one, and come away. For, lo, the winter is past, the rain is over and gone; The flowers appear on the earth; the time of the singing of birds is come, and the voice of the turtle is heard in our land;</tw-passagedata><tw-passagedata pid="450" name="09-FA-1-71" tags="optional" position="800,5125" size="100,100">* Two of them debated [[if Little-Faith should have traded his jewels.|09-JE-1-71]]
* They wondered [[how they would fare in adversaries|09-RO-1-71-91]]</tw-passagedata><tw-passagedata pid="451" name="Isaiah 62:5 KJV" tags="bible" position="1875,6075" size="100,100">For as a young man marrieth a virgin, so shall thy sons marry thee: and as the bridegroom rejoiceth over the bride, so shall thy God rejoice over thee.</tw-passagedata><tw-passagedata pid="452" name="Isaiah 62:11 KJV" tags="bible promise" position="1975,6075" size="100,100">Behold, the Lord hath proclaimed unto the end of the world, Say ye to the daughter of Zion, Behold, thy salvation cometh; behold, his reward is with him, and his work before him.</tw-passagedata><tw-passagedata pid="453" name="Isaiah 62:12 KJV" tags="bible promise" position="1075,6175" size="100,100">And they shall call them, The holy people, The redeemed of the Lord: and thou shalt be called, Sought out, A city not forsaken.</tw-passagedata><tw-passagedata pid="454" name="Song of Solomon 5:8 KJV" tags="bible" position="1175,6175" size="100,100">I charge you, O daughters of Jerusalem, if ye find my beloved, that ye tell him, that I am sick of love.</tw-passagedata><tw-passagedata pid="455" name="Deuteronomy 23:24 KJV" tags="bible" position="1275,6175" size="100,100">When thou comest into thy neighbour’s vineyard, then thou mayest eat grapes thy fill at thine own pleasure; but thou shalt not put any in thy vessel.</tw-passagedata><tw-passagedata pid="456" name="Song of Solomon 7:9 KJV" tags="bible" position="1375,6175" size="100,100">And the roof of thy mouth like the best wine for my beloved, that goeth down sweetly, causing the lips of those that are asleep to speak.</tw-passagedata><tw-passagedata pid="457" name="Revelation 21:18 KJV" tags="bible" position="1475,6175" size="100,100">And the building of the wall of it was of jasper: and the city was pure gold, like unto clear glass.</tw-passagedata><tw-passagedata pid="458" name="2 Corinthians 3:18 KJV" tags="bible promise" position="1575,6175" size="100,100">But we all, with open face beholding as in a glass the glory of the Lord, are changed into the same image from glory to glory, even as by the Spirit of the Lord.</tw-passagedata><tw-passagedata pid="459" name="10-RI-1-71" tags="moment river_#2" position="800,6075" size="100,100">[@] Now I further saw, that betwixt them and the gate was a river; but there was no bridge to go over, and the river was very deep.

[@] At the sight, therefore, of this river the pilgrims were much stunned; but the men that went with them said,

[λ] You must go through, or you cannot come at the gate.

[@] The pilgrims then began to inquire if there was no other way to the gate. To which they answered,

[λ] Yes; but there hath not any, save two, to wit, Enoch and Elijah, been permitted to tread that path since the foundation of the world, nor shall until the last trumpet shall sound.

[@] The pilgrims then, especially Christian, began to despond in their mind, and looked this way and that, but no way could be found by them by which they might escape the river. 

[@] Then they asked the men if the waters were all of a depth. They said,

[λ] No; yet we could not help you in this case; for you shall find it deeper or shallower as you believe in the King of the place.

[@] Then they addressed themselves to the water, and entering, Christian began to sink, and crying out to his good friend Hopeful, he said, 

[1] I sink in deep waters; __the billows go over my head; all his waves go over me__ (Psalm 42:7). Selah.

[71] Be of good cheer, my brother: I feel the bottom, and it is good.

[1] Ah! my friend, the __sorrows of death have compassed me__ (Psalm 116:3) about, I shall not see __the land that flows with milk and honey.__ (Exodus 3:8)

[@] And with that a great darkness and horror fell upon Christian, so that he could not see before him. Also here he in a great measure lost his senses, so that he could neither remember nor orderly talk of any of those sweet refreshments that he had met with in the way of his pilgrimage. But all the words that he spoke still tended to discover that he had horror of mind, and heart-fears that he should die in that river, and never obtain entrance in at the gate

[@] Here also, as they that stood by perceived, he was much in the troublesome thoughts of the sins that he had committed, both since and before he began to be a pilgrim. It was also observed that he was troubled with apparitions of hobgoblins and evil spirits; for ever and anon he would intimate so much by words.

[@] Hopeful therefore here had much ado to keep his brother’s head above water; yea, sometimes he would be quite gone down, and then, ere a while, he would rise up again half dead. Hopeful did also endeavor to comfort him, saying,

[71] Brother, I see the gate, and men standing by to receive us;

[1] It is you, it is you they wait for; for you have been hopeful ever since I knew you.

[71] And so have you. 

[1] Ah, brother, surely if I was right he would now arise to help me; but for my sins he hath brought me into the snare, and hath left me.

[71] My brother, you have quite forgot the text where it is said of the wicked,
&gt; &lt;&lt;book &quot;Psalm 73:4-5 KJV&quot;&gt;&gt;
These troubles and distresses that you go through in these waters, are no sign that God hath forsaken you; but are sent to try you, whether you will call to mind that which heretofore you have received of his goodness, and live upon him in your distresses.

[@] Then I saw in my dream, that Christian was in a muse a while. To whom also Hopeful added these words,

[71] Be of good cheer, Jesus Christ maketh thee whole.

[@] And with that Christian brake out with a loud voice,

[1] Oh, I see him again; and he tells me,
&gt; &lt;&lt;book &quot;Isaiah 43:2 KJV&quot;&gt;&gt;
[@] Then they both took courage, and the enemy was after that as still as a stone, until they were gone over. Christian, therefore, presently found ground to stand upon, and so it followed that the rest of the river was but shallow.

[@] Thus they got over.

[@] Now, upon the bank of the river, on the other side, they saw the two shining men again, who there waited for them. Wherefore, being come out of the river, they saluted them, saying,

[λ] We are ministering spirits, sent forth to minister for those that shall be the heirs of salvation. 

[@] Thus they went along towards [[the gate|10-GA-1-71]]. </tw-passagedata><tw-passagedata pid="460" name="Psalm 42:7 KJV" tags="bible prayer" position="1675,6175" size="100,100">Deep calleth unto deep at the noise of thy waterspouts: all thy waves and thy billows are gone over me.</tw-passagedata><tw-passagedata pid="461" name="Psalm 116:3 KJV" tags="bible prayer" position="1775,6175" size="100,100">The sorrows of death compassed me, and the pains of hell gat hold upon me: I found trouble and sorrow.</tw-passagedata><tw-passagedata pid="462" name="Exodus 3:8 KJV" tags="bible promise" position="1875,6175" size="100,100">And I am come down to deliver them out of the hand of the Egyptians, and to bring them up out of that land unto a good land and a large, unto a land flowing with milk and honey; unto the place of the Canaanites, and the Hittites, and the Amorites, and the Perizzites, and the Hivites, and the Jebusites.</tw-passagedata><tw-passagedata pid="463" name="Psalm 73:4-5 KJV" tags="bible" position="1975,6175" size="100,100">For there are no bands in their death: but their strength is firm. They are not in trouble as other men; neither are they plagued like other men.</tw-passagedata><tw-passagedata pid="464" name="Isaiah 43:2 KJV" tags="bible promise" position="1075,6275" size="100,100">When thou passest through the waters, I will be with thee; and through the rivers, they shall not overflow thee: when thou walkest through the fire, thou shalt not be burned; neither shall the flame kindle upon thee.</tw-passagedata><tw-passagedata pid="465" name="10-GA-1-71" tags="moment city_of_Zion" position="925,6075" size="100,100">[@] Now you must note, that the city stood upon a mighty hill; but the pilgrims went up that hill with ease, because they had these two men to lead them up by the arms: they had likewise left their mortal garments behind them in the river; for though they went in with them, they came out without them.

[@] They therefore went up here with much agility and speed, though the foundation upon which the city was framed was higher than the clouds; they therefore went up through the region of the air, sweetly talking as they went, being comforted because they safely got over the river, and had such glorious companions to attend them.

[@] The talk that they had with the shining ones was about the glory of the place; who told them that the beauty and glory of it was inexpressible. There, said they, is
&gt; __Mount Sion__ (Hebrews 12:22-24), the heavenly Jerusalem, the innumerable company of angels, and the spirits of just men made perfect.
[λ] You are going now, said they, to the paradise of God, wherein you shall see the __tree of life__ (Revelation 2:7), and eat of the never-fading fruits thereof: and when you come there you shall have white robes given you, and your walk and talk shall be every day __with the King__ (Revelation 3:4-5), even all the days of eternity.

[λ] There you shall not see again such things as you saw when you were in the lower region upon earth; to wit, sorrow, sickness, affliction, and death;
&gt; __For the former things are passed away.__ (Revelation 21:4)
[λ] You are going now to Abraham, to Isaac, and Jacob, and to the prophets, men that God hath taken away from the evil to come, and that are now
&gt; …resting upon their beds, each one __walking in his righteousness.__ (Isaiah 57:2)
[1] and [71]  What must we do in the holy place?

[λ] You must there receive the comfort of all your toil, and have joy for all your sorrow; you must __reap what you have sown__ (Galatians 6:7-8), even the fruit of all your prayers, and tears, and sufferings for the King by the way.

[λ] In that place you must wear crowns of gold, and enjoy the perpetual sight and vision of the Holy One; for __“there you shall see him as he is.”__ (1 John 3:2)

[λ] There also you shall serve him continually with praise, with shouting and thanksgiving, whom you desired to serve in the world, though with much difficulty, because of the infirmity of your flesh.

[λ] There your eyes shall be delighted with seeing, and your ears with hearing the pleasant voice of the Mighty One.

[λ] There you shall enjoy your friends again that are gone thither before you; and there you shall with joy receive even every one that follows into the holy place after you.

[λ] There also you shall be clothed with glory and majesty, and put into an equipage fit to ride out with the King of Glory.

[λ] When he shall come with sound of trumpet in the clouds, as upon the wings of the wind, you shall __come with him__ (1 Thessalonians 4:14-17); and when he shall sit upon the __throne of judgment__ (Jude 1:14-15), you shall sit by him; yea, and when he shall pass sentence upon all the workers of iniquity, let them be angels or men, you also shall __have a voice__ (1 Corinthians 6:2-3) in that judgment, because they were his and your enemies. 

[λ] Also, when he shall again return to the city, you shall go too with sound of trumpet, and be ever with him.

[@] Now, while they were thus drawing towards the gate, behold a company of the heavenly host came out to meet them: to whom it was said by the other two shining ones, These are the men that have loved our Lord when they were in the world, and that have left all for his holy name; and he hath sent us to fetch them, and we have brought them thus far on their desired journey, that they may go in and look their Redeemer in the face with joy. Then the heavenly host gave a great shout, saying, 
&gt; __&#39;&#39;Blessed are they that are called to the marriage-supper of the Lamb.&#39;&#39;__ (Revelation 19:9)
[@] There came out also at this time to meet them several of the King’s trumpeters, clothed in white and shining raiment, who, with melodious noises and loud, made even the heavens to echo with their sound. These trumpeters saluted Christian and his fellow with ten thousand welcomes from the world; and this they did with shouting and sound of trumpet.

[@] This done, they compassed them round on every side; some went before, some behind, and some on the right hand, and some on the left, (as it were to guard them through the upper regions,) continually sounding as they went, with melodious noise, in notes on high; so that the very sight was to them that could behold it as if heaven itself was come down to meet them.

[@] Thus, therefore, they walked on together; and, as they walked, ever and anon these trumpeters, even with joyful sound, would, by mixing their music with looks and gestures, still signify to Christian and his brother how welcome they were into their company, and with what gladness they came to meet them.

[@] And now were these two men, as it were, in heaven, before they came to it, being swallowed up with the sight of angels, and with hearing of their melodious notes. Here also they had the city itself in view; and they thought they heard all the bells therein to ring, to welcome them thereto.

[@] But, above all, the warm and joyful thoughts that they had about their own dwelling there with such company, and that for ever and ever; oh, by what tongue or pen can their glorious joy be expressed!

[@] Thus they came up to the gate.

[@] Now when they were come up to the gate, there was written over it, in letters of gold,
&gt;  &lt;span class=&quot;gold&quot;&gt;&lt;&lt;book &quot;Revelation 22:14&quot;&gt;&gt;&lt;/span&gt;

[@] Then I saw in my dream, that the shining men bid them call at the gate: the which when they did, some from above looked over the gate, to wit, Enoch, Moses, and Elijah, etc., to whom it was said,
&gt; These pilgrims are come from the City of Destruction, for the love that they bear to the King of this place;
[@] …and then the pilgrims gave in unto them each man his certificate, which they had received in the beginning: those therefore were carried in unto the King, who, when he had read them, said,

[Ω] Where are the men?

[@] To whom it was answered, 
&gt; They are standing without the gate.
The King then commanded,

[Ω] &lt;&lt;book &quot;Isaiah 26:2 KJV&quot;&gt;&gt;

[@] Now I saw in my dream, that these two men went in at the gate; and lo, as they entered, they were transfigured; and they had raiment put on that shone like gold. There were also that met them with harps and crowns, and gave them to them; the harps to praise withal, and the crowns in token of honor.

[@] Then I heard in my dream, that all the bells in the city rang again for joy, and that it was said unto them, 
&gt; __Enter ye into the joy of your lord.__ (Matthew 25:21)
[@] I also heard the men themselves, that they sang with a loud voice, saying,
&gt; __&#39;&#39;//♫ …blessing, and honor, and glory, and power, be unto him that sitteth upon the throne, and unto the lamb, for ever and ever.♬//&#39;&#39;__  (Revelation 5:13) 
[@] Now, just as the gates were opened to let in the men, I looked in after them, and behold the city shone like the sun; the streets also were paved with gold; and in them walked many men, with crowns on their heads, palms in their hands, and golden harps, to sing praises withal.

[@] There were also of them that had wings, and they answered one another without intermission, saying, 
&gt; __&#39;&#39;Holy, holy, holy is the Lord.&#39;&#39;__ (Revelation 4:8)
[@] And after that they shut up the gates; which, when I had seen, I wished myself among them.

[@] Now, while I was gazing upon all these things, I turned my head to look back, and saw Ignorance come up to [[the river side…|10-RI-91-102-103]]</tw-passagedata><tw-passagedata pid="466" name="Hebrews 12:22-24 KJV" tags="bible promise" position="1175,6275" size="100,100">But ye are come unto mount Sion, and unto the city of the living God, the heavenly Jerusalem, and to an innumerable company of angels, To the general assembly and church of the firstborn, which are written in heaven, and to God the Judge of all, and to the spirits of just men made perfect, And to Jesus the mediator of the new covenant, and to the blood of sprinkling, that speaketh better things than that of Abel.</tw-passagedata><tw-passagedata pid="467" name="Revelation 2:7 KJV" tags="bible promise" position="1275,6275" size="100,100">He that hath an ear, let him hear what the Spirit saith unto the churches; To him that overcometh will I give to eat of the tree of life, which is in the midst of the paradise of God.</tw-passagedata><tw-passagedata pid="468" name="Revelation 3:4-5 KJV" tags="bible promise" position="1375,6275" size="100,100">Thou hast a few names even in Sardis which have not defiled their garments; and they shall walk with me in white: for they are worthy. He that overcometh, the same shall be clothed in white raiment; and I will not blot out his name out of the book of life, but I will confess his name before my Father, and before his angels.</tw-passagedata><tw-passagedata pid="469" name="Isaiah 57:2 KJV" tags="bible promise" position="1475,6275" size="100,100">He shall enter into peace: they shall rest in their beds, each one walking in his uprightness.</tw-passagedata><tw-passagedata pid="470" name="Galatians 6:7-8 KJV" tags="bible promise" position="1575,6275" size="100,100">Be not deceived; God is not mocked: for whatsoever a man soweth, that shall he also reap. For he that soweth to his flesh shall of the flesh reap corruption; but he that soweth to the Spirit shall of the Spirit reap life everlasting.</tw-passagedata><tw-passagedata pid="471" name="1 John 3:2 KJV" tags="bible promise" position="1675,6275" size="100,100">Beloved, now are we the sons of God, and it doth not yet appear what we shall be: but we know that, when he shall appear, we shall be like him; for we shall see him as he is.</tw-passagedata><tw-passagedata pid="472" name="1 Thessalonians 4:14-17 KJV" tags="bible promise" position="1775,6275" size="100,100">For if we believe that Jesus died and rose again, even so them also which sleep in Jesus will God bring with him. For this we say unto you by the word of the Lord, that we which are alive and remain unto the coming of the Lord shall not prevent them which are asleep. For the Lord himself shall descend from heaven with a shout, with the voice of the archangel, and with the trump of God: and the dead in Christ shall rise first: Then we which are alive and remain shall be caught up together with them in the clouds, to meet the Lord in the air: and so shall we ever be with the Lord.</tw-passagedata><tw-passagedata pid="473" name="Jude 1:14-15 KJV" tags="bible" position="1875,6275" size="100,100">And Enoch also, the seventh from Adam, prophesied of these, saying, Behold, the Lord cometh with ten thousands of his saints, To execute judgment upon all, and to convince all that are ungodly among them of all their ungodly deeds which they have ungodly committed, and of all their hard speeches which ungodly sinners have spoken against him.</tw-passagedata><tw-passagedata pid="474" name="1 Corinthians 6:2-3 KJV" tags="bible" position="1975,6275" size="100,100">Do ye not know that the saints shall judge the world? and if the world shall be judged by you, are ye unworthy to judge the smallest matters? Know ye not that we shall judge angels? how much more things that pertain to this life?</tw-passagedata><tw-passagedata pid="475" name="Revelation 19:9 KJV" tags="bible promise" position="1075,6375" size="100,100">And he saith unto me, Write, Blessed are they which are called unto the marriage supper of the Lamb. And he saith unto me, These are the true sayings of God.</tw-passagedata><tw-passagedata pid="476" name="Revelation 22:14 KJV" tags="bible promise" position="1175,6375" size="100,100">Blessed are they that do his commandments, that they may have right to the tree of life, and may enter in through the gates into the city.</tw-passagedata><tw-passagedata pid="477" name="Isaiah 26:2 KJV" tags="bible promise" position="1275,6375" size="100,100">Open ye the gates, that the righteous nation which keepeth the truth may enter in.</tw-passagedata><tw-passagedata pid="478" name="Matthew 25:21 KJV" tags="bible promise" position="1375,6375" size="100,100">His lord said unto him, Well done, thou good and faithful servant: thou hast been faithful over a few things, I will make thee ruler over many things: enter thou into the joy of thy lord.</tw-passagedata><tw-passagedata pid="479" name="Revelation 5:13 KJV" tags="bible" position="1475,6375" size="100,100">And every creature which is in heaven, and on the earth, and under the earth, and such as are in the sea, and all that are in them, heard I saying, Blessing, and honour, and glory, and power, be unto him that sitteth upon the throne, and unto the Lamb for ever and ever.</tw-passagedata><tw-passagedata pid="480" name="Revelation 4:8 KJV" tags="bible" position="1575,6375" size="100,100">And the four beasts had each of them six wings about him; and they were full of eyes within: and they rest not day and night, saying, Holy, holy, holy, Lord God Almighty, which was, and is, and is to come.</tw-passagedata><tw-passagedata pid="481" name="10-RI-91-102-103" tags="moment city_of_Zion" position="925,6200" size="100,100">[@] …but he soon got over, and that without half the difficulty which the other two men met with.

[@] For it happened that there was then in that place one Vain-Hope, a ferryman, that with his boat helped him over; so he, as the other I saw, did ascend the hill, to come up to the gate; only he came alone, neither did any man meet him with the least encouragement.

[@] When he was come up to the gate, he looked up to the writing that was above, and then began to knock, supposing that entrance should have been quickly administered to him; but he was asked by the men that looked over the top of the gate,

[103] Whence come you? And what would you have?

[91] I have ate and drank in the presence of the King, and he has taught in our streets.

[@] Then they asked him for his certificate, that they might go in and show it to the King: so he fumbled in his bosom for one, and found none. Then said they,

[103] Have you none?

[91] (…)

[@] …but the man answered never a word. So they told the King, but he would not come down to see him, but commanded the two shining ones, that conducted Christian and Hopeful to the city, to go out and take Ignorance, and bind him hand and foot, and [[have him away.|10-BY-91]]</tw-passagedata><tw-passagedata pid="482" name="00-author-message" tags="moment" position="1375,150" size="100,100">&lt;h2&gt;[@]&lt;/h2&gt; Now, reader, I have told my dream to thee,

See if thou canst interpret it to me,
Or to thyself, or neighbor: but take heed
Of misinterpreting; for that, instead
Of doing good, will but thyself abuse:
By misinterpreting, evil ensues.

Take heed, also, that thou be not extreme
In playing with the outside of my dream;
Nor let my figure or similitude
Put thee into a laughter, or a feud.

Leave this for boys and fools; but as for thee,
Do thou the substance of my matter see.
Put by the curtains, look within my veil,
Turn up my metaphors, and do not fail.

There, if thou seekest them, such things thou’lt find
As will be helpful to an honest mind.

What of my dross thou findest there, be bold
To throw away, but yet preserve the gold.
What if my gold be wrapped up in ore?
None throw away the apple for the core:

But if thou shalt cast all away as vain,
I know not but ‘t will make me [[dream again|00-dream]].</tw-passagedata><tw-passagedata pid="483" name="00-pilgrimage" tags="" position="1175,150" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;if ndef $rename_place or $rename_place eq &quot;*&quot;&gt;&gt;
	&lt;&lt;set $rename_place to $pilgrim[$pov].last()&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;div class=&quot;header&quot;&gt;
&lt;&lt;do tag &quot;rename&quot;&gt;&gt;
	&lt;label&gt;Rename [&lt;&lt;cycle &quot;$rename_place&quot; autoselect&gt;&gt;
		&lt;&lt;optionsfrom $pilgrim[$pov]&gt;&gt;
	&lt;&lt;/cycle&gt;&gt;] as&lt;/label&gt;&lt;br&gt;
	&lt;&lt;do tag &quot;namebox&quot;&gt;&gt;
		&lt;&lt;set _input to &quot;&quot;&gt;&gt;
		&lt;&lt;if def $rename_place and $placeNames.hasOwnProperty($rename_place)&gt;&gt;
			&lt;&lt;set _input to $placeNames[$rename_place]&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;textbox &quot;_input&quot; _input autofocus&gt;&gt;
		&lt;&lt;button &quot;&quot;&gt;&gt;
			&lt;&lt;redo &quot;progress&quot;&gt;&gt;
		&lt;&lt;/button&gt;&gt;
		&lt;&lt;button &quot;&quot;&gt;&gt;
			&lt;&lt;set _unname_place to $rename_place&gt;&gt;
			&lt;&lt;redo &quot;progress&quot;&gt;&gt;
			&lt;&lt;redo &quot;namebox&quot;&gt;&gt;
		&lt;&lt;/button&gt;&gt;
	&lt;&lt;/do&gt;&gt;
&lt;&lt;/do&gt;&gt;
&lt;/div&gt;
&lt;&lt;do tag &quot;progress&quot;&gt;&gt;
	&lt;&lt;set _input_name to _input.substr(0, setup.placeNameMax)&gt;&gt;
	&lt;&lt;set _input_name to _input_name.replace(setup.unsafeChars, &quot;&quot;)&gt;&gt;
	&lt;&lt;set _input_name to _input_name.replaceAll(&quot;‑&quot;, &quot;-&quot;)&gt;&gt;
	&lt;&lt;set _input_name to _input_name.trim()&gt;&gt;
	&lt;&lt;if def _unname_place and $placeNames.hasOwnProperty(_unname_place)&gt;&gt;
		&lt;&lt;run delete $placeNames[_unname_place]&gt;&gt;
		&lt;&lt;run memorize(&quot;placeNames&quot;, $placeNames)&gt;&gt;
		&lt;&lt;unset _unname_place&gt;&gt;
	&lt;&lt;elseif _input_name.length gt 0 and setup.places.includes($rename_place)&gt;&gt;
		&lt;&lt;set $placeNames[$rename_place] to _input_name&gt;&gt;
		&lt;&lt;run memorize(&quot;placeNames&quot;, $placeNames)&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;for _stage range setup.stage&gt;&gt;
	&lt;&lt;if _stage.includesAny($pilgrim[$pov])&gt;&gt;
&lt;section id=&quot;stage&quot;&gt;
	&lt;ul class=&quot;progress-bar&quot;&gt;
	&lt;&lt;set _found to false&gt;&gt;
	&lt;&lt;for _place range _stage&gt;&gt;
		&lt;&lt;set _class to []&gt;&gt;
		&lt;&lt;set _visited to false&gt;&gt;
		&lt;&lt;if $pilgrim[$pov].includes(_place)&gt;&gt;
			&lt;&lt;set _visited to true&gt;&gt;
			&lt;&lt;if _place eq $therein&gt;&gt;
				&lt;&lt;run _class.push(&quot;is-active&quot;)&gt;&gt;
			&lt;&lt;else&gt;&gt;
				&lt;&lt;run _class.push(&quot;is-complete&quot;)&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;if _place eq $rename_place&gt;&gt;
				&lt;&lt;run _class.push(&quot;is-hovered&quot;)&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;if _place eq $pilgrim[$pov].last()&gt;&gt;
				&lt;&lt;set _found to true&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;elseif _found eq false&gt;&gt;
			&lt;&lt;run _class.push(&quot;is-skip&quot;)&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;set _classes to _class.join(&quot; &quot;)&gt;&gt;
		&lt;li @class=&quot;_classes&quot;&gt;
			&lt;&lt;set _text to &quot;&quot;&gt;&gt;
			&lt;&lt;if $placeNames.hasOwnProperty(_place)&gt;&gt;
				&lt;&lt;set _text to $placeNames[_place]&gt;&gt;
			&lt;&lt;else&gt;&gt;
				&lt;&lt;set _text to _place.replaceAll(&quot;_&quot;, &quot; &quot;)&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;span&gt;&lt;&lt;- _text&gt;&gt;&lt;/span&gt;
		&lt;/li&gt;
	&lt;&lt;/for&gt;&gt;
	&lt;/ul&gt;
&lt;/section&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;/for&gt;&gt;
&lt;&lt;/do&gt;&gt;
&lt;&lt;done&gt;&gt;
	&lt;&lt;run $(&#39;.macro-cycle&#39;).on(&#39;click&#39;, () =&gt; $(document).trigger({
		type: &#39;:redo&#39;,
		detail: { tags : [ &#39;namebox&#39;, &#39;progress&#39; ] }
		}))&gt;&gt;
&lt;&lt;/done&gt;&gt;
&lt;br&gt;
&lt;&lt;back &quot;Go Back&quot; $previous_moment&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="484" name="03-FO-1-34-35" tags="moment crossroads_at_foothill" position="800,1525" size="100,100">[@] I beheld then, that they came to the foot of the hill Difficulty at the bottom of which there was a spring. 

[@] There were also in the same place two other ways besides that which came straight from the gate: one turned to the left hand, and the other to the right, at the bottom of the hill; but the narrow way lay right up the hill, and the name of the going up the side of the hill is called Difficulty. 

[@] Christian now went to the __spring__ (Isaiah 49:10), and drank thereof to refresh himself, and then began to go up the hill, saying, 

[1]
&gt; //♫ &lt;&lt;journal &quot;Spring at foot of Difficulty&quot;&gt;&gt;♫//

[@] The other two also came to the foot of the hill. But when they saw that the hill was steep and high, and that there were two other ways to go; and supposing also that these two ways might meet again with that up which Christian went, on the other side of the hill; therefore they were resolved to go in those ways. 

[@] Now the name of one of those ways was Danger, and the name of the other Destruction. So the one took the way which is called Danger, which led him into a great wood; and the other took directly up the way to Destruction, which led him into a wide field, full of dark mountains, where he stumbled and fell, and rose no more.

[@] I looked then after Christian, to see him go [[up the hill|03-AR-1]], where I perceived he fell from running to going, and from going to clambering upon his hands and his knees, because of the steepness of the place.</tw-passagedata><tw-passagedata pid="485" name="widget-journal" tags="widget" position="175,400" size="100,100">&lt;&lt;widget &quot;journal&quot;&gt;&gt;\
	&lt;&lt;if def _args[0] and _args[0].length gt 0 and Story.has(_args[0]) and tags(_args[0]).includes(&quot;journal&quot;)&gt;&gt;\
		&lt;&lt;set $journal to $journal.concatUnique(_args[0])&gt;&gt;\
		&lt;pre&gt;&lt;&lt;include _args[0]&gt;&gt;&lt;/pre&gt;\
	&lt;&lt;/if&gt;&gt;\
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="486" name="StoryBanner" tags="built-in" position="50,25" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;do tag &quot;ui-bar-fill&quot;&gt;&gt;
	&lt;&lt;set _empty to Math.round(100 * ($seenVerses.length / setup.totalVerses)) + $journal.length&gt;&gt;
	&lt;&lt;set _empty to &quot;height: &quot;+ _empty + &quot;vh;&quot;&gt;&gt;
	&lt;div class=&quot;ui-waters&quot;&gt;
		&lt;span class=&quot;empty&quot; @style=&quot;_empty&quot;&gt;&lt;/span&gt;
		&lt;&lt;include &quot;ui-waves&quot;&gt;&gt;
	&lt;/div&gt;
&lt;&lt;/do&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="487" name="ui-waves" tags="" position="50,525" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;svg class=&quot;waves&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; xlink=&quot;http://www.w3.org/1999/xlink&quot; viewBox=&quot;0 24 150 28&quot; preserveAspectRatio=&quot;none&quot; shape-rendering=&quot;auto&quot;&gt;
&lt;defs&gt;
&lt;path id=&quot;gentle-wave&quot; d=&quot;M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z&quot;&gt;&lt;/path&gt;
&lt;/defs&gt;
&lt;g class=&quot;parallax&quot;&gt;
&lt;use xlink:href=&quot;#gentle-wave&quot; x=&quot;48&quot; y=&quot;0&quot; fill=&quot;currentColor&quot; fill-opacity=&quot;0.9&quot;&gt;&lt;/use&gt;
&lt;use xlink:href=&quot;#gentle-wave&quot; x=&quot;48&quot; y=&quot;3&quot; fill=&quot;currentColor&quot; fill-opacity=&quot;0.6&quot;&gt;&lt;/use&gt;
&lt;use xlink:href=&quot;#gentle-wave&quot; x=&quot;48&quot; y=&quot;5&quot; fill=&quot;currentColor&quot; fill-opacity=&quot;0.3&quot;&gt;&lt;/use&gt;
&lt;use xlink:href=&quot;#gentle-wave&quot; x=&quot;48&quot; y=&quot;7&quot; fill=&quot;currentColor&quot;&gt;&lt;/use&gt;
&lt;/g&gt;
&lt;/svg&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="488" name="At the Wicket-gate" tags="journal" position="300,1000" size="100,100">May I now enter here? Will he within
   Open to sorry me, though I have been
An undeserving rebel? Then shall I
   Not fail to sing his lasting praise on high.</tw-passagedata><tw-passagedata pid="489" name="O good Interpreter" tags="journal" position="300,1325" size="100,100">Here I have seen things rare and profitable,
   Things pleasant, dreadful, things to make me stable
In what I have begun to take in hand:
   Then let me think on them, and understand
Wherefore they showed me were, and let me be
   Thankful, O good Interpreter, to thee.</tw-passagedata><tw-passagedata pid="490" name="Blest cross! blest sepulchre!" tags="journal" position="200,1525" size="100,100">Thus far did I come laden with my sin,
   Nor could aught ease the grief that I was in,
Till I came hither. What a place is this!
   Must here be the beginning of my bliss?

Must here the burden fall from off my back?
   Must here the strings that bound it to me crack?
Blest cross! blest sepulchre! blest rather be
   The Man that there was put to shame for me!</tw-passagedata><tw-passagedata pid="491" name="Spring at foot of Difficulty" tags="journal" position="300,1525" size="100,100">The hill, though high, I covet to ascend;
   The difficulty will not me offend;
   For I perceive the way to life lies here:
Come, pluck up heart, let’s neither faint nor fear.
   Better, though difficult, the right way to go,
   Than wrong, though easy, where the end is woe.</tw-passagedata><tw-passagedata pid="492" name="Peace in Difficulty" tags="journal" position="300,1650" size="100,100">Where am I now? Is this the love and care
   Of Jesus, for the men that pilgrims are,
Thus to provide that I should be forgiven,
  And dwell already the next door to heaven!

</tw-passagedata><tw-passagedata pid="493" name="Difficulty in hindsight" tags="journal" position="100,2050" size="100,100">Whilst Christian is among his godly friends,
   Their golden mouths make him sufficient mends
For all his griefs; and when they let him go,
   He’s clad with northern steel from top to toe.</tw-passagedata><tw-passagedata pid="494" name="Victory in Humiliation" tags="journal" position="200,2050" size="100,100">Great Beelzebub, the captain of this fiend,
   Designed my ruin; therefore to this end
He sent him harness’d out; and he, with rage
   That hellish was, did fiercely me engage:

But blessed Michael helped me, and I,
   By dint of sword, did quickly make him fly:
Therefore to Him let me give lasting praise,
   And thank and bless his holy name always.</tw-passagedata><tw-passagedata pid="495" name="O world of wonders" tags="journal" position="300,2050" size="100,100">O world of wonders, (I can say no less,)
   That I should be preserved in that distress
That I have met with here! O blessed be
   That hand that from it hath delivered me!

Dangers in darkness, devils, hell, and sin,
   Did compass me, while I this vale was in;
Yea, snares, and pits, and traps, and nets did lie
   My path about, that worthless, silly I
Might have been catch’d, entangled, and cast down;
   But since I live, let Jesus wear the crown.</tw-passagedata><tw-passagedata pid="496" name="Trials of Shame" tags="journal" position="300,2525" size="100,100">The trials that those men do meet withal,
   That are obedient to the heavenly call,
Are manifold, and suited to the flesh,
   And come, and come, and come again afresh;
   
That now, or some time else, we by them may
   Be taken, overcome, and cast away.
O let the pilgrims, let the pilgrims then,
   Be vigilant, and quit themselves like men.</tw-passagedata><tw-passagedata pid="497" name="Heart-work" tags="journal" position="300,2700" size="100,100">How Talkative at first lifts up his plumes!
How bravely doth he speak! How he presumes
To drive down all before him! But so soon
As Faithful talks of heart-work, like the moon
That’s past the full, into the wane he goes;
And so will all but he that heart-work know.</tw-passagedata><tw-passagedata pid="498" name="Eulogy to Faithful" tags="journal" position="300,3575" size="100,100">Well, Faithful, thou hast faithfully profest
   Unto thy Lord, with whom thou shalt be blest,
When faithless ones, with all their vain delights,
   Are crying out under their hellish plights:
Sing, Faithful, sing, and let thy name survive;
   For though they killed thee, thou art yet alive.</tw-passagedata><tw-passagedata pid="499" name="Lucre hill" tags="journal" position="300,4000" size="100,100">By-ends and silver Demas both agree;
   One calls, the other runs, that he may be
A sharer in his lucre: so these two
   Take up in this world, and no farther go.</tw-passagedata><tw-passagedata pid="500" name="River of God" tags="journal" position="300,4125" size="100,100">Behold ye, how these Crystal Streams do glide,
To comfort pilgrims by the highway-side.
The meadows green, besides their fragrant smell,
Yield dainties for them; And he that can tell
What pleasant fruit, yea, leaves these trees do yield,
Will soon sell all, that he may buy this field.</tw-passagedata><tw-passagedata pid="501" name="Doubting meadow" tags="journal" position="300,4300" size="100,100">Out of the way we went, and then we found
   What ‘twas to tread upon forbidden ground:
And let them that come after have a care,
   Lest heedlessness makes them as we to fare;
Lest they, for trespassing, his prisoners are,
   Whose castle’s Doubting, and whose name’s Despair.</tw-passagedata><tw-passagedata pid="502" name="Clear hill" tags="journal" position="300,4825" size="100,100">Thus by the shepherds secrets are reveal’d,
   Which from all other men are kept concealed:
Come to the shepherds then, if you would see
    Things deep, things hid, and that mysterious be.</tw-passagedata><tw-passagedata pid="503" name="Ignorance I" tags="journal" position="300,5125" size="100,100">Let Ignorance a little while now muse
   On what is said, and let him not refuse
Good counsel to embrace, lest he remain
   Still ignorant of what’s the chiefest gain.
God saith, those that no understanding have,
   (Although he made them,) them he will not save.</tw-passagedata><tw-passagedata pid="504" name="Poor Little-Faith" tags="journal" position="300,5250" size="100,100">Poor Little-Faith! hast been among the thieves?
   Wast robb’d? Remember this, whoso believes,
And get more faith; then shall you victors be
   Over ten thousand-else scarce over three.</tw-passagedata><tw-passagedata pid="505" name="Pride of life" tags="journal" position="300,5375" size="100,100">Come hither, you that walk along the way,
   See how the pilgrims fare that go astray:
They catched are in an entangling net,
   Cause they good counsel lightly did forget:
’Tis true, they rescued were; but yet, you see,
   They’re scouged to boot; let this your caution be.</tw-passagedata><tw-passagedata pid="506" name="Enchanted" tags="journal" position="300,5500" size="100,100">When saints do sleepy grow, let them come hither,
   And hear how these two pilgrims talk together;
Yea, let them learn of them in any wise,
   Thus to keep open their drowsy, slumb’ring eyes.
Saints’ fellowship, if it be managed well,
   Keeps them awake, and that in spite of hell.</tw-passagedata><tw-passagedata pid="507" name="Hopeful&#39;s prayer" tags="journal" position="200,5650" size="100,100">God be merciful to me a sinner, and make me to know and believe in Jesus Christ; for I see, that if his righteousness had not been, or I have not faith in that righteousness, I am utterly cast away.

Lord, I have heard that thou art a merciful God, and hast ordained that thy Son Jesus Christ should be the Saviour of the world; and moreover, that thou art willing to bestow him upon such a poor sinner as I am-and I am a sinner indeed.

Lord, take therefore this opportunity, and magnify thy grace in the salvation of my soul, through thy Son Jesus Christ. Amen. </tw-passagedata><tw-passagedata pid="508" name="Ignorance II" tags="journal" position="300,5650" size="100,100">Well, Ignorance, wilt thou yet foolish be,
   To slight good counsel, ten times given thee?
And if thou yet refuse it, thou shalt know,
   Ere long, the evil of thy doing so.

Remember, man, in time: stoop, do not fear:
   Good counsel, taken well, saves; therefore hear.
But if thou yet shalt slight it, thou wilt be
   The loser, Ignorance, I’ll warrant thee.</tw-passagedata><tw-passagedata pid="509" name="10-BY-91" tags="moment by-way_to_hell" position="800,6200" size="100,100">[@] Then they took him up, and carried him through the air to the door that I saw in the side of the hill, and put him in there.

[@] Then I saw that there was a way to hell, even from the gate of heaven, as well as from the City of Destruction.

[@] So I awoke, and behold it was [[a dream.|00-author-message-1]] </tw-passagedata><tw-passagedata pid="510" name="widget-locate" tags="widget" position="50,400" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;widget &quot;locate&quot;&gt;&gt;
	&lt;&lt;if def _args[0] and $pilgrim.hasOwnProperty(_args[0])&gt;&gt;
		&lt;&lt;set _npc to _args[0]&gt;&gt;
		&lt;&lt;set _tags to clone(tags())&gt;&gt;
		&lt;&lt;if _tags.includes(&quot;moment&quot;) and _tags.length gt 1&gt;&gt;
			&lt;&lt;run _tags.deleteAll(&quot;moment&quot;)&gt;&gt;
			&lt;&lt;set _place to _tags.first()&gt;&gt;
			&lt;&lt;if $therein is &quot;&quot; or setup.places.indexOf(_place) gte setup.places.indexOf($therein)&gt;&gt;
				&lt;&lt;set $pilgrim[_npc] to $pilgrim[_npc].concatUnique(_place)&gt;&gt;
			&lt;&lt;else&gt;&gt;
				&lt;&lt;set _progress to []&gt;&gt;
				&lt;&lt;for _p range setup.places&gt;&gt;
					&lt;&lt;run _progress.push(_p)&gt;&gt;
					&lt;&lt;if _p is _place&gt;&gt;
						&lt;&lt;break&gt;&gt;
					&lt;&lt;/if&gt;&gt;
				&lt;&lt;/for&gt;&gt;
				&lt;&lt;run $pilgrim[_npc] to _progress.concatUnique($pilgrim[_npc])&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;set $therein to _place&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="511" name="00-journal" tags="" position="1050,150" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;div class=&quot;header&quot;&gt;&lt;/div&gt;
&lt;&lt;do tag &quot;journal&quot;&gt;&gt;
	&lt;&lt;if $journal.length is 0&gt;&gt;
		&lt;span class=&quot;info&quot;&gt;&lt;q&gt;God speaketh to him; and happy is he&lt;br&gt;
That finds the light and grace that in them be.&lt;/q&gt; &lt;&lt;include &quot;StoryAuthor&quot;&gt;&gt;&lt;/span&gt;&lt;br&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;set _entries to $journal&gt;&gt;
		&lt;&lt;if _entries.length gt 0&gt;&gt;
			&lt;&lt;if ndef $select_entry or $select_entry eq &quot;*&quot;&gt;&gt;
				&lt;&lt;set $select_entry to _entries.last()&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;fieldset class=&quot;journal-entries&quot;&gt;
			&lt;legend&gt;
				&lt;&lt;cycle &quot;$select_entry&quot; autoselect&gt;&gt;
					&lt;&lt;optionsfrom _entries&gt;&gt;				
				&lt;&lt;/cycle&gt;&gt;
			&lt;/legend&gt;
			&lt;pre id=&quot;selected-entry&quot;&gt;&lt;&lt;include $select_entry&gt;&gt;&lt;/pre&gt;
		&lt;/fieldset&gt;
		&lt;div class=&quot;journal-footnote&quot;&gt;
		&lt;&lt;do tag &quot;cycle&quot;&gt;&gt;
			&lt;&lt;run setPageElement(&quot;selected-entry&quot;, $select_entry)&gt;&gt;
			&lt;&lt;set _info to (_entries.indexOf($select_entry)+1) +&quot; / &quot;+ _entries.length&gt;&gt;

			&lt;small class=&quot;info&quot;&gt;
				&lt;&lt;= _info&gt;&gt;
			&lt;/small&gt;
		&lt;&lt;/do&gt;&gt;
		&lt;/div&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;done&gt;&gt;
		&lt;&lt;run $(&#39;.macro-cycle&#39;).on(&#39;click&#39;, () =&gt; $(document).trigger({
			type: &#39;:redo&#39;,
			detail: { tags : [ &#39;cycle&#39; ] }
			}))&gt;&gt;
	&lt;&lt;/done&gt;&gt;
&lt;&lt;/do&gt;&gt;
&lt;br&gt;
&lt;&lt;back &quot;Go Back&quot; $previous_moment&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="512" name="00-credits" tags="" position="425,150" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;center&gt;
&lt;h5 class=&quot;subject&quot;&gt;John Bunyan&lt;br&gt;
&lt;small&gt;Author&lt;/small&gt;&lt;/h5&gt;

&lt;h5 class=&quot;subject&quot;&gt;Christian Classics Ethereal Library&lt;br&gt;
Logos Research Systems, Inc&lt;br&gt;
&lt;small&gt;Source text&lt;/small&gt;&lt;/h5&gt;

&lt;h5 class=&quot;subject&quot;&gt;Bible Gateway&lt;br&gt;
&lt;small&gt;Scripture (King James Version)&lt;/small&gt;&lt;/h5&gt;

&lt;h5 class=&quot;subject&quot;&gt;Type Help by William Rous&lt;br&gt;
&lt;small&gt;Inspiration&lt;/small&gt;&lt;/h5&gt;

&lt;h5 class=&quot;subject&quot;&gt;Progress Bar by Mike Aparicio (@peruvianidol)&lt;br&gt;
Simple CSS Waves by Goodkatz (@goodkatz)&lt;br&gt;
Octocat Sprite Swimming in the Ocean with CSS by Cody Pearce (@codypearce)&lt;br&gt;
&lt;small&gt;CSS effects&lt;/small&gt;&lt;/h5&gt;

&lt;h5 class=&quot;subject&quot;&gt;SugarCube by Thomas M. Edwards (@thomasmedwards)&lt;br&gt;
&lt;small&gt;Story format&lt;/small&gt;&lt;/h5&gt;


&lt;h5 class=&quot;subject&quot;&gt;Twine&lt;br&gt;
Interactive Fiction Technology Foundation&lt;br&gt;
&lt;small&gt;Game engine&lt;/small&gt;&lt;/h5&gt;

&lt;/center&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="513" name="00-author-message-1" tags="moment" position="1475,150" size="100,100">&lt;h2&gt;[@]&lt;/h2&gt; And now, before I do put up my pen,
I’ll show the profit of my book; and then
Commit both thee and it unto that hand
That pulls the strong down, and makes weak ones stand.

This book it chalketh out before thine eyes
The man that seeks the everlasting prize:

It shows you whence he comes, whither he goes,
What he leaves undone; also what he does:
It also shows you how he runs, and runs,
Till he unto the gate of glory comes.
It shows, too, who set out for life amain,
As if the lasting crown they would obtain;

Here also you may see the reason why
They lose their labor, and like fools do die.

This book will make a traveler of thee,
If by its counsel thou wilt ruled be;
It will direct thee to the Holy Land,
If thou wilt its directions understand
Yea, it will make the slothful active be;
The blind also delightful things to see.

Art thou for something rare and profitable?
Or would’st thou see a truth within a fable?
Art thou forgetful? Wouldest thou remember
From New-Year’s day to the last of December?
Then read my fancies; they will stick like burs,
And may be, to the helpless, comforters.

This book is writ in such a dialect
As may the minds of listless men affect:
It seems a novelty, and yet contains
Nothing but sound and honest gospel strains. 

&lt;h4&gt;The End&lt;/h4&gt;</tw-passagedata><tw-passagedata pid="514" name="StoryCaption" tags="built-in" position="550,25" size="100,100">&lt;&lt;include &quot;ui-bubbles&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="515" name="ui-bubbles" tags="" position="175,525" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;div class=&quot;bubbles&quot;&gt;
&lt;div class=&quot;bubble bubble--1&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;bubble bubble--2&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;bubble bubble--3&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;bubble bubble--4&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;bubble bubble--5&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;bubble bubble--6&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;bubble bubble--7&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;bubble bubble--8&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;bubble bubble--9&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;bubble bubble--10&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;bubble bubble--11&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;bubble bubble--12&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="516" name="01-dream" tags="moment" position="2525,300" size="100,100">&lt;&lt;set $pov to &quot;7&quot;&gt;&gt;[@] Courteous companions, some time since, to tell you my dream that I had of Christian the pilgrim, and of his dangerous journey towards the Celestial country, was pleasant to me and profitable to you.

[@] I told you then also what I saw concerning his wife and children, and how unwilling they were to go with him on pilgrimage; insomuch that he was forced to go on his progress without them; for he durst not run the danger of that destruction which he feared would come by staying with them in the City of Destruction: wherefore, as I then showed you, he left them and departed. 

[@] Now it hath so happened, through the multiplicity of business, that I have been much hindered and kept back from my wonted travels into those parts whence he went, and so could not, till now, obtain an opportunity to make further inquiry after those whom he left behind, that I might give you an account of them. But having had some concerns that way of late, I went down again thitherward.

[@] Now, having taken up my lodging in a wood about a mile off the place, as I slept, I [[dreamed again.|20-OU]]</tw-passagedata><tw-passagedata pid="517" name="20-OU" tags="moment" position="2650,300" size="100,100">[@] And as I was in my dream, behold, an aged gentleman came by where I lay; and, because he was to go some part of the way that I was traveling, methought I got up and went with him. 

[@] So, as we walked, and as travelers usually do, I was as if we fell into a discourse; and our talk happened to be about Christian and his travels; for thus I began with the old man:

[@] Sir, what town is that there below, that lieth on the left hand of our way? Then said Mr. Sagacity, (for that was his name,)

[©] It is the City of Destruction, a populous place, but possessed with a very ill-conditioned and idle sort of people.

[@] I thought that was that city; I went once myself through that town; and therefore know that this report you give of it is true.

[©] Too true! I wish I could speak truth in speaking better of them that dwell therein.

[@] Well, sir, then I perceive you to be a well-meaning man, and so one that takes pleasure to hear and tell of that which is good. Pray, did you never hear what happened to a man some time ago of this town, (whose name was Christian,) that went on a pilgrimage up towards the higher regions?

[©] Hear of him! Aye, and I also heard of the molestations, troubles, wars, captivities, cries, groans, frights, and fears, that he met with and had on his journey.

[©] Besides, I must tell you, all our country rings of him; there are but few houses that have heard of him and his doings, but have sought after and got the records of his pilgrimage; yea, I think I may say that his hazardous journey has got many well-wishers to his ways; for, though when he was here he was fool in every man’s mouth, yet now he is gone he is highly commended of all. For ‘tis said he lives bravely where he is: yea, many of them that are resolved never to run his hazards, yet have their mouths water at his gains.

[@] They may, well think, if they think any thing that is true, that he liveth well where he is; for he now lives at, and in the fountain of life, and has what he has without labor and sorrow, for there is no grief mixed therewith. But, pray what talk have the people about him?

[©] Talk! the people talk strangely about him: some say that he now walks __in white__ (Revelation 3:4); that he has a chain of gold about his neck; that he has a crown of gold, beset with pearls, upon his head: others say, that the shining ones, who sometimes showed themselves to him in his journey, are become his companions, and that he is as familiar with them where he is, as here one neighbor is with another.

[©] Besides, it is confidently affirmed concerning him, that the King of the place where he is has bestowed upon him already a very rich and pleasant __dwelling at court__ (Zechariah 3:7; Luke 14:14-15), and that he every day eateth and drinketh, and walketh and talketh with him, and receiveth of the smiles and favors of him that is Judge of all there.

[©] Moreover, it is expected of some, that his Prince, the Lord of that country, __will shortly come__ (Jude 1:14-15) into these parts, and will know the reason, if they can give any, why his neighbors set so little by him, and had him so much in derision, when they perceived that he would be a pilgrim.

[©] For they say, that now he is so in the affections of his Prince, that his Sovereign is so much concerned with the indignities that were cast upon Christian when he became a pilgrim, that he will look upon all __as if done unto himself__ (Luke 10:16); and no marvel, for it was for the love that he had to his Prince that he ventured as he did.

[@] I dare say, I am glad on’t; I am glad for the poor man’s sake, for that now he has rest from his labor, and for that he now reapeth the benefit of __his tears__ (Revelation 14:13; Psalm 126:5-6) with joy; and for that he has got beyond the gun-shot of his enemies, and is out of the reach of them that hate him.

[@] I also am glad for that a rumor of these things is noised abroad in this country; who can tell but that it may work some good effect on some that are left behind? But pray, sir, while it is fresh in my mind, do you hear anything of his wife and children? Poor hearts! I wonder in my mind what they do.

[©] Who? Christiana and her sons? They are like to do as well as Christian did himself; for though they all played the fool at first, and would by no means be persuaded by either the tears or entreaties of Christian, yet second thoughts have wrought wonderfully with them: so they have packed up, and are also gone after him.

[@] Better and better: but, what! wife and children, and all?

[©] It is true: I can give you an account of the matter, for I was upon the spot at the instant, and was thoroughly acquainted with the whole affair.

[@] Then, said I, a man, it seems, may report it for a truth.

[©] You need not fear to affirm it: I mean, that they are all gone on pilgrimage, both the good woman and her four boys. And being we are, as I perceive, going some considerable way together, I will give you [[an account|20-HO-7]] of the whole matter.</tw-passagedata><tw-passagedata pid="518" name="Revelation 3:4 KJV" tags="bible" position="3200,300" size="100,100">Thou hast a few names even in Sardis which have not defiled their garments; and they shall walk with me in white: for they are worthy.</tw-passagedata><tw-passagedata pid="519" name="Zechariah 3:7 KJV" tags="bible promise" position="3300,300" size="100,100">Thus saith the Lord of hosts; If thou wilt walk in my ways, and if thou wilt keep my charge, then thou shalt also judge my house, and shalt also keep my courts, and I will give thee places to walk among these that stand by.</tw-passagedata><tw-passagedata pid="520" name="Luke 14:14-15 KJV" tags="bible promise" position="3400,300" size="100,100">(Jesus speaking) And thou shalt be blessed; for they cannot recompense thee: for thou shalt be recompensed at the resurrection of the just. And when one of them that sat at meat with him heard these things, he said unto him, Blessed is he that shall eat bread in the kingdom of God. </tw-passagedata><tw-passagedata pid="521" name="Luke 10:16 KJV" tags="bible" position="3500,300" size="100,100">(Jesus speaking) He that heareth you heareth me; and he that despiseth you despiseth me; and he that despiseth me despiseth him that sent me.</tw-passagedata><tw-passagedata pid="522" name="Revelation 14:13 KJV" tags="bible promise" position="3600,300" size="100,100">And I heard a voice from heaven saying unto me, Write, Blessed are the dead which die in the Lord from henceforth: Yea, saith the Spirit, that they may rest from their labours; and their works do follow them.</tw-passagedata><tw-passagedata pid="523" name="Psalm 126:5-6 KJV" tags="bible promise" position="3700,300" size="100,100">They that sow in tears shall reap in joy. He that goeth forth and weepeth, bearing precious seed, shall doubtless come again with rejoicing, bringing his sheaves with him.</tw-passagedata><tw-passagedata pid="524" name="20-HO-7" tags="moment hometown" position="2775,300" size="100,100">[©] This Christiana, (for that was her name from the day that she with her children betook themselves to a pilgrim’s life,) after her husband was gone over the river, and she could hear of him no more, her thoughts began to work in her mind. First, for that she had lost her husband, and for that the loving bond of that relation was utterly broken betwixt them. 

[©] For you know, nature can do no less but entertain the living with many a heavy cogitation, in the remembrance of the loss of loving relations. 

[©] This, therefore, of her husband did cost her many a tear. But this was not all; for Christiana did also begin to consider with herself, whether her unbecoming behavior towards her husband was not one cause that she saw him no more, and that in such sort he was taken away from her.

[©] And upon this came into her mind, by swarms, all her unkind, unnatural, and ungodly carriage to her dear friend; which also clogged her conscience, and did load her with guilt

[©] She was, moreover, much broken with recalling to remembrance the restless groans, brinish tears, and self-bemoanings of her husband, and how she did harden her heart against all his entreaties and loving persuasions of her and her sons to go with him; yea, there was not any thing that Christian either said to her, or did before her, all the while that his burden did hang on his back, but it returned upon her like a flash of lightning, and rent the caul of her heart in sunder; especially that bitter outcry of his, 
&gt; [1] What shall I do to be saved?
did ring in her ears most dolefully. Then said she to her children,

[7] Sons, we are all undone. I have sinned away your father, and he is gone: he would have had us with him, but I would not go myself: I also have hindered you of life. With that the boys fell into tears, and cried out to go after their father.

[7] Oh, it had been but our lot to go with him! then had it fared well with us, beyond what it is like to do now. 

[7] For, though I formerly foolishly imagined, concerning the troubles of your father, that they proceeded of a foolish fancy that he had, or for that he was overrun with melancholy humors; yet now it will not out of my mind, but that they sprang from another cause; to wit, for that the __light of life__  (James 1:23-25; John 8:12) was given him; by the help of which, as I perceive, he has escaped the __snares of death__ (Proverbs 14:27). 

[©] Then they all wept again, and cried out,

[7] Oh, woe worth the day!

[©] The next night Christiana had [[a dream|20-CH-7]];… </tw-passagedata><tw-passagedata pid="525" name="James 1:23-25 KJV" tags="bible" position="3800,300" size="100,100">For if any be a hearer of the word, and not a doer, he is like unto a man beholding his natural face in a glass: For he beholdeth himself, and goeth his way, and straightway forgetteth what manner of man he was. But whoso looketh into the perfect law of liberty, and continueth therein, he being not a forgetful hearer, but a doer of the work, this man shall be blessed in his deed.</tw-passagedata><tw-passagedata pid="526" name="John 8:12 KJV" tags="bible" position="3900,300" size="100,100">Then spake Jesus again unto them, saying, I am the light of the world: he that followeth me shall not walk in darkness, but shall have the light of life.</tw-passagedata><tw-passagedata pid="527" name="Proverbs 14:27 KJV" tags="bible" position="4000,300" size="100,100">The fear of the Lord is a fountain of life, to depart from the snares of death.</tw-passagedata><tw-passagedata pid="528" name="Luke 18:13 KJV" tags="bible prayer" position="4100,300" size="100,100">And the publican, standing afar off, would not lift up so much as his eyes unto heaven, but smote upon his breast, saying, God be merciful to me a sinner.</tw-passagedata><tw-passagedata pid="529" name="20-CH-7" tags="moment hometown" position="2900,300" size="100,100">[©] And, behold, she saw as if a broad parchment was opened before her, in which were recorded the sum of her ways; and the crimes, as she thought looked very black upon her. Then she cried out aloud in her sleep, and the little children heard her.

[7] __Lord, have mercy upon me a sinner!__ (Luke 18:13)

[©] After this she thought she saw two very ill-favored ones standing by her bedside, and saying,

[201] What shall we do with this woman? for she cries out for mercy, waking and sleeping: if she be suffered to go on as she begins, we shall lose her as we have lost her husband. 

[202] Wherefore we must, by one way or other, seek to take her off from the thoughts of what shall be hereafter, else all the world cannot help but she will become a pilgrim.

[©] Now she awoke in a great sweat, also a trembling was upon her: but after a while she fell to sleeping again. 

[©] And then she thought she saw Christian, her husband, in a place of bliss among many immortals, with a harp in his hand, standing and playing upon it before One that sat on a throne with a rainbow about his head.

[©] She saw also, as if he bowed his head with his face to the paved work that was under his Prince’s feet, saying,
&gt; [1] I heartily thank my Lord and King for bringing me into this place.
Then shouted a company of them that stood round about, and harped with their harps; but no man living could tell what they said but Christian and his companions.

[©] Next morning, when she was up, had prayed to God, and talked with her children a while, one [[knocked hard|20-HO-7-203]] at the door;…</tw-passagedata><tw-passagedata pid="530" name="Song of Solomon 1:3 KJV" tags="bible" position="3200,400" size="100,100">Because of the savour of thy good ointments thy name is as ointment poured forth, therefore do the virgins love thee.</tw-passagedata><tw-passagedata pid="531" name="20-HO-7-203" tags="moment hometown" position="3025,300" size="100,100">[©] Next morning, when she was up, had prayed to God, and talked with her children a while, one knocked hard at the door; to whom she spake out, saying,

[7] If thou comest in God’s name, come in.

[203] Amen; (and opened the door, and saluted her) Peace be to this house. 

[203] Christiana, knowest thou wherefore I am come?

[©] Then she blushed and trembled; also her heart began to wax warm with desires to know from whence he came, and what was his errand to her. So he said unto her,

[203] My name is Secret; I dwell with those that are on high. It is talked of where I dwell as if thou hadst a desire to go thither: also there is a report that thou art aware of the evil thou hast formerly done to thy husband, in hardening of thy heart against his way, and in keeping of these babes in their ignorance.

[203] Christiana, the Merciful One has sent me to tell thee, that he is a God ready to forgive, and that he taketh delight to multiply the pardon of offences. He also would have thee to know, that he inviteth thee to come into his presence, to his table, and that he will feed thee with the fat of his house, and with the heritage of Jacob thy father.
&gt; [Ω] There is Christian, thy husband that was, with legions more, his companions, ever beholding that face that doth minister life to beholders; and they will all be glad when they shall hear the sound of thy feet step over thy Father’s threshold.
[©] Christiana at this was greatly abashed in herself, and bowed her head to the ground. This visitor proceeded, and said,

[203] Christiana, here is also a letter for thee, which I have brought from thy husband’s King.

[©] So she took it, and opened it, but it smelt after the manner of the __best perfume.__ (Song of Solomon 1:3) Also it was written in letters of gold. The contents of the letter were these: That the King would have her to do as did Christian her husband; for that was the way to come to his city, and to dwell in his presence with joy for ever.

[©] At this the good woman was quite overcome; so she cried out to her visitor,

[7] Sir, will you carry me and my children with you, that we also may go and worship the King?

[203] Christiana, the bitter is before the sweet. Thou must through troubles, as did he that went before thee, enter this Celestial City.

[203] Wherefore I advise thee to do as did Christian thy husband: go to the Wicket-gate yonder, over the plain, for that stands at the head of the way up which thou must go; and I wish thee all good speed.

[203] Also I advise that thou put this letter in thy bosom, that thou read therein to thyself and to thy children until you have got it by heart; for it is __one of the songs__ (Psalm 119:54) that thou must sing while thou art in this house of thy pilgrimage; also this thou must deliver in at the further gate.

[@] Now I saw in my dream, that this old gentleman, as he told me the story, did himself seem to be greatly affected therewith. He moreover proceeded, and said,

[©] So Christiana called her sons together, and began thus to address herself unto them:

[7] My sons, I have, as you may perceive, been of late under much exercise in my soul about the death of your father: not for that I doubt at all of his happiness, for I am satisfied now that he is well. 

[7] I have also been much affected with the thoughts of my own state and yours, which I verily believe is by nature miserable. My carriage also to your father in his distress is a great load to my conscience; for I hardened both mine own heart and yours against him, and refused to go with him on pilgrimage.

[7] The thoughts of these things would now kill me outright, but that for a dream which I had last night, and but that for the encouragement which this stranger has given me this morning.

[7] Come, my children, let us pack up, and begone to the gate that leads to the Celestial country, that we may see your father, and be with him and his companions in peace, according to the laws of that land.

[©] Then did her children burst out into tears, for joy that the heart of their mother was so inclined. So their visitor bid them farewell; and they [[began to prepare|20-HO-7-12-13]] to set out for their journey.</tw-passagedata><tw-passagedata pid="532" name="Psalm 119:54 KJV" tags="bible" position="3300,400" size="100,100">Thy statutes have been my songs in the house of my pilgrimage.</tw-passagedata><tw-passagedata pid="533" name="20-HO-7-12-13" tags="moment hometown" position="3025,425" size="100,100">[©] But while they were thus about to be gone, two of the women that were Christiana’s neighbors came up to her house, and knocked at her door. To whom she said as before,

[7] If you come in God’s name, come in.

[©] At this the women were stunned; for this kind of language they used not to hear, or to perceive to drop from the lips of Christiana. 

[©] Yet they came in: but behold, they found the good woman preparing to be gone from her house. So they began, and said,

[12] and [13] Neighbor, pray what is your meaning by this?

[©] Christiana answered, and said to the eldest of them, whose name was Mrs. Timorous,

[7] I am preparing for a journey.

[©] This Timorous was daughter to him that met Christian upon the Hill of Difficulty, and would have had him go back for fear of the lions.

[12] For what journey, I pray you?

[7] Even to go after my good husband. And with that she fell a weeping.

[12] I hope not so, good neighbor; pray, for your poor children’s sake, do not so unwomanly cast away yourself.

[7] Nay, my children shall go with me; not one of them is willing to stay behind.

[12] I wonder in my very heart what or who has brought you into this mind! 

[7] O neighbor, knew you but as much as I do, I doubt not but that you would go along with me.

[12] Prithee, what new knowledge hast thou got, that so worketh off thy mind from thy friends, and that tempteth thee to go nobody knows where?

[7] I have been sorely afflicted since my husband’s departure from me; but especially since he went over the river. But that which troubleth me most is, my churlish carriage to him when he was under his distress. Besides, I am now as he was then; nothing will serve me but going on pilgrimage.

[7] I was a dreaming last night that I saw him. O that my soul was with him! He dwelleth in the presence of the King of the country; he sits and eats with him at his table; he is become a companion of immortals, and has a house now given him to dwell in, to which the __best palace on earth__ (2 Corinthians 5:1-4), if compared, seems to me but a dunghill.

[7] The Prince of the place has also sent for me, with promise of entertainment, if I shall come to him; his messenger was here even now, and has brought me a letter, which invites me to come. And with that she plucked out her letter, and read it, and said to them, What now will you say to this?

[12] Oh, the madness that has possessed thee and thy husband, to run yourselves upon such difficulties!

[12] You have heard, I am sure what your husband did meet with, even in a manner at the first step that he took on his way, as our neighbor Obstinate can yet testify, for he went along with him; yea, and Pliable too, until they, like wise men, were afraid to go any further.

[12] We also heard, over and above, how he met with the lions, Apollyon, the Shadow of Death, and many other things. Nor is the danger that he met with at Vanity Fair to be forgotten by thee. For if he, though a man, was so hard put to it, what canst thou, being but a poor woman, do?

[12] Consider also, that these four sweet babes are thy children, thy flesh and thy bones. Wherefore, though thou shouldest be so rash as to cast away thyself, yet, for the sake of the fruit of thy body, keep thou at home.

[7] Tempt me not, my neighbor: I have now a price put into my hands to get gain, and I should be a fool of the greatest size if I should have no heart to strike in with the opportunity.

[7] And for that you tell me of all these troubles which I am like to meet with in the way, they are so far from being to me a discouragement, that they show I am in the right. The bitter must come before the sweet, and that also will make the sweet the sweeter.

[7] Wherefore, since you came not to my house in God’s name, as I said, I pray you to be gone, and not to disquiet me further.

[©] Then Timorous reviled her, and said to her fellow,

[12] Come, neighbor Mercy, let us leave her in her own hands, since she scorns our counsel and company.

[©] But Mercy was at a stand, and could not so readily comply with her neighbor; and that for a two fold reason. 
1. Her bowels yearned over Christiana. So she said within herself, 
&gt; [13] If my neighbor will needs be gone, I will go a little way with her, and help her. 
2. Her bowels yearned over her own soul; for what Christiana had said had taken some hold upon her mind. Wherefore she said within herself again, 
&gt; [13] I will yet have more talk with this Christiana; and, if I find truth and life in what she shall say, I myself with my heart shall also go with her.
[©] Wherefore Mercy began thus to reply to her neighbor Timorous:

[13] Neighbor, I did indeed come with you to see Christiana this morning; and since she is, as you see, taking of her last farewell of the country, I think to walk this sunshiny morning a little with her, to help her on her way.

[©] But she told her not of her second reason, but kept it to herself. 

[12] Well, I see you have a mind to go a fooling too; but take heed in time, and be wise: while we are out of danger, we are out; but when we are in, we are in.

[©] So Mrs. Timorous returned to [[her house|20-TI-12-14-15-16-17]], and Christiana betook herself to [[her journey.|21-PL-7-13]]</tw-passagedata><tw-passagedata pid="534" name="2 Corinthians 5:1-4 KJV" tags="bible" position="3400,400" size="100,100">For we know that if our earthly house of this tabernacle were dissolved, we have a building of God, an house not made with hands, eternal in the heavens. For in this we groan, earnestly desiring to be clothed upon with our house which is from heaven: If so be that being clothed we shall not be found naked. For we that are in this tabernacle do groan, being burdened: not for that we would be unclothed, but clothed upon, that mortality might be swallowed up of life.</tw-passagedata><tw-passagedata pid="535" name="20-TI-12-14-15-16-17" tags="moment hometown" position="2900,425" size="100,100">[©] But when Timorous was got home to her house she sends for some of her neighbors, to wit, Mrs. Bat’s-Eyes, Mrs. Inconsiderate, Mrs. Light-Mind, and Mrs. Know-Nothing.

[©] So when they were come to her house, she falls to telling of the story of Christiana, and of her intended journey. And thus she began her tale: 

[12] Neighbors, having had little to do this morning, I went to give Christiana a visit; and when I came at the door I knocked, as you know it is our custom; and she answered, 
&gt; [7] If you come in God’s name, come in. 
So in I went, thinking all was well; but, when I came in I found her preparing herself to depart the town, she, and also her children.

[12] So I asked her what was her meaning by that. And she told me, in short, that she was now of a mind to go on pilgrimage, as did her husband. She told me also of a dream that she had, and how the King of the country where her husband was, had sent an inviting letter to come thither.

[17] And what, do you think she will go?

[12] Aye, go she will, whatever comes on’t; and methinks I know it by this; for that which was my great argument to persuade her to stay at home, (to wit, the troubles she was like to meet with on the way,) is one great argument with her to put her forward on her journey.

[12] For she told me in so many words, The bitter goes before the sweet; yea, and forasmuch as it doth, it makes the sweet the sweeter.

[14] Oh, this blind and foolish woman! And will she not take warning by her husband’s afflictions? For my part, I see, if he were here again, he would rest himself content in a whole skin, and never run so many hazards for nothing.

[15] Away with such fantastical fools from the town: a good riddance, for my part, I say, of her; should she stay where she dwells, and retain this her mind, who could live quietly by her? for she will either be dumpish, or unneighborly, or talk of such matters as no wise body can abide.

[15] Wherefore, for my part, I shall never be sorry for her departure; let her go, and let better come in her room: it was never a good world since these whimsical fools dwelt in it.

[16] Come, put this kind of talk away. I was yesterday at Madam Wanton’s, where we were as merry as the maids. For who do you think should be there but I and Mrs. Love-the-Flesh, and three or four more, with Mrs. Lechery, Mrs. Filth, and some others: so there we had music and dancing, and what else was meet to fill up the pleasure. 

[16] And I dare say, my lady herself is an admirable well-bred gentlewoman, and Mr. Lechery is as pretty a fellow.

[©] By this time Christiana was got [[on her way|21-PL-7-13]], and Mercy went along with her.</tw-passagedata><tw-passagedata pid="536" name="21-PL-7-13" tags="moment plain_#1" position="2525,675" size="100,100">[©] By this time Christiana was got on her way, and Mercy went along with her: so as they went, her children being there also, Christiana began to discourse. 

[7] Mercy, I take this as an unexpected favor, that thou shouldest set forth out of doors with me to accompany me a little in the way.

[©] Then said young Mercy, (for she was but young,)

[13] If I thought it would be to purpose to go with you, I would never go near the town any more.

[7] Well, Mercy, cast in thy lot with me: I well know what will be the end of our pilgrimage: my husband is where he would not but be for all the gold in the Spanish mines. Nor shalt thou be rejected, though thou goest but upon my invitation. The King, who hath sent for me and my children, is one that delighteth in mercy. 

[7] Besides, if thou wilt, I will hire thee, and thou shalt go along with me as my servant. Yet we will have all things in common betwixt thee and me: only go along with me.

[13] But how shall I be ascertained that I also should be entertained? Had I this hope but from one that can tell, I would make no stick at all, but would go, being helped by Him that can help, though the way was never so tedious.

[7] Well, loving Mercy, I will tell thee what thou shalt do: go with me to the Wicket-gate, and there I will further inquire for thee; and if there thou shalt not meet with encouragement, I will be content that thou return to thy place: I will also pay thee for thy kindness which thou showest to me and my children, in the accompanying of us in the way that thou dost.

[13] Then will I go thither, and will take what shall follow; and the Lord grant that my lot may there fall, even as the King of heaven shall have his heart upon me.

[©] Christiana then was glad at heart, not only that she had a companion, but also for that she had prevailed with this poor maid to fall in love with her own salvation. So they went on together, and Mercy began to weep.

[7] Wherefore weepeth my sister so?

[12] Alas! who can but lament, that shall but rightly consider what a state and condition my poor relations are in, that yet remain in our sinful town? And that which makes my grief the more heavy is, because they have no instructor, nor any to tell them what is to come.

[7] Pity becomes pilgrims; and thou dost weep for thy friends, as my good Christian did for me when he left me: he mourned for that I would not heed nor regard him; but his Lord and ours did gather up his tears, and put them into his bottle; and now both I and thou, and these my sweet babes, are reaping the fruit and benefit of them.

[7] I hope, Mercy, that these tears of thine will not be lost; for the truth hath said, that
&gt; &lt;&lt;book &quot;Psalm 126:5-6 KJV&quot;&gt;&gt;
[13] 
&gt; &lt;&lt;journal &quot;Prayer for native country&quot;&gt;&gt;
[@] Now my old friend [[proceeded…|21-SL-7-13]]
</tw-passagedata><tw-passagedata pid="537" name="Prayer for native country" tags="journal" position="2375,675" size="100,100">Let the Most Blessed be my guide,
   If it be his blessed will,
Unto his gate, into his fold,
   Up to his holy hill.

And let him never suffer me
   To swerve, or turn aside
From his free-grace and holy ways,
   Whate’er shall me betide.

And let him gather them of mine
   That I have left behind;
Lord, make them pray they may be thine,
   With all their heart and mind.</tw-passagedata><tw-passagedata pid="538" name="21-SL-7-13" tags="moment slough" position="2650,675" size="100,100">[©] But when Christiana came to the Slough of Despond, she began to be at a stand; For, said she, 

[7] …this is the place in which my dear husband had like to have been smothered with mud.

[©] She perceived, also, that notwithstanding the command of the King to make this place for pilgrims good, yet it was rather worse than formerly.

[@] Was that true?

[©] Yes, too true; for many there be that pretend to be the King’s laborers, and that say they are for mending the King’s highways, who bring dirt and dung instead of stones, and so mar instead of mending.

[©] Here Christiana therefore, with her boys, did make a stand. But said Mercy,

[13] Come, let us venture; only let us be wary.

[©] Then they looked well to their steps, and made a shift to get staggering over.

[©] Yet Christiana had like to have been in, and that not once or twice. Now they had no sooner got over, but they thought they heard words that said unto them,
&gt; &lt;&lt;book &quot;Luke 1:45 KJV&quot;&gt;&gt;
[©] Then they went on again; and said Mercy to Christiana, 

[13] …had I as good ground to hope for a loving reception at the Wicket-gate as you, I think no Slough of Despond would discourage me.

[7] Well, said the other, you know your sore, and I know mine; and, good friend, we shall all have enough evil before we come to our journey’s end. 

[7] For can it be imagined that the people who design to attain such excellent glories as we do, and who are so envied that happiness as we are, but that we shall meet with what fears and snares, with what troubles and afflictions they can possibly assault us with that hate us? 

[@] And now Mr. Sagacity left me to dream out my dream by myself. Wherefore, methought I saw Christiana, and Mercy, and the boys, go all of them up to [[the gate.|21-GA-7-13-211]]
&lt;&lt;nobr&gt;&gt;&lt;&lt;set $isAlphaRevealed to false&gt;&gt;&lt;&lt;run forget(&quot;isAlphaRevealed&quot;)&gt;&gt;&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="539" name="Luke 1:45 KJV" tags="bible promise" position="3200,675" size="100,100">And blessed is she that believed: for there shall be a performance of those things which were told her from the Lord.</tw-passagedata><tw-passagedata pid="540" name="21-GA-7-13-211" tags="moment gate" position="2775,675" size="100,100">[@] …to which, when they were come, they betook themselves to a short debate about how they must manage their calling at the gate, and what should be said unto him that did open to them: so it was concluded, since Christiana was the eldest, that she should knock for entrance, and that she should speak to him that did open, for the rest.

[@] So Christiana began to knock, and as her poor husband did, she knocked and knocked again.

[@] But instead of any that answered, they all thought they heard as if a dog came barking upon them; a dog, and a great one too; and this made the women and children afraid. Nor durst they for a while to knock any more, for fear the mastiff should fly upon them.

[@] Now, therefore, they were greatly tumbled up and down in their minds, and knew not what to do: knock they durst not, for fear of the dog; go back they durst not, for fear the keeper of that gate should espy them as they so went, and should be offended with them; at last they thought of knocking again, and knocked more vehemently than they did at first. Then said the keeper of the gate,

[211] Who is there?

[@] So the dog left off to bark, and he opened unto them. Then Christiana made low obeisance, and said,

[7] Let not our Lord be offended with his handmaidens, for that we have knocked at his princely gate

[211] Whence come ye? And what is it that you would have?

[7] We are come from whence Christian did come, and upon the same errand as he; to wit, to be, if it shall please you, graciously admitted by this gate into the way that leads unto the Celestial City. 

[7] And I answer, my Lord, in the next place, that I am Christiana, once the wife of Christian, that now is gotten above.

[@] With that the keeper of the gate did marvel, saying,

[211] What, is she now become a pilgrim that but a while ago abhorred that life?

[@] Then she bowed her head, and said,

[7] Yea; and so are these my sweet babes also. 

[@] Then he took her by the hand and led her in, and said also,

[211] Suffer little children to come unto me; (and with that he shut up the gate.)

[@] This done, he called to a trumpeter that was above, over the gate, to entertain Christiana with shouting, and the sound of trumpet for joy. So he obeyed, and sounded, and filled the air with his melodious notes.

[@] Now all this while poor Mercy did stand without, trembling and crying, for fear that she was rejected. But when Christiana had got admittance for herself and her boys, then she began to make intercession for Mercy. 

[7] My Lord, I have a companion that stands yet without, that is come hither upon the same account as myself: one that is much dejected in her mind, for that she comes, as she thinks, without sending for; whereas I was sent for by my husband’s King to come. 

[@] Now Mercy began to be very impatient, and each minute was as long to her as an hour; wherefore she prevented Christiana from a fuller interceding for her, by knocking at the gate herself.

[@] And she knocked then so loud that she made Christiana to start. Then said the keeper of the gate,

[211] Who is there?

[7] It is my friend.

[@] So he opened the gate, and looked out, but Mercy was fallen down without in a swoon, for she fainted, and was afraid that no gate should be opened to her.

[@] Then he took her by the hand, and said, 

[211] Damsel, I bid thee arise.

[13] Oh, sir, I am faint; there is scarce life left in me. 

[211]  …one once said,
&gt; &lt;&lt;book &quot;Jonah 2:7 KJV&quot;&gt;&gt;
Fear not, but stand upon thy feet, and tell me wherefore thou art come.

[13]  I am come for that unto which I was never invited, as my friend Christiana was. Hers was from the King, and mine was but from her. Wherefore I fear I presume.

[211] Did she desire thee to come with her to this place?

[13] Yes; and, as my Lord sees, I am come. And if there is any grace and forgiveness of sins to spare, I beseech that thy poor handmaid may be a partaker thereof.

[@] Then he took her again by the hand, and led her gently in, and said,

[211] I pray for all them that believe on me, by what means soever they come unto me.

[@] Then said he to those that stood by, 

[211] Fetch something and give it to Mercy to smell on, thereby to stay her faintings;

[@] …so they fetched her a bundle of myrrh, and a while after she was revived.

[@] And now were Christiana and her boys, and Mercy, received of the Lord at the head of the way, and spoken kindly unto by him. Then said they yet further unto him,

[7] We are sorry for our sins, and beg of our Lord his pardon, and further information what we must do. 

[211] I grant pardon, by word and deed; by word in the promise of forgiveness, by deed in the way I obtained it. Take the first from my lips with a &lt;&lt;nobr&gt;&gt;\
&lt;&lt;if $isAlphaRevealed&gt;&gt;kiss&lt;&lt;else&gt;&gt;\
&lt;span class=&quot;hidden&quot;&gt;&lt;&lt;link &quot;kiss&quot;&gt;&gt;\
	&lt;&lt;set $isAlphaRevealed to true&gt;&gt;\
    &lt;&lt;run memorize(&quot;isAlphaRevealed&quot;, $isAlphaRevealed)&gt;&gt;\
 &lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/if&gt;&gt;\
&lt;&lt;/nobr&gt;&gt;, and the other as it shall __be revealed.__ (John 20:20; Song of Solomon 1:2)

[@] Now I saw in my dream, that he spake many good words unto them, whereby they were greatly gladdened. He also had them up to the top of the gate, and showed them by what deed they were saved; and told them withal, that that sight they would have again as they went along in the way, to their comfort.

[@] So he left them awhile in a [[summer parlor|21-PA-7-8-9-10-11-13-211]] below.</tw-passagedata><tw-passagedata pid="541" name="Jonah 2:7 KJV" tags="bible prayer" position="3300,675" size="100,100">When my soul fainted within me I remembered the Lord: and my prayer came in unto thee, into thine holy temple.</tw-passagedata><tw-passagedata pid="542" name="Song of Solomon 1:2 KJV" tags="bible" position="3400,675" size="100,100">Let him kiss me with the kisses of his mouth: for thy love is better than wine.</tw-passagedata><tw-passagedata pid="543" name="John 20:20 KJV" tags="bible" position="3500,675" size="100,100">And when he had so said, he shewed unto them his hands and his side. Then were the disciples glad, when they saw the Lord.</tw-passagedata><tw-passagedata pid="544" name="Matthew 24:41 KJV" tags="bible" position="3600,675" size="100,100">Two women shall be grinding at the mill; the one shall be taken, and the other left.</tw-passagedata><tw-passagedata pid="545" name="Jeremiah 12:1 KJV" tags="bible prayer" position="3700,675" size="100,100">Righteous art thou, O Lord, when I plead with thee: yet let me talk with thee of thy judgments: Wherefore doth the way of the wicked prosper? wherefore are all they happy that deal very treacherously?</tw-passagedata><tw-passagedata pid="546" name="21-PA-7-8-9-10-11-13-211" tags="moment gate" position="2900,675" size="100,100">[@]  So he left them awhile in a summer parlor below, where they entered into talk by themselves; and thus Christiana began.

[7] O how glad am I that we are got in hither.

[13] So you well may; but I, of all, have cause to leap for joy.

[7] I thought one time, as I stood at the gate, because I had knocked and none did answer, that all our labor had been lost, especially when that ugly cur made such a heavy barking against us.

[13] But my worst fear was after I saw that you was taken into his favor, and that I was left behind. Now, thought I, it is fulfilled which is written,
&gt; &lt;&lt;book &quot;Matthew 24:41 KJV&quot;&gt;&gt;
I had much ado to forbear crying out, Undone! 

[13] And afraid I was to knock any more; but when I looked up to what was written over the gate, I took courage. I also thought that I must either knock again, or die; so I knocked, but I cannot tell how, for my spirit now struggled between life and death.

[7] Can you not tell how you knocked? I am sure your knocks were so earnest that the very sound of them made me start; I thought I never heard such knocking in all my life; I thought you would come in by a violent hand, or __take the kingdom by storm.__ (Matthew 11:12)

[13] Alas! to be in my case, who that so was could but have done so? You saw that the door was shut upon me, and there was a most cruel dog thereabout.

[13] Who, I say, that was so faint-hearted as I, would not have knocked with all their might? But pray, what said my Lord to my rudeness? Was he not angry with me? 

[7] When he heard your lumbering noise, he gave a wonderful innocent smile; I believe what you did pleased him well, for he showed no sign to the contrary. 

[7] But I marvel in my heart why he keeps such a dog: had I known that before, I should not have had heart enough to have ventured myself in this manner. But now we are in, we are in, and I am glad with all my heart.

[13] I will ask, if you please, next time he comes down, why he keeps such a filthy cur in his yard; I hope he will not take it amiss.

[8] [9] [10] [11] Do so, and persuade him to hang him; for we are afraid he will bite us when we go hence.

[@] So at last he came down to them again, and Mercy fell to the ground on her face before him, and worshiped, and said,

[13] Let my Lord accept the sacrifice of praise which I now offer unto him with the calves of my lips.

[211] Peace be to thee; stand up.

[@] But she continued upon her face, and said, 

[13] 
&gt; __Righteous art thou, O Lord, when I plead with thee; yet let me talk with thee of thy judgments.__ (Jeremiah 12:1)  
Wherefore dost thou keep so cruel a dog in thy yard, at the sight of which such women and children as we are ready to fly from thy gate for fear?

[211] That dog has another owner; he also is kept close in another man’s ground, only my pilgrims hear his barking; he belongs to the castle which you see there at a distance, but can come up to the walls of this place. He has frighted many an honest pilgrim from worse to better, by the great voice of his roaring.

[211] Indeed, he that owneth him doth not keep him out of any good-will to me or mine, but with intent to keep the pilgrims from coming to me, and that they may be afraid to come and knock at this gate for entrance. 

[211] Sometimes also he has broken out, and has worried some that I loved; but I take all at present patiently. I also give my pilgrims timely help, so that they are not delivered to his power, to do with them what his doggish nature would prompt him to.

[211] But what my purchased one, I trow, hadst thou known never so much beforehand, thou wouldest not have been afraid of a dog. The beggars that go from door to door, will, rather than lose a supposed alms, run the hazard of the bawling, barking, and biting too of a dog; and shall a dog, a dog in another man’s yard, a dog whose barking I turn to the profit of pilgrims, keep any from coming to me? __I deliver them from the lions__ (Psalm 22:21-22), and my darling from the power of the dog.

[13] I confess my ignorance; I spake what I understood not; I acknowledge that thou doest all things well.

[@] Then Christiana began to talk of their journey, and to inquire after the way. So he fed them and washed their feet, and set them in the way of his steps, according as he had dealt with her husband before.

[@] So I saw in my dream, that they walked on their way, and had the weather very comfortable to them. Then Christiana began to sing, saying,

[7] 
&gt; //♪&lt;&lt;journal &quot;Blessed be the day&quot;&gt;&gt;♫//
[@] Now there was, on the other side of the wall that fenced in the way up which Christiana and her companions were to go, [[a garden|22-WA-7-13-201-202-221]].</tw-passagedata><tw-passagedata pid="547" name="Psalm 22:21-22 KJV" tags="bible prayer" position="3800,675" size="100,100">Save me from the lion’s mouth: for thou hast heard me from the horns of the unicorns.
 I will declare thy name unto my brethren: in the midst of the congregation will I praise thee. </tw-passagedata><tw-passagedata pid="548" name="22-WA-7-13-201-202-221" tags="moment garden" position="2525,1000" size="100,100">[@] …and that garden belonged to him whose was that barking dog, of whom mention was made before. And some of the fruit-trees that grew in that garden shot their branches over the wall; and being mellow, they that found them did gather them up, and eat of them to their hurt. 

[@] So Christiana’s boys, as boys are apt to do, being pleased with the trees, and with the fruit that hung thereon, did pluck them, and began to eat. Their mother did also chide them for so doing, But still the boys went on. 

[7]  Well, my sons, you transgress, for that fruit is none of ours;

[@] …but she did not know that it belonged to the enemy: I’ll warrant you, if she had she would have been ready to die for fear. But that passed, and they went on their way.

[@] Now, by that they were gone about two bow-shots from the place that led them into the way, they espied two very ill-favored ones coming down apace to meet them. 

[@] With that, Christiana and Mercy her friend covered themselves with their veils, and so kept on their journey: the children also went on before; so that at last they met together.

[@] Then they that came down to meet them, came just up to the women, as if they would embrace them; but Christiana said,

[7] Stand back, or go peaceably as you should.

[@] Yet these two, as men that are deaf, regarded not Christiana’s words, but began to lay hands upon them: at that Christiana waxing very wroth, spurned at them with her feet. Mercy also, as well as she could, did what she could to shift them. Christiana again said to them,

[7] Stand back, and be gone, for we have no money to lose, being pilgrims, as you see, and such too as live upon the charity of our friends. 

[@] Then said one of the two men,

[201] We make no assault upon you for money, but are come out to tell you, that if you will but grant one small request which we shall ask, we will make women of you for ever.

[@] Now Christiana, imagining what they should mean, made answer again,

[7] We will neither hear, nor regard, nor yield to what you shall ask. We are in haste, and cannot stay; our business is a business of life and death. 

[@] So again she and her companion made a fresh essay to go past them; but they letted them in their way.

[202] We intend no hurt to your lives; it is another thing we would have. 

[7] Aye, you would have us body and soul, for I know it is for that you are come; but we will die rather upon the spot, than to suffer ourselves to be brought into such snares as shall hazard our well-being hereafter.

[@] And with that they both shrieked out, and cried,

[7] [13] Murder! murder!

[@] …and so put themselves under those laws that are provided for the __protection of women. __ (Deuteronomy 22:25-27) But the men still made their approach upon them, with design to prevail against them. They therefore cried out again.

[@] Now they being, as I said, not far from the gate in at which they came, their voice was heard from whence they were, thither: wherefore some of the house came out, and knowing that it was Christiana’s tongue, they made haste to her relief.

[@] But by that they were got within sight of them, the women were in a very great scuffle; the children also stood crying by. Then did he that came in for their relief call out to the ruffians, saying,

[221] What is that thing you do? Would you make my Lord’s people to transgress?

[@] He also attempted to take them, but they did make their escape over the wall into the garden of the man to whom the great dog belonged; so the dog became their protector.

[@] This Reliever then came up to the women, and asked them how they did. So they answered,

[7] [13]  We thank thy Prince, pretty well, only we have been somewhat affrighted: we thank thee also for that thou camest in to our help, otherwise we had been overcome.

[@] So, after a few more words, this Reliever said as followeth,

[221] I marveled much, when you were entertained at the gate above, seeing ye knew that ye were but weak women, that you petitioned not the Lord for a conductor; then might you have avoided these troubles and dangers; for he would have granted you one.

[7] Alas! We were so taken with our present blessing, that dangers to come were forgotten by us.

[7] Besides, who could have thought, that so near the King’s palace there could have lurked such naughty ones? Indeed, it had been well for us had we asked our Lord for one; but since our Lord knew it would be for our profit, I wonder he sent not one along with us.

[221] It is not always necessary to grant things not asked for, lest by so doing they become of little esteem; but when the want of a thing is felt, it then comes under, in the eyes of him that feels it, that estimate that properly is its due, and so consequently will be thereafter used.

[221] Had my Lord granted you a conductor, you would not either so have bewailed that oversight of yours, in not asking for one, as now you have occasion to do. So all things work for good, and tend to make you more wary.

[7] Shall we go back again to my Lord, and confess our folly, and ask one?

[221] Your confession of your folly I will present him with. To go back again, you need not, for in all places where you shall come, you will find no want at all; for in every one of my Lord’s lodgings, which he has prepared for the reception of his pilgrims, there is sufficient to furnish them against all attempts whatsoever.

[221] But, as I said, He will be __inquired of by them__ (Ezekiel 36:37), to do it for them. And ‘tis a poor thing that is not worth asking for. 

[@] When he had thus said, he went back to his place, and the pilgrims went on their way. 

[13] What a sudden blank is here! I made account that we had been past all danger, and that we should never see sorrow more. 

[7] Thy innocency, my sister, may excuse thee much; but as for me, my fault is so much the greater, for that I saw this danger before I came out of the doors, and yet did not provide for it when provision might have been had. I am much to be blamed.

[13] How knew you this before you came from home? Pray open to me this riddle.

[7] Why, I will tell you. Before I set foot out of doors, one night as I lay in my bed I had a dream about this; for methought I saw two men, as like these as ever any in the world could look, stand at my bed’s feet, plotting how they might prevent my salvation. I will tell you their very words.  They said, (it was when I was in my troubles,) 
&gt; [201] What shall we do with this woman? for she cries out, waking and sleeping, for forgiveness: if she be sufferet do go on as she begins, we shall lose her as we have lost her husband.
[7] This you know might have made me take heed, and have provided when provision might have been had. 

[13] Well, as by this neglect we have an occasion ministered unto us to behold our own imperfections, so our Lord has taken occasion thereby to make manifest the riches of his grace; for he, as we see, has followed us with unasked kindness, and has delivered us from their hands that were stronger than we, of his mere good pleasure.

[@] Thus now, when they had talked away a little more time, they drew near to [[a house|22-IN-7-13-222]] which stood in the way, which house was built for the relief of pilgrims.</tw-passagedata><tw-passagedata pid="549" name="Blessed be the day" tags="journal" position="2375,1000" size="100,100">Blessed be the day that I began
   A pilgrim for to be;
And blessed also be the man
   That thereto moved me.

’Tis true, ‘t was long ere I began
   To seek to live for ever;
But now I run fast as I can:
   ‘Tis better late than never.

Our tears to joy, our fears to faith,
   Are turned, as we see;
Thus our beginning (as one saith)
   Shows what our end will be. </tw-passagedata><tw-passagedata pid="550" name="Deuteronomy 22:25-27 KJV" tags="bible" position="3200,1000" size="100,100">But if a man find a betrothed damsel in the field, and the man force her, and lie with her: then the man only that lay with her shall die: But unto the damsel thou shalt do nothing; there is in the damsel no sin worthy of death: for as when a man riseth against his neighbour, and slayeth him, even so is this matter: For he found her in the field, and the betrothed damsel cried, and there was none to save her.</tw-passagedata><tw-passagedata pid="551" name="Ezekiel 36:37 KJV" tags="bible promise" position="3300,1000" size="100,100">Thus saith the Lord GOD; I will yet for this be enquired of by the house of Israel, to do it for them; I will increase them with men like a flock.</tw-passagedata><tw-passagedata pid="552" name="22-IN-7-13-222" tags="moment manor" position="2650,1000" size="100,100">[@] So they drew on towards the house, (the house of the Interpreter;) and when they came to the door, they heard a great talk in the house.

[@] Then they gave ear, and heard, as they thought, Christiana mentioned by name; for you must know that there went along, even before her, a talk of her and her children’s going on pilgrimage. And this was the most pleasing to them, because they had heard that she was Christian’s wife, that woman who was some time ago so unwilling to hear of going on pilgrimage. Thus, therefore, they stood still, and heard the good people within commending her who they little thought stood at the door.

[@] At last Christiana knocked, as she had done at the gate before. Now, when she had knocked, there came to the door a young damsel, and opened the door, and looked, and behold, two women were there.

[222] With whom would you speak in this place? 

[7] We understand that this is a privileged place for those that are become pilgrims, and we now at this door are such: wherefore we pray that we may be partakers of that for which we at this time are come; for the day, as thou seest, is very far spent, and we are loth to-night to go any further.

[222] Pray, what may I call your name, that I may tell it to my Lord within.

[7] My name is Christiana; I was the wife of that pilgrim that some years ago did travel this way, and these be his four children. This maiden also is my companion, and is going on pilgrimage too.

[@] Then Innocent ran in, (for that was her name,) and said to those within, 

[222] Can you think who is at the door? There is Christiana and her children, and her companion, all waiting for entertainment here.

[@] Then they leaped for joy, and went and told their Master. So he came to the door and looking upon her, he said,

[Π] Art thou that Christiana whom Christian the good man left behind him when he betook himself to a pilgrim’s life.

[7] I am that woman that was so hard-hearted as to slight my husband’s troubles, and that left him to go on in his journey alone, and these are his four children; but now I also am come, for I am convinced that no way is right but this.

[Π] Then is fulfilled that which is written of the man that said to his son,
&gt; Go work to-day in my vineyard; and he said to his father, I will not: but afterwards __repented and went.__ (Matthew 21:29)
[7] So be it: Amen. God made it a true saying upon me, and grant that I may be found at the last of him in peace, without spot, and blameless.

[Π] But why standest thou thus at the door? Come in, thou daughter of Abraham; we were talking of thee but now, for tidings have come to us before how thou art become a pilgrim.

[Π] Come, children, come in; come, maiden, come in. 

[@] So he had them all into the house. 

[@] So when they were within, they were bidden to sit down and rest them; the which when they had done, those that attended upon the pilgrims in the house came into the room to see them.

[@] And one smiled, and another smiled, and they all smiled for joy that Christiana was become a pilgrim: They also looked upon the boys; they stroked them over their faces with the hand, in token of their kind reception of them: they also carried it lovingly to Mercy, and bid them all welcome into their Master’s house.

[@] After a while, because supper was not ready, the Interpreter took them into his Significant Rooms, and showed them what Christian, Christiana’s husband, had seen some time before. 

[@] Here, therefore, they saw the man in the cage, the man and his dream, the man that cut his way through his enemies, and the picture of the biggest of them all, together with the rest of those things that were then so profitable to Christian. 

[@] This done, and after those things had been somewhat digested by Christiana and her company, the Interpreter takes them apart again,…
&lt;&lt;include &quot;22-SI-7-13&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="553" name="Matthew 21:29 KJV" tags="bible" position="3400,1000" size="100,100">He answered and said, I will not: but afterward he repented, and went.</tw-passagedata><tw-passagedata pid="554" name="22-SI-7-13" tags="optional" position="2775,1000" size="100,100">* [[A room|22-RO-7-13]] where was a man with a muck-rake
* [[The very best room|22-BE-7-13]] in the house
* [[A room|22-CO-7-13]] with a hen and chicks
* [[The slaughter-house|22-SL-7-13]]
* [[His garden and field|22-OU-7-13]]
* [[A rotten tree|22-TR-7-13]]</tw-passagedata><tw-passagedata pid="555" name="22-RO-7-13" tags="moment manor" position="2525,1200" size="100,100">[@] The Interpreter has them first into a room where was a man that could look no way but downwards, with a muck-rake in his hand.

[@] There stood also one over his head with a celestial crown in his hand, and proffered him that crown for his muck-rake; but the man did neither look up nor regard, but raked to himself the straws, the small sticks, and dust of the floor.

[7] I persuade myself that I know somewhat the meaning of this; for this is a figure of a man of this world: is it not, good sir?

[Π] Thou hast said right, said he; and his muck-rake doth show his carnal mind. And whereas thou seest him rather give heed to rake up straws and sticks, and the dust of the floor, than to do what He says that calls to him from above with the celestial crown in his hand; it is to show, that heaven is but as a fable to some, and that things here are counted the only things substantial.

[Π] Now, whereas it was also showed thee that the man could look no way but downwards, it is to let thee know that earthly things, when they are with power upon men’s minds, quite carry their hearts away from God.

[7[ O deliver me from this muck-rake.

[Π] That prayer, has lain by till it is almost rusty:
&gt; __“Give me not riches,”__ (Proverbs 30:8) 
is scarce the prayer of one in ten thousand. Straws, and sticks, and dust, with most, are the great things now looked after.

[@] With that Christiana and Mercy wept, 

[7] [13] It is, alas! too true.

When the Interpreter had shown them this, he had them into…
&lt;&lt;include &quot;22-SI-7-13&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="556" name="Proverbs 30:8 KJV" tags="bible prayer" position="3500,1000" size="100,100">Remove far from me vanity and lies: give me neither poverty nor riches; feed me with food convenient for me:</tw-passagedata><tw-passagedata pid="557" name="22-BE-7-13" tags="moment manor" position="2650,1200" size="100,100">[@] The Interpreter had them into the very best room in the house; a very brave room it was. So he bid them look round about, and see if they could find any thing profitable there.

[@] Then they looked round and round; for there was nothing to be seen but a very great spider on the wall, and that they overlooked.

[13] Sir, I see nothing; 

[@] …but Christiana held her peace.

[Π] But, look again. 

[@] She therefore looked again, and said, 

[13] Here is not any thing but an ugly spider, who hangs by her hands upon the wall. 

[Π] Is there but one spider in all this spacious room?

[@] Then the water stood in Christiana’s eyes, for she was a woman quick of apprehension; and she said,

[7] Yea, Lord, there are more here than one; yea, and spiders whose venom is far more destructive than that which is in her.

[@] The Interpreter then looked pleasantly on her, and said,

[Π] Thou hast said the truth.

[@] This made Mercy to blush, and the boys to cover their faces; for they all began now to understand the riddle.

[Π] As you see,
&gt; &lt;&lt;book &quot;Proverbs 30:28 KJV&quot;&gt;&gt;
And wherefore is this recorded, but to show you, that, how full of the venom of sin soever you be, yet you may, by the hand of Faith, lay hold of and dwell in the best room that belongs to the King’s house above?

[7] I thought of something of this; but I could not imagine it at all. I thought that we were like spiders, and that we looked like ugly creatures, in what fine room soever we were: but that by this spider, that venomous and ill-favored creature, we were to learn how to act faith, that came not into my thoughts; and yet she had taken hold with her hands, and, as I see, dwelleth in the best room in the house. God has made nothing in vain.

[@] Then they seemed all to be glad; but the water stood in their eyes; yet they looked one upon another, and also bowed before the Interpreter.
&lt;&lt;include &quot;22-SI-7-13&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="558" name="Proverbs 30:28 KJV" tags="bible" position="3600,1000" size="100,100">The spider taketh hold with her hands, and is in kings&#39; palaces.</tw-passagedata><tw-passagedata pid="559" name="22-CO-7-13" tags="moment manor" position="2775,1200" size="100,100">[@] He had them into another room, where were a hen and chickens, and bid them observe a while.

[@] So one of the chickens went to the trough to drink, and every time she drank she lifted up her head and her eyes towards heaven.

[Π] See, what this little chick doth, and learn of her to acknowledge whence your mercies come, by receiving them with looking up. 

[Π] Yet again, observe and look:

[@] …so they gave heed, and perceived that the hen did walk in a fourfold method towards her chickens: 
# She had a common call, and that she hath all the day long. 
# She had a special call, and that she had but sometimes. 
# She had a __brooding note__ (Matthew 23:37). And, 
# She had an outcry.
[Π] Now, compare this hen to your King and these chickens to his obedient ones; for, answerable to her, he himself hath his methods which he walketh in towards his people.

[Π] By his common call, he gives nothing; by his special call, he always has something to give; he has also a brooding voice, for them that are under his wing; and he has an outcry, to give the alarm when he seeth the enemy come.

[Π] I choose, my darlings, to lead you into the room where such things are, because you are women, and they are easy for you.

[7] And, sir, pray let us see some more.
&lt;&lt;include &quot;22-SI-7-13&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="560" name="Matthew 23:37 KJV" tags="bible" position="3700,1000" size="100,100">O Jerusalem, Jerusalem, thou that killest the prophets, and stonest them which are sent unto thee, how often would I have gathered thy children together, even as a hen gathereth her chickens under her wings, and ye would not!</tw-passagedata><tw-passagedata pid="561" name="22-SL-7-13" tags="moment manor" position="2900,1200" size="100,100">[@] So he had them into the slaughter-house, where was a butcher killing a sheep; and behold, the sheep was quiet, and took her death patiently.

[Π] You must learn of this sheep to suffer and to put up with wrongs without murmurings and complaints. 

[Π] Behold how quietly she takes her death, and, without objecting, she suffereth her skin to be pulled over her ears. Your King doth call you his sheep.

[@] After this he led them into…
&lt;&lt;include &quot;22-SI-7-13&quot;&gt;&gt;
</tw-passagedata><tw-passagedata pid="562" name="Ruth 2:11-12 KJV" tags="bible" position="3800,1000" size="100,100">And Boaz answered and said unto her, It hath fully been shewed me, all that thou hast done unto thy mother in law since the death of thine husband: and how thou hast left thy father and thy mother, and the land of thy nativity, and art come unto a people which thou knewest not heretofore. The Lord recompense thy work, and a full reward be given thee of the Lord God of Israel, under whose wings thou art come to trust.</tw-passagedata><tw-passagedata pid="563" name="22-OU-7-13" tags="moment manor" position="3025,1200" size="100,100">[@] After this he led them into his garden, where was great variety of flowers; and he, said, 

[Π] Do you see all these?

[7] Yes.

[7] Behold, the flowers are diverse in stature, in quality, and color, and smell, and virtue; and some are better than others; also, where the gardener has set them, there they stand, and quarrel not one with another.

[@] Again, he had them into his field, which he had sown with wheat and corn: but when they beheld, the tops of all were cut off, and only the straw remained. He said again,

[Π] This ground was dunged, and ploughed, and sowed, but what shall we do with the crop?

[7] Burn some, and make muck of the rest.

[Π] Fruit, you see, is that thing you look for; and for want of that you condemn it to the fire, and to be trodden under foot of men: beware that in this you condemn not yourselves.

[@] Then, as they were coming in from abroad, they espied a little robin with a great spider in his mouth. So the Interpreter said,

[Π] Look here.

[@] So they looked, and Mercy wondered, but Christiana said,

[7] What a disparagement is it to such a pretty little bird as the robin-red-breast; he being also a bird above many, that loveth to maintain a kind of sociableness with men! I had thought they had lived upon crumbs of bread, or upon other such harmless matter: I like him worse than I did.

[Π] This robin is an emblem, very apt to set forth some professors by; for to sight they are, as this robin, pretty of note, color, and carriage.

[Π] They seem also to have a very great love for professors that are sincere; and, above all others, to desire to associate with them, and to be in their company, as if they could live upon the good man’s crumbs.

[Π] They pretend also, that therefore it is that they frequent the house of the godly, and the appointments of the Lord: but when they are by themselves, as the robin, they can catch and gobble up spiders; they can change their diet, drink iniquity, and swallow down sin like water.

[@] So, when they were come again into the house, because supper as yet was not ready,…
&lt;&lt;include &quot;22-SI-7-13&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="564" name="22-TR-7-13" tags="moment manor" position="2525,1325" size="100,100">[@] Christiana again desired that the Interpreter would either show or tell some other things that are profitable. Then the Interpreter began, and said, 

[Π] The fatter the sow is, the more she desires the mire; the fatter the ox is, the more gamesomely he goes to the slaughter; and the more healthy the lustful man is, the more prone he is unto evil.

[Π] There is a desire in women to go neat and find; and it is a comely thing to be adorned with that which in God’s sight is of great price. 

[Π] ‘T is easier watching a night or two, than to sit up a whole year together: so ‘t is easier for one to begin to profess well, than to hold out as he should to the end.

[Π] Every shipmaster, when in a storm, will willingly cast that overboard which is of the smallest value in the vessel; but who will throw the best out first? None but he that feareth not God. One leak will sink a ship, and one sin will destroy a sinner.

[Π] He that forgets his friend is ungrateful unto him; but he that forgets his Saviour is unmerciful to himself. He that lives in sin, and looks for happiness hereafter, is like him that soweth cockle, and thinks to fill his barn with wheat or barley. If a man would live well, let him fetch his last day to him, and make it always his company-keeper. 

[Π] Whispering, and change of thoughts, prove that sin is in the world. If the world, which God sets light by, is counted a thing of that worth with men, what is heaven, that God commendeth?

[Π] If the life that is attended with so many troubles, is so loth to be let go by us, what is the life above?

[Π] Every body will cry up the goodness of men; but who is there that is, as he should be, affected with the goodness of God?

[Π] We seldom sit down to meat, but we eat, and leave. So there is in Jesus Christ more merit and righteousness than the whole world has need of.

[@] When the Interpreter had done, he takes them out into his garden again, and had them to a tree whose inside was all rotten and gone, and yet it grew and had leaves.

[13] What means this?

[Π] This tree whose outside is fair, and whose inside is rotten, is that to which many may be compared that are in the garden of God; who with their mouths speak high in behalf of God, but indeed will do nothing for him; whose leaves are fair, but their heart good for nothing but to be tinder for the devil’s tinder-box.

[@] Now [[supper was ready|22-SU-7-13-223]], the table spread, and all things set on the board:</tw-passagedata><tw-passagedata pid="565" name="22-SU-7-13-223" tags="moment manor" position="2650,1325" size="100,100">[@] So they sat down, and did eat, when one had given thanks. And the Interpreter did usually entertain those that lodged with him with music at meals; so the minstrels played.

[@] There was also one that did sing, and a very fine voice he had. His song was this:

[223] 
&gt;//♩&lt;&lt;journal &quot;The Lord is only my support&quot;&gt;&gt;♬//
[@] When the song and music were ended, the Interpreter asked Christiana what it was that at first did move her thus to betake herself to a pilgrim’s life. Christiana answered,

[7] First, the loss of my husband came into my mind, at which I was heartily grieved; but all that was but natural affection. Then after that came the troubles and pilgrimage of my husband into my mind, and also how like a churl I had carried it to him as to that.

[7] So guilt took hold of my mind, and would have drawn me into the pond, but that opportunely I had a dream of the well-being of my husband, and a letter sent me by the King of that country where my husband dwells, to come to him. The dream and the letter together so wrought upon my mind that they forced me to this way.

[Π] But met you with no opposition before you set out of doors?

[7] Yes, a neighbor of mine, one Mrs. Timorous: she was akin to him that would have persuaded my husband to go back, for fear of the lions. She also befooled me, for, as she called it, my intended desperate adventure; she also urged what she could to dishearten me from it, the hardships and troubles that my husband met with in the way; but all this I got over pretty well.

[7] But a dream that I had of two ill-looking ones, that I thought did plot how to make me miscarry in my journey, that hath troubled me much: yea, it still runs in my mind, and makes me afraid of every one that I meet, lest they should meet me to do me a mischief, and to turn me out of my way.

[7] Yea, I may tell my Lord, though I would not have every body know of it, that between this and the gate by which we got into the way, we were both so sorely assaulted that we were made to cry out murder; and the two that made this assault upon us, were like the two that I saw in my dream.

[Π] Thy beginning is good; thy latter end shall greatly increase.

[@] So he addressed himself to Mercy, and said unto her,

[Π] And what moved thee to come hither, sweet heart?

[@] Then Mercy blushed and trembled, and for a while continued silent.

[Π] Be not afraid; only believe, and speak thy mind. 

[13] Truly, sir, my want of experience is that which makes me covet to be in silence, and that also that fills me with fears of coming short at last.

[13] I cannot tell of visions and dreams, as my friend Christiana can; nor know I what it is to mourn for my refusing the counsel of those that were good relations.

[Π] What was it, then, dear heart, that hath prevailed with thee to do as thou hast done?

[13] Why, when our friend here was packing up to be gone from our town, I and another went accidentally to see her. So we knocked at the door and went in. 

[13] When we were within, and seeing what she was doing, we asked her what was her meaning. She said she was sent for to go to her husband; and then she up and told us how she had seen him in a dream, dwelling in a curious place, among immortals, wearing a crown, playing upon a harp, eating and drinking at his Prince’s table, and singing praises to him for bringing him thither, etc.

[13] Now, methought, while she was telling these things unto us, my heart burned within me. And I said in my heart, If this be true, I will leave my father and my mother, and the land of my nativity, and will, if I may, go along with Christiana.

[13] So I asked her further of the truth of these things, and if she would let me go with her; for I saw now that there was no dwelling, but with the danger of ruin, any longer in our town.

[13] But yet I came away with a heavy heart; not for that I was unwilling to come away, but for that so many of my relations were left behind. And I am come with all the desire of my heart, and will go, if I may, with Christiana unto her husband and his King.

[Π] Thy setting out is good, for thou hast given credit to the truth; thou art a Ruth, who did, for the love she bare to Naomi and to the Lord her God, leave father and mother, and the land of her nativity, to come out and go with a people she knew not heretofore.
&gt; __The Lord recompense thy work, and a full reward be given thee of the Lord God of Israel, under whose wings thou art come to trust.__(Ruth 2:11-12)
[@] Now supper was ended, and preparation was [[made for bed|22-CL-7-13-222-231]]; the women were laid singly alone, and the boys by themselves.

[@] Now when Mercy was in bed, she could not sleep for joy, for that now her doubts of missing at last were removed further from her than ever they were before. So she lay blessing and praising God, who had such favor for her.</tw-passagedata><tw-passagedata pid="566" name="The Lord is only my support" tags="journal" position="2275,1325" size="100,100">The Lord is only my support,
   And he that doth me feed;
How can I then want any thing
   Whereof I stand in need?</tw-passagedata><tw-passagedata pid="567" name="22-CL-7-13-222-231" tags="moment manor" position="2775,1325" size="100,100">[@] In the morning they arose with the sun, and prepared themselves for their departure; but the Interpreter would have them tarry a while; For, said he, 

[Π] You must orderly go from hence.

[@] Then said he to the damsel that first opened unto them, 

[Π] Take them and have them into the garden to the bath, and there wash them and make them clean from the soil which they had gathered by traveling.

[@] Then Innocent the damsel took them and led them into the garden, and brought them to the bath; so she told them that there they must wash and be clean, for so her Master would have the women to do that called at his house as they were going on pilgrimage.

[@] Then they went in and washed, yea, they and the boys, and all; and they came out of that bath, not only sweet and clean, but also much enlivened and strengthened in their joints. So when they came in, they looked fairer a deal than when they went out to the washing.

[@] When they were returned out of the garden from the bath, the Interpreter took them and looked upon them, and said unto them,

[Π] Fair as the moon.

[@] Then he called for the seal wherewith they used to be sealed that were washed in his bath.

[@] So the seal was brought, and he set his mark upon them, that they might be known in the places whither they were yet to go. Now the seal was the __contents and sum of the passover__ (Exodus 13:8-10) which the children of Israel did eat, when they came out of the land of Egypt; and the mark was set between their eyes.

[@] This seal greatly added to their beauty, for it was an ornament to their faces. It also added to their gravity, and made their countenance more like those of angels. Then said the Interpreter again to the damsel that waited upon these women,

[Π] Go into the vestry, and fetch out garments for these people.

[@] So she went and fetched out white raiment, and laid it down before him; so he commanded them to put it on: it was fine linen, white and clean.

[@] When the women were thus adorned, they seemed to be a terror one to the other; for that they could not see that glory each one had in herself, which they could see in each other. Now therefore they began to esteem each other better than themselves.

[7] You are fairer than I am,

[13] You are more comely than I am,

[@] The children also stood amazed, to see into what fashion they were brought.

[@] The Interpreter then called for a man-servant of his, one Great-heart, and bid him take A sword, and helmet, and shield; and,

[Π] Take these my daughters, conduct them to the house called Beautiful, at which place they will rest next.

[@] So he took his weapons, and went before them; and the Interpreter said,

[Π] God speed.

[@] Those also that belonged to the family, sent them away with many a good wish. So they went [[on their way|23-CR-7-13-231]], and sang,

[7] [13]
&gt; //♪&lt;&lt;journal &quot;House of the Interpreter&quot;&gt;&gt;♫//</tw-passagedata><tw-passagedata pid="568" name="Exodus 13:8-10 KJV" tags="bible" position="3900,1000" size="100,100">And thou shalt shew thy son in that day, saying, This is done because of that which the Lord did unto me when I came forth out of Egypt. And it shall be for a sign unto thee upon thine hand, and for a memorial between thine eyes, that the Lord’s law may be in thy mouth: for with a strong hand hath the Lord brought thee out of Egypt. Thou shalt therefore keep this ordinance in his season from year to year.</tw-passagedata><tw-passagedata pid="569" name="House of the Interpreter" tags="journal" position="2375,1325" size="100,100">This place hath been our second stage:
   Here we have heard, and seen
Those good things, that from age to age
   To others hid have been.

The dunghill-raker, spider, hen,
   The chicken, too, to me
Have taught a lesson: let me then
   Conformed to it be.

The butcher, garden, and the field,
   The robin and his bait,
Also the rotten tree, doth yield
   Me argument of weight,

To move me for to watch and pray,
   To strive to be sincere;
To take my cross up day by day,
   And serve the Lord with fear.</tw-passagedata><tw-passagedata pid="570" name="23-CR-7-13-231" tags="moment tree" position="2525,1650" size="100,100">[@] Now I saw in my dream, that they went on, and Great-Heart before them. So they went, and came to the place where Christian’s burden fell off his back and tumbled into a sepulchre.

[@] Here then they made a pause; and here also they blessed God. Now, said Christiana,

[7] …it comes to my mind what was said to us at the gate, to wit, that we should have pardon by word and deed: by word, that is, by the promise; by deed, to wit, in the way it was obtained.

[7] What the promise is, of that I know something; but what is it to have pardon by deed, or in the way that it was obtained, Mr. Great-Heart, I suppose you know; wherefore, if you please, let us hear your discourse thereof.

[231] Pardon by the deed done, is pardon obtained by some one for another that hath need thereof; not by the person pardoned, but in the way, saith another, in which I have obtained it.

[231] So then, to speak to the question more at large, the pardon that you, and Mercy, and these boys have attained, was obtained by another; to wit, by him that let you in at the gate. And he hath obtained it in this double way; he hath performed righteousness to cover you, and spilt his blood to wash you in.

[7] But if he parts with his righteousness to us, what will he have for himself? 

[231] He has more righteousness than you have need of, or than he needeth himself.

[7] Pray make that appear.

[231] With all my heart: but first I must premise, that he of whom we are now about to speak, is one that has not his fellow:

[231] He has two natures in one person, plain to be distinguished, impossible to be divided. Unto each of these natures a righteousness belongeth, and each righteousness is essential to that nature; so that one may as easily cause that nature to be extinct, as to separate its justice or righteousness from it.

[231] Of these righteousnesses therefore, we are not made partakers, so as that they, or any of them, should be put upon us, that we might be made just, and live thereby.

[231] Besides these, there is a righteousness which this person has, as these two natures are joined in one. And this is not the righteousness of the Godhead, as distinguished from the manhood; nor the righteousness of the manhood, as distinguished from the Godhead; but a righteousness which standeth in the union of both natures, and may properly be called the righteousness that is essential to his being prepared of God to the capacity of the mediatory office, which he was to be entrusted with.

[231] If he parts with his first righteousness, he parts with his Godhead; if he parts with his second righteousness, he parts with the purity of his manhood; if he parts with his third, he parts with that perfection that capacitates him to the office of mediation.

[231] He has therefore another righteousness, which standeth in performance, or obedience to a revealed will; and that is what he puts upon sinners, and that by which their sins are covered. Wherefore he saith,
&gt; &lt;&lt;book &quot;Romans 5:19 KJV&quot;&gt;&gt;
[7] But are the other righteousnesses of no use to us?

[231] Yes; for though they are essential to his natures and office, and cannot be communicated unto another, yet it is by virtue of them that the righteousness that justifies is for that purpose efficacious.

[231] The righteousness of his Godhead gives virtue to his obedience; the righteousness of his manhood giveth capability to his obedience to justify; and the righteousness that standeth in the union of these two natures to his office, giveth authority to that righteousness to do the work for which it was ordained.

[231] So then here is a righteousness that Christ, as God, has no need of; for he is God without it: Here is a righteousness that Christ, as man, has no need of to make him so; for he is perfect man without it. Again, here is a righteousness that Christ, as God-man, has no need of; for he is perfectly so without it. Here then is a righteousness that Christ, as God, and as God-man, has no need of, with reference to himself, and therefore he can spare it; a justifying righteousness, that he for himself wanteth not, and therefore giveth it away: Hence it is called the gift of righteousness.

[231] This righteousness, since Christ Jesus the Lord has made himself under the law, must be given away; for the law doth not only bind him that is under it, to do justly, but to __use charity__ (Romans 5:17). 

[231] Wherefore he must, or ought by the law, if he hath two coats, to give one to him that hath none. Now, our Lord indeed hath two coats, one for himself, and one to spare; wherefore he freely bestows one upon those that have none.

[231] And thus, Christiana and Mercy, and the rest of you that are here, doth your pardon come by deed, or by the work of another man. Your Lord Christ is he that worked, and hath given away what he wrought for, to the next poor beggar he meets.

[231] But again, in order to pardon by deed, there must something be paid to God as a price, as well as something prepared to cover us withal. 

[231] Sin has delivered us up to the just curse of a righteous law: now from this curse we must be justified by way of redemption, a price being paid for the harms we have done; and this is by the blood of your Lord, who came and stood in your place and stead, and died your death for your transgressions:

[231] Thus has __he ransomed you__ (Galatians 3:13) from your transgressions by blood, and covered your polluted and deformed souls with righteousness; for the sake of which, __God passeth by you__ (Romans 8:34) and will not hurt you when he comes to judge the world.

[7] his is brave! Now I see that there was something to be learned by our being pardoned by word and deed. Good Mercy, let us labor to keep this in mind: and, my children, do you remember it also.

[7] But, sir, was not this it that made my good Christian’s burden fall from off his shoulder, and that made him give three leaps for joy?

[231] Yes, it was the belief of this that cut those strings that could not be cut by other means; and it was to give him a proof of the virtue of this, that he was suffered to carry his burden to the cross.

[7] I thought so; for though my heart was lightsome and joyous before, yet it is ten times more lightsome and joyous now. 

[7] And I am persuaded by what I have felt, though I have felt but little as yet, that if the most burdened man in the world was here, and did see and believe as I now do, it would make his heart the more merry and blithe.

[231] There is not only comfort and the ease of a burden brought to us by the sight and consideration of these, but an endeared affection begot in us by it:

[231] …for who can, if he doth but once think that pardon comes not only by promise but thus, but be affected with the way and means of his redemption, and so with the man that hath wrought it for him?

[7] True; methinks it makes my heart bleed to think that he should bleed for me.

[7]
&gt; &lt;&lt;journal &quot;Christina&#39;s prayer at the cross&quot;&gt;&gt;
[231] You speak now in the warmth of your affections; will it, think you, be always thus with you?

[231] Besides, this is not communicated to every one, nor to every one that did see your Jesus bleed. There were that stood by, and that saw the blood run from the heart to the ground, and yet were so far off this, that instead of lamenting, they laughed at him, and, instead of becoming his disciples, did harden their hearts against him.

[231] So that all that you have, my daughters, you have by peculiar impression made by a divine contemplating upon what I have spoken to you. Remember, that ‘twas told you, that the hen, by her common call, gives no meat to her chickens. This you have therefore by a special grace.

[@] Now I saw in my dream, that they [[went on …|23-GU-7-13-231]]</tw-passagedata><tw-passagedata pid="571" name="Romans 5:19 KJV" tags="bible" position="3200,1650" size="100,100">For as by one man’s disobedience many were made sinners, so by the obedience of one shall many be made righteous.</tw-passagedata><tw-passagedata pid="572" name="Romans 5:17 KJV" tags="bible" position="3300,1650" size="100,100">For if by one man’s offence death reigned by one; much more they which receive abundance of grace and of the gift of righteousness shall reign in life by one, Jesus Christ.</tw-passagedata><tw-passagedata pid="573" name="Romans 8:34 KJV" tags="bible prayer" position="3400,1650" size="100,100">Who is he that condemneth? It is Christ that died, yea rather, that is risen again, who is even at the right hand of God, who also maketh intercession for us.</tw-passagedata><tw-passagedata pid="574" name="Galatians 3:13 KJV" tags="bible" position="3500,1650" size="100,100">Christ hath redeemed us from the curse of the law, being made a curse for us: for it is written, Cursed is every one that hangeth on a tree:</tw-passagedata><tw-passagedata pid="575" name="Christina&#39;s prayer at the cross" tags="journal" position="2275,1650" size="100,100">Oh, thou loving One: 
Oh, thou blessed One. 
Thou deservest to have me; 
   thou hast bought me. 
Thou deservest to have me all: 
   thou hast paid for me ten thousand times
   more than I am worth.
 
No marvel that this made the tears
   stand in my husband’s eyes, and that
   it made him trudge so nimbly on. 
I am persuaded he wished me with him:
   but, vile wretch that I was,
   I let him come all alone.

Oh, Mercy, that thy father and mother were here;
   yea, and Mrs. Timorous also:
   nay, I wish now with all my heart
   that here was Madam Wanton too.

Surely, surely, their hearts would be affected; 
   nor could the fear of the one,
   nor the powerful lusts of the other,
   prevail with them to go home again, and 
   to refuse to become good pilgrims.</tw-passagedata><tw-passagedata pid="576" name="23-GU-7-13-231" tags="moment gulf" position="2650,1650" size="100,100">[@] Now I saw in my dream, that they went on until they were come to the place that Simple, and Sloth, and Presumption, lay and slept in when Christian went by on pilgrimage: and behold, they were hanged up in irons a little way off on the other side.

[@] Then said Mercy to him that was their guide and conductor,

[13] What are these three men; and for what are they hanged there?

[231] These three men were men of very bad qualities; they had no mind to be pilgrims themselves, and whomsoever they could, they hindered.

[231] They were sloth and folly themselves, and whomsoever they could persuade they made so too, and withal taught them to presume that they should do well at last. They were asleep when Christian went by; and now you go by, they are hanged.

[13] But could they persuade any to be of their opinion?

[231] Yes, they turned several out of the way. There was Slow-pace that they persuaded to do as they. They also prevailed with one Short-wind, with one No-heart, with one Linger-after-Lust, and with one Sleepy-head, and with a young woman, her name was Dull, to turn out of the way and become as they.

[231] Besides, they brought up an ill report of your Lord, persuading others that he was a hard taskmaster. They also brought up an evil report of the good Land, saying, it was not half so good as some pretended it was. They also began to vilify his servants, and to count the best of them meddlesome, troublesome busybodies.

[231] Further, they would call the bread of God husks; the comforts of his children, fancies; the travel and labor of pilgrims, things to no purpose.

[7] Nay, if they were such, they shall never be bewailed by me: they have but what they deserve; and I think it is well that they stand so near the highway, that others may see and take warning.

[7] But had it not been well if their crimes had been engraven in some plate of iron or brass, and left here where they did their mischiefs, for a caution to other bad men?

[231] So it is, as you may well perceive, if you will go a little to the wall.

[13] No, no; let them hang, and their names rot, and their crimes live forever against them. I think it a high favor that they were hanged before we came hither: who knows else what they might have done to such poor women as we are?

[@] Then she turned it into a song,

[13] 
&gt; //♭♩&lt;&lt;journal &quot;Pilgrims&#39; bane&quot;&gt;&gt;♩//
[@] Thus they went on till they came to the [[foot of the hill Difficulty|23-SP-7-13-231]].</tw-passagedata><tw-passagedata pid="577" name="Pilgrims&#39; bane" tags="journal" position="2375,1650" size="100,100">Now then you three hang there, and be a sign
   To all that shall against the truth combine.

And let him that comes after, fear this end,
   If unto pilgrims he is not a friend.

And thou, my soul, of all such men beware,
   That unto holiness opposers are.</tw-passagedata><tw-passagedata pid="578" name="23-SP-7-13-231" tags="moment crossroads_at_foothill" position="2775,1650" size="100,100">[@] Thus they went on till they came to the foot of the hill Difficulty, where again the good Mr. Great-Heart took an occasion to tell them what happened there when Christian himself went by.

[@] So he had them first to the spring. 

[231] Lo, this is the spring that Christian drank of before he went up this hill: and then it was clear and good; but __now it is dirty__ (Ezekiel 34:18-19) with the feet of some that are not desirous that pilgrims here should quench their thirst.

[13] And why so envious, trow?

[231] …it will do, if taken up and put into a vessel that is sweet and good; for then the dirt will sink to the bottom, and the water come out by itself more clear.

[@] Thus therefore Christiana and her companions were compelled to do. They took it up, and put it into an earthen pot, and so let it stand till the dirt was gone to the bottom, and then they drank thereof.

[@] Next he showed them the two by-ways that were at the foot of the hill, where Formality and Hypocrisy lost themselves. And, said he, 

[231] …these are dangerous paths. Two were here cast away when Christian came by; and although, as you see these ways are since stopped up with chains, posts, and a ditch, yet there are those that will choose to adventure here rather than take the pains to go up this hill.

[7]
&gt; __The way of transgressors is hard.__ (Proverbs 13:15)
It is a wonder that they can get into these ways without danger of breaking their necks.

[231] They will venture: yea, if at any time any of the King’s servants do happen to see them, and do call upon them, and tell them that they are in the wrong way, and do bid them beware of the danger, then they railingly return them answer, and say,
&gt; __As for the word that thou hast spoken unto us in the name of the King, we will not hearken unto thee; but we will certainly do whatsoever thing goeth out of our own mouths.__ (Jeremiah 44:16-17)
[231] Nay, if you look a little further, you shall see that these ways are made cautionary enough, not only by these posts, and ditch, and chain, but also by being hedged up: yet they will choose to go there.

[7] They are idle; they love not to take pains; up-hill way is unpleasant to them. So it is fulfilled unto them as it is written, 
&gt; __The way of the slothful man is full of thorns.__ (Proverbs 15:19)
Yea, they will rather choose to walk upon a snare than to go up this hill, and the rest of this way to the city.

[@] Then they set forward, and began to go [[up the hill.|23-AR-7-11-13-231]]</tw-passagedata><tw-passagedata pid="579" name="Ezekiel 34:18-19 KJV" tags="bible" position="3575,1650" size="100,100">Seemeth it a small thing unto you to have eaten up the good pasture, but ye must tread down with your feet the residue of your pastures? and to have drunk of the deep waters, but ye must foul the residue with your feet? And as for my flock, they eat that which ye have trodden with your feet; and they drink that which ye have fouled with your feet.</tw-passagedata><tw-passagedata pid="580" name="Proverbs 13:15 KJV" tags="bible" position="3675,1650" size="100,100">Good understanding giveth favour: but the way of transgressors is hard.</tw-passagedata><tw-passagedata pid="581" name="Jeremiah 44:16-17 KJV" tags="bible" position="3775,1650" size="100,100">As for the word that thou hast spoken unto us in the name of the Lord, we will not hearken unto thee. But we will certainly do whatsoever thing goeth forth out of our own mouth, to burn incense unto the queen of heaven, and to pour out drink offerings unto her, as we have done, we, and our fathers, our kings, and our princes, in the cities of Judah, and in the streets of Jerusalem: for then had we plenty of victuals, and were well, and saw no evil.</tw-passagedata><tw-passagedata pid="582" name="Proverbs 15:19 KJV" tags="bible" position="3875,1650" size="100,100">The way of the slothful man is as an hedge of thorns: but the way of the righteous is made plain.</tw-passagedata><tw-passagedata pid="583" name="23-AR-7-11-13-231" tags="moment mid-hill" position="2900,1650" size="100,100">[@] And up the hill they went. But before they got to the top, Christiana began to pant, and said,

[7] I dare say this is a breathing hill; no marvel if they that love their ease more than their souls choose to themselves a smoother way. 

[13] I must sit down: also the least of the children began to cry.

[231] Come, come, sit not down here; for a little above is the Prince’s arbor.

[@] Then he took the little boy by the hand, and led him up thereto.

[@] When they were come to the arbor, they were very willing to sit down, for they were all in a pelting heat. Then said Mercy,

[13] How sweet is rest __to them that labor__ (Matthew 11:28); and how good is the Prince of pilgrims to provide such resting-places for them! Of this arbor I have heard much; but I never saw it before. But here let us beware of sleeping; for, as I have heard, it cost poor Christian dear.

[@] Then said Mr. Great-Heart to the little ones, 

[231] Come, my pretty boys, how do you do? What think you now of going on pilgrimage?

[11] Sir, (said the least,) I was almost beat out of heart; but I thank you for lending me a hand at my need. And I remember now what my mother hath told me, namely, that the way to heaven is as a ladder, and the way to hell is as down a hill. But I had rather go up the ladder to life, than down the hill to death. 

[13] But the proverb is, “To go down the hill is easy.”

[@] But James said, (for that was his name,)

[11] The day is coming when, in my opinion, when going down the hill will be the hardest of all.

[231] ‘Tis a good boy, thou hast given her a right answer.

[@] Then Mercy smiled, but the little boy did blush.

[7] Come, will you eat a bit to sweeten your mouths, while you sit here to rest your legs? for I have here a piece of pomegranate which Mr. Interpreter put into my hand just when I came out of his door; he gave me also a piece of an honeycomb, and a little bottle of spirits.

[13] I thought he gave you something, because he called you aside.

[7] Yes, so he did, but, it shall be still as I said it should, when at first we came from home; thou shalt be a sharer in all the good that I have, because thou so willingly didst become my companion.

[@] Then she gave to them, and they did eat, both Mercy and the boys. And said Christiana to Mr. Great-Heart,

[7] Sir, will you do as we?

[231] You are going on pilgrimage, and presently I shall return; much good may what you have do you: at home I eat the same every day.

[@] Now when they had eaten and drank, and had chatted a little longer, their guide said to them, 

[231] The day wears away; if you think good, let us prepare to be going.

[@] So they got up to go, and the little boys went before; But Christiana forgot to take her bottle of spirits with her, so she sent her little boy back to fetch it. Then said Mercy,

[13] I think this is a losing place: here Christian lost his roll, and here Christiana left her bottle behind her. Sir, what is the cause of this?

[231] The cause is sleep, or forgetfulness: some sleep when they should keep awake, and some forget when they should remember; and this is the very cause why often, at the resting-places, some pilgrims in some things come off losers.

[231] Pilgrims should watch, and remember what they have already received, under their greatest enjoyments; but for want of doing so, oftentimes their rejoicing ends in tears, and their sunshine in a cloud: witness the story of Christian at this place.

[@] When they were come to [[the place|24-TO-7-13-231-241]] where Mistrust and Timorous met Christian…</tw-passagedata><tw-passagedata pid="584" name="Ezekiel 16:8-11 KJV" tags="bible" position="3600,2000" size="100,100">Now when I passed by thee, and looked upon thee, behold, thy time was the time of love; and I spread my skirt over thee, and covered thy nakedness: yea, I sware unto thee, and entered into a covenant with thee, saith the Lord GOD, and thou becamest mine. Then washed I thee with water; yea, I throughly washed away thy blood from thee, and I anointed thee with oil. I clothed thee also with broidered work, and shod thee with badgers’ skin, and I girded thee about with fine linen, and I covered thee with silk. I decked thee also with ornaments, and I put bracelets upon thy hands, and a chain on thy neck.</tw-passagedata><tw-passagedata pid="585" name="24-TO-7-13-231-241" tags="moment hilltop" position="2525,2000" size="100,100">[@] When they were come to the place where Mistrust and Timorous met Christian, to persuade him to go back for fear of the lions, they perceived as it were a stage, and before it, towards the road, a broad plate with a copy of verses written thereon, and underneath the reason of raising up that stage in that place rendered. The verses were,
&gt; &lt;&lt;journal &quot;Trial of faith&quot;&gt;&gt;
[@] The words underneath the verses were, 
&gt; This stage was built to punish those upon, who, through timorousness or mistrust, shall be afraid to go further on pilgrimage. Also, on this stage both Mistrust and Timorous were burned through the tongue with a hot iron, for endeavoring to hinder Christian on his journey.
[13] This is much like to the saying of the Beloved:
&gt; &lt;&lt;book &quot;Psalm 120:3-4 KJV&quot;&gt;&gt;
[@] So they went on till they came within sight of the lions. Now Mr. Great-Heart was a strong man, so he was not afraid of a lion: ut yet when they were come up to the place where the lions were, the boys, that went before, were now glad to cringe behind, for they were afraid of the lions; so they stepped back, and went behind. At this their guide smiled, and said, 

[231] How now, my boys; do you love to go before when no danger doth approach, and love to come behind so soon as the lions appear?

[@] Now, as they went on, Mr. Great-heart drew his sword, with intent to make a way for the pilgrims in spite of the lions. Then there appeared one that, it seems, had taken upon him to back the lions; and he said to the pilgrims’ guide,

[241] What is the cause of your coming hither?

[@] Now the name of that man was Grim, or Bloody-man because of his slaying of pilgrims; and he was of the race of the giants. Then said the pilgrims’ guide, 

[231] These women and children are going on pilgrimage, and this is the way they must go; and go it they shall, in spite of thee and the lions.

[241] This is not their way, neither shall they go therein. I am come forth to withstand them, and to that end will back the lions.

[@] Now, to say the truth, by reason of the fierceness of the lions, and of the grim carriage of him that did back them, this way had of late lain much unoccupied, and was almost grown over with grass. Then said Christiana,

[7] Though the highways have been unoccupied heretofore, and though the travellers have been made in times past to walk through by-paths, it must not be so now I am risen, now __I am risen a mother in Israel.__ (Judges 5:6-7)

[@] Then Grim swore by the lions that it should; and therefore bid them turn aside, for they should not have passage there.

[@] But Great-Heart their guide made first his approach unto Grim, and laid so heavily on him with his sword that he forced him to retreat. Then said he that attempted to back the lions, 

[241] Will you slay me upon mine own ground?

[231] It is the King’s highway that we are in, and in this way it is that thou hast placed the lions; but these women, and these children, though weak, shall hold on their way in spite of thy lions.

[@]  And with that he gave him again a downright blow, and brought him upon his knees. With this blow also he broke his helmet, and with the next he cut off an arm. 

[@] Then did the giant roar so hideously that his voice frightened the women, and yet they were glad to see him lie sprawling upon the ground.

[@] Now the lions were chained, and so of themselves could do nothing. Wherefore, when old Grim, that intended to back them, was dead, Mr. Great-Heart said to the pilgrims, 

[231] Come now, and follow me, and no hurt shall happen to you from the lions.

[@] They therefore went on, but the women trembled as they passed by them; the boys also looked as if they would die; but [[they all got by|24-LO-7-11-13-38-231-242]] without further hurt.</tw-passagedata><tw-passagedata pid="586" name="Trial of faith" tags="journal" position="2375,2000" size="100,100">Let him that sees this stage, take heed
   Unto his heart and tongue;
Lest, if he do not, here he speed
   As some have long agone.</tw-passagedata><tw-passagedata pid="587" name="Psalm 120:3-4 KJV" tags="bible" position="3200,2000" size="100,100">What shall be given unto thee? or what shall be done unto thee, thou false tongue? Sharp arrows of the mighty, with coals of juniper.</tw-passagedata><tw-passagedata pid="588" name="Judges 5:6-7 KJV" tags="bible" position="3300,2000" size="100,100">In the days of Shamgar the son of Anath, in the days of Jael, the highways were unoccupied, and the travellers walked through byways. The inhabitants of the villages ceased, they ceased in Israel, until that I Deborah arose, that I arose a mother in Israel</tw-passagedata><tw-passagedata pid="589" name="24-LO-7-11-13-38-231-242" tags="moment lodge" position="2650,2000" size="100,100">[@] Now, when they were within sight of the Porter’s lodge, they soon came up unto it; but they made the more haste after this to go thither, because it is dangerous traveling there in the night.

[@] So when they were come to the gate, the guide knocked, and the Porter cried, 

[38] Who is there?

[@] But as soon as the guide had said,

[231] It is I,

[@] ...he knew his voice, and came down, for the guide had oft before that come thither as a conductor of pilgrims. 

[@] When he was come down, he opened the gate; and seeing the guide standing just before it, (for he saw not the women, for they were behind him,) he said unto him,

[38] Mr. Great-Heart, what is your business here so late at night?

[231] I have brought some pilgrims hither, where, by my Lord’s commandment, they must lodge: I had been here some time ago, had I not been opposed by the giant that did use to back the lions. But I, after a long and tedious combat with him, have cut him off, and have brought the pilgrims hither in safety.

[38] Will you not go in, and stay till morning?

[231] No, I will return to my Lord to-night.

[7] O, sir, I know not how to be willing you should leave us in our pilgrimage: you have been so faithful and loving to us, you have fought so stoutly for us, you have been so hearty in counselling of us, that I shall never forget your favor towards us.

[13] O that we might have thy company to our journey’s end! How can such poor women as we hold out in a way so full of troubles as this way is, without a friend and defender?

[@] Then said James, the youngest of the boys,

[11] Pray, sir, be persuaded to go with us, and help us, because we are so weak, and the way so dangerous as it is.

[231]  I am at my Lord’s commandment; if he shall allot me to be your guide quite through, I will willingly wait upon you.

[231] But here you failed at first; for when he bid me come thus far with you, then you should have begged me of him to have gone quite through with you, and he would have granted your request. However, at present I must withdraw; and so, good Christiana, Mercy, and my brave children, adieu.

[@] Then the Porter, Mr. Watchful, asked Christiana of her country, and of her kindred. And she said,

[7] I came from the city of Destruction. I am a widow woman, and my husband is dead, his name was Christian, the pilgrim.

[38] How! Was he your husband?

[7] Yes, these are his children and this, (pointing to Mercy,) is one of my town’s-women.

[@] Then the Porter rang his bell, as at such times he is wont, and there come to the door one of the damsels, whose name was Humble-Mind; and to her the Porter said, 

[38] Go tell it within, that Christiana, the wife of Christian, and her children, are come hither on pilgrimage.

[@] She went in, therefore, and told it. But oh, what noise for gladness was there within when the damsel did but drop that out of her mouth!

[@] So they came with haste to the Porter, for Christana stood still at the door. Then some of the most grave said unto her, 

Come in, Christiana, come in, thou wife of that good man; come in, thou blessed woman, come in, with all that are with thee.

[@] So she went in, and they followed her that were her children and companions.

[@] Now when they were gone in, they were had into a large room, where they were bidden to sit down: so they sat down, and the chief of the house were called to see and welcome the guests. 

[@] Then they came in, and understanding who they were, did salute each other with a kiss, and said, 

Welcome, ye vessels of the grace of God; welcome to us, your friends. 

[@] Now, because it was somewhat late, and because the pilgrims were weary with their journey, and also made faint with the sight of the fight, and of the terrible lions, they desired, as soon as might be, to prepare to go to rest.

Nay, said those of the family, refresh yourselves first with a morsel of meat; for they had prepared for them __a lamb__ (Exodus 12:21; John 1:29), with the accustomed sauce belonging thereto; for the Porter had heard before of their coming, and had told it to them within.

[@] So when they had supped, and ended their prayer with a psalm, they desired they might go to rest.

[7] But let us, if we may be so bold as to choose, be in that chamber that was my husband’s when he was here;

[@] …so they had them up thither, and they all lay in [[a room.|24-CH-7-13]]</tw-passagedata><tw-passagedata pid="590" name="Exodus 12:21 KJV" tags="bible" position="3400,2000" size="100,100">Then Moses called for all the elders of Israel, and said unto them, Draw out and take you a lamb according to your families, and kill the passover.</tw-passagedata><tw-passagedata pid="591" name="John 1:29 KJV" tags="bible" position="3500,2000" size="100,100">The next day John seeth Jesus coming unto him, and saith, Behold the Lamb of God, which taketh away the sin of the world.</tw-passagedata><tw-passagedata pid="592" name="24-CH-7-13" tags="moment lodge" position="2775,2000" size="100,100">[@] When they were at rest, Christiana and Mercy entered into discourse about things that were convenient.

[7] Little did I think once, when my husband went on pilgrimage, that I should ever have followed him. 

[13] And you as little thought of lying in his bed, and in his chamber to rest, as you do now.

[7] And much less did I ever think of seeing his face with comfort, and of worshiping the Lord the King with him; and yet now I believe I shall.

[13] Hark, don’t you hear a noise?

[7] Yes, it is, as I believe, a noise of music, for joy that we are here.

[13] Wonderful! Music in the house, music in the heart, and music also in heaven, for joy that we are here!

[@] Thus they talked a while, and then betook themselves to sleep.

[@] So in the morning when they were awake, Christiana said to Mercy,

[7] What was the matter that you did laugh in your sleep to-night? I suppose you were in a dream.

[13] So I was, and a sweet dream it was; but are you sure I laughed?

[7] Yes, you laughed heartily; but prithee, Mercy, tell me thy dream.

[13] I was a dreaming that I sat all alone in a solitary place, and was bemoaning of the hardness of my heart.

[13] Now I had not sat there long but methought many were gathered about me to see me, and to hear what it was that I said. So they hearkened, and I went on bemoaning the hardness of my heart. 

[13] At this, some of them laughed at me, some called me fool, and some began to thrust me about. With that, methought I looked up and saw one coming with wings towards me. So he came directly to me, and said,
&gt; Mercy, what aileth thee?
Now when he had heard me make my complaint, he said, 
&gt; Peace be to thee; 
he also wiped my eyes with his handkerchief, and __clad me in silver and gold.__ (Ezekiel 16:8-11) He put a chain about my neck, and ear-rings in mine ears, and a beautiful crown upon my head. 

[13] Then he took me by the hand, and said, 
&gt; Mercy, come after me.
So he went up, and I followed till we came at a golden gate. Then he knocked; and when they within had opened, the man went in, and I followed him up to a throne, upon which one sat; and he said to me, 
&gt; Welcome, daughter.
[13] The place looked bright and twinkling, like the stars, or rather like the sun, and I thought that I saw your husband there; so I awoke from my dream. But did I laugh?

[7] Laugh! aye, and well you might to see yourself so well. For you must give me leave to tell you that it was a good dream; and that, as you have begun to find the first part true, so you shall find the second at last.
&gt; &lt;&lt;book &quot;Job 33:14-15 KJV&quot;&gt;&gt;
We need not, when abed, to lie awake to talk with God; he can visit us while we sleep, and cause us then to hear his voice.

[7] Our heart oftentimes wakes when we sleep, and God can speak to that, either by words, by proverbs, by signs and similitudes, as well as if one was awake.

[13] Well, I am glad of my dream; for I hope ere long to see it fulfilled, to the making me laugh again.

[7]  I think it is now high time to rise, and to know what we must do.

[13] Pray, if they invite us to stay a while, let us willingly accept of the proffer. I am the more willing to stay a while here, to grow better acquainted with these maids: methinks Prudence, Piety, and Charity, have very comely and sober countenances.

[7] We shall see [[what they will do.|24-LO-7-13-41-42-43]]</tw-passagedata><tw-passagedata pid="593" name="Job 33:14-15 KJV" tags="bible" position="3700,2000" size="100,100">For God speaketh once, yea twice, yet man perceiveth it not. In a dream, in a vision of the night, when deep sleep falleth upon men, in slumberings upon the bed;</tw-passagedata><tw-passagedata pid="594" name="24-LO-7-13-41-42-43" tags="moment lodge" position="2900,2000" size="100,100">[@] So when they were up and ready, they came down, and they asked one another of their rest, and if it was comfortable or not.

[13] Very good, it was one of the best night’s lodgings that ever I had in my life.

[41] and [42] If you will be persuaded to stay here a while, you shall have what the house will afford.

[43] Aye, and that with a very good will.

[@] So they consented, and stayed there about a month or above, and became very profitable one to another.
&lt;&lt;include &quot;24-LO&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="595" name="24-LO" tags="optional" position="2900,2125" size="100,100">* [[Prudence tested the boys|24-LO-7-8-9-10-11-42]] their understanding
* [[Mercy had a visitor|24-LO-13-42-243]]
* [[Christina&#39;s eldest son fell sick|24-LO-7-8-9-244]]
* [[Prudence kept her promise|24-LO-8-42]] answering the boys many a thing
* [[Christina petitioned for Mr. Great-Heart|24-LO-7-10-38-42]] to go with them
* The pilgrims were shown [[profitable things|24-LO-7-13-38-42-231]] as food for thought</tw-passagedata><tw-passagedata pid="596" name="24-LO-7-8-9-10-11-42" tags="moment lodge" position="2525,2275" size="100,100">[@] And because Prudence would see how Christiana had brought up her children, she asked leave of her to catechise them. So she gave her free consent.

[@] Then she began with her youngest, whose name was James.

[42] Come, James, canst thou tell me who made thee?

[11] God the Father, God the Son, and God the Holy Ghost.

[42] Good boy. And canst thou tell who saved thee?

[11] By his grace.

[42] How doth God the Son save thee?

[11] By his righteousness, death and blood, and life. 

[42] And how doth God the Holy Ghost save thee?

[11] By his illumination, by his renovation, and by his preservation.

[@] Then said Prudence to Christiana,

[42] You are to be commended for thus bringing up your children. I suppose I need not ask the rest these questions, since the youngest of them can answer them so well. I will therefore now apply myself to the next youngest.

[42] Come, Joseph, (for his name was Joseph,) will you let me catechise you?

[10] With all my heart.

[42] What is man?

[10] A reasonable creature, so made by God, as my brother said.

[42] What is supposed by this word, saved?

[10] That man, by sin, has brought himself into a state of captivity and misery.

[42] What is supposed by his being saved by the Trinity?

[10] That sin is so great and mighty a tyrant that none can pull us out of its clutches but God; and that God is so good and loving to man, as to pull him indeed out of this miserable state.

[42] What is God’s design in saving poor men?

[10] The glorifying of his name, of his grace, and justice, etc., and the everlasting happiness of his creature.

[42] Who are they that will be saved?

[10] They that accept of his salvation.

[42] Good boy, Joseph; thy mother hath taught thee well, and thou hast hearkened unto what she has said unto thee.

[@] Then said Prudence to Samuel, who was the eldest but one,

[42] Come, Samuel, are you willing that I should catechise you?

[9] Yes, forsooth, if you please.

[42] What is heaven?

[9] A place and state most blessed, because God dwelleth there.

[42] What is hell?

[9] A place and state most woful, because it is the dwelling-place of sin, the devil, and death.

[42] Why wouldst thou go to heaven?

[9] That I may see God, and serve him without weariness; that I may see Christ, and love him everlastingly; that I may have that fullness of the Holy Spirit in me which I can by no means here enjoy.

[42] A very good boy, and one that has learned well.

[@] Then she addressed herself to the eldest, whose name was Matthew; and she said to him, 

[42] Come, Matthew, shall I also catechise you? 

[8] With a very good will.

[42] I ask then, if there was ever any thing that had a being antecedent to or before God?

[8] No, for God is eternal; nor is there any thing, excepting himself, that had a being until the beginning of the first day. For in six days the Lord made heaven and earth, the sea, and all that in them is.

[42] What do you think of the Bible?

[8] It is the holy word of God.

[42] Is there nothing written therein but what you understand?

[8] Yes, a great deal.

[42] What do you do when you meet with places therein that you do not understand?

[8] I think God is wiser than I. I pray also that he will please to let me know all therein that he knows will be for my good.

[42] How believe you as touching the resurrection of the dead?

[8] I believe they shall rise the same that was buried; the same in nature, though not in corruption. And I believe this upon a double account: first, because God has promised it; secondly, because he is able to perform it. 

[@] Then said Prudence to the boys,

[42] You must still hearken to your mother; for she can teach you more. You must also diligently give ear to what good talk you shall hear from others: for your sakes do they speak good things.

[42] Observe also, and that with carefulness, what the heavens and the earth do teach you; but especially be much in the meditation of that book which was the cause of your father’s becoming a pilgrim.

[42] I, for my part, my children, will teach you what I can while you are here, and shall be glad if you will ask me questions that tend to godly edifying. 
&lt;&lt;include &quot;24-LO&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="597" name="24-LO-13-42-243" tags="moment lodge" position="2650,2275" size="100,100">[@] Now by that these pilgrim’s had been at this place a week, Mercy had a visitor that pretended some good-will unto her, and his name was Mr. Brisk; a man of some breeding, and that pretended to religion, but a man that stuck very close to the world.

[@] So he came once or twice, or more, to Mercy, and offered love unto her. Now Mercy was of a fair countenance, and therefore the more alluring.

[@] Her mind also was to be always busying of herself in doing; for when she had nothing to do for herself, she would be making hose and garments for others, and would bestow them upon those that had need.

[@] And Mr. Brisk not knowing where or how she disposed of what she made, seemed to be greatly taken, for that he found her never idle.

[243] (quoth he to himself,) I will warrant her a good housewife.

[@] Mercy then revealed the business to the maidens that were of the house, and inquired of them concerning him, for they did know him better than she. 

[@] So they told her that he was a very busy young man, and one who pretended to religion, but was, as they feared, a stranger to the power of that which is good. 

[13] Nay then, I will look no more on him; for I purpose never to have a clog to my soul.

[42] There needed no matter of great discouragement to be given to him; her continuing so as she had begun to do for the poor, would quickly cool his courage.

[@] So the next time he comes he finds her at her old work, making things for the poor. Then said he,

[243] What, always at it?

[13] Yes, either for myself or for others.

[243] And what canst thou earn a day?

[13] I do these things that I may be rich in __good works__ (1 Timothy 6:17-19), laying up in store for myself a good foundation against the time to come, that I may lay hold on eternal life.

[243] Why, prithee, what doest thou with them?

[13] Clothe the naked.

[@] With that his countenance fell. So he forbore to come at her again. And when he was asked the reason why, he said,

[243] Mercy was a pretty lass, but troubled with ill conditions.

[@] When he had left her, Prudence said,

[42] Did I not tell thee that Mr. Brisk would soon forsake thee?

[42] …yea, he will rise up an ill report of thee; for, notwithstanding his pretence to religion, and his seeming love to Mercy, yet Mercy and he are of tempers so different that I believe they will never come together.

[243] I might have had husbands before now, though I spoke not of it to any; but they were such as did not like my conditions, though never did any of them find fault with my person. So they and I could not agree.

[42] Mercy in our days is but little set by any further than as to its name: the practice which is set forth by thy conditions, there are but few that can abide.

[13] Well, if nobody will have me, I will die unmarried, or my conditions shall be to me as a husband: for I cannot change my nature; and to have one who lies cross to me in this, that I purpose never to admit of as long as I live.

[13] I had a sister named Bountiful, that was married to one of these churls, but he and she could never agree; but because my sister was resolved to do as she had begun, that is, to show kindness to the poor, therefore her husband first cried her down at the cross, and then turned her out of his doors.

[42] And yet he was a professor, I warrant you?

[13] Yes, such a one as he was, and of such as he the world is now full: but I am for none of them all.
&lt;&lt;include &quot;24-LO&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="598" name="1 Timothy 6:17-19 KJV" tags="bible promise" position="3800,2000" size="100,100">Charge them that are rich in this world, that they be not highminded, nor trust in uncertain riches, but in the living God, who giveth us richly all things to enjoy; That they do good, that they be rich in good works, ready to distribute, willing to communicate; Laying up in store for themselves a good foundation against the time to come, that they may lay hold on eternal life.</tw-passagedata><tw-passagedata pid="599" name="24-LO-7-8-9-244" tags="moment lodge" position="2775,2275" size="100,100">[@] Now Matthew, the eldest son of Christiana, fell sick, and his sickness was sore upon him, for he was much pained in his bowels, so that he was with it at times pulled, as it were, both ends together.

[@] There dwelt also not far from thence one Mr. Skill, an ancient and well-approved physician. So Christiana desired it, and entered the room, and had a little observed the boy, he concluded that he was sick of the gripes. Then he said to his mother,

[244] What diet has Matthew of late fed upon?

[7] Diet! Nothing but what is wholesome.

[244] This boy has been tampering with something that lies in his stomach undigested, and that will not away without means. And I tell you he must be purged, or else he will die.

[9] Mother, what was that which my brother did gather up and eat as soon as we were come from the gate that is at the head of this way? You know that there was an orchard on the left hand, on the other side of the wall, and some of the trees hung over the wall, and my brother did pluck and eat.

[7] True, my child, he did take thereof, and did eat: naughty boy as he was, I chid him, and yet he would eat thereof.

[244] I knew he had eaten something that was not wholesome food; and that food, to wit, that fruit, is even the most hurtful of all. It is the fruit of Beelzebub’s orchard. I do marvel that none did warn you of it; many have died thereof.

[@] Then Christiana began to cry; and she said, 

[7] Oh, naughty boy! and Oh, careless mother! what shall I do for my son?

[244] Come, do not be too much dejected; the boy may do well again, but he must purge and vomit.

[7] Pray, sir, try the utmost of your skill with him, whatever it costs.

[244] Nay, I hope I shall be reasonable. So he made him a purge, but it was too weak; it was said it was made of the __blood of a goat__(Hebrews 10:1-4), the __ashes of a heifer__ (Hebrews 9:13), and some of the __juice of hyssop.__ (Hebrews 9:19)

[@] When Mr. Skill had seen that that purge was too weak, he made one to the purpose. 

[231] It was made __ex carne et sanguine Christ__ (John 6:54-57; Hebrews 9:14); (you know physicians give strange medicines to their patients:) and it was made into pills, with a promise or two, and a proportionable quantity of __salt__ (Mark 9:49). Now, he was to take them three at a time, fasting, in half a quarter of a pint of the __tears of repentance.__ (Zechariah 12:10)

[@] When this potion was prepared, and brought to the boy, he was loth to take it, though torn with the gripes as if he should be pulled in pieces.

[231] Come, come, you must take it.

[8] It goes against my stomach.

[7] I must have you take it.

[8] I shall vomit it up again.

[7] Pray, sir, how does it taste?

[231] It has no ill taste.

[@] …and with that she touched one of the pills with the tip of her tongue.

[7] Oh, Matthew, this potion is sweeter than honey. If thou lovest thy mother, if thou lovest thy brothers, if thou lovest Mercy, if thou lovest thy life, take it.

[@] So, with much ado, after a short prayer for the blessing of God upon it, he took it, and it wrought kindly with him.

[@] It caused him to purge; it caused him to sleep, and to rest quietly; it put him into a fine heat and breathing sweat, and did quite rid him of his gripes.

[@] So in a little time he got up, and walked about with a staff, and would go from room to room, and talk with Prudence, Piety, and Charity, of his distemper, and how he was healed.

[@] So when the boy was healed, Christiana asked Mr. Skill, saying,

[7] Sir, what will content you for your pains and care to and of my child?

[244] You must pay the __master of the College of Physicians__ (Hebrews 13:11-15), according to rules made in that case and provided.

[7] But, sir, what is this pill good for else?

[244] It is a universal pill; it is good against all the diseases that pilgrims are incident to; and when it is well prepared, it will keep good, time out of mind. 

[7] Pray, sir, make me up twelve boxes of them; for if I can get these, I will never take other physic.

[244] These pills are good to prevent diseases, as well as to cure when one is sick. Yea, I dare say it, and stand to it, that if a man will but use this physic as he should, it will make him __live for ever.__ (John 6:51)

[244] But, good Christiana, thou must give these pills no other way but as I have prescribed; for if you do, they will do no good.

[@] So he gave unto Christiana physic for herself, and her boys, and for Mercy; and bid Matthew take heed how he ate any more green plums; and kissed them, and went his way.
&lt;&lt;include &quot;24-LO&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="600" name="Hebrews 9:13 KJV" tags="bible" position="3900,2000" size="100,100">For if the blood of bulls and of goats, and the ashes of an heifer sprinkling the unclean, sanctifieth to the purifying of the flesh:</tw-passagedata><tw-passagedata pid="601" name="Hebrews 9:19 KJV" tags="bible" position="4000,2000" size="100,100">For when Moses had spoken every precept to all the people according to the law, he took the blood of calves and of goats, with water, and scarlet wool, and hyssop, and sprinkled both the book, and all the people,</tw-passagedata><tw-passagedata pid="602" name="Hebrews 10:1-4 KJV" tags="bible" position="4100,2000" size="100,100">For the law having a shadow of good things to come, and not the very image of the things, can never with those sacrifices which they offered year by year continually make the comers thereunto perfect. For then would they not have ceased to be offered? because that the worshippers once purged should have had no more conscience of sins. But in those sacrifices there is a remembrance again made of sins every year. For it is not possible that the blood of bulls and of goats should take away sins.</tw-passagedata><tw-passagedata pid="603" name="John 6:54-57 KJV" tags="bible promise" position="3200,2100" size="100,100">(Jesus speaking) Whoso eateth my flesh, and drinketh my blood, hath eternal life; and I will raise him up at the last day. For my flesh is meat indeed, and my blood is drink indeed. He that eateth my flesh, and drinketh my blood, dwelleth in me, and I in him. As the living Father hath sent me, and I live by the Father: so he that eateth me, even he shall live by me.</tw-passagedata><tw-passagedata pid="604" name="Hebrews 9:14 KJV" tags="bible" position="3300,2100" size="100,100">How much more shall the blood of Christ, who through the eternal Spirit offered himself without spot to God, purge your conscience from dead works to serve the living God?</tw-passagedata><tw-passagedata pid="605" name="Mark 9:49 KJV" tags="bible" position="3400,2100" size="100,100">(Jesus speaking) For every one shall be salted with fire, and every sacrifice shall be salted with salt.</tw-passagedata><tw-passagedata pid="606" name="Hebrews 13:11-15 KJV" tags="bible prayer" position="3500,2100" size="100,100">For the bodies of those beasts, whose blood is brought into the sanctuary by the high priest for sin, are burned without the camp. Wherefore Jesus also, that he might sanctify the people with his own blood, suffered without the gate. Let us go forth therefore unto him without the camp, bearing his reproach. For here have we no continuing city, but we seek one to come. By him therefore let us offer the sacrifice of praise to God continually, that is, the fruit of our lips giving thanks to his name.</tw-passagedata><tw-passagedata pid="607" name="John 6:51 KJV" tags="bible promise" position="3600,2100" size="100,100">(Jesus speaking) I am the living bread which came down from heaven: if any man eat of this bread, he shall live for ever: and the bread that I will give is my flesh, which I will give for the life of the world.</tw-passagedata><tw-passagedata pid="608" name="24-LO-8-42" tags="moment lodge" position="2900,2275" size="100,100">[@] It was told you before, that Prudence bid the boys, that if at any time they would, they should ask her some questions that might be profitable and she would say something to them. 

[@] Then Matthew, who had been sick, asked her,

[8] Why for the most part physic should be bitter to our palates?

[42] To show how unwelcome the word of God and the effects thereof are to a carnal heart. 

[8] Why does physic, if it does good, purge, and cause to vomit?

[42] To show that the word, when it works effectually, cleanseth the heart and mind. For look, what the one doth to the body, the other doth to the soul.

[8] What should we learn by seeing the flame of our fire go upwards, and by seeing the beams and sweet influences of the sun strike downwards?

[42] By the going up of the fire, we are taught to ascend to heaven by fervent and hot desires. And by the sun sending his heat, beams, and sweet influences downwards, we are taught the Saviour of the world, though high, reaches down with his grace and love to us below.

[8] Whence have the clouds their water?

[42] Out of the sea.

[8] What may we learn from that?

[42] That ministers should fetch their doctrine from God.

[8] Why do they empty themselves upon the earth?

[42]  To show that ministers should give out what they know of God to the world. 

[8] Why is the rainbow caused by the sun?

[42] To show that the covenant of God’s grace is confirmed to us in Christ.

[8] Why do the springs come from the sea to us through the earth?

[42] To show that the grace of God comes to us through the body of Christ. 

[8] Why do some of the springs rise out of the tops of high hills?

[42] To show that the Spirit of grace shall spring up in some that are great and mighty, as well as in many that are poor and low.

[8] Why doth the fire fasten upon the candle-wick?

[42] To show that unless grace doth kindle upon the heart, there will be no true light of life in us.

[8] Why are the wick, and tallow and all, spent to maintain the light of the candle? 

[42] To show that body and soul, and all, should be at the service of, and spend themselves to maintain in good condition that grace of God that is in us.

[8] Why doth the pelican pierce her own breast with her bill?

[42] To nourish her young ones with her blood, and thereby to show that Christ the blessed so loved his young, (his people,) as to save them from death by his blood.

[8] What may one learn by hearing the cock to crow?

[42] Learn to remember Peter’s sin, and __Peter’s repentance__ (Matthew 26:74-75). The cock’s crowing shows also, that day is coming on: let, then, the crowing of the cock put thee in mind of that last and terrible day of judgment.
&lt;&lt;include &quot;24-LO&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="609" name="Matthew 26:74-75 KJV" tags="bible" position="3700,2100" size="100,100">Then he began to curse and swear, saying, &#39;I do not know the Man!&#39; Immediately a rooster crowed. And Peter remembered the word of Jesus who had said to him, &#39;Before the rooster crows, you will deny Me three times.&#39; So he went out and wept bitterly.</tw-passagedata><tw-passagedata pid="610" name="24-LO-7-10-38-42" tags="moment lodge" position="3025,2275" size="100,100">[@] Now about this time their month was out; wherefore they signified to those of the house, that it was convenient for them to up and be going. Then said Joseph to his mother,

[10] It is proper that you forget not to send to the house of Mr. Interpreter, to pray him to grant that Mr. Great-Heart should be sent unto us, that he may be our conductor for the rest of the way.

[7] Good boy, I had almost forgot.

[@] So she drew up a petition, and prayed Mr. Watchful the porter to send it by some fit man to her good friend Mr. Interpreter; who, when it was come, and he had seen the contents of the petition, said to the messenger,

[Π] Go, tell them that I will send him.

[@] When the family where Christiana was, saw that they had a purpose to go forward, they called the whole house together, to give thanks to their King for sending of them such profitable guests as these. Which done, they said unto Christiana,

[42] And shall we not show thee something, as our custom is to do to pilgrims, on which thou mayest meditate when thou art upon the way?
&lt;&lt;include &quot;24-LO&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="611" name="24-LO-7-13-38-42-231" tags="moment lodge" position="2525,2400" size="100,100">[@] So they took Christiana, her children, and Mercy, into the closet, and showed them one of the apples that Eve ate of, and that she also did give to her husband, and that for the eating of which they were both turned out of paradise, and asked her what she thought that was. Then Christiana said,

[7] It is __food__ (Genesis 3:6) or __poison__ (Romans 7:24), I know not which. 

[@} So they opened the matter to her, and she held up her hands and wondered.

[@] Then they had her to a place, and showed her __Jacob’s ladder.__ (Genesis 28:12) Now at that time there were some angels ascending upon it. So Christiana looked and looked to see the angels go up: so did the rest of the company. 

[@] Then they were going into another place, to show them something else; but James said to his mother,

[11] Pray, bid them stay here a little longer, for this is a curious sight.

[@] So they turned again, and stood feeding their eyes with this so pleasant a prospect.

[@] After this, they had them into a place where did hang up a __golden anchor__ (Hebrews 6:19). So they bid Christiana take it down; for said they,

[43] You shall have it with you, for it is of absolute necessity that you should, that you may lay hold of that within the veil, and stand stedfast in case you should meet with __turbulent weather__ (Joel 3:16): so they were glad thereof. 

[@] Then they took them, and had them to the mount upon which Abraham our father offered up Isaac his son, and showed them  __the altar__ (Genesis 22:9), the wood, the fire, and the knife, for they remain to be seen to this very day. When they had seen it, they held up their hands, and blessed themselves, and said,

[7] [13] Oh, what a man for love to his Master, and for denial to himself, was Abraham! 

[@] After they had showed them all these things, Prudence took them into a dining room, where stood a pair of excellent virginals; so she played upon them, and turned what she had showed them into this excellent song, saying, 

[42]
&gt; //♫&lt;&lt;journal &quot;Lo, the Lamb of God&quot;&gt;&gt;♬ //
[@] Now, about this time, one knocked at the door; so the Porter opened, and behold, Mr. Great-Heart was there.

[@] But when he was come in, what joy was there! for it came now afresh again into their minds, how but a while ago he had slain old Grim Bloody-man the giant, and had delivered them from the lions. Then said Mr. Great-Heart to Christiana and to Mercy,

[231] My Lord has sent each of you a bottle of wine, and also some parched corn, together with a couple of pomegranates; he has also sent the boys some figs and raisins; to refresh you in your way.

[@] Then they addressed themselves to [[their journey|24-GA-7-13-41-42-231]], and Prudence and Piety went along with them.</tw-passagedata><tw-passagedata pid="612" name="Genesis 3:6 KJV" tags="bible" position="3800,2100" size="100,100">And when the woman saw that the tree was good for food, and that it was pleasant to the eyes, and a tree to be desired to make one wise, she took of the fruit thereof, and did eat, and gave also unto her husband with her; and he did eat.</tw-passagedata><tw-passagedata pid="613" name="Genesis 28:12 KJV" tags="bible" position="3900,2100" size="100,100">And he dreamed, and behold a ladder set up on the earth, and the top of it reached to heaven: and behold the angels of God ascending and descending on it.</tw-passagedata><tw-passagedata pid="614" name="Hebrews 6:19 KJV" tags="bible anchor" position="4000,2100" size="100,100">Which hope we have as an anchor of the soul, both sure and stedfast, and which entereth into that within the veil;</tw-passagedata><tw-passagedata pid="615" name="Joel 3:16 KJV" tags="bible anchor" position="4100,2100" size="100,100">The Lord also shall roar out of Zion, and utter his voice from Jerusalem; and the heavens and the earth shall shake: but the Lord will be the hope of his people, and the strength of the children of Israel.</tw-passagedata><tw-passagedata pid="616" name="Genesis 22:9 KJV" tags="bible" position="3200,2200" size="100,100">And they came to the place which God had told him of; and Abraham built an altar there, and laid the wood in order, and bound Isaac his son, and laid him on the altar upon the wood.</tw-passagedata><tw-passagedata pid="617" name="Lo, the Lamb of God" tags="journal" position="2375,2400" size="100,100">Eve’s apple we have showed you;
   Of that be you aware:
You have seen Jacob’s ladder too,
   Upon which angels are.
An anchor you received have;
   But let not these suffice,
Until with Abra’m you have gave
   Your best, a sacrifice.</tw-passagedata><tw-passagedata pid="618" name="24-GA-7-13-41-42-231" tags="moment lodge" position="2650,2400" size="100,100">[@] When they came to the gate, Christiana asked the Porter if any of late went by. He said,

[38] No; only one, some time since, who also told me, that of late there had been a great robbery committed on the King’s highway as you go.

[38] But, the thieves are taken, and will shortly be tried for their lives.

[@] Then Christiana and Mercy were afraid; but Matthew said, 

[8] Mother, fear nothing, as long as Mr. Great-Heart is to go with us, and to be our conductor.

[@] Then said Christiana to the Porter,

[7] Sir, I am much obliged to you for all the kindnesses that you have showed to me since I came hither; and also for that you have been so loving and kind to my children.

[7] I know not how to gratify your kindness; wherefore, pray, as a token of my respect to you, accept of this small mite.

[@] So she put a gold angel9 in his hand; and he made her a low obeisance, and said,

[38]
&gt; &lt;&lt;book &quot;Ecclesiastes 9:8 KJV&quot;&gt;&gt;
Let Mercy __live and not die__ (Deuteronomy 33:6), and let not her works be few.

[@] And to the boys he said, 

[38] Do you fly youthful lusts, and __follow after godliness__ (2 Timothy 2:22) with them that are grave and wise: so shall you put gladness into your mother’s heart, and obtain praise of all that are sober-minded.

[@] So they thanked the Porter, and [[departed.|25-FO-7-13-41-42-231-251]]</tw-passagedata><tw-passagedata pid="619" name="Ecclesiastes 9:8 KJV" tags="bible" position="3300,2200" size="100,100">Let thy garments be always white; and let thy head lack no ointment.</tw-passagedata><tw-passagedata pid="620" name="Deuteronomy 33:6 KJV" tags="bible" position="3400,2200" size="100,100">Let Reuben live, and not die; and let not his men be few.</tw-passagedata><tw-passagedata pid="621" name="2 Timothy 2:22 KJV" tags="bible" position="3500,2200" size="100,100">Flee also youthful lusts: but follow righteousness, faith, charity, peace, with them that call on the Lord out of a pure heart.</tw-passagedata><tw-passagedata pid="622" name="25-FO-7-13-41-42-231-251" tags="moment foothill" position="2525,2725" size="100,100">[@] Now I saw in my dream, that they went forward until they were come to the brow of the Hill; where Piety, bethinking herself, cried out, 

[41] Alas, I have forgot what I intended to bestow upon Christiana and her companions: I will go back and fetch it.

[@] So she ran and fetched it. While she was gone, Christiana thought she heard, in a grove a little way off on the right hand, a most curious melodious note, with words much like these:

[251]
&gt; //♩&lt;&lt;journal &quot;Dwelling place&quot;&gt;&gt;♪//
[@] And listening still, she thought she heard another answer it, saying,

[251] 
&gt; //♩&lt;&lt;journal &quot;God is good&quot;&gt;&gt;♪//
[@] So Christiana asked Prudence,

[7] Who was it that made those __curious notes__ (Song of Solomon 2:11-12)?

[42] They are our country birds: they sing these notes but seldom, except it be at the spring, when the flowers appear, and the sun shines warm, and then you may hear them all day long.

[42] I often, go out to hear them; we also oft-times keep them tame in our house. They are very fine company for us when we are melancholy: also they make the woods, and groves, and solitary places, places desirable to be in.

[@] By this time Piety was come again. So she said to Christiana,

[41] Look here, I have brought thee a scheme of all those things that thou hast seen at our house, upon which thou mayest look when thou findest thyself forgetful, and call those things again to remembrance for thy edification and comfort.

[@] Now they began to go down the hill into the Valley of Humiliation. It was a steep hill, and the way was slippery; but they were very careful; so they got down pretty well.

[@] When they were down in the valley, Piety said to Christiana, 

[41] This is the place where Christian your husband met with the foul fiend Apollyon, and where they had that dreadful fight that they had: I know you cannot but have heard thereof.

[41] But be of good courage; as long as you have here Mr. Great-Heart to be your guide and conductor, we hope you will fare the better.

[@] So when these two had committed the pilgrims unto the conduct of their guide, he went forward, and they [[went after|25-HU-7-11-13-231-252]].</tw-passagedata><tw-passagedata pid="623" name="Dwelling place" tags="journal" position="2175,2725" size="100,100">Through all my life thy favor is
   So frankly showed to me,
That in thy House for evermore
   My dwelling-place shall be.</tw-passagedata><tw-passagedata pid="624" name="God is good" tags="journal" position="2275,2725" size="100,100">For why? The Lord our God is good;
   His mercy is forever sure;
His truth at all times firmly stood,
   And shall from age to age endure.</tw-passagedata><tw-passagedata pid="625" name="Song of Solomon 2:11-12 KJV" tags="bible" position="3200,2725" size="100,100">For, lo, the winter is past, the rain is over and gone; The flowers appear on the earth; the time of the singing of birds is come, and the voice of the turtle is heard in our land;</tw-passagedata><tw-passagedata pid="626" name="25-HU-7-11-13-231-252" tags="moment valley_#1" position="2650,2725" size="100,100">[231] We need not be so afraid of this valley, for here is nothing to hurt us, unless we procure it to ourselves.

[231] It is true, Christian did here meet with Apollyon, with whom he had also a sore combat: but that fray was the fruit of those slips that he got in his going down the hill: for they that get slips there, must look for combats here.

[231] And hence it is, that this valley has got so hard a name. For the common people, when they hear that some frightful thing has befallen such an one in such a place, are of opinion that that place is haunted with some foul fiend, or evil spirit; when, alas! it is for the fruit of their doing, that such things do befal them there.

[231] This Valley of Humiliation is of itself as fruitful a place as any the crow flies over; and I am persuaded, if we could hit upon it, we might find somewhere hereabouts something that might give us an account why Christian was so hardly beset in this place.

[@] Then said James to his mother,

[11] Lo, yonder stands a pillar, and it looks as if something was written thereon; let us go and see what it is. 

[@] So they went and found there written,
&gt; &lt;span&gt;Let Christian’s slips, before he came hither,
 and the battles that he met with in this place, 
 be a warning to those that come after.&lt;/span&gt;
[231] Lo, did not I tell you that there was something hereabouts that would give intimation of the reason why Christian was so hard beset in this place?

[@] Then turning to Christiana, he said,

[231] No disparagement to Christian more than to any others whose hap and lot it was. For it is easier going up than down this hill, and that can be said but of few hills in all these parts of the world.

[231] But we will leave the good man; he is at rest: he also had a brave victory over his enemy. Let Him grant, that dwelleth above, that we fare no worse, when we come be tried, than he.

[231] But we will come again to this Valley of Humiliation. It is the best and most fruitful piece of ground in all those parts. t is fat ground, and as you see, consisteth much in meadows; and if a man was to come here in the summer-time, as we do now, if he knew not any thing before thereof, and if he also delighted himself in the sight of his eyes, he might see that which would be delightful to him.

[231] Behold how green this valley is; also how beautified with __lillies.__ (Song of Solomon 2:1)

[231] I have known many laboring men that have got good estates in this Valley of Humiliation; for God resisteth the proud, but __giveth grace to the humble.__ (James 4:6; 1 Peter 5:5) 

[231] Indeed it is a very fruitful soil, and doth bring forth by handfuls. Some also have wished that the next way to their Father’s house were here, that they might be troubled no more with either hills or mountains to go over; but the way is the way, and there is an end.

[@] Now, as they were going along, and talking, they espied a boy feeding his father’s sheep. The boy was in very mean clothes, but of a very fresh and well-favored countenance; and as he sat by himself, he sung.

[231] Hark, to what the shepherd’s boy saith.

[@] So they hearkened and he said, 

[252]
&gt;//♪&lt;&lt;journal &quot;Little bliss&quot;&gt;&gt;♫//
[231] Do you hear him? I will dare to say, that this boy lives a merrier life, and wears more of that herb called heart’s-ease in his bosom, than he that is clad in silk and velvet. But we will proceed in our discourse.

[231] In this valley our Lord formerly had his country-house: he loved much to be here. He loved also to walk these meadows, for he found the air was pleasant.

[231] Besides, here a man shall be free from the noise, and from the hurryings of this life: all states are full of noise and confusion; only the Valley of Humiliation is that empty and solitary place. Here a man shall not be so let and hindered in his contemplation as in other places he is apt to be.

[231] This is a valley that nobody walks in but those that love a pilgrim’s life. And though Christian had the hard hap to meet here with Apollyon, and to enter with him in a brisk encounter, yet I must tell you, that in former times men have __met with angels__ (Hosea 12:4-5) here, have __found pearls__  (Matthew 13:46) here, and have in this place found the __words of life.__ (Proverbs 8:35)

[231] Did I say our Lord had here in former days his country-house, and that he loved here to walk?

[231] I will add-in this place, and to the people that love and trace these grounds, he has left a yearly revenue, to be faithfully paid them at certain seasons, for their maintenance by the way, and for their further encouragement to go on in their pilgrimage.

[@] Now, as they went on, Samuel said to Mr. Great-Heart,

[9] Sir, I perceive that in this valley my father and Apollyon had their battle; but whereabout was the fight? for I perceive this valley is large.

[231] Your father had the battle with Apollyon at a place yonder before us, in a narrow passage, just beyond Forgetful Green.

[231] And indeed that place is the most dangerous place in all these parts. For if at any time pilgrims meet with any brunt, it is when they forget what favours they have received, and how unworthy they are of them. This is the place also where others have been hard put to it.

[231] But more of the place when we are come to it; for I persuade myself that to this day there remains either some sign of the battle, or some monument to testify that such a battle there was fought.

[13] I think I am as well in this valley as I have been anywhere else in all our journey: the place, methinks, suits with my spirit. I love to be in such places, where there is no rattling with coaches, nor rumbling with wheels.

[13] Methinks, here one may, without much molestation, be thinking what he is, whence he came, what he has done, and to what the King has called him. Here one may think, and break at heart, and melt in one’s spirit, until one’s eyes become as the __fish-pools in Heshbon.__ (Song of Solomon 7:4) They that go rightly through this __valley of Baca__ (Psalm 84:5-7), make it a well; the rain that God sends down from heaven upon them that are here, also filleth the pools.

[13] This valley is that from whence also the King will __give to his their vineyards__ (Hosea 2:15); and they that go through it shall sing, as Christian did, for all he met with Apollyon.

[231] ‘Tis true, said their guide; I have gone through this valley many a time, and never was better than when here. I have also been a conduct to several pilgrims, and they have confessed the same.
&gt; [Ω] To this man will I look,even __to him that is poor, and of a contrite spirit, and trembleth at my word.__ (Isaiah 66:2)
[@] Now they were come to the place where the aforementioned battle was fought: Then said the guide to Christiana, her children, and Mercy,

[231] This is the place; on this ground Christian stood, and up there came Apollyon against him; and look. 

[231] And, look, did I not tell you? here is some of your husband’s blood upon these stones to this day: Behold, also, how here and there are yet to be seen upon the place, some of the shivers of Apollyon’s broken darts.

[231] See, also, how they did beat the ground with their feet as they fought, to make good their places against each other; how also with their by-blows they did split the very stones in pieces.

[231] Verily, Christian did here play the man, and showed himself as stout as Hercules could, had he been there, even he himself. When Apollyon was beat, he made his retreat to the next valley, that is called, the Valley of the Shadow of Death, unto which we shall come anon.

[231] Lo, yonder also stands a monument, on which is engraven this battle, and Christian’s victory, to his fame, throughout all ages:

[@] So because it stood just on the way-side before them, they stepped to it, and read the writing, which word for word was this:
&gt; &lt;&lt;journal &quot;A monument&quot;&gt;&gt;
[@] When they had passed by this place, they came upon the borders of the Shadow of Death. 

[@] [[This Valley|24-SH-7-9-10-11-13-231]] was longer than the other; a place also most strangely haunted with evil things, as many are able to testify: but these women and children went the better through it, because they had daylight, and because Mr. Great-Heart was their conductor.</tw-passagedata><tw-passagedata pid="627" name="Song of Solomon 2:1 KJV" tags="bible" position="3300,2725" size="100,100">I am the rose of Sharon, and the lily of the valleys.</tw-passagedata><tw-passagedata pid="628" name="James 4:6 KJV" tags="bible anchor" position="3400,2725" size="100,100">But he giveth more grace. Wherefore he saith, God resisteth the proud, but giveth grace unto the humble.</tw-passagedata><tw-passagedata pid="629" name="1 Peter 5:5 KJV" tags="bible anchor" position="3500,2725" size="100,100">Likewise, ye younger, submit yourselves unto the elder. Yea, all of you be subject one to another, and be clothed with humility: for God resisteth the proud, and giveth grace to the humble. </tw-passagedata><tw-passagedata pid="630" name="Little bliss" tags="journal" position="2375,2725" size="100,100">He that is down, needs fear no fall;
   He that is low, no pride:
He that is humble, ever shall
   Have God to be his guide.

I am content with what I have,
   Little be it or much;
And, Lord, contentment still I crave,
   Because thou savest such.

Fulness to such, a burden is,
   That go on pilgrimage;
Here little, and hereafter bliss,
   Is best from Age to Age.</tw-passagedata><tw-passagedata pid="631" name="Hosea 12:4-5 KJV" tags="bible" position="3600,2725" size="100,100">Yea, he had power over the angel, and prevailed: he wept, and made supplication unto him: he found him in Bethel, and there he spake with us; Even the Lord God of hosts; the Lord is his memorial.</tw-passagedata><tw-passagedata pid="632" name="Matthew 13:46 KJV" tags="bible" position="3700,2725" size="100,100">Who, when he had found one pearl of great price, went and sold all that he had, and bought it.</tw-passagedata><tw-passagedata pid="633" name="Proverbs 8:35 KJV" tags="bible anchor" position="3800,2725" size="100,100">For whoso findeth me findeth life, and shall obtain favour of the Lord.</tw-passagedata><tw-passagedata pid="634" name="Song of Solomon 7:4 KJV" tags="bible" position="3900,2725" size="100,100">Thy neck is as a tower of ivory; thine eyes like the fishpools in Heshbon, by the gate of Bath-rabbim: thy nose is as the tower of Lebanon which looketh toward Damascus.</tw-passagedata><tw-passagedata pid="635" name="Psalm 84:5-7 KJV" tags="bible anchor" position="4000,2725" size="100,100">Blessed is the man whose strength is in thee; in whose heart are the ways of them. Who passing through the valley of Baca make it a well; the rain also filleth the pools. They go from strength to strength, every one of them in Zion appeareth before God. </tw-passagedata><tw-passagedata pid="636" name="Hosea 2:15 KJV" tags="bible" position="4100,2725" size="100,100">And I will give her her vineyards from thence, and the valley of Achor for a door of hope: and she shall sing there, as in the days of her youth, and as in the day when she came up out of the land of Egypt.</tw-passagedata><tw-passagedata pid="637" name="Isaiah 66:2 KJV" tags="bible" position="3200,2825" size="100,100">For all those things hath mine hand made, and all those things have been, saith the Lord: but to this man will I look, even to him that is poor and of a contrite spirit, and trembleth at my word.</tw-passagedata><tw-passagedata pid="638" name="A monument" tags="journal" position="2175,2825" size="100,100">Hard by here was a battle fought,
   Most strange, and yet most true;
Christian and Apollyon fought
   Each other to subdue.

The man so bravely play’d the man,
   He made the fiend to fly;
Of which a monument I stand,
   The same to testify.</tw-passagedata><tw-passagedata pid="639" name="24-SH-7-9-10-11-13-231" tags="moment valley_#2" position="2775,2725" size="100,100">[@] When they were entering upon this valley, they thought they heard a groaning, as of dying men; a very great groaning. They thought also that they did hear words of lamentation, spoken as of some in extreme torment. These things made the boys to quake; the women also looked pale and wan; but their guide bid them be of good comfort. 

[@] So they went on a little further, and they thought that they felt the ground begin to shake under them, as if some hollow place was there: they heard also a kind of hissing, as of serpents, but nothing as yet appeared. Then said the boys,

[11] Are we not yet at the end of this doleful place?

[@] But the guide also bid them be of good courage, and said he,

[231] Look well to your feet; lest haply, you be taken in some snare.

[@] Now James began to be sick; but I think the cause thereof was fear: so his mother gave him some of that glass of spirits that had been given her at the Interpreter’s house, and three of the pills that Mr. Skill had prepared, and the boy began to revive.

[@] Thus they went on till they came to about the middle of the valley; and then Christiana said, 

[7] Methinks I see something yonder upon the road before us, a thing of a shape such as I have not seen.

[10] Mother, what is it?

[7] An ugly thing, child; an ugly thing.

[10] But, mother, what is it like?

[7] ‘Tis like I cannot tell what, and now it is but a little way off.  It is nigh.

[231] Well, let them that are most afraid keep close to me.

[@] So the fiend came on, and the conductor met it; but when it was come to him, it vanished to all their sights. Then remembered they what had been said some time ago:
&gt; &lt;&lt;book &quot;James 4:7 KJV&quot;&gt;&gt;
[@] They went therefore on, as being a little refreshed. But they had not gone far, before Mercy, looking behind her, saw, as she thought, 

[13] …behind us! …something most like a lion!

[@] And it came at a great padding pace after: and it had a hollow voice of roaring; and at every roar it gave, it made the valley echo, and all their hearts to ache, save the heart of him that was their guide.

[@] So it came up and Mr. Great-Heart went behind, and put the pilgrims all before him.

[@] The lion also came on apace, and Mr. Great-Heart __addressed himself__ (1 Peter 5:8-9) to give it battle. But when the lion saw that he was determined that resistance should be made, it also drew back, and came no further.

[@] Then they went on again, and their conductor went before them, till they came to a place where was cast up a pit the whole breadth of the way; and before they could be prepared to go over that, a great mist and a darkness fell upon them, so that they could not see. Then said the pilgrims, 

[7] [13] Alas! what now shall we do?

[213] Fear not; stand still, and see what an end will be put to this also;

[@] …so they stayed there, because their path was marred. They then also thought that they did hear more apparently the noise and rushing of the enemies; the fire also and the smoke of the pit were much easier to be discerned. Then said Christiana to Mercy,

[7] Now I see what my poor husband went through. I have heard much of this place, but I never was here before now.

[7] Poor man! he went here all alone in the night; he had night almost quite through the way: also these fiends were busy about him, as if they would have torn him in pieces.

[7] Many have spoken of it; but none can tell what the Valley of the Shadow of Death should mean until they come in themselves. 
&gt; &lt;&lt;book &quot;Proverbs 14:10 KJV&quot;&gt;&gt;
To be here is a fearful thing. 

[231] This is like doing business in great waters, or like going down into the deep. This is like being in the heart of the sea, and like going down to the bottoms of the mountains.

[231] Now it seems as if the earth, with its bars, were about us for ever. 
&gt; But let them that walk in darkness, and have no light, __trust in the name of the Lord, and stay upon their God.__ (Isaiah 50:10)
[231] For my part, as I have told you already, I have gone often through this valley, and have been much harder put to it than now I am: and yet you see I am alive. I would not boast, for that I am not mine own saviour; but I trust we shall have a good deliverance.

[231] Come, let us pray for light to Him that can lighten our darkness, and that can rebuke not only these, but all the Satans in hell. 

[@] So they cried and prayed, and God sent light and deliverance, for there was now no let in their way; no, not there where but now they were stopped with a pit. 

[@] Yet they were not got through the valley.  So they went on still, and met with great stinks and loathsome smells, to the great annoyance of them. Then said Mercy to Christiana,

[13] It is not so pleasant being here as at the gate, or at the Interpreter’s, or at the house where we lay last.

[9] O but, it is not so bad to go through here, as it is to abide here, always; and for aught I know, one reason why we must go this way to the house prepared for us is, that our home might be the sweeter to us.

[231] Well said, Samuel, thou hast now spoke like a man.

[9] Why, if ever I get out here again,  think I shall prize light and good way better than I ever did in all my life.

[231] We shall be out by and by.

[@] So on they went, and Joseph said,

[10] Cannot we see to the end of this valley as yet?

[231] Look to your feet, for we shall presently be among the snares:

[@] …so they looked to their feet, and went on; but they were troubled much with the snares.

[@] Now, when they were come among the snares, they espied a man cast into the ditch on the left hand, with his flesh all rent and torn. Then said the guide,

[231] That is one Heedless, that was going this way: he has lain there a great while. There was one Take-Heed with him when he was taken and slain, but he escaped their hands. You cannot imagine how many are killed hereabouts, and yet men are so foolishly venturous as to set out lightly on pilgrimage, and to come without a guide.

[231] Poor Christian! it was a wonder that he here escaped; but he was beloved of his God: also he had a good heart of his own, or else he could never have done it.

[@] Now they drew towards the [[end of this way,…|25-CA-7-13-231-253]]</tw-passagedata><tw-passagedata pid="640" name="1 Peter 5:8-9 KJV" tags="bible anchor" position="3300,2825" size="100,100">Be sober, be vigilant; because your adversary the devil, as a roaring lion, walketh about, seeking whom he may devour: Whom resist stedfast in the faith, knowing that the same afflictions are accomplished in your brethren that are in the world.</tw-passagedata><tw-passagedata pid="641" name="Proverbs 14:10 KJV" tags="bible" position="3400,2825" size="100,100">The heart knoweth his own bitterness; and a stranger doth not intermeddle with his joy.</tw-passagedata><tw-passagedata pid="642" name="Isaiah 50:10 KJV" tags="bible anchor" position="3500,2825" size="100,100">Who is among you that feareth the Lord, that obeyeth the voice of his servant, that walketh in darkness, and hath no light? let him trust in the name of the Lord, and stay upon his God.</tw-passagedata><tw-passagedata pid="643" name="25-CA-7-13-231-253" tags="moment cave" position="2900,2725" size="100,100">[@] Now they drew towards the end of this way; and just there where Christian had seen the cave when he went by, out thence came forth Maul, a giant.

[@] This Maul did use to spoil young pilgrims with sophistry; and he called Great-Heart by his name, and said unto him,

[253] Hark, Great-Heart! How many times have you been forbidden to do these things?

[231] What things?

[253] What things! You know what things: but I will put an end to your trade.

[231] But, pray, before we fall to it, let us understand wherefore we must fight.

[@] Now the women and children stood trembling, and knew not what to do.

[253] You rob the country, and rob it with the worst of thefts.

[231] These are but generals, come to particulars, man.

[253] Thou practisest the craft of a kidnapper; thou gatherest up women and children, and carriest them into a strange country, to the weakening of my master’s kingdom.

[231] I am a servant of the God of heaven; my business is to persuade sinners to repentance. I am commanded to do my endeavors to turn men, women, and children, from darkness to light, and from the power of Satan unto God; and if this be indeed the ground of thy quarrel, let us fall to it as soon as thou wilt.

[@] Then the giant came up, and Mr. Great-Heart went to meet him; and as he went he drew his sword, but the giant had a club.

[@] So without more ado they fell to it, and at the first blow the giant struck Mr. Great-Heart down upon one of his knees. With that the women and children cried out.

[7] [13] No, no, no!
[8] [9] [10] [11] Mr. Great-Heart! 

[@] So Mr. Great-Heart recovering himself, laid about him in full lusty manner, and gave the giant a wound in his arm.

[@] Thus he fought for the space of an hour, to that height of heat that the breath came out of the giant’s nostrils as the heat doth out of a boiling cauldron.

[@] Then they sat down to rest them; but Mr. Great-Heart betook himself to prayer. 

[@] Also the women and children did nothing but sigh and cry all the time that the battle did last.

[@] When they had rested them, and taken breath, they both fell to it again; and Mr. Great-Heart, with a blow, fetched the giant down to the ground.

[253] Nay, hold, let me recover;

[@] …so Mr. Great-Heart fairly let him get up. So to it they went again, and the giant missed but little of all to breaking Mr. Great-Heart’s scull with his club. 

[@] Mr. Great-Heart seeing that, runs to him in the full heat of his spirit, and pierceth him under the fifth rib. With that the giant began to faint, and could hold up his club no longer. 

[@] Then Mr. Great-Heart seconded his blow, and smit the head of the giant from his shoulders. 

[@] Then the women and children rejoiced, and Mr. Great-Heart also praised God for the deliverance he had wrought.

[@] When this was done, they amongst them erected a pillar, and fastened the giant’s head thereon, and wrote under in letters that passengers might read, 
&gt; &lt;&lt;journal &quot;Maul&#39;s head&quot;&gt;&gt;
[@] Now I saw that they went on to [[the ascent|26-AS-7-8-231]] that was a little way off, cast up to be a prospect for pilgrims.</tw-passagedata><tw-passagedata pid="644" name="Maul&#39;s head" tags="journal" position="2275,2825" size="100,100">He that did wear this head was one
   That pilgrims did misuse;
He stopped their way, he spared none,
   But did them all abuse;
Until that I Great-Heart arose,
   The pilgrims guide to be;
Until that I did him oppose
   That was their enemy.</tw-passagedata><tw-passagedata pid="645" name="26-AS-7-8-231" tags="moment ascent" position="2525,3125" size="100,100">[@] That was the place from whence Christian had the first sight of Faithful his brother. Wherefore, here they sat down and rested. They also here did eat and drink, and make merry, for that they had gotten deliverance from this so dangerous an enemy.

[@] As they sat thus and did eat, Christiana asked the guide,

[7] Had you caught no hurt in the battle?

[231] No, save a little on my flesh; yet that also shall be so far from being to my detriment, that it is at present a proof of my love to my master and you, and shall be a means, by grace, to increase my reward at last.

[7] But were you not afraid, good sir, when you saw him come with his club?

[231] It is my duty to mistrust my own ability, that I may have reliance on Him who is stronger than all.

[7] But what did you think when he fetched you down to the ground at the first blow?

[231] Why, I thought that __so my Master himself was served__ (2 Corinthians 4:10-11), and yet he __it was that conquered__ (Romans 8:37) at last.

[8] When you all have thought what you please, I think God has been wonderfully good unto us, both in bringing us out of this valley, and in delivering us out of the hand of this enemy.

[8] For my part, I see no reason why we should distrust our God any more, since he has now, and in such a place as this, given us such testimony of his love.

[@] Then they got up, and [[went forward.|26-WI-7-13-253-261]]</tw-passagedata><tw-passagedata pid="646" name="2 Corinthians 4:10-11 KJV" tags="bible anchor" position="3200,3125" size="100,100">Always bearing about in the body the dying of the Lord Jesus, that the life also of Jesus might be made manifest in our body. For we which live are alway delivered unto death for Jesus’ sake, that the life also of Jesus might be made manifest in our mortal flesh.</tw-passagedata><tw-passagedata pid="647" name="Matthew 10:3 KJV" tags="bible" position="3300,3125" size="100,100">Philip, and Bartholomew; Thomas, and Matthew the publican; James the son of Alphaeus, and Lebbaeus, whose surname was Thaddaeus;</tw-passagedata><tw-passagedata pid="648" name="26-WI-7-13-253-261" tags="moment wilderness" position="2675,3125" size="100,100">[@] Now a little before them stood an oak; and under it, when they came to it, they found an old pilgrim fast asleep. They knew that he was a pilgrim by his clothes, and his staff, and his girdle.

[@] So the guide, Mr. Great-Heart, awaked him; and the old gentleman, as he lifted up his eyes, cried out,

[261] What’s the matter? Who are you; and what is your business here?

[231] Come, man, be not so hot; here are none but friends

[@] Yet the old man gets up, and stands upon his guard, and will know of them what they are. Then said the guide,

[231] My name is Great-Heart: I am the guide of these pilgrims that are going to the Celestial country.

[261] I cry you mercy: I feared that you had been of the company of those that some time ago did rob Little-Faith of his money; but, now I look better about me, I perceive you are honester people.

[231] Why, what would or could you have done to have helped yourself, if indeed we had been of that company?

[261] Done! Why, I would have fought as long as breath had been in me: and had I so done, I am sure you could never have given me the worst on’t; for a Christian can never be overcome, unless he shall yield of himself.

[231] Well said, father Honest; for by this I know thou art a cock of the right kind, for thou hast said the truth.

[261] And by this also I know that thou knowest what true pilgrimage is; for all others do think that we are the soonest overcome of any.

[231] Well, now we are so happily met, pray let me crave your name, and the name of the place you came from.

[261] My name I cannot tell you, but I came from the town of Stupidity: it lieth about four degrees beyond the city of Destruction.

[231] Oh, Are you that countryman? Then I deem I have half a guess of you: your name is Old Honesty, is it not?

[@] So the old gentleman blushed, and said,

[261] Not honesty in the abstract, but Honest is my name; and I wish that my nature may agree to what I am called. But, sir, how could you guess that I am such a man, since I came from such a place?

[231] I had heard of you before, by my Master; for he knows all things that are done on the earth. But I have often wondered that any should come from your place; for your town is worse than is the city of Destruction itself.

[261] Yes, we lie more off from the sun, and so are more cold and senseless. But were a man in a mountain of ice, yet if the Sun of righteousness will arise upon him, his frozen heart shall feel a thaw; and thus it has been with me.

[231] I believe it, father Honest, I believe it; for I know the thing is true.

[@] Then the old gentleman saluted all the pilgrims with a holy kiss of charity, and asked them their names, and how they had fared since they set out on their pilgrimage.

[7] My name I suppose you have heard of; good Christian was my husband, and these four are his children.

[@] But can you think how the old gentleman was taken, when she told him who she was? He skipped, he smiled, he blessed them with a thousand good wishes, saying,

[261] I have heard much of your husband, and of his travels and wars which he underwent in his days. Be it spoken to your comfort, the name of your husband rings all over these parts of the world: his faith, his courage, his enduring, and his sincerity under all, had made his name famous.

[@] Then he turned him to the boys, and asked them of their names, which they told him. Then said he unto them,

[261]  Matthew, be thou like __Matthew the publican__ (Matthew 10:3), not in vice, but in virtue. 

[261] Samuel, be thou like __Samuel the prophet__ (Psalm 99:6), a man of faith and prayer.

[261] Joseph, be thou like __Joseph in Potiphar’s house__ (Genesis 39:1), chaste, and one that flees from temptation.

[261] And James, be thou like __James the just__ (Acts 1:13), and like James the brother of our Lord.

[@] Then they told him of Mercy, and how she had left her town and her kindred to come along with Christiana and with her sons. At that the old honest man said,

[261] …by mercy shalt thou be sustained and carried through all those difficulties that shall assault thee in thy way, till thou shalt come thither where thou shalt look the Fountain of mercy in the face with comfort.

[@] All this while the guide, Mr. Great-Heart, was very well pleased, and smiled upon his companions.

[@] Now, as they walked along together, the guide asked the old gentleman if he did not know one Mr. Fearing, that came on pilgrimage out of his parts.</tw-passagedata><tw-passagedata pid="649" name="Psalm 99:6 KJV" tags="bible" position="3400,3125" size="100,100">Moses and Aaron among his priests, and Samuel among them that call upon his name; they called upon the Lord, and he answered them.</tw-passagedata><tw-passagedata pid="650" name="Genesis 39:1 KJV" tags="bible" position="3500,3125" size="100,100">And Joseph was brought down to Egypt; and Potiphar, an officer of Pharaoh, captain of the guard, an Egyptian, bought him of the hands of the Ishmeelites, which had brought him down thither.</tw-passagedata><tw-passagedata pid="651" name="Acts 1:13 KJV" tags="bible" position="3600,3125" size="100,100">And when they were come in, they went up into an upper room, where abode both Peter, and James, and John, and Andrew, Philip, and Thomas, Bartholomew, and Matthew, James the son of Alphaeus, and Simon Zelotes, and Judas the brother of James.</tw-passagedata></tw-storydata>
	<script id="script-sugarcube" type="text/javascript">
	/*! SugarCube JS */
	if(document.documentElement.getAttribute("data-init")==="loading"){(function(window,document,jQuery,undefined){"use strict";var _excluded=["bubbles","cancelable","composed","detail"],_excluded2=["bubbles","cancelable"],_excluded3=["state"];function _toConsumableArray(r){return _arrayWithoutHoles(r)||_iterableToArray(r)||_unsupportedIterableToArray(r)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray(r)}function _classCallCheck(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(t){var i=_toPrimitive(t,"string");return"symbol"==_typeof(i)?i:i+""}function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)o=s[r],t.includes(o)||{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.includes(n))continue;t[n]=r[n]}return t}function _slicedToArray(r,e){return _arrayWithHoles(r)||_iterableToArrayLimit(r,e)||_unsupportedIterableToArray(r,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}function _arrayWithHoles(r){if(Array.isArray(r))return r}function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}var errorPrologRegExp=/^(?:(?:uncaught\s+(?:exception:\s+)?)?\w*(?:error|exception|_err):\s+)+/i,Alert=function(){function mesg(where,error,isFatal,isUncaught){var mesg="Error",nice="A".concat(isFatal?" fatal":"n"," error has occurred.");nice+=isFatal?" Aborting.":" You may be able to continue, but some parts may not work properly.";var isObject=null!==error&&"object"===_typeof(error),what=(isObject&&"message"in error?String(error.message).replace(errorPrologRegExp,""):String(error)).trim()||"unknown error";null!=where&&(mesg+=" [".concat(where,"]")),mesg+=": ".concat(what,"."),isObject&&"stack"in error&&(mesg+="\n\nStack Trace:\n".concat(error.stack)),mesg&&(nice+="\n\n".concat(mesg)),isUncaught||console[isFatal?"error":"warn"](mesg),window.alert(nice)}var origOnError;return origOnError=window.onerror,window.onerror=function(what,source,lineNum,colNum,error){"complete"===document.readyState?mesg(null,null!=error?error:what,!1,!0):(mesg(null,null!=error?error:what,!0,!0),window.onerror=origOnError,"function"==typeof window.onerror&&window.onerror.apply(this,arguments))},Object.preventExtensions(Object.create(null,{error:{value:function(where,error){mesg(where,error)}},fatal:{value:function(where,error){mesg(where,error,!0)}}}))}(),Patterns=(wsMap=new Map([[" ","\\u0020"],["\f","\\f"],["\n","\\n"],["\r","\\r"],["\t","\\t"],["\v","\\v"],[" ","\\u00a0"],[" ","\\u1680"],["᠎","\\u180e"],[" ","\\u2000"],[" ","\\u2001"],[" ","\\u2002"],[" ","\\u2003"],[" ","\\u2004"],[" ","\\u2005"],[" ","\\u2006"],[" ","\\u2007"],[" ","\\u2008"],[" ","\\u2009"],[" ","\\u200a"],["\u2028","\\u2028"],["\u2029","\\u2029"],[" ","\\u202f"],[" ","\\u205f"],["　","\\u3000"],["\ufeff","\\ufeff"]]),wsRe=/^\s$/,missing="",wsMap.forEach((function(pat,char){wsRe.test(char)||(missing+=pat)})),space=missing?"[\\s".concat(missing,"]"):"\\s",spaceNoTerminator="[\\u0020\\f\\t\\v\\u00a0\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]",notSpace="\\s"===space?"\\S":space.replace(/^\[/,"[^"),anyChar="(?:.|".concat("[\\n\\r\\u2028\\u2029]",")"),anyLetter="[0-9A-Z_a-z\\-\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u00ff\\u0150\\u0170\\u0151\\u0171]",anyLetterStrict=anyLetter.replace("\\-",""),identifier="".concat("[$A-Z_a-z]").concat("[$0-9A-Z_a-z]","*"),variable="[$_]"+identifier,htmlTagName="[A-Za-z](?:".concat(cENChar="(?:[\\x2D.0-9A-Z_a-z\\xB7\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u203F\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])","*-").concat(cENChar,"*|[0-9A-Za-z]*)"),twStyle="(".concat(anyLetter,"+)\\(([^\\)\\|\\n]+)\\):"),cssStyle="".concat(spaceNoTerminator,"*(").concat(anyLetter,"+)").concat(spaceNoTerminator,"*:([^;\\|\\n]+);"),idOrClass="".concat(spaceNoTerminator,"*((?:").concat("[#.]").concat(anyLetter,"+").concat(spaceNoTerminator,"*)+);"),inlineCss="".concat(twStyle,"|").concat(cssStyle,"|").concat(idOrClass),url="(?:file|https?|mailto|ftp|javascript|irc|news|data):[^\\s'\"]+",externalUrl=url.replace(/\|javascript|\|data/g,""),Object.freeze(Object.assign(Object.create(null),{space:space,spaceNoTerminator:spaceNoTerminator,lineTerminator:"[\\n\\r\\u2028\\u2029]",notSpace:notSpace,anyChar:anyChar,anyLetter:anyLetter,anyLetterStrict:anyLetterStrict,identifierFirstChar:"[$A-Z_a-z]",identifierNextChar:"[$0-9A-Z_a-z]",identifier:identifier,variableSigil:"[$_]",variable:variable,macroName:"[A-Za-z][\\w-]*|[=-]",templateName:"[A-Za-z][\\w-]*",htmlTagName:htmlTagName,cssIdOrClassSigil:"[#.]",cssImage:"\\[[<>]?[Ii][Mm][Gg]\\[(?:\\s|\\S)*?\\]\\]+",inlineCss:inlineCss,url:url,externalUrl:externalUrl}))),wsMap,wsRe,missing,cENChar,twStyle,cssStyle,idOrClass,space,spaceNoTerminator,notSpace,anyChar,anyLetter,anyLetterStrict,identifier,variable,htmlTagName,inlineCss,url,externalUrl;!function(){var startWSRe,endWSRe,_trimString=(startWSRe=new RegExp("^".concat(Patterns.space).concat(Patterns.space,"*")),endWSRe=new RegExp("".concat(Patterns.space).concat(Patterns.space,"*$")),function(str,where){var val=String(str);if(!val)return val;switch(where){case"start":return startWSRe.test(val)?val.replace(startWSRe,""):val;case"end":return endWSRe.test(val)?val.replace(endWSRe,""):val;default:throw new Error('_trimString called with incorrect where parameter value: "'.concat(where,'"'))}});function _createPadString(length,padding){var targetLength=Number.parseInt(length,10)||0;if(targetLength<1)return"";var padString=void 0===padding?"":String(padding);for(""===padString&&(padString=" ");padString.length<targetLength;){var curPadLength=padString.length,remainingLength=targetLength-curPadLength;padString+=curPadLength>remainingLength?padString.slice(0,remainingLength):padString}return padString.length>targetLength&&(padString=padString.slice(0,targetLength)),padString}if(Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,writable:!0,value:function flat(){if(null==this)throw new TypeError("Array.prototype.flat called on null or undefined");var depth=0===arguments.length?1:Number(arguments[0])||0;if(depth<1)return Array.prototype.slice.call(this);var push=Array.prototype.push;return Array.prototype.reduce.call(this,(function(acc,cur){return cur instanceof Array?push.apply(acc,flat.call(cur,depth-1)):acc.push(cur),acc}),[])}}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.flatMap called on null or undefined");return Array.prototype.map.apply(this,arguments).flat()}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");if(0===arguments.length)return!1;var length=this.length>>>0;if(0===length)return!1;var needle=arguments[0],i=Number(arguments[1])||0;for(i<0&&(i=Math.max(0,length+i));i<length;++i){var value=this[i];if(value===needle||value!=value&&needle!=needle)return!0}return!1}}),Object.entries||Object.defineProperty(Object,"entries",{configurable:!0,writable:!0,value:function(obj){if("object"!==_typeof(obj)||null===obj)throw new TypeError("Object.entries object parameter must be an object");return Object.keys(obj).map((function(key){return[key,obj[key]]}))}}),Object.fromEntries||Object.defineProperty(Object,"fromEntries",{configurable:!0,writable:!0,value:function(iter){return Array.from(iter).reduce((function(acc,pair){if(Object(pair)!==pair)throw new TypeError("Object.fromEntries iterable parameter must yield objects");return pair[0]in acc?Object.defineProperty(acc,pair[0],{configurable:!0,enumerable:!0,writable:!0,value:pair[1]}):acc[pair[0]]=pair[1],acc}),{})}}),Object.getOwnPropertyDescriptors||Object.defineProperty(Object,"getOwnPropertyDescriptors",{configurable:!0,writable:!0,value:function(obj){if(null==obj)throw new TypeError("Object.getOwnPropertyDescriptors object parameter is null or undefined");var O=Object(obj);return Reflect.ownKeys(O).reduce((function(acc,key){var desc=Object.getOwnPropertyDescriptor(O,key);return void 0!==desc&&(key in acc?Object.defineProperty(acc,key,{configurable:!0,enumerable:!0,writable:!0,value:desc}):acc[key]=desc),acc}),{})}}),!Object.hasOwn){var _hasOwnProperty=Object.prototype.hasOwnProperty;Object.defineProperty(Object,"hasOwn",{configurable:!0,writable:!0,value:function(O,P){return _hasOwnProperty.call(Object(O),P)}})}Object.values||Object.defineProperty(Object,"values",{configurable:!0,writable:!0,value:function(obj){if("object"!==_typeof(obj)||null===obj)throw new TypeError("Object.values object parameter must be an object");return Object.keys(obj).map((function(key){return obj[key]}))}}),String.prototype.padStart||Object.defineProperty(String.prototype,"padStart",{configurable:!0,writable:!0,value:function(length,padding){if(null==this)throw new TypeError("String.prototype.padStart called on null or undefined");var baseString=String(this),baseLength=baseString.length,targetLength=Number.parseInt(length,10);return targetLength<=baseLength?baseString:_createPadString(targetLength-baseLength,padding)+baseString}}),String.prototype.padEnd||Object.defineProperty(String.prototype,"padEnd",{configurable:!0,writable:!0,value:function(length,padding){if(null==this)throw new TypeError("String.prototype.padEnd called on null or undefined");var baseString=String(this),baseLength=baseString.length,targetLength=Number.parseInt(length,10);return targetLength<=baseLength?baseString:baseString+_createPadString(targetLength-baseLength,padding)}}),String.prototype.trimStart||Object.defineProperty(String.prototype,"trimStart",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimStart called on null or undefined");return _trimString(this,"start")}}),String.prototype.trimLeft||Object.defineProperty(String.prototype,"trimLeft",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimLeft called on null or undefined");return _trimString(this,"start")}}),String.prototype.trimEnd||Object.defineProperty(String.prototype,"trimEnd",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimEnd called on null or undefined");return _trimString(this,"end")}}),String.prototype.trimRight||Object.defineProperty(String.prototype,"trimRight",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimRight called on null or undefined");return _trimString(this,"end")}})}(),function(){var _regExpMetaCharsRe,_hasRegExpMetaCharsRe,_formatRegExp,_hasFormatRegExp,_nativeMathRandom=Math.random;function _random(){var min,max;switch(arguments.length){case 0:throw new Error("_random called with insufficient parameters");case 1:min=0,max=arguments[0];break;default:min=arguments[0],max=arguments[1]}if(min>max){var _ref=[max,min];min=_ref[0],max=_ref[1]}return Math.floor(_nativeMathRandom()*(max-min+1))+min}function _randomIndex(length,boundsArgs){var min,max;switch(boundsArgs.length){case 1:min=0,max=length-1;break;case 2:min=0,max=Math.trunc(boundsArgs[1]);break;default:min=Math.trunc(boundsArgs[1]),max=Math.trunc(boundsArgs[2])}return Number.isNaN(min)?min=0:!Number.isFinite(min)||min>=length?min=length-1:min<0&&(min=length+min)<0&&(min=0),Number.isNaN(max)?max=0:(!Number.isFinite(max)||max>=length||max<0&&(max=length+max)<0)&&(max=length-1),_random(min,max)}function _getCodePointStartAndEnd(str,pos){var code=str.charCodeAt(pos);if(Number.isNaN(code))return{char:"",start:-1,end:-1};if(code<55296||code>57343)return{char:str.charAt(pos),start:pos,end:pos};if(code>=55296&&code<=56319){var nextPos=pos+1;if(nextPos>=str.length)throw new Error("high surrogate without trailing low surrogate");var nextCode=str.charCodeAt(nextPos);if(nextCode<56320||nextCode>57343)throw new Error("high surrogate without trailing low surrogate");return{char:str.charAt(pos)+str.charAt(nextPos),start:pos,end:nextPos}}if(0===pos)throw new Error("low surrogate without leading high surrogate");var prevPos=pos-1,prevCode=str.charCodeAt(prevPos);if(prevCode<55296||prevCode>56319)throw new Error("low surrogate without leading high surrogate");return{char:str.charAt(prevPos)+str.charAt(pos),start:prevPos,end:pos}}Object.defineProperty(Array.prototype,"concatUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.concatUnique called on null or undefined");var result=Array.from(this);if(0===arguments.length)return result;var items=Array.prototype.reduce.call(arguments,(function(prev,cur){return prev.concat(cur)}),[]),addSize=items.length;if(0===addSize)return result;for(var indexOf=Array.prototype.indexOf,push=Array.prototype.push,i=0;i<addSize;++i){var value=items[i];-1===indexOf.call(result,value)&&push.call(result,value)}return result}}),Object.defineProperty(Array.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.count called on null or undefined");for(var indexOf=Array.prototype.indexOf,needle=arguments[0],pos=Number(arguments[1])||0,count=0;-1!==(pos=indexOf.call(this,needle,pos));)++count,++pos;return count}}),Object.defineProperty(Array.prototype,"countWith",{configurable:!0,writable:!0,value:function(predicate,thisArg){if(null==this)throw new TypeError("Array.prototype.countWith called on null or undefined");if("function"!=typeof predicate)throw new Error("Array.prototype.countWith predicate parameter must be a function");var length=this.length>>>0;if(0===length)return 0;for(var count=0,i=0;i<length;++i)predicate.call(thisArg,this[i],i,this)&&++count;return count}}),Object.defineProperty(Array.prototype,"deleteAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.deleteAll called on null or undefined");if(0===arguments.length)return[];var length=this.length>>>0;if(0===length)return[];for(var needles=Array.prototype.concat.apply([],arguments),needlesLength=needles.length,indices=[],i=0;i<length;++i)for(var value=this[i],j=0;j<needlesLength;++j){var needle=needles[j];if(value===needle||value!=value&&needle!=needle){indices.push(i);break}}for(var result=[],_i=0,iend=indices.length;_i<iend;++_i)result[_i]=this[indices[_i]];for(var splice=Array.prototype.splice,_i2=indices.length-1;_i2>=0;--_i2)splice.call(this,indices[_i2],1);return result}}),Object.defineProperty(Array.prototype,"deleteAt",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.deleteAt called on null or undefined");if(0===arguments.length)return[];var length=this.length>>>0;if(0===length)return[];for(var splice=Array.prototype.splice,cpyIndices=Array.from(new Set(Array.from(arguments).map((function(x){return x<0?Math.max(0,length+x):x}))).values()),delIndices=Array.from(cpyIndices).sort((function(a,b){return b-a})),result=[],i=0,iend=cpyIndices.length;i<iend;++i)result[i]=this[cpyIndices[i]];for(var _i3=0,_iend=delIndices.length;_i3<_iend;++_i3)splice.call(this,delIndices[_i3],1);return result}}),Object.defineProperty(Array.prototype,"deleteFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.deleteFirst called on null or undefined");if(0!==arguments.length){var length=this.length>>>0;if(0!==length){for(var splice=Array.prototype.splice,needles=Array.prototype.concat.apply([],arguments),result=[],i=0;i<length&&needles.length>0;++i)for(var value=this[i],j=0;j<needles.length;++j){var needle=needles[j];if(value===needle||value!=value&&needle!=needle){result.push(value),splice.call(this,i--,1),needles.splice(j--,1);break}}return result}}}}),Object.defineProperty(Array.prototype,"deleteLast",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.deleteLast called on null or undefined");if(0!==arguments.length){var length=this.length>>>0;if(0!==length){for(var splice=Array.prototype.splice,needles=Array.prototype.concat.apply([],arguments),result=[],i=length-1;i>=0&&needles.length>0;--i)for(var value=this[i],j=0;j<needles.length;++j){var needle=needles[j];if(value===needle||value!=value&&needle!=needle){result.push(value),splice.call(this,i++,1),needles.splice(j--,1);break}}return result}}}}),Object.defineProperty(Array.prototype,"deleteWith",{configurable:!0,writable:!0,value:function(predicate,thisArg){if(null==this)throw new TypeError("Array.prototype.deleteWith called on null or undefined");if("function"!=typeof predicate)throw new Error("Array.prototype.deleteWith predicate parameter must be a function");var length=this.length>>>0;if(0===length)return[];for(var splice=Array.prototype.splice,indices=[],result=[],i=0;i<length;++i)predicate.call(thisArg,this[i],i,this)&&(result.push(this[i]),indices.push(i));for(var _i4=indices.length-1;_i4>=0;--_i4)splice.call(this,indices[_i4],1);return result}}),Object.defineProperty(Array.prototype,"first",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.first called on null or undefined");if(0!==this.length>>>0)return this[0]}}),Object.defineProperty(Array.prototype,"includesAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAll called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAll.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var i=0,iend=arguments.length;i<iend;++i)if(!Array.prototype.some.call(this,(function(val){return val===this.val||val!=val&&this.val!=this.val}),{val:arguments[i]}))return!1;return!0}}),Object.defineProperty(Array.prototype,"includesAny",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAny called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAny.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var i=0,iend=arguments.length;i<iend;++i)if(Array.prototype.some.call(this,(function(val){return val===this.val||val!=val&&this.val!=this.val}),{val:arguments[i]}))return!0;return!1}}),Object.defineProperty(Array.prototype,"last",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.last called on null or undefined");var length=this.length>>>0;if(0!==length)return this[length-1]}}),Object.defineProperty(Array.prototype,"pluck",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.pluck called on null or undefined");var length=this.length>>>0;if(0!==length){var index=0===arguments.length?_random(0,length-1):_randomIndex(length,Array.from(arguments));return Array.prototype.splice.call(this,index,1)[0]}}}),Object.defineProperty(Array.prototype,"pluckMany",{configurable:!0,writable:!0,value:function(wantSize){if(null==this)throw new TypeError("Array.prototype.pluckMany called on null or undefined");var length=this.length>>>0;if(0===length)return[];var want=Math.trunc(wantSize);if(!Number.isInteger(want))throw new Error("Array.prototype.pluckMany want parameter must be an integer");if(want<1)return[];want>length&&(want=length);var splice=Array.prototype.splice,result=[],max=length-1;do{result.push(splice.call(this,_random(0,max--),1)[0])}while(result.length<want);return result}}),Object.defineProperty(Array.prototype,"pushUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.pushUnique called on null or undefined");var addSize=arguments.length;if(0===addSize)return this.length>>>0;for(var indexOf=Array.prototype.indexOf,push=Array.prototype.push,i=0;i<addSize;++i){var value=arguments[i];-1===indexOf.call(this,value)&&push.call(this,value)}return this.length>>>0}}),Object.defineProperty(Array.prototype,"random",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.random called on null or undefined");var length=this.length>>>0;if(0!==length)return this[0===arguments.length?_random(0,length-1):_randomIndex(length,Array.from(arguments))]}}),Object.defineProperty(Array.prototype,"randomMany",{configurable:!0,writable:!0,value:function(wantSize){if(null==this)throw new TypeError("Array.prototype.randomMany called on null or undefined");var length=this.length>>>0;if(0===length)return[];var want=Math.trunc(wantSize);if(!Number.isInteger(want))throw new Error("Array.prototype.randomMany want parameter must be an integer");if(want<1)return[];want>length&&(want=length);var picked=new Map,result=[],max=length-1;do{var i=void 0;do{i=_random(0,max)}while(picked.has(i));picked.set(i,!0),result.push(this[i])}while(result.length<want);return result}}),Object.defineProperty(Array.prototype,"shuffle",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.shuffle called on null or undefined");var length=this.length>>>0;if(0===length)return this;for(var i=length-1;i>0;--i){var j=Math.floor(_nativeMathRandom()*(i+1));if(i!==j){var swap=this[i];this[i]=this[j],this[j]=swap}}return this}}),Object.defineProperty(Array.prototype,"toShuffled",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.toShuffled called on null or undefined");return Array.from(this).shuffle()}}),Object.defineProperty(Array.prototype,"toUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.toUnique called on null or undefined");return Array.from(new Set(this))}}),Object.defineProperty(Array.prototype,"unshiftUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.unshiftUnique called on null or undefined");var addSize=arguments.length;if(0===addSize)return this.length>>>0;for(var indexOf=Array.prototype.indexOf,unshift=Array.prototype.unshift,i=0;i<addSize;++i){var value=arguments[i];-1===indexOf.call(this,value)&&unshift.call(this,value)}return this.length>>>0}}),Object.defineProperty(Function.prototype,"partial",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Function.prototype.partial called on null or undefined");var slice=Array.prototype.slice,fn=this,bound=slice.call(arguments,0);return function(){for(var applied=[],argc=0,i=0;i<bound.length;++i)applied.push(bound[i]===undefined?arguments[argc++]:bound[i]);return fn.apply(this,applied.concat(slice.call(arguments,argc)))}}}),Object.defineProperty(Math,"clamp",{configurable:!0,writable:!0,value:function(num,min,max){if(3!==arguments.length)throw new Error("Math.clamp called with an incorrect number of parameters (want: 3, received: ".concat(arguments.length,")"));var value=Number(num),minVal=Number(min),maxVal=Number(max);if(minVal>maxVal){var _ref2=[maxVal,minVal];minVal=_ref2[0],maxVal=_ref2[1]}return Math.min(Math.max(value,minVal),maxVal)}}),RegExp.escape||(_regExpMetaCharsRe=/[\\^$*+?.()|[\]{}]/g,_hasRegExpMetaCharsRe=new RegExp(_regExpMetaCharsRe.source),Object.defineProperty(RegExp,"escape",{configurable:!0,writable:!0,value:function(str){var val=String(str);return val&&_hasRegExpMetaCharsRe.test(val)?val.replace(_regExpMetaCharsRe,"\\$&"):val}})),_formatRegExp=/{(\d+)(?:,([+-]?\d+))?}/g,_hasFormatRegExp=new RegExp(_formatRegExp.source),Object.defineProperty(String,"format",{configurable:!0,writable:!0,value:function(format){if(arguments.length<2)return 0===arguments.length?"":format;var args=2===arguments.length&&Array.isArray(arguments[1])?Array.from(arguments[1]):Array.prototype.slice.call(arguments,1);return 0===args.length?format:_hasFormatRegExp.test(format)?(_formatRegExp.lastIndex=0,format.replace(_formatRegExp,(function(match,index,align){var retval=args[index];if(null==retval)return"";for(;"function"==typeof retval;)retval=retval();switch(_typeof(retval)){case"string":break;case"object":retval=JSON.stringify(retval);break;default:retval=String(retval)}return function(str,align,pad){if(!align)return str;var plen=Math.abs(align)-str.length;if(plen<1)return str;var padding=String(pad).repeat(plen);return align<0?str+padding:padding+str}(retval,align?Number.parseInt(align,10):0," ")}))):format}}),Object.defineProperty(String.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.count called on null or undefined");var needle=String(arguments[0]||"");if(""===needle)return 0;for(var indexOf=String.prototype.indexOf,step=needle.length,pos=Number(arguments[1])||0,count=0;-1!==(pos=indexOf.call(this,needle,pos));)++count,pos+=step;return count}}),Object.defineProperty(String.prototype,"first",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.first called on null or undefined");return _getCodePointStartAndEnd(String(this),0).char}}),Object.defineProperty(String.prototype,"last",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.last called on null or undefined");var str=String(this);return _getCodePointStartAndEnd(str,str.length-1).char}}),Object.defineProperty(String.prototype,"splice",{configurable:!0,writable:!0,value:function(startAt,delCount,replacement){if(null==this)throw new TypeError("String.prototype.splice called on null or undefined");var length=this.length>>>0;if(0===length)return"";var start=Number(startAt);Number.isSafeInteger(start)?start<0&&(start+=length)<0&&(start=0):start=0,start>length&&(start=length);var count=Number(delCount);(!Number.isSafeInteger(count)||count<0)&&(count=0);var res=this.slice(0,start);return void 0!==replacement&&(res+=replacement),start+count<length&&(res+=this.slice(start+count)),res}}),Object.defineProperty(String.prototype,"splitOrEmpty",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.splitOrEmpty called on null or undefined");return""===String(this)?[]:String.prototype.split.apply(this,arguments)}}),Object.defineProperty(String.prototype,"toLocaleUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toLocaleUpperFirst called on null or undefined");var str=String(this),_getCodePointStartAnd3=_getCodePointStartAndEnd(str,0),char=_getCodePointStartAnd3.char,end=_getCodePointStartAnd3.end;return-1===end?"":char.toLocaleUpperCase()+str.slice(end+1)}}),Object.defineProperty(String.prototype,"toUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toUpperFirst called on null or undefined");var str=String(this),_getCodePointStartAnd4=_getCodePointStartAndEnd(str,0),char=_getCodePointStartAnd4.char,end=_getCodePointStartAnd4.end;return-1===end?"":char.toUpperCase()+str.slice(end+1)}}),Object.defineProperty(Array.prototype,"delete",{configurable:!0,writable:!0,value:function(){if(console.warn("[DEPRECATED] <Array>.delete() is deprecated."),null==this)throw new TypeError("Array.prototype.delete called on null or undefined");return Array.prototype.deleteAll.apply(this,arguments)}}),Object.defineProperty(JSON,"reviveWrapper",{configurable:!0,writable:!0,value:function(code,data){if(console.warn("[DEPRECATED] JSON.reviveWrapper() is deprecated."),"string"!=typeof code)throw new TypeError("JSON.reviveWrapper code parameter must be a string");return Serial.createReviver(code,data)}}),Object.defineProperty(Math,"easeInOut",{configurable:!0,writable:!0,value:function(num){return console.warn("[DEPRECATED] Math.easeInOut() is deprecated."),1-(Math.cos(Number(num)*Math.PI)+1)/2}}),Object.defineProperty(Number.prototype,"clamp",{configurable:!0,writable:!0,value:function(){if(console.warn("[DEPRECATED] <Number>.clamp() is deprecated."),null==this)throw new TypeError("Number.prototype.clamp called on null or undefined");if(2!==arguments.length)throw new Error("Number.prototype.clamp called with an incorrect number of parameters (want: 2, received: ".concat(arguments.length,")"));return Math.clamp(this,arguments[0],arguments[1])}})}(),function(){function onKeypressFn(ev){13!==ev.which&&32!==ev.which||(ev.preventDefault(),triggerEvent("click",getActiveElement()||this))}function onClickFnWrapper(fn){return function(){var $this=jQuery(this);$this.ariaIsDisabled()||($this.is("[aria-pressed]")&&$this.attr("aria-pressed","true"===$this.attr("aria-pressed")?"false":"true"),fn.apply(this,arguments))}}function disableTabindex(el){if(!el.hasAttribute("data-last-tabindex")){var tabindex=el.getAttribute("tabindex");el.setAttribute("data-last-tabindex",null!==tabindex?tabindex.trim():"")}el.setAttribute("tabindex",-1)}function restoreTabindex(el){var lastTabindex=el.getAttribute("data-last-tabindex");null!==lastTabindex&&(el.removeAttribute("data-last-tabindex"),""===lastTabindex?el.removeAttribute("tabindex"):el.setAttribute("tabindex",lastTabindex))}jQuery.fn.extend({ariaClick:function(options,handler){if(0===this.length||0===arguments.length)return this;var opts=options,fn=handler;return null==fn&&(fn=opts,opts=undefined),"string"!=typeof(opts=jQuery.extend({namespace:undefined,one:!1,selector:undefined,data:undefined,role:undefined,tabindex:0,controls:undefined,pressed:undefined,label:undefined},opts)).namespace?opts.namespace="":"."!==opts.namespace[0]&&(opts.namespace=".".concat(opts.namespace)),"boolean"==typeof opts.pressed&&(opts.pressed=opts.pressed?"true":"false"),this.filter("button").prop("type","button"),null!=opts.role?this.attr("role",opts.role):this.not("[role]").filter("a,[data-passage]").attr("role","link").end().not("a").not("[data-passage]").attr("role","button").end().end().end(),this.attr("tabindex",opts.tabindex),null!=opts.controls&&this.attr("aria-controls",opts.controls),null!=opts.pressed&&this.attr("aria-pressed",opts.pressed),null!=opts.label&&this.attr({"aria-label":opts.label,title:opts.label}),this.not("button").on("keypress.aria-clickable".concat(opts.namespace),opts.selector,onKeypressFn),this.on("click.aria-clickable".concat(opts.namespace),opts.selector,opts.data,opts.one?function(fn){return onClickFnWrapper((function(){jQuery(this).off(".aria-clickable").removeAttr("role tabindex aria-controls aria-pressed").filter("button").prop("disabled",!0),fn.apply(this,arguments)}))}(fn):onClickFnWrapper(fn)),this},ariaDisabled:function(disable){if(0===this.length||0===arguments.length)return this;var $nonDisableable=this.not("button,fieldset,input,menuitem,optgroup,option,select,textarea"),$disableable=this.filter("button,fieldset,input,menuitem,optgroup,option,select,textarea");return disable?($nonDisableable.each((function(){this.setAttribute("disabled","disabled"),this.setAttribute("aria-disabled","true"),disableTabindex(this)})),$disableable.each((function(){this.disabled=!0,this.setAttribute("aria-disabled","true"),disableTabindex(this)}))):($nonDisableable.each((function(){this.removeAttribute("disabled"),this.removeAttribute("aria-disabled"),restoreTabindex(this)})),$disableable.each((function(){this.disabled=!1,this.removeAttribute("aria-disabled"),restoreTabindex(this)}))),this},ariaIsDisabled:function(){return this.is("[disabled]")}})}(),jQuery.fn.extend({getForbiddenInteractiveContentTagNames:function(){if(0===this.length)return[];var forbidden=new Set;return this.find("a,button,fieldset,form,input,menuitem,optgroup,option,select,textarea").each((function(_,el){return forbidden.add(el.nodeName.toLowerCase())})),Array.from(forbidden)}}),jQuery.extend({wikiWithOptions:function(options){for(var _len=arguments.length,sources=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)sources[_key-1]=arguments[_key];if(0!==sources.length){var frag=document.createDocumentFragment();sources.forEach((function(content){return new Wikifier(frag,content,options)}));var errors=Array.from(frag.querySelectorAll(".error")).map((function(errEl){return errEl.textContent.replace(errorPrologRegExp,"")}));if(errors.length>0)throw new Error(errors.join("; "))}},wiki:function(){for(var _len2=arguments.length,sources=new Array(_len2),_key2=0;_key2<_len2;_key2++)sources[_key2]=arguments[_key2];this.wikiWithOptions.apply(this,[undefined].concat(sources))},wikiPassage:function(name){this.wikiWithOptions(undefined,Story.get(name).processText())}}),jQuery.fn.extend({wikiWithOptions:function(options){for(var _len3=arguments.length,sources=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)sources[_key3-1]=arguments[_key3];if(0===this.length||0===sources.length)return this;var frag=document.createDocumentFragment();return sources.forEach((function(content){return new Wikifier(frag,content,options)})),this.append(frag),this},wiki:function(){for(var _len4=arguments.length,sources=new Array(_len4),_key4=0;_key4<_len4;_key4++)sources[_key4]=arguments[_key4];return this.wikiWithOptions.apply(this,[undefined].concat(sources))},wikiPassage:function(name){return this.wikiWithOptions(undefined,Story.get(name).processText())}});var Browser=(userAgent=navigator.userAgent.toLowerCase(),winPhone=userAgent.includes("windows phone"),isMobile=Object.freeze({Android:!winPhone&&userAgent.includes("android"),BlackBerry:/blackberry|bb10/.test(userAgent),iOS:!winPhone&&/ip(?:hone|ad|od)/.test(userAgent),Opera:!winPhone&&("object"===_typeof(window.operamini)||userAgent.includes("opera mini")),Windows:winPhone||/iemobile|wpdesktop/.test(userAgent),any:function(){return isMobile.Android||isMobile.BlackBerry||isMobile.iOS||isMobile.Opera||isMobile.Windows}}),isGecko=!isMobile.Windows&&!/khtml|trident|edge/.test(userAgent)&&userAgent.includes("gecko"),isIE=!userAgent.includes("opera")&&/msie|trident/.test(userAgent),ieVersion=isIE?(ver=/(?:msie\s+|rv:)(\d+\.\d)/.exec(userAgent))?Number(ver[1]):0:null,isOpera=userAgent.includes("opera")||userAgent.includes(" opr/"),operaVersion=isOpera?function(){var ver=new RegExp("".concat(/khtml|chrome/.test(userAgent)?"opr":"version","\\/(\\d+\\.\\d+)")).exec(userAgent);return ver?Number(ver[1]):0}():null,isVivaldi=userAgent.includes("vivaldi"),Object.freeze(Object.assign(Object.create(null),{userAgent:userAgent,isMobile:isMobile,isGecko:isGecko,isIE:isIE,ieVersion:ieVersion,isOpera:isOpera,operaVersion:operaVersion,isVivaldi:isVivaldi}))),ver,userAgent,winPhone,isMobile,isGecko,isIE,ieVersion,isOpera,operaVersion,isVivaldi,Has=(hasAudioElement=function(){try{return"function"==typeof document.createElement("audio").canPlayType}catch(ex){}return!1}(),hasFile=function(){try{return"Blob"in window&&"File"in window&&"FileList"in window&&"FileReader"in window&&(!Browser.isOpera||Browser.operaVersion>=15)}catch(ex){}return!1}(),hasGeolocation=function(){try{return"geolocation"in navigator&&"function"==typeof navigator.geolocation.getCurrentPosition&&"function"==typeof navigator.geolocation.watchPosition}catch(ex){}return!1}(),hasMutationObserver=function(){try{return"MutationObserver"in window&&"function"==typeof window.MutationObserver}catch(ex){}return!1}(),hasPerformance=function(){try{return"performance"in window&&"function"==typeof window.performance.now}catch(ex){}return!1}(),hasTouch=function(){try{return"ontouchstart"in window||!!window.DocumentTouch&&document instanceof window.DocumentTouch||!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints}catch(ex){}return!1}(),hasTransitionEndEvent=function(){try{for(var teMap=new Map([["transition","transitionend"],["MSTransition","msTransitionEnd"],["WebkitTransition","webkitTransitionEnd"],["MozTransition","transitionend"]]),teKeys=Array.from(teMap.keys()),el=document.createElement("div"),i=0;i<teKeys.length;++i)if(el.style[teKeys[i]]!==undefined)return teMap.get(teKeys[i])}catch(ex){}return!1}(),Object.freeze(Object.assign(Object.create(null),{audio:hasAudioElement,fileAPI:hasFile,geolocation:hasGeolocation,mutationObserver:hasMutationObserver,performance:hasPerformance,touch:hasTouch,transitionEndEvent:hasTransitionEndEvent}))),hasAudioElement,hasFile,hasGeolocation,hasMutationObserver,hasPerformance,hasTouch,hasTransitionEndEvent,Fullscreen=function(){var _hasPromise,vendor=function(){try{return Object.freeze([{isEnabled:"fullscreenEnabled",element:"fullscreenElement",requestFn:"requestFullscreen",exitFn:"exitFullscreen",changeEvent:"fullscreenchange",errorEvent:"fullscreenerror"},{isEnabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",requestFn:"webkitRequestFullscreen",exitFn:"webkitExitFullscreen",changeEvent:"webkitfullscreenchange",errorEvent:"webkitfullscreenerror"},{isEnabled:"mozFullScreenEnabled",element:"mozFullScreenElement",requestFn:"mozRequestFullScreen",exitFn:"mozCancelFullScreen",changeEvent:"mozfullscreenchange",errorEvent:"mozfullscreenerror"},{isEnabled:"msFullscreenEnabled",element:"msFullscreenElement",requestFn:"msRequestFullscreen",exitFn:"msExitFullscreen",changeEvent:"MSFullscreenChange",errorEvent:"MSFullscreenError"}].find((function(vnd){return vnd.isEnabled in document})))}catch(ex){}return undefined}(),_returnsPromise=(_hasPromise=null,function(){if(null!==_hasPromise)return _hasPromise;if(_hasPromise=!1,vendor)try{var value=document.exitFullscreen();value.catch((function(){})),_hasPromise=value instanceof Promise}catch(ex){}return _hasPromise});function _selectElement(requestedEl){var selectedEl=requestedEl||document.documentElement;return selectedEl===document.documentElement&&("msRequestFullscreen"===vendor.requestFn||Browser.isOpera&&Browser.operaVersion<15)&&(selectedEl=document.body),selectedEl}function isFullscreen(){return Boolean(vendor&&document[vendor.element])}function requestFullscreen(options,requestedEl){if(!vendor)return Promise.reject(new Error("fullscreen not supported"));var element=_selectElement(requestedEl);if("function"!=typeof element[vendor.requestFn])return Promise.reject(new Error("fullscreen not supported"));if(isFullscreen())return Promise.resolve();if(_returnsPromise())return element[vendor.requestFn](options);var namespace=".Fullscreen_requestFullscreen";return new Promise((function(resolve,reject){var $element=jQuery(element);$element.off(namespace).one("".concat(vendor.errorEvent).concat(namespace," ").concat(vendor.changeEvent).concat(namespace),(function(ev){$element.off(namespace),ev.type===vendor.errorEvent?reject(new Error("unknown fullscreen request error")):resolve()})),element[vendor.requestFn](options)}))}function exitFullscreen(){if(!vendor||"function"!=typeof document[vendor.exitFn])return Promise.reject(new TypeError("fullscreen not supported"));if(!isFullscreen())return Promise.reject(new TypeError("fullscreen mode not active"));if(_returnsPromise())return document[vendor.exitFn]();var namespace=".Fullscreen_exitFullscreen";return new Promise((function(resolve,reject){var $document=jQuery(document);$document.off(namespace).one("".concat(vendor.errorEvent).concat(namespace," ").concat(vendor.changeEvent).concat(namespace),(function(ev){$document.off(namespace),ev.type===vendor.errorEvent?reject(new Error("unknown fullscreen exit error")):resolve()})),document[vendor.exitFn]()}))}return Object.preventExtensions(Object.create(null,{vendor:{get:function(){return vendor}},element:{get:function(){return vendor?document[vendor.element]:null}},isEnabled:{value:function(){return Boolean(vendor&&document[vendor.isEnabled])}},isFullscreen:{value:isFullscreen},request:{value:requestFullscreen},exit:{value:exitFullscreen},toggle:{value:function(options,requestedEl){return isFullscreen()?exitFullscreen():requestFullscreen(options,requestedEl)}},onChange:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);jQuery(element).on(vendor.changeEvent,handlerFn)}}},offChange:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);handlerFn?jQuery(element).off(vendor.changeEvent,handlerFn):jQuery(element).off(vendor.changeEvent)}}},onError:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);jQuery(element).on(vendor.errorEvent,handlerFn)}}},offError:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);handlerFn?jQuery(element).off(vendor.errorEvent,handlerFn):jQuery(element).off(vendor.errorEvent)}}}}))}(),Outliner=function(){var lastEvent,styleEl=null;function outlinerHide(){document.documentElement.removeAttribute("data-outlines"),styleEl.styleSheet?styleEl.styleSheet.cssText="*:focus{outline:none;}":styleEl.textContent="*:focus{outline:none;}"}function outlinerShow(){document.documentElement.setAttribute("data-outlines",""),styleEl.styleSheet?styleEl.styleSheet.cssText="":styleEl.textContent=""}return Object.preventExtensions(Object.create(null,{init:{value:function(){styleEl||(styleEl=document.createElement("style"),jQuery(styleEl).attr({id:"style-outliner",type:"text/css"}).appendTo(document.head),jQuery(document).on("mousedown.style-outliner keydown.style-outliner",(function(ev){ev.type!==lastEvent&&(lastEvent=ev.type,"keydown"===ev.type?outlinerShow():outlinerHide())})),lastEvent="mousedown",outlinerHide())}},hide:{value:outlinerHide},show:{value:outlinerShow}}))}(),Serial=function(){var supportedTypes=Object.freeze([{id:"Date",get reference(){return Date.prototype},method:function(){return["(revive:date)",this.toISOString()]}},{id:"Function",get reference(){return Function.prototype},method:function(){return["(revive:)",["(".concat(this.toString(),")")]]}},{id:"Map",get reference(){return Map.prototype},method:function(){return["(revive:map)",Array.from(this)]}},{id:"RegExp",get reference(){return RegExp.prototype},method:function(){return["(revive:)",[this.toString()]]}},{id:"Set",get reference(){return Set.prototype},method:function(){return["(revive:set)",Array.from(this)]}}]);function createReviver(code,data){if("string"!=typeof code)throw new TypeError("Serial.createReviver code parameter must be a string");return["(revive:)",[code,data]]}function parse(text,reviver){return JSON.parse(text,(function(key,val){var value=val;if(value instanceof Array&&2===value.length)switch(value[0]){case"(revive:set)":value=new Set(value[1]);break;case"(revive:map)":value=new Map(value[1]);break;case"(revive:date)":value=new Date(value[1]);break;case"(revive:eval)":case"(revive:)":try{var $ReviveData$=value[1][1];value=eval(value[1][0])}catch(ex){}}if("function"==typeof reviver)try{value=reviver(key,value)}catch(ex){}return value}))}function stringify(value,replacer,space){var origMethodCache=new Map;supportedTypes.forEach((function(_ref3){var id=_ref3.id,reference=_ref3.reference,method=_ref3.method;Object.hasOwn(reference,"toJSON")&&origMethodCache.set(id,reference.toJSON),Object.defineProperty(reference,"toJSON",{configurable:!0,writable:!0,value:method})}));var notation=JSON.stringify(value,(function(key,val){var value=val;if("function"==typeof replacer)try{value=replacer(key,value)}catch(ex){}switch(value){case undefined:value=["(revive:)",["undefined"]];break;case 1/0:value=["(revive:)",["Infinity"]]}return value}),space);return supportedTypes.forEach((function(_ref4){var id=_ref4.id,reference=_ref4.reference;origMethodCache.has(id)?(Object.defineProperty(reference,"toJSON",{configurable:!0,writable:!0,value:origMethodCache.get(id)}),origMethodCache.delete(id)):delete reference.toJSON})),notation}return Object.preventExtensions(Object.create(null,{createReviver:{value:createReviver},parse:{value:parse},stringify:{value:stringify}}))}(),Visibility=(vendor=function(){try{return Object.freeze([{hiddenProperty:"hidden",stateProperty:"visibilityState",changeEvent:"visibilitychange"},{hiddenProperty:"webkitHidden",stateProperty:"webkitVisibilityState",changeEvent:"webkitvisibilitychange"},{hiddenProperty:"mozHidden",stateProperty:"mozVisibilityState",changeEvent:"mozvisibilitychange"},{hiddenProperty:"msHidden",stateProperty:"msVisibilityState",changeEvent:"msvisibilitychange"}].find((function(vnd){return vnd.hiddenProperty in document})))}catch(ex){}return undefined}(),Object.preventExtensions(Object.create(null,{vendor:{get:function(){return vendor}},state:{get:function(){return vendor&&document[vendor.stateProperty]||"visible"}},isEnabled:{value:function(){return Boolean(vendor)}},isHidden:{value:function(){return Boolean(vendor&&document[vendor.hiddenProperty])}},hiddenProperty:{value:vendor&&vendor.hiddenProperty},stateProperty:{value:vendor&&vendor.stateProperty},changeEvent:{value:vendor&&vendor.changeEvent}}))),vendor;function appendError(output,message,source){var $wrapper=jQuery(document.createElement("div")),$toggle=jQuery(document.createElement("button")),$source=jQuery(document.createElement("pre")),mesg="".concat(L10n.get("errorViewTitle"),": ").concat(message||"unknown error");return $toggle.addClass("error-toggle").ariaClick({label:L10n.get("errorViewLabelToggle")},(function(){$toggle.hasClass("enabled")?($toggle.removeClass("enabled"),$source.attr({"aria-hidden":!0,hidden:"hidden"})):($toggle.addClass("enabled"),$source.removeAttr("aria-hidden hidden"))})).appendTo($wrapper),jQuery(document.createElement("span")).addClass("error").text(mesg).appendTo($wrapper),jQuery(document.createElement("code")).text(source).appendTo($source),$source.addClass("error-source").attr({"aria-hidden":!0,hidden:"hidden"}).appendTo($wrapper),$wrapper.addClass("error-view").appendTo(output),console.warn("".concat(mesg,"\n\t").concat(source.replace(/\n/g,"\n\t"))),!1}var throwError=appendError;function charAndPosAt(string,position){var str=String(string),pos=Math.trunc(position),code=str.charCodeAt(pos);if(Number.isNaN(code))return{char:"",start:-1,end:-1};var retval={char:str.charAt(pos),start:pos,end:pos};if(code<55296||code>57343)return retval;if(code>=55296&&code<=56319){var nextPos=pos+1;if(nextPos>=str.length)return retval;var nextCode=str.charCodeAt(nextPos);return nextCode<56320||nextCode>57343||(retval.char=retval.char+str.charAt(nextPos),retval.end=nextPos),retval}if(0===pos)return retval;var prevPos=pos-1,prevCode=str.charCodeAt(prevPos);return prevCode<55296||prevCode>56319||(retval.char=str.charAt(prevPos)+retval.char,retval.start=prevPos),retval}function clone(O){if("object"!==_typeof(O)||null===O)return O;if("function"==typeof O.clone)return O.clone(!0);var copy;if(O instanceof Array)copy=new Array(O.length);else if(O instanceof Date)copy=new Date(O.getTime());else if(O instanceof Map)copy=new Map,O.forEach((function(val,key){return copy.set(clone(key),clone(val))}));else if(O instanceof RegExp)copy=new RegExp(O);else if(O instanceof Set)copy=new Set,O.forEach((function(val){return copy.add(clone(val))}));else{var type=getTypeOf(O);if("Object"!==type)throw new TypeError("attempted to clone unsupported type: ".concat(type));copy=Object.create(Object.getPrototypeOf(O))}return Object.keys(O).forEach((function(P){return copy[P]=clone(O[P])})),copy}var convertBreaks=function(){var isNotSpaceRE=new RegExp(Patterns.notSpace);function isParagraphEmpty(para){if(!para.hasChildNodes())return!0;for(var nodes=para.childNodes,length=nodes.length,i=0;i<length;++i){var node=nodes[i];switch(node.nodeType){case Node.TEXT_NODE:if(isNotSpaceRE.test(node.nodeValue))return!1;break;case Node.COMMENT_NODE:break;default:return!1}}return!0}return function(source){for(var node,output=document.createDocumentFragment(),para=document.createElement("p");null!==(node=source.firstChild);){if(node.nodeType===Node.ELEMENT_NODE)switch(node.nodeName.toUpperCase()){case"BR":if(null!==node.nextSibling&&node.nextSibling.nodeType===Node.ELEMENT_NODE&&"BR"===node.nextSibling.nodeName.toUpperCase()){source.removeChild(node.nextSibling),source.removeChild(node),isParagraphEmpty(para)||output.appendChild(para),para=document.createElement("p");continue}if(isParagraphEmpty(para)){source.removeChild(node);continue}break;case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":isParagraphEmpty(para)||(output.appendChild(para),para=document.createElement("p")),output.appendChild(node);continue}para.appendChild(node)}isParagraphEmpty(para)||output.appendChild(para),source.appendChild(output)}}(),createFilename=(illegalCharsRE=/[\x00-\x1f"#$%&'*+,/:;<=>?\\^`|\x7f-\x9f]+/g,function(str){return String(str).trim().replace(illegalCharsRE,"")}),illegalCharsRE,createSlug=function(){var illegalCharsRE=/[\x00-\x20!-/:-@[-^`{-\x9f]+/g,isInvalidSlugRE=/^-*$/,storySigilRE=/^\$/,tempSigilRE=/^_/;return function(str){var base=String(str).trim(),legacy=base.replace(/[^\w\s\u2013\u2014-]+/g,"").replace(/[_\s\u2013\u2014-]+/g,"-").toLocaleLowerCase();return isInvalidSlugRE.test(legacy)?base.replace(storySigilRE,"").replace(tempSigilRE,"-").replace(illegalCharsRE,""):legacy}}();function cssPropToDOMProp(cssName){if(!cssName.includes("-"))switch(cssName){case"bgcolor":return"backgroundColor";case"float":return"cssFloat";default:return cssName}return("-ms-"===cssName.slice(0,4)?cssName.slice(1):cssName).split("-").map((function(part,i){return 0===i?part:part.toUpperFirst()})).join("")}var cssTimeToMS=(cssTimeRE=/^([+-]?(?:\d*\.)?\d+)([Mm]?[Ss])$/,function(cssTime){var match=cssTimeRE.exec(String(cssTime));if(null===match)throw new SyntaxError('invalid time value syntax: "'.concat(cssTime,'"'));var msec=Number(match[1]);if(1===match[2].length&&(msec*=1e3),Number.isNaN(msec)||!Number.isFinite(msec))throw new RangeError('invalid time value: "'.concat(cssTime,'"'));return msec}),cssTimeRE,decodeEntities=(escapedHtmlRE=/&(?:amp|#38|#x26|lt|#60|#x3c|gt|#62|#x3e|quot|#34|#x22|apos|#39|#x27|#96|#x60);/gi,hasEscapedHtmlRE=new RegExp(escapedHtmlRE.source,"i"),escapedHtmlTable=enumFrom({"&amp;":"&","&#38;":"&","&#x26;":"&","&lt;":"<","&#60;":"<","&#x3c;":"<","&gt;":">","&#62;":">","&#x3e;":">","&quot;":'"',"&#34;":'"',"&#x22;":'"',"&apos;":"'","&#39;":"'","&#x27;":"'","&#96;":"`","&#x60;":"`"}),function(str){if(null==str)return"";var val=String(str);return val&&hasEscapedHtmlRE.test(val)?val.replace(escapedHtmlRE,(function(entity){return escapedHtmlTable[entity.toLowerCase()]})):val}),escapedHtmlRE,hasEscapedHtmlRE,escapedHtmlTable,encodeEntities=(htmlCharsRE=/[&<>"'`]/g,hasHtmlCharsRE=new RegExp(htmlCharsRE.source),htmlCharsTable=enumFrom({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"}),function(str){if(null==str)return"";var val=String(str);return val&&hasHtmlCharsRE.test(val)?val.replace(htmlCharsRE,(function(ch){return htmlCharsTable[ch]})):val}),htmlCharsRE,hasHtmlCharsRE,htmlCharsTable,encodeMarkup=(markupCharsRE=/[!"#$&'*\-/<=>?@[\\\]^_`{|}~]/g,hasMarkupCharsRE=new RegExp(markupCharsRE.source),markupCharsTable=enumFrom({"!":"&#33;",'"':"&quot;","#":"&#35;",$:"&#36;","&":"&amp;","'":"&#39;","*":"&#42;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","?":"&#63;","@":"&#64;","[":"&#91;","\\":"&#92;","]":"&#93;","^":"&#94;",_:"&#95;","`":"&#96;","{":"&#123;","|":"&#124;","}":"&#125;","~":"&#126;"}),function(str){if(null==str)return"";var val=String(str);return val&&hasMarkupCharsRE.test(val)?val.replace(markupCharsRE,(function(ch){return markupCharsTable[ch]})):val}),markupCharsRE,hasMarkupCharsRE,markupCharsTable,enquote=(unescapedDQuoteRE=/(^|[^\\])(")/g,unescapedSQuoteRE=/(^|[^\\])(')/g,function(string){for(var dqCount=0,sqCount=0,i=0;i<string.length;++i)switch(string[i]){case"\\":++i;break;case'"':++dqCount;break;case"'":++sqCount}if(0===dqCount)return'"'.concat(string,'"');if(0===sqCount)return"'".concat(string,"'");var quote=dqCount<=sqCount?'"':"'";return"".concat(quote).concat(string.replace('"'===quote?unescapedDQuoteRE:unescapedSQuoteRE,"$1\\$2")).concat(quote)}),unescapedDQuoteRE,unescapedSQuoteRE;function enumFrom(O){var pEnum=Object.create(null);if(O instanceof Array)O.forEach((function(val,i){return pEnum[String(val)]=i}));else if(O instanceof Set)Array.from(O).forEach((function(val,i){return pEnum[String(val)]=i}));else if(O instanceof Map)O.forEach((function(val,key){return pEnum[String(key)]=val}));else{if(null===O||"object"!==_typeof(O)||Object.getPrototypeOf(O)!==Object.prototype)throw new TypeError("enumFrom object parameter must be an Array, Map, Set, or generic object");Object.assign(pEnum,O)}return Object.freeze(Object.defineProperties(pEnum,{nameFrom:{value:function(needle){var entry=Object.entries(this).find((function(entry){return entry[1]===needle}));return entry?entry[0]:undefined}}}))}var exceptionFrom=(extraProps=Object.freeze(["code","data","result","stack","columnNumber","fileName","lineNumber","description","number"]),function(original,exceptionType,override){if(null===original||"object"!==_typeof(original))throw new Error("exceptionFrom original parameter must be an object");if("function"!=typeof exceptionType)throw new Error("exceptionFrom exceptionType parameter must be an error type constructor");var overrideType=_typeof(override);if("undefined"!==overrideType&&"string"!==overrideType&&"object"!==overrideType)throw new Error("exceptionFrom override parameter must be an object or string");var propValues=new Map;extraProps.forEach((function(name){void 0!==original[name]&&propValues.set(name,original[name])})),"string"===overrideType?propValues.set("message",override):"object"===overrideType&&null!==override&&Object.getOwnPropertyNames(override).forEach((function(name){void 0!==override[name]&&propValues.set(name,override[name])}));var ex=new exceptionType(propValues.get("message"));return propValues.delete("message"),propValues.forEach((function(value,name){void 0===ex[name]?Object.defineProperty(ex,name,{value:value,configurable:!0,writable:!0}):ex[name]=value})),ex}),extraProps;function getActiveElement(){try{return document.activeElement||null}catch(ex){return null}}function getErrorMessage(O){return null==O?"unknown error":"object"===_typeof(O)&&"message"in O?O.message:String(O)}var getToStringTag=(toString=Object.prototype.toString,slice=String.prototype.slice,"[object Object]"===toString.call(new Map)?function(O){return O instanceof Map?"Map":O instanceof Set?"Set":slice.call(toString.call(O),8,-1)}:function(O){return slice.call(toString.call(O),8,-1)}),toString,slice,getTypeOf=function(){var toString=Object.prototype.toString,slice=String.prototype.slice;return function(O){if(null===O)return"null";var baseType=_typeof(O);return"object"===baseType?slice.call(toString.call(O),8,-1):baseType}}(),hasMediaQuery="function"!=typeof window.matchMedia?function(){return!1}:function(mediaQuery){return window.matchMedia(mediaQuery).matches},isExternalLink=(externalUrlRE=new RegExp("^".concat(Patterns.externalUrl),"gim"),fingerprintRE=/[/\\?]/,function(link){return!Story.has(link)&&(externalUrlRE.test(link)||fingerprintRE.test(link))}),externalUrlRE,fingerprintRE;function msToCSSTime(msec){if("number"!=typeof msec||Number.isNaN(msec)||!Number.isFinite(msec)){var what;switch(_typeof(msec)){case"string":what='"'.concat(msec,'"');break;case"number":what=String(msec);break;default:what=getTypeOf(msec)}throw new TypeError("invalid milliseconds value: ".concat(what))}return"".concat(msec,"ms")}var now=(clock=Has.performance?performance:Date,function(){return clock.now()}),clock,onUserActivation=(uaEvents=Object.freeze(["keydown","mousedown","pointerdown","pointerup","touchend"]),function(namespace,callback){jQuery(document).off(namespace).on(uaEvents.map((function(name){return"".concat(name).concat(namespace)})).join(" "),(function(ev){callback(ev).then((function(){return jQuery(document).off(namespace)}),(function(ex){if("NotAllowedError"!==ex.name)throw jQuery(document).off(namespace),ex}))}))}),uaEvents;function parseURL(url){var parser=document.createElement("a"),searchParams=Object.create(null);parser.href=url,parser.search&&parser.search.replace(/^\?/,"").splitOrEmpty(/(?:&(?:amp;)?|;)/).forEach((function(query){var _query$split2=_slicedToArray(query.split("="),2),key=_query$split2[0],value=_query$split2[1];Object.hasOwn(searchParams,key)?searchParams[key].push(value):searchParams[key]=[value]}));var pathname=parser.host&&"/"!==parser.pathname[0]?"/".concat(parser.pathname):parser.pathname;return Object.freeze(Object.assign(Object.create(null),{href:parser.href,protocol:parser.protocol,host:parser.host,hostname:parser.hostname,port:parser.port,path:"".concat(pathname).concat(parser.search),pathname:pathname,search:parser.search,searchParams:Object.freeze(searchParams),hash:parser.hash}))}function sameValueZero(a,b){return a===b||a!=a&&b!=b}var scrubEventKey=function(){var separatorKey,decimalKey;if("undefined"!=typeof Intl&&"function"==typeof Intl.NumberFormat){var match=(new Intl.NumberFormat).format(111111.5).match(/(\D*)\d+(\D*)\d$/);match&&(separatorKey=match[1],decimalKey=match[2])}return separatorKey||decimalKey||(separatorKey=",",decimalKey="."),function(key){switch(key){case"Scroll":return"ScrollLock";case"Spacebar":return" ";case"Left":return"ArrowLeft";case"Right":return"ArrowRight";case"Up":return"ArrowUp";case"Down":return"ArrowDown";case"Del":return"Delete";case"Crsel":return"CrSel";case"Exsel":return"ExSel";case"Esc":return"Escape";case"Apps":return"ContextMenu";case"Nonconvert":return"NonConvert";case"MediaNextTrack":return"MediaTrackNext";case"MediaPreviousTrack":return"MediaTrackPrevious";case"VolumeUp":return"AudioVolumeUp";case"VolumeDown":return"AudioVolumeDown";case"VolumeMute":return"AudioVolumeMute";case"Zoom":return"ZoomToggle";case"SelectMedia":case"MediaSelect":return"LaunchMediaPlayer";case"Add":return"+";case"Divide":return"/";case"Multiply":return"*";case"Subtract":return"-";case"Decimal":return decimalKey;case"Separator":return separatorKey}return key}}(),setDisplayTitle=function(title,isPlainText){if("string"!=typeof title)throw new TypeError("title parameter must be a string (received: ".concat(getTypeOf(title),")"));var render,text;isPlainText?text=render=title.trim():(render=document.createDocumentFragment(),new Wikifier(render,title,{noCleanup:!0}),text=function(source){for(var node,copy=source.cloneNode(!0),frag=document.createDocumentFragment();null!==(node=copy.firstChild);){if(node.nodeType===Node.ELEMENT_NODE)switch(node.nodeName.toUpperCase()){case"BR":case"DIV":case"P":frag.appendChild(document.createTextNode(" "))}frag.appendChild(node)}return frag.textContent}(render).trim()),document.title=Config.passages.displayTitles&&""!==State.passage&&State.passage!==Config.passages.start?"".concat(State.passage," | ").concat(text):text,jQuery("#story-title").empty().append(render)};function setPageElement(idOrElement,titles,defaultText){var el="object"===_typeof(idOrElement)?idOrElement:document.getElementById(idOrElement);if(null==el)return null;var ids=titles instanceof Array?titles:[titles];jQuery(el).empty();for(var i=0;i<ids.length;++i)if(Story.has(ids[i]))return new Wikifier(el,Story.get(ids[i]).processText().trim()),el;if(null!=defaultText){var text=String(defaultText).trim();""!==text&&new Wikifier(el,text)}return el}function stringFrom(value){switch(_typeof(value)){case"function":return"[function]";case"number":if(Number.isNaN(value))return"[number NaN]";break;case"object":if(null===value)return"[null]";if(value instanceof Array)return value.map((function(val){return stringFrom(val)})).join(", ");if(value instanceof Set)return Array.from(value).map((function(val){return stringFrom(val)})).join(", ");if(value instanceof Map){var result=Array.from(value).map((function(_ref5){var _ref6=_slicedToArray(_ref5,2),key=_ref6[0],val=_ref6[1];return"".concat(stringFrom(key)," → ").concat(stringFrom(val))}));return"{ ".concat(result.join(", ")," }")}if(value instanceof Date)return value.toLocaleString();if(value instanceof Element){if(value===document.documentElement||value===document.head||value===document.body)throw new Error("illegal operation; attempting to convert the <html>, <head>, or <body> tags to string is not allowed");return value.outerHTML}if(value instanceof Node)return value.textContent;break;case"symbol":var desc=void 0!==value.description?' "'.concat(value.description,'"'):"";return"[symbol".concat(desc,"]");case"undefined":return"[undefined]"}return String(value)}var triggerEvent=(createEvent=function(){try{return new CustomEvent("click",{bubbles:!0}),function(name,options){for(var _Object$assign=Object.assign({bubbles:!0,cancelable:!0,composed:!1},options),bubbles=_Object$assign.bubbles,cancelable=_Object$assign.cancelable,composed=_Object$assign.composed,detail=_Object$assign.detail,custom=_objectWithoutProperties(_Object$assign,_excluded),event=new CustomEvent(name,{bubbles:bubbles,cancelable:cancelable,composed:composed,detail:detail}),i=0,keys=Object.keys(custom);i<keys.length;++i){var key=keys[i];void 0!==custom[key]&&(event[key]=options[key])}return event}}catch(ex){return function(name,options){for(var _Object$assign2=Object.assign({bubbles:!0,cancelable:!0},options),bubbles=_Object$assign2.bubbles,cancelable=_Object$assign2.cancelable,custom=_objectWithoutProperties(_Object$assign2,_excluded2),event=document.createEvent("Event"),i=0,keys=Object.keys(custom);i<keys.length;++i){var key=keys[i];void 0!==custom[key]&&(event[key]=options[key])}return event.initEvent(name,bubbles,cancelable),event}}}(),function(name,targets,options){var event=createEvent(name,options),elems=[];if(targets)if(targets instanceof jQuery||targets instanceof NodeList||targets instanceof Array)for(var i=0;i<targets.length;++i)elems.push(targets[i]);else elems.push(targets);else elems.push(document);for(var _i5=0;_i5<elems.length;++_i5)elems[_i5].dispatchEvent(event)}),createEvent,SimpleStore=(_adapters=[],_initialized=null,Object.preventExtensions(Object.create(null,{adapters:{value:_adapters},create:{value:function(storageId,persistent){if(_initialized)return _initialized.create(storageId,persistent);for(var i=0;i<_adapters.length;++i)if(_adapters[i].init(storageId,persistent))return(_initialized=_adapters[i]).create(storageId,persistent);throw new Error("No valid storage adapters found")}}}))),_adapters,_initialized,_MAX_EXPIRY,_MIN_EXPIRY,_ok,CookieAdapter;SimpleStore.adapters.push(function(){var _ok=!1,WebStorageAdapter=function(){function WebStorageAdapter(storageId,persistent){_classCallCheck(this,WebStorageAdapter);var prefix="".concat(storageId,"."),engine=null,name=null;persistent?(engine=window.localStorage,name="localStorage"):(engine=window.sessionStorage,name="sessionStorage"),Object.defineProperties(this,{_engine:{value:engine},_prefix:{value:prefix},_prefixRe:{value:new RegExp("^".concat(RegExp.escape(prefix)))},name:{value:name},id:{value:storageId},persistent:{value:Boolean(persistent)}})}return _createClass(WebStorageAdapter,[{key:"size",get:function(){return this.keys().length}},{key:"keys",value:function(){for(var keys=[],i=0;i<this._engine.length;++i){var key=this._engine.key(i);this._prefixRe.test(key)&&keys.push(key.replace(this._prefixRe,""))}return keys}},{key:"has",value:function(key){return!("string"!=typeof key||!key)&&Object.hasOwn(this._engine,this._prefix+key)}},{key:"get",value:function(key){if("string"!=typeof key||!key)return null;var value=this._engine.getItem(this._prefix+key);return null==value?null:WebStorageAdapter._deserialize(value)}},{key:"set",value:function(key,value){if("string"!=typeof key||!key)return!1;try{this._engine.setItem(this._prefix+key,WebStorageAdapter._serialize(value))}catch(ex){if(isQuotaDOMException(ex))throw exceptionFrom(ex,Error,{cause:{origin:ex},message:"".concat(this.name," quota exceeded")});throw ex}return!0}},{key:"delete",value:function(key){return!("string"!=typeof key||!key)&&(this._engine.removeItem(this._prefix+key),!0)}},{key:"clear",value:function(){for(var keys=this.keys(),i=0,length=keys.length;i<length;++i)this.delete(keys[i]);return!0}}],[{key:"_serialize",value:function(obj){return LZString.compressToUTF16(Serial.stringify(obj))}},{key:"_deserialize",value:function(str){return Serial.parse(LZString.decompressFromUTF16(str))}}])}();var isQuotaErrorRE=/quota.?(?:exceeded|reached)/i;function isQuotaDOMException(ex){return ex instanceof DOMException&&(22===ex.code||1014===ex.code||isQuotaErrorRE.test(ex.name)||isQuotaErrorRE.test(ex.message))}return Object.preventExtensions(Object.create(null,{init:{value:function(){function hasWebStorage(storeId){var store;try{store=window[storeId];var val="_sc_".concat(String(Date.now()));store.setItem(val,val);var result=store.getItem(val)===val;return store.removeItem(val),result}catch(ex){return store&&0!==store.length&&isQuotaDOMException(ex)}}return _ok=hasWebStorage("localStorage")&&hasWebStorage("sessionStorage")}},create:{value:function(storageId,persistent){if(!_ok)throw new Error("adapter not initialized");return new WebStorageAdapter(storageId,persistent)}}}))}()),SimpleStore.adapters.push((_MAX_EXPIRY="Tue, 19 Jan 2038 03:14:07 GMT",_MIN_EXPIRY="Thu, 01 Jan 1970 00:00:00 GMT",_ok=!1,CookieAdapter=function(){function CookieAdapter(storageId,persistent){_classCallCheck(this,CookieAdapter);var prefix="".concat(storageId).concat(persistent?"!":"*",".");Object.defineProperties(this,{_prefix:{value:prefix},_prefixRe:{value:new RegExp("^".concat(RegExp.escape(prefix)))},name:{value:"cookie"},id:{value:storageId},persistent:{value:Boolean(persistent)}})}return _createClass(CookieAdapter,[{key:"size",get:function(){return this.keys().length}},{key:"keys",value:function(){if(""===document.cookie)return[];for(var cookies=document.cookie.split(/;\s*/),keys=[],i=0;i<cookies.length;++i){var kvPair=cookies[i].split("="),key=decodeURIComponent(kvPair[0]);this._prefixRe.test(key)&&""!==decodeURIComponent(kvPair[1])&&keys.push(key.replace(this._prefixRe,""))}return keys}},{key:"has",value:function(key){return!("string"!=typeof key||!key)&&null!==CookieAdapter._getCookie(this._prefix+key)}},{key:"get",value:function(key){if("string"!=typeof key||!key)return null;var value=CookieAdapter._getCookie(this._prefix+key);return null===value?null:CookieAdapter._deserialize(value)}},{key:"set",value:function(key,value){if("string"!=typeof key||!key)return!1;try{if(CookieAdapter._setCookie(this._prefix+key,CookieAdapter._serialize(value),this.persistent?_MAX_EXPIRY:undefined),!this.has(key))throw new Error("unknown validation error during set")}catch(ex){throw exceptionFrom(ex,Error,{cause:{origin:ex},message:"cookie error: ".concat(ex.message)})}return!0}},{key:"delete",value:function(key){if("string"!=typeof key||!key||!this.has(key))return!1;try{if(CookieAdapter._setCookie(this._prefix+key,undefined,_MIN_EXPIRY),this.has(key))throw new Error("unknown validation error during delete")}catch(ex){throw exceptionFrom(ex,Error,{cause:{origin:ex},message:"cookie error: ".concat(ex.message)})}return!0}},{key:"clear",value:function(){for(var keys=this.keys(),i=0,length=keys.length;i<length;++i)this.delete(keys[i]);return!0}}],[{key:"_getCookie",value:function(prefixedKey){if(!prefixedKey||""===document.cookie)return null;for(var cookies=document.cookie.split(/;\s*/),i=0;i<cookies.length;++i){var kvPair=cookies[i].split("=");if(prefixedKey===decodeURIComponent(kvPair[0]))return decodeURIComponent(kvPair[1])||null}return null}},{key:"_setCookie",value:function(prefixedKey,value,expiry){if(prefixedKey){var payload="".concat(encodeURIComponent(prefixedKey),"=");null!=value&&(payload+=encodeURIComponent(value)),null!=expiry&&(payload+="; expires=".concat(expiry)),payload+="; path=/",document.cookie=payload}}},{key:"_serialize",value:function(obj){return LZString.compressToBase64(Serial.stringify(obj))}},{key:"_deserialize",value:function(str){return Serial.parse(LZString.decompressFromBase64(str))}}])}(),Object.preventExtensions(Object.create(null,{init:{value:function(storageId){try{var tid="_sc_".concat(String(Date.now()));CookieAdapter._setCookie(tid,CookieAdapter._serialize(tid),undefined),_ok=CookieAdapter._deserialize(CookieAdapter._getCookie(tid))===tid,CookieAdapter._setCookie(tid,undefined,_MIN_EXPIRY)}catch(ex){_ok=!1}return _ok&&function(storageId){if(""!==document.cookie)for(var oldPrefix="".concat(storageId,"."),oldPrefixRe=new RegExp("^".concat(RegExp.escape(oldPrefix))),persistPrefix="".concat(storageId,"!."),sessionPrefix="".concat(storageId,"*."),sessionTestRe=/\.(?:state|rcWarn)$/,cookies=document.cookie.split(/;\s*/),_loop=function(){var kvPair=cookies[i].split("="),key=decodeURIComponent(kvPair[0]);if(oldPrefixRe.test(key)){var value=decodeURIComponent(kvPair[1]);if(""!==value){var persist=!sessionTestRe.test(key);CookieAdapter._setCookie(key,undefined,_MIN_EXPIRY),CookieAdapter._setCookie(key.replace(oldPrefixRe,(function(){return persist?persistPrefix:sessionPrefix})),value,persist?_MAX_EXPIRY:undefined)}}},i=0;i<cookies.length;++i)_loop()}(storageId),_ok}},create:{value:function(storageId,persistent){if(!_ok)throw new Error("adapter not initialized");return new CookieAdapter(storageId,persistent)}}}))));var DebugView=function(){function DebugView(parent,type,name,title){_classCallCheck(this,DebugView),Object.defineProperties(this,{parent:{value:parent},view:{value:document.createElement("span")},break:{value:document.createElement("wbr")}}),jQuery(this.view).attr({title:title,"aria-label":title,"data-type":null!=type?type:"","data-name":null!=name?name:""}).addClass("debug"),jQuery(this.break).addClass("debug hidden"),this.parent.appendChild(this.view),this.parent.appendChild(this.break)}return _createClass(DebugView,[{key:"output",get:function(){return this.view}},{key:"type",get:function(){return this.view.getAttribute("data-type")},set:function(type){this.view.setAttribute("data-type",null!=type?type:"")}},{key:"name",get:function(){return this.view.getAttribute("data-name")},set:function(name){this.view.setAttribute("data-name",null!=name?name:"")}},{key:"title",get:function(){return this.view.title},set:function(title){this.view.title=title}},{key:"append",value:function(el){return jQuery(this.view).append(el),this}},{key:"modes",value:function(options){if(null==options){var current={};return this.view.className.splitOrEmpty(/\s+/).forEach((function(name){"debug"!==name&&(current[name]=!0)})),current}if("object"===_typeof(options))return Object.keys(options).forEach((function(name){this[options[name]?"addClass":"removeClass"](name)}),jQuery(this.view)),this;throw new Error("DebugView.prototype.modes options parameter must be an object or null/undefined")}},{key:"remove",value:function(){var $view=jQuery(this.view);this.view.hasChildNodes()&&$view.contents().appendTo(this.parent),$view.remove(),jQuery(this.break).remove()}}],[{key:"isEnabled",value:function(){return"enabled"===jQuery(document.documentElement).attr("data-debug-view")}},{key:"enable",value:function(){jQuery(document.documentElement).attr("data-debug-view","enabled"),triggerEvent(":debugviewupdate")}},{key:"disable",value:function(){jQuery(document.documentElement).removeAttr("data-debug-view"),triggerEvent(":debugviewupdate")}},{key:"toggle",value:function(){DebugView.isEnabled()?DebugView.disable():DebugView.enable()}}])}(),NodeTyper=function(){return _createClass((function NodeTyper(config){if(_classCallCheck(this,NodeTyper),"object"!==_typeof(config)||null===config)throw new Error("config parameter must be an object (received: ".concat(getTypeOf(config),")"));if(!(Object.hasOwn(config,"targetNode")&&config.targetNode instanceof Node))throw new Error('config parameter object "targetNode" property must be a node');Object.defineProperties(this,{node:{value:config.targetNode},childNodes:{value:[]},nodeValue:{writable:!0,value:""},appendTo:{writable:!0,value:config.parentNode||null},classNames:{writable:!0,value:config.classNames||null},finished:{writable:!0,value:!1}});var childNode,node=this.node;for(node.nodeValue&&(this.nodeValue=node.nodeValue,node.nodeValue="");null!==(childNode=node.firstChild);)this.childNodes.push(new NodeTyper({targetNode:childNode,parentNode:node,classNames:this.classNames})),node.removeChild(childNode)}),[{key:"finish",value:function(){for(;this.type(!0););return!1}},{key:"type",value:function(flush){if(this.finished)return!1;if(this.appendTo){if(this.appendTo.appendChild(this.node),this.appendTo=null,this.node.nodeType!==Node.ELEMENT_NODE&&this.node.nodeType!==Node.TEXT_NODE||"none"===jQuery(this.node.parentNode).css("display"))return this.finish();this.node.parentNode&&this.classNames&&jQuery(this.node.parentNode).addClass(this.classNames)}if(this.nodeValue){if(flush)this.node.nodeValue+=this.nodeValue,this.nodeValue="";else{var _charAndPosAt=charAndPosAt(this.nodeValue,0),char=_charAndPosAt.char,start=_charAndPosAt.start,end=_charAndPosAt.end;this.node.nodeValue+=char,this.nodeValue=this.nodeValue.slice(1+end-start)}return!0}this.classNames&&(jQuery(this.node.parentNode).removeClass(this.classNames),this.classNames=null);for(var childNodes=this.childNodes;childNodes.length>0;){if(childNodes[0].type())return!0;childNodes.shift()}return this.finished=!0,!1}}])}(),StyleWrapper=(_imageMarkupRe=new RegExp(Patterns.cssImage,"g"),_hasImageMarkupRe=new RegExp(Patterns.cssImage),function(){return _createClass((function StyleWrapper(style){if(_classCallCheck(this,StyleWrapper),null==style)throw new TypeError("StyleWrapper style parameter must be an HTMLStyleElement object");Object.defineProperties(this,{style:{value:style}})}),[{key:"isEmpty",value:function(){return 0===this.style.cssRules.length}},{key:"set",value:function(rawCss){this.clear(),this.add(rawCss)}},{key:"add",value:function(rawCss){var css=rawCss;_hasImageMarkupRe.test(css)&&(_imageMarkupRe.lastIndex=0,css=css.replace(_imageMarkupRe,(function(wikiImage){var markup=Wikifier.helpers.parseSquareBracketedMarkup({source:wikiImage,matchStart:0});if(Object.hasOwn(markup,"error")||markup.pos<wikiImage.length)return wikiImage;var source=markup.source;if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(source=passage.text.trim())}return'url("'.concat(source.replace(/"/g,"%22"),'")')}))),this.style.styleSheet?this.style.styleSheet.cssText+=css:this.style.appendChild(document.createTextNode(css))}},{key:"clear",value:function(){this.style.styleSheet?this.style.styleSheet.cssText="":jQuery(this.style).empty()}}])}()),_imageMarkupRe,_hasImageMarkupRe,Diff=function(){var Op=enumFrom({Delete:0,SpliceArray:1,Copy:2,CopyDate:3});function isNumeric(O){var num;switch(_typeof(O)){case"number":num=O;break;case"string":num=Number(O);break;default:return!1}return!Number.isNaN(num)&&Number.isFinite(num)}return Object.preventExtensions(Object.create(null,{Op:{value:Op},diff:{value:function diff(a,b){for(var aOpKey,toString=Object.prototype.toString,aIsArray=a instanceof Array,delta=Object.create(null),keys=[].concat(_toConsumableArray(Object.keys(a)),_toConsumableArray(Object.keys(b))).sort().filter((function(val,i,arr){return 0===i||arr[i-1]!==val})),isAOpKey=function(key){return key===aOpKey},i=0,klen=keys.length;i<klen;++i){var key=keys[i],aVal=a[key],bVal=b[key];if(Object.hasOwn(a,key))if(Object.hasOwn(b,key)){if(aVal===bVal)continue;if(_typeof(aVal)===_typeof(bVal))if("function"==typeof aVal)aVal.toString()!==bVal.toString()&&(delta[key]=[Op.Copy,bVal]);else if("object"!==_typeof(aVal)||null===aVal)delta[key]=[Op.Copy,bVal];else{var aValType=toString.call(aVal);if(aValType===toString.call(bVal))if(aVal instanceof Date)aVal.getTime()!==bVal.getTime()&&(delta[key]=[Op.Copy,clone(bVal)]);else if(aVal instanceof Map)delta[key]=[Op.Copy,clone(bVal)];else if(aVal instanceof RegExp)aVal.toString()!==bVal.toString()&&(delta[key]=[Op.Copy,clone(bVal)]);else if(aVal instanceof Set)delta[key]=[Op.Copy,clone(bVal)];else if(aVal instanceof Array||"[object Object]"===aValType){var subDelta=diff(aVal,bVal);null!==subDelta&&(delta[key]=subDelta)}else delta[key]=[Op.Copy,clone(bVal)];else delta[key]=[Op.Copy,clone(bVal)]}else delta[key]=[Op.Copy,"object"!==_typeof(bVal)||null===bVal?bVal:clone(bVal)]}else if(aIsArray&&isNumeric(key)){var index=Number(key);if(!aOpKey){aOpKey="";do{aOpKey+="~"}while(keys.some(isAOpKey));delta[aOpKey]=[Op.SpliceArray,index,index]}index<delta[aOpKey][1]&&(delta[aOpKey][1]=index),index>delta[aOpKey][2]&&(delta[aOpKey][2]=index)}else delta[key]=Op.Delete;else delta[key]=[Op.Copy,"object"!==_typeof(bVal)||null===bVal?bVal:clone(bVal)]}return Object.keys(delta).length>0?delta:null}},patch:{value:function patch(orig,delta){for(var keys=delta?Object.keys(delta):[],patched=clone(orig),i=0,klen=keys.length;i<klen;++i){var key=keys[i],value=delta[key];if(value===Op.Delete)delete patched[key];else if(value instanceof Array)switch(value[0]){case Op.SpliceArray:patched.splice(value[1],value[2]-value[1]+1);break;case Op.Copy:patched[key]=clone(value[1]);break;case Op.CopyDate:patched[key]=new Date(value[1])}else patched[key]=patch(patched[key],value)}return patched}}}))}(),L10n=(replaceRE=/\{\w+\}/g,hasReplaceRE=new RegExp(replaceRE.source),Object.preventExtensions(Object.create(null,{init:{value:function(){}},get:{value:function(ids,overrides){if(!ids)return"";var id=(Array.isArray(ids)?ids:[ids]).find((function(id){return Object.hasOwn(l10nStrings,id)}));if(!id)return"";for(var value=l10nStrings[id],i=0;hasReplaceRE.test(value);){if(++i>50)throw new Error("L10n.get exceeded maximum replacement depth, probable infinite loop");replaceRE.lastIndex=0,value=value.replace(replaceRE,(function(replacement){var rid=replacement.slice(1,-1);return overrides&&Object.hasOwn(overrides,rid)?overrides[rid]:Object.hasOwn(l10nStrings,rid)?l10nStrings[rid]:void 0}))}return value}}}))),replaceRE,hasReplaceRE,l10nStrings={textAbort:"Abort",textAborting:"Aborting",textCancel:"Cancel",textClear:"Clear",textClose:"Close",textDelete:"Delete",textExport:"Export",textIdentity:"game",textImport:"Import",textLoad:"Load",textOff:"Off",textOk:"OK",textOn:"On",textSave:"Save",textTurn:"Turn",errorNonexistentPassage:'the passage "{passage}" does not exist',warningNoStorage:"All usable storage APIs are missing. Possible causes are a disabled third-party cookie setting, which also affects Web Storage, or a private browsing mode.",warningNoWebStorage:"The Web Storage API is missing, so this {textIdentity} is running in a degraded mode. You may be able to continue, however, some parts may not work properly.",warningDegraded:"Some capabilities required to support this {textIdentity} are missing, so it is running in a degraded mode. You may be able to continue, however, some parts may not work properly.",warningNoSaves:"Some capabilities required to support saves are missing, so saves have been disabled for this session.",saveErrorDisallowed:"Saving is currently disallowed.",saveErrorDecodeFail:"unable to decode save, likely due to corruption",saveErrorDiskLoadFail:"failed to load save file from disk",saveErrorIdMismatch:"save is from the wrong {textIdentity}",saveErrorInvalidData:"save is missing required data, likely due to corruption",saveErrorLoadTooEarly:"cannot load save this early",saveErrorNonexistent:"save does not exist",uiBarLabelToggle:"Toggle the UI bar",uiBarLabelBackward:"Go backward within the {textIdentity} history",uiBarLabelForward:"Go forward within the {textIdentity} history",uiBarLabelJumpto:"Jump to a specific point within the {textIdentity} history",alertTitle:"Alert",restartTitle:"Restart",restartMesgPrompt:"All unsaved progress will be lost. Are you sure that you want to restart?",continueTitle:"Continue",savesTitle:"Saves",savesHeaderBrowser:"In Browser",savesHeaderDisk:"On Disk",savesLabelBrowserClear:"Clear all browser saves",savesLabelBrowserExport:"Export browser saves to bundle",savesLabelBrowserImport:"Import browser saves from bundle",savesLabelDiskLoad:"Load from disk",savesLabelDiskSave:"Save to disk",savesTextBrowserAuto:"Auto",savesTextBrowserSlot:"Slot",savesTextNoDate:"unknown date",settingsTitle:"Settings",settingsTextReset:"Reset to Defaults",errorViewTitle:"Error",errorViewLabelToggle:"Toggle the error view",debugBarLabelToggle:"Toggle the debug bar",debugBarLabelViewsToggle:"Toggle the debug views",debugBarLabelWatchAdd:"Add a new watch",debugBarLabelWatchAll:"Watch all",debugBarLabelWatchClear:"Clear all watches",debugBarLabelWatchDelete:"Delete this watch",debugBarLabelWatchPlaceholder:"variable name",debugBarLabelPassagePlaceholder:"passage name",debugBarLabelPassagePlay:"Play passage",debugBarLabelWatchToggle:"Toggle the watch panel",debugBarMesgNoWatches:"No watches set",debugBarTextAdd:"Add",debugBarTextPassage:"Passage",debugBarTextViews:"Views",debugBarTextWatch:"Watch",macroBackText:"Back",macroReturnText:"Return",autoloadTitle:"Autoload",autoloadMesgPrompt:"An autosave exists. Load it now or go to the start?",autoloadTextCancel:"Go to start",autoloadTextOk:"Load autosave",jumptoTitle:"Jump To",jumptoMesgUnavailable:"No jump points currently available…",shareTitle:"Share"},Config=(_addVisitedLinkClass=!1,_cleanupWikifierOutput=!1,_debug=!1,_enableOptionalDebugging=!1,_loadDelay=0,_audioPauseOnFadeToZero=!0,_audioPreloadMetadata=!0,_historyControls=!0,_historyMaxStates=40,_macrosMaxLoopIterations=1e3,_macrosTypeSkipKey=" ",_macrosTypeVisitedPassages=!0,_passagesDisplayTitles=!1,_passagesNobr=!1,_savesMaxAuto=0,_savesMaxSlot=8,_uiStowBarInitially=800,_uiUpdateStoryElements=!0,errPassagesDescriptionsDeprecated="[DEPRECATED] Config.passages.descriptions has been deprecated, see Config.saves.descriptions instead",errSavesAutoloadDeprecated="[DEPRECATED] Config.saves.autoload has been deprecated, see the Save.browser.continue API instead",_baseSavesAutosaveDeprecated="[DEPRECATED] Config.saves.autosave has been deprecated",errSavesOnLoadDeprecated="[DEPRECATED] Config.saves.onLoad has been deprecated, see the Save.onLoad API instead",errSavesOnSaveDeprecated="[DEPRECATED] Config.saves.onSave has been deprecated, see the Save.onSave API instead",errSavesSlotsDeprecated="[DEPRECATED] Config.saves.slots has been deprecated, see Config.saves.maxSlotSaves instead",Object.freeze({get addVisitedLinkClass(){return _addVisitedLinkClass},set addVisitedLinkClass(value){_addVisitedLinkClass=Boolean(value)},get cleanupWikifierOutput(){return _cleanupWikifierOutput},set cleanupWikifierOutput(value){_cleanupWikifierOutput=Boolean(value)},get debug(){return _debug},set debug(value){_debug=Boolean(value)},get enableOptionalDebugging(){return _enableOptionalDebugging},set enableOptionalDebugging(value){_enableOptionalDebugging=Boolean(value)},get loadDelay(){return _loadDelay},set loadDelay(value){if(!Number.isSafeInteger(value)||value<0)throw new RangeError("Config.loadDelay must be a non-negative integer");_loadDelay=value},audio:Object.freeze({get pauseOnFadeToZero(){return _audioPauseOnFadeToZero},set pauseOnFadeToZero(value){_audioPauseOnFadeToZero=Boolean(value)},get preloadMetadata(){return _audioPreloadMetadata},set preloadMetadata(value){_audioPreloadMetadata=Boolean(value)}}),history:Object.freeze({get controls(){return _historyControls},set controls(value){var controls=Boolean(value);if(1===_historyMaxStates&&controls)throw new Error("Config.history.controls must be false when Config.history.maxStates is 1");_historyControls=controls},get maxStates(){return _historyMaxStates},set maxStates(value){if(!Number.isSafeInteger(value)||value<1)throw new RangeError("Config.history.maxStates must be a positive integer");_historyMaxStates=value,_historyControls&&1===value&&(_historyControls=!1)}}),macros:Object.freeze({get maxLoopIterations(){return _macrosMaxLoopIterations},set maxLoopIterations(value){if(!Number.isSafeInteger(value)||value<1)throw new RangeError("Config.macros.maxLoopIterations must be a positive integer");_macrosMaxLoopIterations=value},get typeSkipKey(){return _macrosTypeSkipKey},set typeSkipKey(value){_macrosTypeSkipKey=String(value)},get typeVisitedPassages(){return _macrosTypeVisitedPassages},set typeVisitedPassages(value){_macrosTypeVisitedPassages=Boolean(value)},get ifAssignmentError(){throw new Error("[DEPRECATED] Config.macros.ifAssignmentError has been deprecated, see Config.enableOptionalDebugging instead")},set ifAssignmentError(value){console.warn("[DEPRECATED] Config.macros.ifAssignmentError has been deprecated, see Config.enableOptionalDebugging instead"),Config.enableOptionalDebugging=value}}),navigation:Object.freeze({get override(){return _navigationOverride},set override(value){if(!(null==value||value instanceof Function))throw new TypeError("Config.navigation.override must be a function or null/undefined (received: ".concat(getTypeOf(value),")"));_navigationOverride=value}}),passages:Object.freeze({get displayTitles(){return _passagesDisplayTitles},set displayTitles(value){_passagesDisplayTitles=Boolean(value)},get nobr(){return _passagesNobr},set nobr(value){_passagesNobr=Boolean(value)},get onProcess(){return _passagesOnProcess},set onProcess(value){if(null!=value){var valueType=getTypeOf(value);if("function"!==valueType)throw new TypeError("Config.passages.onProcess must be a function or null/undefined (received: ".concat(valueType,")"))}_passagesOnProcess=value},get start(){return _passagesStart},set start(value){if(null!=value){var valueType=getTypeOf(value);if("string"!==valueType)throw new TypeError("Config.passages.start must be a string or null/undefined (received: ".concat(valueType,")"))}_passagesStart=value},get transitionOut(){return _passagesTransitionOut},set transitionOut(value){if(null!=value){var valueType=getTypeOf(value);if("string"!==valueType&&("number"!==valueType||!Number.isSafeInteger(value)||value<0))throw new TypeError("Config.passages.transitionOut must be a string, non-negative integer, or null/undefined (received: ".concat(valueType,")"))}_passagesTransitionOut=value},get descriptions(){throw new Error(errPassagesDescriptionsDeprecated)},set descriptions(value){switch(console.warn(errPassagesDescriptionsDeprecated),_typeof(value)){case"boolean":value&&!Config.saves.descriptions&&(Config.saves.descriptions=function(){return State.passage});break;case"function":Config.saves.descriptions||(Config.saves.descriptions=value);break;case"undefined":case"object":if(value&&!Config.saves.descriptions){var dict=value;Config.saves.descriptions=function(){return Object.hasOwn(dict,State.passage)&&dict[State.passage]}}break;default:throw new TypeError("Config.passages.descriptions must be a boolean, object, function, or null/undefined (received: ".concat(getTypeOf(value),")"))}}}),saves:Object.freeze({get descriptions(){return _savesDescriptions},set descriptions(value){if(!(null==value||value instanceof Function))throw new TypeError("Config.saves.descriptions must be a function or null/undefined (received: ".concat(getTypeOf(value),")"));_savesDescriptions=value},get id(){return _savesId},set id(value){if("string"!=typeof value||""===value)throw new TypeError("Config.saves.id must be a non-empty string (received: ".concat(getTypeOf(value),")"));_savesId=value},get isAllowed(){return _savesIsAllowed},set isAllowed(value){if(!(null==value||value instanceof Function))throw new TypeError("Config.saves.isAllowed must be a function or null/undefined (received: ".concat(getTypeOf(value),")"));_savesIsAllowed=value},get maxAutoSaves(){return _savesMaxAuto},set maxAutoSaves(value){if(!Number.isInteger(value))throw new TypeError("Config.saves.maxAutoSaves must be an integer");if(value<0||value>Save.MAX_INDEX+1)throw new RangeError("Config.saves.maxAutoSaves out of bounds (range: 0–".concat(Save.MAX_INDEX+1,"; received: ").concat(value,")"));_savesMaxAuto=value},get maxSlotSaves(){return _savesMaxSlot},set maxSlotSaves(value){if(!Number.isInteger(value))throw new TypeError("Config.saves.maxSlotSaves must be an integer");if(value<0||value>Save.MAX_INDEX+1)throw new RangeError("Config.saves.maxSlotSaves out of bounds (range: 0–".concat(Save.MAX_INDEX+1,"; received: ").concat(value,")"));_savesMaxSlot=value},get metadata(){return _savesMetadata},set metadata(value){if(!(null==value||value instanceof Function))throw new TypeError("Config.saves.metadata must be a function or null/undefined (received: ".concat(getTypeOf(value),")"));_savesMetadata=value},get version(){return _savesVersion},set version(value){_savesVersion=value},get _internal_autoload_(){return _savesAutoload},get autoload(){return console.warn(errSavesAutoloadDeprecated),_savesAutoload},set autoload(value){if(console.warn(errSavesAutoloadDeprecated),null!=value){var valueType=getTypeOf(value);if("boolean"!==valueType&&("string"!==valueType||"prompt"!==value)&&"function"!==valueType)throw new TypeError("Config.saves.autoload must be a boolean, string ('prompt'), function, or null/undefined (received: ".concat(valueType,")"))}_savesAutoload=value},get autosave(){throw new Error("".concat(_baseSavesAutosaveDeprecated,", see Config.saves.maxAutoSaves and Config.saves.isAllowed instead"))},set autosave(value){switch(_typeof(value)){case"boolean":console.warn("".concat(_baseSavesAutosaveDeprecated,", for boolean usage see Config.saves.maxAutoSaves instead"));break;case"function":if(console.warn("".concat(_baseSavesAutosaveDeprecated,", for function usage see Config.saves.isAllowed instead")),!Config.saves.isAllowed){var callback=value;Config.saves.isAllowed=function(saveType){return saveType!==Save.Type.Auto||callback(saveType)}}break;default:if(console.warn("".concat(_baseSavesAutosaveDeprecated,", for tag usage see Config.saves.isAllowed instead")),!(value instanceof Array)||0===value.length||value.some((function(tag){return"string"!=typeof tag}))){var valueType=getTypeOf(value);throw new TypeError("Config.saves.autosave must be a boolean, Array<string>, function, or null/undefined (received: ".concat(valueType).concat("Array"===valueType?"<any>":"",")"))}if(!Config.saves.isAllowed){var userTags=value;Config.saves.isAllowed=function(saveType){return saveType!==Save.Type.Auto||userTags.includesAny(Story.get(State.passage).tags)}}}0===Config.saves.maxAutoSaves&&(Config.saves.maxAutoSaves=1)},get onLoad(){throw new Error(errSavesOnLoadDeprecated)},set onLoad(value){console.warn(errSavesOnLoadDeprecated),Save.onLoad.add(value)},get onSave(){throw new Error(errSavesOnSaveDeprecated)},set onSave(value){console.warn(errSavesOnSaveDeprecated),Save.onSave.add(value)},get slots(){throw new Error(errSavesSlotsDeprecated)},set slots(value){console.warn(errSavesSlotsDeprecated),Config.saves.maxSlotSaves=value},get tryDiskOnMobile(){return console.warn("[DEPRECATED] Config.saves.tryDiskOnMobile has been deprecated"),!0},set tryDiskOnMobile(value){console.warn("[DEPRECATED] Config.saves.tryDiskOnMobile has been deprecated")}}),ui:Object.freeze({get stowBarInitially(){return _uiStowBarInitially},set stowBarInitially(value){var valueType=getTypeOf(value);if("boolean"!==valueType&&("number"!==valueType||!Number.isSafeInteger(value)||value<0))throw new TypeError("Config.ui.stowBarInitially must be a boolean or non-negative integer (received: ".concat(valueType,")"));_uiStowBarInitially=value},get updateStoryElements(){return _uiUpdateStoryElements},set updateStoryElements(value){_uiUpdateStoryElements=Boolean(value)}})})),_navigationOverride,_passagesStart,_passagesOnProcess,_passagesTransitionOut,_savesDescriptions,_savesId,_savesIsAllowed,_savesMetadata,_savesVersion,_savesAutoload,_addVisitedLinkClass,_cleanupWikifierOutput,_debug,_enableOptionalDebugging,_loadDelay,_audioPauseOnFadeToZero,_audioPreloadMetadata,_historyControls,_historyMaxStates,_macrosMaxLoopIterations,_macrosTypeSkipKey,_macrosTypeVisitedPassages,_passagesDisplayTitles,_passagesNobr,_savesMaxAuto,_savesMaxSlot,_uiStowBarInitially,_uiUpdateStoryElements,errPassagesDescriptionsDeprecated,errSavesAutoloadDeprecated,_baseSavesAutosaveDeprecated,errSavesOnLoadDeprecated,errSavesOnSaveDeprecated,errSavesSlotsDeprecated,SimpleAudio=function(){var _hasPromise,_specialIds=Object.freeze([":not",":all",":looped",":muted",":paused",":playing",":stopped"]),_formatSpecRe=/^([\w-]+)\s*\|\s*(\S.*)$/,_badIdRe=/[:\s]/,_tracks=new Map,_groups=new Map,_lists=new Map,_subscribers=new Map,_masterRate=1,_masterVolume=1,_masterMute=!1,_masterMuteOnHidden=!1,_playReturnsPromise=(_hasPromise=null,function(){if(null!==_hasPromise)return _hasPromise;if(_hasPromise=!1,Has.audio)try{var audio=document.createElement("audio");audio.muted=!0;var value=audio.play();value.catch((function(){})),_hasPromise=value instanceof Promise}catch(ex){}return _hasPromise}),AudioTrack=function(){function AudioTrack(obj){if(_classCallCheck(this,AudioTrack),obj instanceof Array)this._create(obj);else{if(!(obj instanceof AudioTrack))throw new Error("sources parameter must be either an array, of URIs or source objects, or an AudioTrack instance");this._copy(obj)}}return _createClass(AudioTrack,[{key:"_create",value:function(sourceList){var dataUriRe=/^data:\s*audio\/(?:x-)?([^;,]+)\s*[;,]/i,extRe=/\.([^./\\]+)$/,formats=AudioTrack.formats,usedSources=[],audio=document.createElement("audio");audio.preload="none",sourceList.forEach((function(src){var srcUri=null;switch(_typeof(src)){case"string":var match;if("data:"===src.slice(0,5)){if(null===(match=dataUriRe.exec(src)))throw new Error("source data URI missing media type")}else if(null===(match=extRe.exec(parseURL(src).pathname)))throw new Error("source URL missing file extension");formats[match[1]]&&(srcUri=src);break;case"object":if(null===src)throw new Error("source object cannot be null");if(!Object.hasOwn(src,"src"))throw new Error('source object missing required "src" property');if(!Object.hasOwn(src,"format"))throw new Error('source object missing required "format" property');formats[src.format]&&(srcUri=src.src);break;default:throw new Error("invalid source value (type: ".concat(_typeof(src),")"))}if(null!==srcUri){var source=document.createElement("source");source.src=srcUri,audio.appendChild(source),usedSources.push(srcUri)}})),audio.hasChildNodes()&&Config.audio.preloadMetadata&&(audio.preload="metadata"),this._finalize(audio,usedSources,clone(sourceList))}},{key:"_copy",value:function(obj){this._finalize(obj.audio.cloneNode(!0),clone(obj.sources),clone(obj.originals))}},{key:"_finalize",value:function(audio,sources,originals){var _this=this;Object.defineProperties(this,{audio:{configurable:!0,value:audio},sources:{value:Object.freeze(sources)},originals:{value:Object.freeze(originals)},_error:{writable:!0,value:!1},_faderId:{writable:!0,value:null},_mute:{writable:!0,value:!1},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1}}),jQuery(this.audio).on("loadstart.AudioTrack",(function(){return _this._error=!1})).on("error.AudioTrack",(function(){return _this._error=!0})).find("source:last-of-type").on("error.AudioTrack",(function(){return _this._trigger("error")})),function(id,callback){if("function"!=typeof callback)throw new Error("callback parameter must be a function");_subscribers.set(id,callback)}(this,(function(mesg){if(_this.audio)switch(mesg){case"loadwithscreen":if(_this.hasSource()){var lockId=LoadScreen.lock();_this.off(".AudioTrack_loadwithscreen").one("canplaythrough.AudioTrack_loadwithscreen error.AudioTrack_loadwithscreen",(function(){jQuery(this).off(".AudioTrack_loadwithscreen"),LoadScreen.unlock(lockId)})).load()}break;case"load":_this.load();break;case"mute":_this._updateAudioMute();break;case"rate":_this._updateAudioRate();break;case"stop":_this.stop();break;case"volume":_this._updateAudioVolume();break;case"unload":_this.unload()}else unsubscribe(_this)})),this._updateAudioMute(),this._updateAudioRate(),this._updateAudioVolume()}},{key:"_trigger",value:function(eventName){triggerEvent(eventName,this.audio,{bubbles:!1})}},{key:"_destroy",value:function(){unsubscribe(this),this.audio&&(jQuery(this.audio).off(),this.unload(),this._error=!0,delete this.audio)}},{key:"clone",value:function(){return new AudioTrack(this)}},{key:"load",value:function(){var _this2=this;if(this.fadeStop(),this.audio.pause(),!this.audio.hasChildNodes()){if(0===this.sources.length)return;this.sources.forEach((function(srcUri){var source=document.createElement("source");source.src=srcUri,_this2.audio.appendChild(source)}))}"auto"!==this.audio.preload&&(this.audio.preload="auto"),this.isLoading()||this.audio.load()}},{key:"unload",value:function(){this.fadeStop(),this.stop();var audio=this.audio;for(audio.preload="none";audio.hasChildNodes();)audio.removeChild(audio.firstChild);audio.load()}},{key:"play",value:function(){var _this3=this;if(!this.hasSource())return Promise.reject(new Error("none of the candidate sources were acceptable"));if(this.isUnloaded())return Promise.reject(new Error("no sources are loaded"));if(this.isFailed())return Promise.reject(new Error("failed to load any of the sources"));"auto"!==this.audio.preload&&(this.audio.preload="auto");var namespace=".AudioTrack_play";return _playReturnsPromise()?this.audio.play():new Promise((function(resolve,reject){_this3.isPlaying()?resolve():(jQuery(_this3.audio).off(namespace).one("error".concat(namespace," playing").concat(namespace," timeupdate").concat(namespace),(function(ev){jQuery(_this3.audio).off(namespace),"error"===ev.type?reject(new Error("unknown audio play error")):resolve()})),_this3.audio.play())}))}},{key:"playWhenAllowed",value:function(){var _this4=this;return this.play().catch((function(ex){if("NotAllowedError"!==ex.name)throw ex;onUserActivation(".AudioTrack_playWhenAllowed",(function(){return _this4.audio.play()}))}))}},{key:"pause",value:function(){this.audio.pause()}},{key:"stop",value:function(){this.audio.pause(),this.time(0),this._trigger(":stopped")}},{key:"fade",value:function(duration,toVol,fromVol){var _this5=this;if("number"!=typeof duration)throw new TypeError("duration parameter must be a number");if("number"!=typeof toVol)throw new TypeError("toVolume parameter must be a number");if(null!=fromVol&&"number"!=typeof fromVol)throw new TypeError("fromVolume parameter must be a number");if(!this.hasSource())return Promise.reject(new Error("none of the candidate sources were acceptable"));if(this.isUnloaded())return Promise.reject(new Error("no sources are loaded"));if(this.isFailed())return Promise.reject(new Error("failed to load any of the sources"));this.fadeStop();var from=Math.clamp(null==fromVol?this.volume():fromVol,0,1),to=Math.clamp(toVol,0,1);return from!==to?(this.volume(from),jQuery(this.audio).off("timeupdate.AudioTrack_fade").one("timeupdate.AudioTrack_fade",(function(){var min,max;from<to?(min=from,max=to):(min=to,max=from);var time=Math.max(duration,1),delta=(to-from)/(time/.025);_this5._trigger(":fading"),_this5._faderId=setInterval((function(){_this5.isPlaying()?(_this5.volume(Math.clamp(_this5.volume()+delta,min,max)),Config.audio.pauseOnFadeToZero&&0===_this5.volume()&&_this5.pause(),_this5.volume()===to&&(_this5.fadeStop(),_this5._trigger(":faded"))):_this5.fadeStop()}),25)})),this.play()):void 0}},{key:"fadeIn",value:function(duration,fromVol){return this.fade(duration,1,fromVol)}},{key:"fadeOut",value:function(duration,fromVol){return this.fade(duration,0,fromVol)}},{key:"fadeStop",value:function(){null!==this._faderId&&(clearInterval(this._faderId),this._faderId=null)}},{key:"loop",value:function(_loop2){return null==_loop2?this.audio.loop:(this.audio.loop=!!_loop2,this)}},{key:"mute",value:function(_mute){return null==_mute?this._mute:(this._mute=!!_mute,this._updateAudioMute(),this)}},{key:"_updateAudioMute",value:function(){this.audio.muted=this._mute||_masterMute}},{key:"rate",value:function(_rate){if(null==_rate)return this._rate;if("number"!=typeof _rate)throw new TypeError("rate parameter must be a number");return this._rate=Math.clamp(_rate,.2,5),this._updateAudioRate(),this}},{key:"_updateAudioRate",value:function(){this.audio.playbackRate=Math.clamp(this._rate*_masterRate,.2,5)}},{key:"time",value:function(_time){var _this6=this;if(null==_time)return this.audio.currentTime;if("number"!=typeof _time)throw new TypeError("time parameter must be a number");return this.hasMetadata()?this.audio.currentTime=_time:jQuery(this.audio).off("loadedmetadata.AudioTrack_time").one("loadedmetadata.AudioTrack_time",(function(){return _this6.audio.currentTime=_time})),this}},{key:"volume",value:function(_volume){if(null==_volume)return this._volume;if("number"!=typeof _volume)throw new TypeError("volume parameter must be a number");return this._volume=Math.clamp(_volume,0,1),this._updateAudioVolume(),this}},{key:"_updateAudioVolume",value:function(){this.audio.volume=Math.clamp(this._volume*_masterVolume,0,1)}},{key:"duration",value:function(){return this.audio.duration}},{key:"remaining",value:function(){return this.audio.duration-this.audio.currentTime}},{key:"isFailed",value:function(){return this._error}},{key:"isLoading",value:function(){return this.audio.networkState===HTMLMediaElement.NETWORK_LOADING}},{key:"isUnloaded",value:function(){return!this.audio.hasChildNodes()}},{key:"isUnavailable",value:function(){return!this.hasSource()||this.isUnloaded()||this.isFailed()}},{key:"isPlaying",value:function(){return!this.audio.paused&&this.hasSomeData()}},{key:"isPaused",value:function(){return this.audio.paused&&(this.audio.duration===1/0||this.audio.currentTime>0)&&!this.audio.ended}},{key:"isStopped",value:function(){return this.audio.paused&&0===this.audio.currentTime}},{key:"isEnded",value:function(){return this.audio.ended}},{key:"isFading",value:function(){return null!==this._faderId}},{key:"isSeeking",value:function(){return this.audio.seeking}},{key:"hasSource",value:function(){return this.sources.length>0}},{key:"hasNoData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_NOTHING}},{key:"hasMetadata",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_METADATA}},{key:"hasSomeData",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA}},{key:"hasData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_ENOUGH_DATA}},{key:"on",value:function(){for(var _len5=arguments.length,args=new Array(_len5),_key5=0;_key5<_len5;_key5++)args[_key5]=arguments[_key5];return jQuery.fn.on.apply(jQuery(this.audio),args),this}},{key:"one",value:function(){for(var _len6=arguments.length,args=new Array(_len6),_key6=0;_key6<_len6;_key6++)args[_key6]=arguments[_key6];return jQuery.fn.one.apply(jQuery(this.audio),args),this}},{key:"off",value:function(){for(var _len7=arguments.length,args=new Array(_len7),_key7=0;_key7<_len7;_key7++)args[_key7]=arguments[_key7];return jQuery.fn.off.apply(jQuery(this.audio),args),this}}])}();Object.defineProperties(AudioTrack,{formats:{value:function(){var audio=document.createElement("audio"),types=new Map;function canPlay(mimeType){return types.has(mimeType)||types.set(mimeType,""!==audio.canPlayType(mimeType).replace(/^no$/i,"")),types.get(mimeType)}return Object.assign(Object.create(null),{aac:canPlay("audio/aac"),caf:canPlay("audio/x-caf")||canPlay("audio/caf"),flac:canPlay("audio/x-flac")||canPlay("audio/flac"),mp3:canPlay('audio/mpeg; codecs="mp3"')||canPlay("audio/mpeg")||canPlay("audio/mp3")||canPlay("audio/mpa"),mpeg:canPlay("audio/mpeg"),m4a:canPlay("audio/x-m4a")||canPlay("audio/m4a")||canPlay("audio/aac"),mp4:canPlay("audio/x-mp4")||canPlay("audio/mp4")||canPlay("audio/aac"),ogg:canPlay("audio/ogg"),oga:canPlay("audio/ogg"),opus:canPlay('audio/ogg; codecs="opus"')||canPlay("audio/opus"),wav:canPlay('audio/wave; codecs="1"')||canPlay('audio/wav; codecs="1"')||canPlay("audio/wave")||canPlay("audio/wav"),wave:canPlay('audio/wave; codecs="1"')||canPlay('audio/wav; codecs="1"')||canPlay("audio/wave")||canPlay("audio/wav"),weba:canPlay("audio/webm"),webm:canPlay("audio/webm")})}()}});var AudioList=function(){return _createClass((function AudioList(obj){if(_classCallCheck(this,AudioList),obj instanceof Array)this._create(obj);else{if(!(obj instanceof AudioList))throw new Error("tracks parameter must be either an array, of track objects, or an AudioTrack instance");this._copy(obj)}}),[{key:"_create",value:function(trackList){var _this7=this;this._finalize(trackList.map((function(trackObj){if("object"!==_typeof(trackObj))throw new Error("tracks parameter array members must be objects");var own,rate,track,volume;if(trackObj instanceof AudioTrack)own=!0,rate=trackObj.rate(),track=trackObj.clone(),volume=trackObj.volume();else{if(!Object.hasOwn(trackObj,"track"))throw new Error('track object missing required "track" property');if(!(trackObj.track instanceof AudioTrack))throw new Error('track object\'s "track" property must be an AudioTrack object');own=Object.hasOwn(trackObj,"own")&&trackObj.own,rate=Object.hasOwn(trackObj,"rate")?trackObj.rate:trackObj.track.rate(),track=trackObj.track,volume=Object.hasOwn(trackObj,"volume")?trackObj.volume:trackObj.track.volume()}return track.stop(),track.loop(!1),track.mute(!1),track.rate(rate),track.volume(volume),track.on("ended.AudioList",(function(){return _this7._onEnd()})),{own:own,track:track,volume:volume,rate:rate}})))}},{key:"_copy",value:function(obj){this._finalize(clone(obj.tracks))}},{key:"_finalize",value:function(tracks){Object.defineProperties(this,{tracks:{configurable:!0,value:Object.freeze(tracks)},queue:{configurable:!0,value:[]},current:{writable:!0,value:null},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1},_mute:{writable:!0,value:!1},_loop:{writable:!0,value:!1},_shuffle:{writable:!0,value:!1}})}},{key:"_destroy",value:function(){this.stop(),this.tracks.filter((function(trackObj){return trackObj.own})).forEach((function(trackObj){return trackObj.track._destroy()})),delete this.tracks,delete this.queue}},{key:"load",value:function(){this.tracks.forEach((function(trackObj){return trackObj.track.load()}))}},{key:"unload",value:function(){this.stop(),this.tracks.forEach((function(trackObj){return trackObj.track.unload()}))}},{key:"play",value:function(){return null!==this.current&&!this.current.track.isUnavailable()&&!this.current.track.isEnded()||(0===this.queue.length&&this._fillQueue(),this._next())?this.current.track.play():Promise.reject(new Error("no tracks were available"))}},{key:"playWhenAllowed",value:function(){var _this8=this;return this.play().catch((function(ex){if("NotAllowedError"!==ex.name)throw ex;onUserActivation(".AudioList_playWhenAllowed",(function(){return _this8.play()}))}))}},{key:"pause",value:function(){null!==this.current&&this.current.track.pause()}},{key:"stop",value:function(){null!==this.current&&(this.current.track.stop(),this.current=null),this._drainQueue()}},{key:"skip",value:function(){this._next()?this.current.track.play():this._loop&&this.play()}},{key:"fade",value:function(duration,toVol,fromVol){if("number"!=typeof duration)throw new TypeError("duration parameter must be a number");if("number"!=typeof toVol)throw new TypeError("toVolume parameter must be a number");if(null!=fromVol&&"number"!=typeof fromVol)throw new TypeError("fromVolume parameter must be a number");if(0===this.queue.length&&this._fillQueue(),null!==this.current&&!this.current.track.isUnavailable()&&!this.current.track.isEnded()||this._next()){var adjFromVol,adjToVol=Math.clamp(toVol,0,1)*this.current.volume;return null!=fromVol&&(adjFromVol=Math.clamp(fromVol,0,1)*this.current.volume),this._volume=toVol,this.current.track.fade(duration,adjToVol,adjFromVol)}}},{key:"fadeIn",value:function(duration,fromVol){return this.fade(duration,1,fromVol)}},{key:"fadeOut",value:function(duration,fromVol){return this.fade(duration,0,fromVol)}},{key:"fadeStop",value:function(){null!==this.current&&this.current.track.fadeStop()}},{key:"loop",value:function(_loop3){return null==_loop3?this._loop:(this._loop=!!_loop3,this)}},{key:"mute",value:function(_mute2){return null==_mute2?this._mute:(this._mute=!!_mute2,null!==this.current&&this.current.track.mute(this._mute),this)}},{key:"rate",value:function(_rate2){if(null==_rate2)return this._rate;if("number"!=typeof _rate2)throw new TypeError("rate parameter must be a number");return this._rate=Math.clamp(_rate2,.2,5),null!==this.current&&this.current.track.rate(this._rate*this.current.rate),this}},{key:"shuffle",value:function(_shuffle){var _this9=this;if(null==_shuffle)return this._shuffle;if(this._shuffle=!!_shuffle,this.queue.length>0&&(this._fillQueue(),!this._shuffle&&null!==this.current&&this.queue.length>1)){var _this$queue,firstIndex=this.queue.findIndex((function(trackObj){return trackObj===_this9.current}));if(-1!==firstIndex)(_this$queue=this.queue).push.apply(_this$queue,_toConsumableArray(this.queue.splice(0,firstIndex+1)))}return this}},{key:"volume",value:function(_volume2){if(null==_volume2)return this._volume;if("number"!=typeof _volume2)throw new TypeError("volume parameter must be a number");return this._volume=Math.clamp(_volume2,0,1),null!==this.current&&this.current.track.volume(this._volume*this.current.volume),this}},{key:"duration",value:function(){if(arguments.length>0)throw new Error("duration takes no parameters");return this.tracks.map((function(trackObj){return trackObj.track.duration()})).reduce((function(prev,cur){return prev+cur}),0)}},{key:"remaining",value:function(){if(arguments.length>0)throw new Error("remaining takes no parameters");var remainingTime=this.queue.map((function(trackObj){return trackObj.track.duration()})).reduce((function(prev,cur){return prev+cur}),0);return null!==this.current&&(remainingTime+=this.current.track.remaining()),remainingTime}},{key:"time",value:function(){if(arguments.length>0)throw new Error("time takes no parameters");return this.duration()-this.remaining()}},{key:"isPlaying",value:function(){return null!==this.current&&this.current.track.isPlaying()}},{key:"isPaused",value:function(){return null===this.current||this.current.track.isPaused()}},{key:"isStopped",value:function(){return 0===this.queue.length&&null===this.current}},{key:"isEnded",value:function(){return 0===this.queue.length&&(null===this.current||this.current.track.isEnded())}},{key:"isFading",value:function(){return null!==this.current&&this.current.track.isFading()}},{key:"_next",value:function(){var nextTrack;for(null!==this.current&&(this.current.track.stop(),this.current=null);nextTrack=this.queue.shift();)if(!nextTrack.track.isUnavailable()){this.current=nextTrack;break}return null!==this.current&&(this.current.track.mute(this._mute),this.current.track.rate(this._rate*this.current.rate),this.current.track.volume(this._volume*this.current.volume),this.current.track.loop(!1),!0)}},{key:"_onEnd",value:function(){if(0===this.queue.length){if(!this._loop)return;this._fillQueue()}this._next()&&this.current.track.play()}},{key:"_drainQueue",value:function(){this.queue.splice(0)}},{key:"_fillQueue",value:function(){var _this$queue2;this._drainQueue(),(_this$queue2=this.queue).push.apply(_this$queue2,_toConsumableArray(this.tracks.filter((function(trackObj){return!trackObj.track.isUnavailable()})))),0!==this.queue.length&&this._shuffle&&(this.queue.shuffle(),this.queue.length>1&&this.queue[0]===this.current&&this.queue.push(this.queue.shift()))}}])}(),AudioRunner=function(){function AudioRunner(list){if(_classCallCheck(this,AudioRunner),!(list instanceof Set||list instanceof AudioRunner))throw new TypeError("list parameter must be a Set or a AudioRunner instance");Object.defineProperties(this,{trackIds:{value:new Set(list instanceof AudioRunner?list.trackIds:list)}})}return _createClass(AudioRunner,[{key:"load",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.load)}},{key:"unload",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.unload)}},{key:"play",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.play)}},{key:"playWhenAllowed",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.playWhenAllowed)}},{key:"pause",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.pause)}},{key:"stop",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.stop)}},{key:"fade",value:function(duration,toVol,fromVol){if(null==duration||null==toVol)throw new Error("fade requires parameters");AudioRunner._run(this.trackIds,AudioTrack.prototype.fade,duration,toVol,fromVol)}},{key:"fadeIn",value:function(duration,fromVol){if(null==duration)throw new Error("fadeIn requires a parameter");AudioRunner._run(this.trackIds,AudioTrack.prototype.fadeIn,duration,fromVol)}},{key:"fadeOut",value:function(duration,fromVol){if(null==duration)throw new Error("fadeOut requires a parameter");AudioRunner._run(this.trackIds,AudioTrack.prototype.fadeOut,duration,fromVol)}},{key:"fadeStop",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.fadeStop)}},{key:"loop",value:function(_loop4){if(null==_loop4)throw new Error("loop requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.loop,_loop4),this}},{key:"mute",value:function(_mute3){if(null==_mute3)throw new Error("mute requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.mute,_mute3),this}},{key:"rate",value:function(_rate3){if(null==_rate3)throw new Error("rate requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.rate,_rate3),this}},{key:"time",value:function(_time2){if(null==_time2)throw new Error("time requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.time,_time2),this}},{key:"volume",value:function(_volume3){if(null==_volume3)throw new Error("volume requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.volume,_volume3),this}},{key:"on",value:function(){for(var _len8=arguments.length,args=new Array(_len8),_key8=0;_key8<_len8;_key8++)args[_key8]=arguments[_key8];return AudioRunner._run.apply(AudioRunner,[this.trackIds,AudioTrack.prototype.on].concat(args)),this}},{key:"one",value:function(){for(var _len9=arguments.length,args=new Array(_len9),_key9=0;_key9<_len9;_key9++)args[_key9]=arguments[_key9];return AudioRunner._run.apply(AudioRunner,[this.trackIds,AudioTrack.prototype.one].concat(args)),this}},{key:"off",value:function(){for(var _len10=arguments.length,args=new Array(_len10),_key10=0;_key10<_len10;_key10++)args[_key10]=arguments[_key10];return AudioRunner._run.apply(AudioRunner,[this.trackIds,AudioTrack.prototype.off].concat(args)),this}}],[{key:"_run",value:function(ids,fn){for(var _len11=arguments.length,args=new Array(_len11>2?_len11-2:0),_key11=2;_key11<_len11;_key11++)args[_key11-2]=arguments[_key11];ids.forEach((function(id){var track=_tracks.get(id);track&&fn.apply(track,args)}))}}])}();var _runnerParseSelector=function(){var notWsRe=/\S/g,parenRe=/[()]/g;function processNegation(str,startPos){var match;if(notWsRe.lastIndex=startPos,null===(match=notWsRe.exec(str))||"("!==match[0])throw new Error('invalid ":not()" syntax: missing parenthesis');parenRe.lastIndex=notWsRe.lastIndex;for(var start=notWsRe.lastIndex,result={str:"",nextMatch:-1},depth=1;null!==(match=parenRe.exec(str));)if("("===match[0]?++depth:--depth,depth<1){result.nextMatch=parenRe.lastIndex,result.str=str.slice(start,result.nextMatch-1);break}return result}return function parseSelector(idArg){for(var match,ids=[],idRe=/:?[^\s:()]+/g;null!==(match=idRe.exec(idArg));){var id=match[0];if(":not"===id){if(0===ids.length)throw new Error('invalid negation: no group ID preceded ":not()"');var parent=ids[ids.length-1];if(!parent.id.startsWith(":"))throw new Error('invalid negation of track "'.concat(parent.id,'": only groups may be negated with ":not()"'));var negation=processNegation(idArg,idRe.lastIndex);if(-1===negation.nextMatch)throw new Error('unknown error parsing ":not()"');idRe.lastIndex=negation.nextMatch,parent.not=parseSelector(negation.str)}else ids.push({id:id})}return ids}}();function masterMute(mute){if(null==mute)return _masterMute;publish("mute",_masterMute=!!mute)}function unsubscribe(id){_subscribers.delete(id)}function publish(mesg,data){_subscribers.forEach((function(fn){return fn(mesg,data)}))}function _newTrack(sources){return new AudioTrack(sources.map((function(source){if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);if(passage.tags.includes("Twine.audio"))return passage.text.trim()}var match=_formatSpecRe.exec(source);return null===match?source:{format:match[1],src:match[2]}})))}return Object.preventExtensions(Object.create(null,{tracks:{value:Object.preventExtensions(Object.create(null,{add:{value:function(){if(arguments.length<2){var errors=[];throw arguments.length<1&&errors.push("track ID"),arguments.length<2&&errors.push("sources"),new Error("no ".concat(errors.join(" or ")," specified"))}var id=String(arguments[0]).trim(),what='track ID "'.concat(id,'"');if(_badIdRe.test(id))throw new Error("invalid ".concat(what,": track IDs must not contain colons or whitespace"));var track,sources=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{track=_newTrack(sources)}catch(ex){throw new Error("".concat(what,": error during track initialization: ").concat(ex.message))}if(Config.debug&&!track.hasSource())throw new Error("".concat(what,": no supported audio sources found"));_tracks.has(id)&&_tracks.get(id)._destroy(),_tracks.set(id,track)}},delete:{value:function(id){return _tracks.has(id)&&_tracks.get(id)._destroy(),_tracks.delete(id)}},clear:{value:function(){_tracks.forEach((function(track){return track._destroy()})),_tracks.clear()}},has:{value:function(id){return _tracks.has(id)}},get:{value:function(id){return _tracks.get(id)||null}}}))},groups:{value:Object.preventExtensions(Object.create(null,{add:{value:function(){if(arguments.length<2){var errors=[];throw arguments.length<1&&errors.push("group ID"),arguments.length<2&&errors.push("track IDs"),new Error("no ".concat(errors.join(" or ")," specified"))}var id=String(arguments[0]).trim(),what='group ID "'.concat(id,'"');if(!id.startsWith(":")||_badIdRe.test(id.slice(1)))throw new Error("invalid ".concat(what,": group IDs must start with a colon and must not contain colons or whitespace"));if(_specialIds.includes(id))throw new Error("cannot clobber special ".concat(what));var group,trackIds=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{group=new Set(trackIds.map((function(trackId){if(!_tracks.has(trackId))throw new Error('track "'.concat(trackId,'" does not exist'));return trackId})))}catch(ex){throw new Error("".concat(what,": error during group initialization: ").concat(ex.message))}_groups.set(id,Object.freeze(Array.from(group)))}},delete:{value:function(id){return _groups.delete(id)}},clear:{value:function(){_groups.clear()}},has:{value:function(id){return _groups.has(id)}},get:{value:function(id){return _groups.get(id)||null}}}))},lists:{value:Object.preventExtensions(Object.create(null,{add:{value:function(){if(arguments.length<2){var errors=[];throw arguments.length<1&&errors.push("list ID"),arguments.length<2&&errors.push("track IDs"),new Error("no ".concat(errors.join(" or ")," specified"))}var id=String(arguments[0]).trim(),what='list ID "'.concat(id,'"');if(_badIdRe.test(id))return this.error("invalid ".concat(what,": list IDs must not contain colons or whitespace"));var list,descriptors=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{list=new AudioList(descriptors.map((function(desc){if(null===desc)throw new Error("track descriptor must be a string or object (type: null)");switch(_typeof(desc)){case"string":desc={id:desc};break;case"object":if(!Object.hasOwn(desc,"id")&&!Object.hasOwn(desc,"sources"))throw new Error('track descriptor must contain one of either an "id" or a "sources" property');if(Object.hasOwn(desc,"id")&&Object.hasOwn(desc,"sources"))throw new Error('track descriptor must contain either an "id" or a "sources" property, not both');break;default:throw new Error("track descriptor must be a string or object (type: ".concat(_typeof(desc),")"))}var own,track,volume;if(Object.hasOwn(desc,"id")){if("string"!=typeof desc.id)throw new Error('"id" property must be a string');if(!_tracks.has(desc.id))throw new Error('track "'.concat(desc.id,'" does not exist'));track=_tracks.get(desc.id)}else if(Object.hasOwn(desc,"sources")){if(!Array.isArray(desc.sources)||0===desc.sources.length)throw new Error('"sources" property must be a non-empty array');if(Object.hasOwn(desc,"own"))throw new Error('"own" property is not allowed with the "sources" property');try{track=_newTrack(desc.sources),own=!0}catch(ex){throw new Error("error during track initialization: ".concat(ex.message))}if(Config.debug&&!track.hasSource())throw new Error("no supported audio sources found")}if(Object.hasOwn(desc,"own")){if("boolean"!=typeof desc.own)throw new Error('"own" property must be a boolean');(own=desc.own)&&(track=track.clone())}if(Object.hasOwn(desc,"volume")){if("number"!=typeof desc.volume||Number.isNaN(desc.volume)||!Number.isFinite(desc.volume)||desc.volume<0)throw new Error('"volume" property must be a non-negative finite number');volume=desc.volume}return{own:null!=own&&own,track:track,volume:null!=volume?volume:track.volume()}})))}catch(ex){throw new Error("".concat(what,": error during playlist initialization: ").concat(ex.message))}_lists.has(id)&&_lists.get(id)._destroy(),_lists.set(id,list)}},delete:{value:function(id){return _lists.has(id)&&_lists.get(id)._destroy(),_lists.delete(id)}},clear:{value:function(){_lists.forEach((function(list){return list._destroy()})),_lists.clear()}},has:{value:function(id){return _lists.has(id)}},get:{value:function(id){return _lists.get(id)||null}}}))},select:{value:function(){if(0===arguments.length)throw new Error("no track selector specified");var selector=String(arguments[0]).trim(),trackIds=new Set;try{var renderIds=function renderIds(idObj){var ids,id=idObj.id;switch(id){case":all":ids=allIds;break;case":looped":ids=allIds.filter((function(id){return _tracks.get(id).loop()}));break;case":muted":ids=allIds.filter((function(id){return _tracks.get(id).mute()}));break;case":paused":ids=allIds.filter((function(id){return _tracks.get(id).isPaused()}));break;case":playing":ids=allIds.filter((function(id){return _tracks.get(id).isPlaying()}));break;case":stopped":ids=allIds.filter((function(id){return _tracks.get(id).isStopped()}));break;default:if(id.startsWith(":")){var group=_groups.get(id);if(!group)throw new Error('group "'.concat(id,'" does not exist'));ids=group}else ids=[id]}if(Object.hasOwn(idObj,"not")){var negated=idObj.not.map((function(idObj){return renderIds(idObj)})).flat(1/0);ids=ids.filter((function(id){return!negated.includes(id)}))}return ids},allIds=Array.from(_tracks.keys());_runnerParseSelector(selector).forEach((function(idObj){return renderIds(idObj).forEach((function(id){if(!_tracks.has(id))throw new Error('track "'.concat(id,'" does not exist'));trackIds.add(id)}))}))}catch(ex){throw new Error("error during runner initialization: ".concat(ex.message))}return new AudioRunner(trackIds)}},load:{value:function(){publish("load")}},loadWithScreen:{value:function(){publish("loadwithscreen")}},mute:{value:masterMute},muteOnHidden:{value:function(mute){if(!Visibility.isEnabled())return!1;if(null==mute)return _masterMuteOnHidden;var namespace=".SimpleAudio_masterMuteOnHidden";if(_masterMuteOnHidden=!!mute){var visibilityChange="".concat(Visibility.changeEvent).concat(namespace);jQuery(document).off(namespace).on(visibilityChange,(function(){return masterMute(Visibility.isHidden())})),Visibility.isHidden()&&masterMute(!0)}else jQuery(document).off(namespace)}},rate:{value:function(rate){if(null==rate)return _masterRate;if("number"!=typeof rate||Number.isNaN(rate)||!Number.isFinite(rate))throw new Error("rate must be a finite number");publish("rate",_masterRate=Math.clamp(rate,.2,5))}},stop:{value:function(){publish("stop")}},unload:{value:function(){publish("unload")}},volume:{value:function(volume){if(null==volume)return _masterVolume;if("number"!=typeof volume||Number.isNaN(volume)||!Number.isFinite(volume))throw new Error("volume must be a finite number");publish("volume",_masterVolume=Math.clamp(volume,0,1))}}}))}(),State=function(){var _history=[],_active=momentCreate(),_activeIndex=-1,_expired=[],_prng=null,_temporary=Object.create(null);function stateMarshal(noDelta){var state={index:_activeIndex};return noDelta?state.history=clone(_history):state.delta=historyDeltaEncode(_history),_expired.length>0&&(state.expired=Array.from(_expired)),null!==_prng&&(state.seed=_prng.seed),state}function stateUnmarshal(state,noDelta){if(null==state)throw new Error("state object is null or undefined");if(!Object.hasOwn(state,noDelta?"history":"delta")||0===state[noDelta?"history":"delta"].length)throw new Error("state object has no history or history is empty");if(!Object.hasOwn(state,"index"))throw new Error("state object has no index");if(null!==_prng&&!Object.hasOwn(state,"seed"))throw new Error("state object has no seed, but PRNG is enabled");if(null===_prng&&Object.hasOwn(state,"seed"))throw new Error("state object has seed, but PRNG is disabled");_history=noDelta?clone(state.history):historyDeltaDecode(state.delta),_activeIndex=state.index,_expired=Object.hasOwn(state,"expired")?Array.from(state.expired):[],Object.hasOwn(state,"seed")&&(_prng.seed=state.seed),momentActivate(_activeIndex)}function momentCreate(title,variables){return{title:null==title?"":String(title),variables:null==variables?{}:clone(variables)}}function momentActivate(moment){if(null==moment)throw new Error("moment activation attempted with null or undefined");switch(_typeof(moment)){case"object":_active=clone(moment);break;case"number":if(historyIsEmpty())throw new Error("moment activation attempted with index on empty history");if(moment<0||moment>=historySize())throw new RangeError("moment activation attempted with out-of-bounds index; need [0, ".concat(historySize()-1,"], got ").concat(moment));_active=clone(_history[moment]);break;default:throw new TypeError('moment activation attempted with a "'.concat(_typeof(moment),'"; must be an object or valid history stack index'))}return null!==_prng&&(_prng=function(state){for(var prng=prngCreate(state.seed),i=state.pull;i>0;--i)prng.random();return prng}({seed:_prng.seed,pull:_active.pull})),session.set("state",stateMarshal()),triggerEvent(":historyupdate"),_active}function historyLength(){return _activeIndex+1}function historySize(){return _history.length}function historyIsEmpty(){return 0===_history.length}function historyTop(){return _history.length>0?_history[_history.length-1]:null}function historyGoTo(index){return!(null==index||index<0||index>=historySize()||index===_activeIndex)&&(momentActivate(_activeIndex=index),!0)}function historyDeltaEncode(historyArr){if(!Array.isArray(historyArr))return null;if(0===historyArr.length)return[];for(var delta=[historyArr[0]],i=1,iend=historyArr.length;i<iend;++i)delta.push(Diff.diff(historyArr[i-1],historyArr[i]));return delta}function historyDeltaDecode(delta){if(!Array.isArray(delta))return null;if(0===delta.length)return[];for(var historyArr=[clone(delta[0])],i=1,iend=delta.length;i<iend;++i)historyArr.push(Diff.patch(historyArr[i-1],delta[i]));return historyArr}function prngCreate(seedBase,mixEntropy){return new Math.seedrandom(seedBase,{entropy:Boolean(mixEntropy),pass:function(prng,seed){return Object.create(null,{prng:{value:prng},seed:{writable:!0,value:seed},pull:{writable:!0,value:0},random:{value:function(){return++this.pull,this.prng()}}})}})}function tempVariablesClear(){_temporary=Object.create(null)}var _METADATA_STORE="metadata";function metadataDelete(key){if("string"!=typeof key)throw new TypeError("State.metadata.delete key parameter must be a string (received: ".concat(_typeof(key),")"));var store=storage.get(_METADATA_STORE);store&&Object.hasOwn(store,key)&&(1===Object.keys(store).length?storage.delete(_METADATA_STORE):(delete store[key],storage.set(_METADATA_STORE,store)))}return Object.preventExtensions(Object.create(null,{reset:{value:function(){session.delete("state"),_history=[],_active=momentCreate(),_activeIndex=-1,_expired=[],_prng=null===_prng?null:prngCreate(_prng.seed),tempVariablesClear()}},restore:{value:function(){var state=session.get("state");return null!=state&&(stateUnmarshal(state),!0)}},marshalForSave:{value:function(){return stateMarshal(!0)}},unmarshalForSave:{value:function(state){return stateUnmarshal(state,!0)}},expired:{get:function(){return _expired}},turns:{get:function(){return _expired.length+historyLength()}},passages:{get:function(){return _expired.concat(_history.slice(0,historyLength()).map((function(moment){return moment.title})))}},hasPlayed:{value:function(title){return null!=title&&""!==title&&(!!_expired.includes(title)||!!_history.slice(0,historyLength()).some((function(moment){return moment.title===title})))}},active:{get:function(){return _active}},activeIndex:{get:function(){return _activeIndex}},passage:{get:function(){return _active.title}},variables:{get:function(){return _active.variables}},history:{get:function(){return _history}},length:{get:historyLength},size:{get:historySize},isEmpty:{value:historyIsEmpty},current:{get:function(){return _history.length>0?_history[_activeIndex]:null}},top:{get:historyTop},bottom:{get:function(){return _history.length>0?_history[0]:null}},index:{value:function(index){return historyIsEmpty()||index<0||index>_activeIndex?null:_history[index]}},peek:{value:function(offset){if(historyIsEmpty())return null;var lengthOffset=1+(offset?Math.abs(offset):0);return lengthOffset>historyLength()?null:_history[historyLength()-lengthOffset]}},has:{value:function(title){if(historyIsEmpty()||null==title||""===title)return!1;for(var i=_activeIndex;i>=0;--i)if(_history[i].title===title)return!0;return!1}},create:{value:function(title){for(0,historyLength()<historySize()&&_history.splice(historyLength(),historySize()-historyLength()),_history.push(momentCreate(title,_active.variables)),_prng&&(historyTop().pull=_prng.pull);historySize()>Config.history.maxStates;)_expired.push(_history.shift().title);return momentActivate(_activeIndex=historySize()-1),historyLength()}},goTo:{value:historyGoTo},go:{value:function(offset){return null!=offset&&0!==offset&&historyGoTo(_activeIndex+offset)}},deltaEncode:{value:historyDeltaEncode},deltaDecode:{value:historyDeltaDecode},prng:{value:Object.preventExtensions(Object.create(null,{init:{value:function(seedBase,mixEntropy){var what;if(!historyIsEmpty())throw what="the story JavaScript section",new Error("State.prng.init must be called during initialization, within either ".concat(what," or the StoryInit special passage"));_prng=prngCreate(seedBase,Boolean(mixEntropy)),_active.pull=_prng.pull}},isEnabled:{value:function(){return null!==_prng}},pull:{get:function(){return null!==_prng?_prng.pull:NaN}},seed:{get:function(){return null!==_prng?_prng.seed:null}}}))},random:{value:function(){return null!==_prng?_prng.random():Math.random()}},clearTemporary:{value:tempVariablesClear},temporary:{get:function(){return _temporary}},getVar:{value:function(varExpression){try{return Scripting.evalTwineScript(varExpression)}catch(ex){}}},setVar:{value:function(varExpression,value){try{return Scripting.evalTwineScript("".concat(varExpression," = SCRIPT$DATA$"),null,value),!0}catch(ex){}return!1}},metadata:{value:Object.preventExtensions(Object.create(null,{clear:{value:function(){storage.delete(_METADATA_STORE)}},delete:{value:metadataDelete},entries:{value:function(){var store=storage.get(_METADATA_STORE);return store&&Object.entries(store)}},get:{value:function(key){if("string"!=typeof key)throw new TypeError("State.metadata.get key parameter must be a string (received: ".concat(_typeof(key),")"));var store=storage.get(_METADATA_STORE);return store&&Object.hasOwn(store,key)?store[key]:undefined}},has:{value:function(key){if("string"!=typeof key)throw new TypeError("State.metadata.has key parameter must be a string (received: ".concat(_typeof(key),")"));var store=storage.get(_METADATA_STORE);return store&&Object.hasOwn(store,key)}},keys:{value:function(){var store=storage.get(_METADATA_STORE);return store&&Object.keys(store)}},set:{value:function(key,value){if("string"!=typeof key)throw new TypeError("State.metadata.set key parameter must be a string (received: ".concat(_typeof(key),")"));if(void 0===value)metadataDelete(key);else{var store=storage.get(_METADATA_STORE)||{};store[key]=value,storage.set(_METADATA_STORE,store)}}},size:{get:function(){var store=storage.get(_METADATA_STORE);return store?Object.keys(store).length:0}}}))}}))}(),Scripting=function(){function toStringOrDefault(value){return console.warn("[DEPRECATED] toStringOrDefault() is deprecated."),stringFrom(value)}function either(){if(0!==arguments.length)return Array.prototype.concat.apply([],arguments).random()}function forget(key){if("string"!=typeof key)throw new TypeError("forget key parameter must be a string (received: ".concat(getTypeOf(key),")"));State.metadata.delete(key)}function hasVisited(){if(0===arguments.length)throw new Error("hasVisited called with insufficient parameters");if(State.isEmpty())return!1;for(var needles=Array.prototype.concat.apply([],arguments),played=State.passages,i=0;i<needles.length;++i)if(!played.includes(needles[i]))return!1;return!0}function lastVisited(){if(0===arguments.length)throw new Error("lastVisited called with insufficient parameters");if(State.isEmpty())return-1;for(var needles=Array.prototype.concat.apply([],arguments),played=State.passages,uBound=played.length-1,turns=State.turns,i=0;i<needles.length&&turns>-1;++i){var lastIndex=played.lastIndexOf(needles[i]);turns=Math.min(turns,-1===lastIndex?-1:uBound-lastIndex)}return turns}function memorize(key,value){if("string"!=typeof key)throw new TypeError("memorize key parameter must be a string (received: ".concat(getTypeOf(key),")"));State.metadata.set(key,value)}function passage(){return State.passage}function previous(){var passages=State.passages;if(arguments.length>0){var offset=Number(arguments[0]);if(!Number.isSafeInteger(offset)||offset<1)throw new RangeError("previous offset parameter must be a positive integer greater than zero");return passages.length>offset?passages[passages.length-1-offset]:""}for(var i=passages.length-2;i>=0;--i)if(passages[i]!==State.passage)return passages[i];return""}function random(){var min,max;switch(arguments.length){case 0:throw new Error("random called with insufficient parameters");case 1:min=0,max=Math.trunc(arguments[0]);break;default:min=Math.trunc(arguments[0]),max=Math.trunc(arguments[1])}if(!Number.isInteger(min))throw new TypeError("random min parameter must be an integer");if(!Number.isInteger(max))throw new TypeError("random max parameter must be an integer");if(min>max){var _ref7=[max,min];min=_ref7[0],max=_ref7[1]}return Math.floor(State.random()*(max-min+1))+min}function randomFloat(){var min,max;switch(arguments.length){case 0:throw new Error("randomFloat called with insufficient parameters");case 1:min=0,max=Number(arguments[0]);break;default:min=Number(arguments[0]),max=Number(arguments[1])}if(Number.isNaN(min)||!Number.isFinite(min))throw new TypeError("randomFloat min parameter must be a number");if(Number.isNaN(max)||!Number.isFinite(max))throw new TypeError("randomFloat max parameter must be a number");if(min>max){var _ref8=[max,min];min=_ref8[0],max=_ref8[1]}return State.random()*(max-min)+min}function recall(key,defaultValue){if("string"!=typeof key)throw new TypeError("recall key parameter must be a string (received: ".concat(getTypeOf(key),")"));return State.metadata.has(key)?State.metadata.get(key):defaultValue}function tags(){if(0===arguments.length)return Story.get(State.passage).tags;for(var passages=Array.prototype.concat.apply([],arguments),tags=[],i=0;i<passages.length;++i)tags=tags.concat(Story.get(passages[i]).tags);return tags}function temporary(){return State.temporary}function time(){return null===Engine.lastPlay?0:now()-Engine.lastPlay}function turns(){return State.turns}function variables(){return State.variables}function visited(){if(State.isEmpty())return 0;for(var needles=Array.prototype.concat.apply([],0===arguments.length?[State.passage]:arguments),played=State.passages,count=State.turns,i=0;i<needles.length&&count>0;++i)count=Math.min(count,played.count(needles[i]));return count}function visitedTags(){if(0===arguments.length)throw new Error("visitedTags called with insufficient parameters");if(State.isEmpty())return 0;for(var needles=Array.prototype.concat.apply([],arguments),nLength=needles.length,played=State.passages,seen=new Map,count=0,i=0;i<played.length;++i){var title=played[i];if(seen.has(title))seen.get(title)&&++count;else{var _tags2=Story.get(title).tags;if(_tags2.length>0){for(var found=0,j=0;j<nLength;++j)_tags2.includes(needles[j])&&++found;found===nLength?(++count,seen.set(title,!0)):seen.set(title,!1)}}}return count}var _ref9=function(){function slugifyUrl(url){return parseURL(url).path.replace(/^[^\w]+|[^\w]+$/g,"").replace(/[^\w]+/g,"-").toLocaleLowerCase()}function addScript(url){return new Promise((function(resolve,reject){var kind,src;if("string"==typeof url)kind=url.trim().toLowerCase().endsWith(".mjs")?"module":"text/javascript",src=url;else{if("object"!==_typeof(url))throw new Error("importScripts url parameter must be a string or object");kind=url.type,src=url.src}jQuery(document.createElement("script")).one("load abort error",(function(ev){jQuery(ev.target).off(),"load"===ev.type?resolve(ev.target):reject(new Error('importScripts failed to load the script "'.concat(src,'"')))})).appendTo(document.head).attr({id:"script-imported-".concat(slugifyUrl(src)),type:kind,src:src})}))}function addStyle(url){return new Promise((function(resolve,reject){if("string"!=typeof url)throw new Error("importStyles url parameter must be a string");jQuery(document.createElement("link")).one("load abort error",(function(ev){jQuery(ev.target).off(),"load"===ev.type?resolve(ev.target):reject(new Error('importStyles failed to load the stylesheet "'.concat(url,'"')))})).appendTo(document.head).attr({id:"style-imported-".concat(slugifyUrl(url)),rel:"stylesheet",href:url})}))}function sequence(callbacks){return callbacks.reduce((function(seq,fn){return seq.then(fn)}),Promise.resolve())}return{importScripts:function(){for(var _len12=arguments.length,urls=new Array(_len12),_key12=0;_key12<_len12;_key12++)urls[_key12]=arguments[_key12];return Promise.all(urls.map((function(oneOrSeries){return Array.isArray(oneOrSeries)?sequence(oneOrSeries.map((function(url){return function(){return addScript(url)}}))):addScript(oneOrSeries)})))},importStyles:function(){for(var _len13=arguments.length,urls=new Array(_len13),_key13=0;_key13<_len13;_key13++)urls[_key13]=arguments[_key13];return Promise.all(urls.map((function(oneOrSeries){return Array.isArray(oneOrSeries)?sequence(oneOrSeries.map((function(url){return function(){return addStyle(url)}}))):addStyle(oneOrSeries)})))}}}(),importScripts=_ref9.importScripts,importStyles=_ref9.importStyles,desugar=function(){var tokenTable=enumFrom({$:"State.variables.",_:"State.temporary.",to:"=",eq:"==",neq:"!=",is:"===",isnot:"!==",gt:">",gte:">=",lt:"<",lte:"<=",and:"&&",or:"||",not:"!",def:'"undefined" !== typeof',ndef:'"undefined" === typeof'}),desugarRE=new RegExp(["(?:\"\"|''|``)",'(?:"(?:\\\\.|[^"\\\\])+")',"(?:'(?:\\\\.|[^'\\\\])+')","(`(?:\\\\.|[^`\\\\])+`)","(?:[=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}]+)","(?:\\.{3})","([^\"'=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}\\s]+)"].join("|"),"g"),varTest=new RegExp("^".concat(Patterns.variable));function desugar(sugaredCode){desugarRE.lastIndex=0;for(var match,code=sugaredCode;null!==(match=desugarRE.exec(code));)if(match[1]){var sugaredTemplate=match[1],template=desugarTemplate(sugaredTemplate);template!==sugaredTemplate&&(code=code.splice(match.index,sugaredTemplate.length,template),desugarRE.lastIndex+=template.length-sugaredTemplate.length)}else if(match[2]){var token=match[2];if("$"===token||"_"===token)continue;varTest.test(token)&&(token=token[0]),tokenTable[token]&&(code=code.splice(match.index,token.length,tokenTable[token]),desugarRE.lastIndex+=tokenTable[token].length-token.length)}return code}var templateGroupStartRE=/\$\{/g,templateGroupParseRE=new RegExp(["(?:\"\"|'')",'(?:"(?:\\\\.|[^"\\\\])+")',"(?:'(?:\\\\.|[^'\\\\])+')","(\\{)","(\\})"].join("|"),"g");function desugarTemplate(sugaredLiteral){templateGroupStartRE.lastIndex=0;for(var startMatch,template=sugaredLiteral;null!==(startMatch=templateGroupStartRE.exec(template));){var startIndex=startMatch.index+2,endIndex=startIndex,depth=1,endMatch=void 0;for(templateGroupParseRE.lastIndex=startIndex;null!==(endMatch=templateGroupParseRE.exec(template));)if(endMatch[1]?++depth:endMatch[2]&&--depth,0===depth){endIndex=endMatch.index;break}if(endIndex>startIndex){var desugarREIndex=desugarRE.lastIndex,sugaredGroup=template.slice(startIndex,endIndex),group=desugar(sugaredGroup);desugarRE.lastIndex=desugarREIndex,template=template.splice(startIndex,sugaredGroup.length,group),templateGroupStartRE.lastIndex+=group.length-sugaredGroup.length}}return template}return desugar}();function evalJavaScript(code,output,data){return function(code,output,SCRIPT$DATA$){return eval(code)}.call(output?{output:output}:null,String(code),output,data)}function evalTwineScript(code,output,data){return function(code,output,SCRIPT$DATA$){return eval(code)}.call(output?{output:output}:null,desugar(String(code)),output,data)}return Object.preventExtensions(Object.create(null,{desugar:{value:desugar},evalJavaScript:{value:evalJavaScript},evalTwineScript:{value:evalTwineScript},parse:{value:desugar}}))}(),_ref10=function(){var Lexer=function(){return _createClass((function Lexer(source,initialState){if(_classCallCheck(this,Lexer),arguments.length<2)throw new Error("Lexer constructor called with too few parameters (source:string , initialState:function)");Object.defineProperties(this,{source:{value:source},initial:{value:initialState},state:{writable:!0,value:initialState},start:{writable:!0,value:0},pos:{writable:!0,value:0},depth:{writable:!0,value:0},items:{writable:!0,value:[]},data:{writable:!0,value:{}}})}),[{key:"reset",value:function(){this.state=this.initial,this.start=0,this.pos=0,this.depth=0,this.items=[],this.data={}}},{key:"run",value:function(){for(;null!==this.state;)this.state=this.state(this);return this.items}},{key:"nextItem",value:function(){for(;0===this.items.length&&null!==this.state;)this.state=this.state(this);return this.items.shift()}},{key:"next",value:function(){return this.pos>=this.source.length?-1:this.source[this.pos++]}},{key:"peek",value:function(){return this.pos>=this.source.length?-1:this.source[this.pos]}},{key:"backup",value:function(num){this.pos-=num||1}},{key:"forward",value:function(num){this.pos+=num||1}},{key:"ignore",value:function(){this.start=this.pos}},{key:"accept",value:function(valid){var ch=this.next();return-1!==ch&&(!!valid.includes(ch)||(this.backup(),!1))}},{key:"acceptRe",value:function(validRe){var ch=this.next();return-1!==ch&&(!!validRe.test(ch)||(this.backup(),!1))}},{key:"acceptRun",value:function(valid){for(;;){var ch=this.next();if(-1===ch)return;if(!valid.includes(ch))break}this.backup()}},{key:"acceptRunRe",value:function(validRe){for(;;){var ch=this.next();if(-1===ch)return;if(!validRe.test(ch))break}this.backup()}},{key:"emit",value:function(type){this.items.push({type:type,text:this.source.slice(this.start,this.pos),start:this.start,pos:this.pos}),this.start=this.pos}},{key:"error",value:function(type,message){if(arguments.length<2)throw new Error("Lexer.prototype.error called with too few parameters (type:number , message:string)");return this.items.push({type:type,message:message,text:this.source.slice(this.start,this.pos),start:this.start,pos:this.pos}),null}}],[{key:"enumFromNames",value:function(names){var obj=names.reduce((function(obj,name,i){return obj[name]=i,obj}),{});return Object.freeze(Object.assign(Object.create(null),obj))}}])}();return{EOF:-1,Lexer:Lexer}}(),EOF=_ref10.EOF,Lexer=_ref10.Lexer,Wikifier=function(){var _optionsStack,macroParser,lookaheadRe,idOrClassRe,_callDepth=0,Wikifier=function(){function Wikifier(destination,source,options){_classCallCheck(this,Wikifier),Wikifier.Parser.Profile.isEmpty()&&Wikifier.Parser.Profile.compile(),Object.defineProperties(this,{source:{value:String(source)},options:{writable:!0,value:Object.assign({profile:"all"},options)},nextMatch:{writable:!0,value:0},output:{writable:!0,value:null},_rawArgs:{writable:!0,value:""}}),this.output=null==destination?document.createDocumentFragment():destination instanceof jQuery?destination[0]:destination;try{++_callDepth,this.subWikify(this.output),1===_callDepth&&(Object.hasOwn(this.options,"cleanup")&&null!=this.options.cleanup?this.options.cleanup:Config.cleanupWikifierOutput)&&convertBreaks(this.output)}finally{--_callDepth}}return _createClass(Wikifier,[{key:"subWikify",value:function(output,terminator,options){var newOptions,oldOptions,oldOutput=this.output;this.output=output,Wikifier.Option.length>0&&(newOptions=Object.assign(newOptions||{},Wikifier.Option.options)),null!==options&&"object"===_typeof(options)&&(newOptions=Object.assign(newOptions||{},options)),newOptions&&(oldOptions=this.options,this.options=Object.assign({},this.options,newOptions));var terminatorMatch,parserMatch,parsersProfile=Wikifier.Parser.Profile.get(this.options.profile),terminatorRegExp=terminator?new RegExp("(?:".concat(terminator,")"),this.options.ignoreTerminatorCase?"gim":"gm"):null;do{if(parsersProfile.parserRegExp.lastIndex=this.nextMatch,terminatorRegExp&&(terminatorRegExp.lastIndex=this.nextMatch),parserMatch=parsersProfile.parserRegExp.exec(this.source),(terminatorMatch=terminatorRegExp?terminatorRegExp.exec(this.source):null)&&(!parserMatch||terminatorMatch.index<=parserMatch.index))return terminatorMatch.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,terminatorMatch.index),this.matchStart=terminatorMatch.index,this.matchLength=terminatorMatch[0].length,this.matchText=terminatorMatch[0],this.nextMatch=terminatorRegExp.lastIndex,this.output=oldOutput,void(oldOptions&&(this.options=oldOptions));if(parserMatch){parserMatch.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,parserMatch.index),this.matchStart=parserMatch.index,this.matchLength=parserMatch[0].length,this.matchText=parserMatch[0],this.nextMatch=parsersProfile.parserRegExp.lastIndex;for(var matchingParser=void 0,i=1,iend=parserMatch.length;i<iend;++i)if(parserMatch[i]){matchingParser=i-1;break}if(parsersProfile.parsers[matchingParser].handler(this),null!=TempState.break)break}}while(terminatorMatch||parserMatch);null==TempState.break?this.nextMatch<this.source.length&&(this.outputText(this.output,this.nextMatch,this.source.length),this.nextMatch=this.source.length):this.output.lastChild&&this.output.lastChild.nodeType===Node.ELEMENT_NODE&&"BR"===this.output.lastChild.nodeName.toUpperCase()&&jQuery(this.output.lastChild).remove(),this.output=oldOutput,oldOptions&&(this.options=oldOptions)}},{key:"outputText",value:function(destination,startPos,endPos){jQuery(destination).append(document.createTextNode(this.source.substring(startPos,endPos)))}},{key:"rawArgs",value:function(){return console.warn("[DEPRECATED] Wikifier.rawArgs() is deprecated."),this._rawArgs}},{key:"fullArgs",value:function(){return console.warn("[DEPRECATED] Wikifier.fullArgs() is deprecated."),Scripting.desugar(this._rawArgs)}}],[{key:"wikifyEval",value:function(text){var output=document.createDocumentFragment();new Wikifier(output,text);var errors=output.querySelector(".error");if(null!==errors)throw new Error(errors.textContent.replace(errorPrologRegExp,""));return output}},{key:"createInternalLink",value:function(destination,passage,text,callback){var $link=jQuery(document.createElement("a"));return null!=passage&&($link.attr("data-passage",passage),Story.has(passage)?($link.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&$link.addClass("link-visited")):$link.addClass("link-broken"),$link.ariaClick({one:!0},(function(){"function"==typeof callback&&callback(),Engine.play(passage)}))),text&&$link.append(document.createTextNode(text)),destination&&$link.appendTo(destination),$link[0]}},{key:"createExternalLink",value:function(destination,url,text){var $link=jQuery(document.createElement("a")).attr("target","_blank").addClass("link-external").text(text).appendTo(destination);return null!=url&&$link.attr({href:url,tabindex:0}),$link[0]}}])}();return Object.defineProperty(Wikifier,"Option",{value:(_optionsStack=[],Object.preventExtensions(Object.create(null,{length:{get:function(){return _optionsStack.length}},options:{get:function(){return Object.assign.apply(Object,[{}].concat(_toConsumableArray(_optionsStack)))}},clear:{value:function(){_optionsStack=[]}},get:{value:function(index){return _optionsStack[index]}},pop:{value:function(){return _optionsStack.pop()}},push:{value:function(options){if("object"!==_typeof(options)||null===options)throw new TypeError("Wikifier.Option.push options parameter must be an object (received: ".concat(getTypeOf(options),")"));return _optionsStack.push(options)}}})))}),Object.defineProperty(Wikifier,"Parser",{value:function(){var _profiles,_parsers=[];function parsersHas(name){return!!_parsers.find((function(parser){return parser.name===name}))}return Object.preventExtensions(Object.create(null,{parsers:{get:function(){return _parsers}},add:{value:function(parser){if("object"!==_typeof(parser))throw new Error("Wikifier.Parser.add parser parameter must be an object");if(!Object.hasOwn(parser,"name"))throw new Error('parser object missing required "name" property');if("string"!=typeof parser.name)throw new Error('parser object "name" property must be a string');if(!Object.hasOwn(parser,"match"))throw new Error('parser object missing required "match" property');if("string"!=typeof parser.match)throw new Error('parser object "match" property must be a string');if(!Object.hasOwn(parser,"handler"))throw new Error('parser object missing required "handler" property');if("function"!=typeof parser.handler)throw new Error('parser object "handler" property must be a function');if(Object.hasOwn(parser,"profiles")&&!Array.isArray(parser.profiles))throw new Error('parser object "profiles" property must be an array');if(parsersHas(parser.name))throw new Error('cannot clobber existing parser "'.concat(parser.name,'"'));_parsers.push(parser)}},delete:{value:function(name){var parser=_parsers.find((function(parser){return parser.name===name}));parser&&_parsers.delete(parser)}},isEmpty:{value:function(){return 0===_parsers.length}},has:{value:parsersHas},get:{value:function(name){return _parsers.find((function(parser){return parser.name===name}))||null}},Profile:{value:Object.preventExtensions(Object.create(null,{profiles:{get:function(){return _profiles}},compile:{value:function(){var all=_parsers,core=all.filter((function(parser){return!Array.isArray(parser.profiles)||parser.profiles.includes("core")}));return _profiles=Object.freeze({all:{parsers:all,parserRegExp:new RegExp(all.map((function(parser){return"(".concat(parser.match,")")})).join("|"),"gm")},core:{parsers:core,parserRegExp:new RegExp(core.map((function(parser){return"(".concat(parser.match,")")})).join("|"),"gm")}})}},isEmpty:{value:function(){return"object"!==_typeof(_profiles)||0===Object.keys(_profiles).length}},has:{value:function(profile){return"object"===_typeof(_profiles)&&Object.hasOwn(_profiles,profile)}},get:{value:function(profile){if("object"!==_typeof(_profiles)||!Object.hasOwn(_profiles,profile))throw new Error('nonexistent parser profile "'.concat(profile,'"'));return _profiles[profile]}}}))}}))}()}),Object.defineProperties(Wikifier,{helpers:{value:{}},isExternalLink:{value:isExternalLink},getValue:{value:State.getVar},setValue:{value:State.setVar},parse:{value:Scripting.desugar},evalExpression:{value:Scripting.evalTwineScript},evalStatements:{value:Scripting.evalTwineScript},textPrimitives:{value:Patterns}}),Object.defineProperties(Wikifier.helpers,{inlineCss:{value:(lookaheadRe=new RegExp(Patterns.inlineCss,"gm"),idOrClassRe=new RegExp("(".concat(Patterns.cssIdOrClassSigil,")(").concat(Patterns.anyLetter,"+)"),"g"),function(w){var matched,css={classes:[],id:"",styles:{}};do{lookaheadRe.lastIndex=w.nextMatch;var match=lookaheadRe.exec(w.source);if(matched=match&&match.index===w.nextMatch){if(match[1])css.styles[cssPropToDOMProp(match[1])]=match[2].trim();else if(match[3])css.styles[cssPropToDOMProp(match[3])]=match[4].trim();else if(match[5]){var subMatch=void 0;for(idOrClassRe.lastIndex=0;null!==(subMatch=idOrClassRe.exec(match[5]));)"."===subMatch[1]?css.classes.push(subMatch[2]):css.id=subMatch[2]}w.nextMatch=lookaheadRe.lastIndex}}while(matched);return css})},evalText:{value:function(text){var result;try{switch(_typeof(result=Scripting.evalTwineScript(text))){case"string":""===result.trim()&&(result=text);break;case"number":result=String(result);break;default:result=text}}catch(ex){result=text}return result}},evalPassageId:{value:function(passage){return null==passage||Story.has(passage)?passage:Wikifier.helpers.evalText(passage)}},hasBlockContext:{value:function(nodes){for(var hasGCS="function"==typeof window.getComputedStyle,i=nodes.length-1;i>=0;--i){var node=nodes[i];switch(node.nodeType){case Node.ELEMENT_NODE:var tagName=node.nodeName.toUpperCase();if("BR"===tagName)return!0;var styles=hasGCS?window.getComputedStyle(node,null):node.currentStyle;if(styles&&styles.display){if("none"===styles.display)continue;return"block"===styles.display}switch(tagName){case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":return!0}return!1;case Node.COMMENT_NODE:continue;default:return!1}}return!0}},shadowHandler:{value:(macroParser=null,function(code){var shadowStore=Object.create(null);return macroParser||function(){if(!macroParser&&!(macroParser=Wikifier.Parser.get("macro")))throw new Error('cannot find "macro" parser')}(),macroParser.context&&macroParser.context.shadowView.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey]})),function(){var shadowNames=Object.keys(shadowStore),valueCache=shadowNames.length>0?{}:null;try{return shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;Object.hasOwn(store,varKey)&&(valueCache[varKey]=store[varKey]),store[varKey]=shadowStore[varName]})),Scripting.evalJavaScript(code)}finally{shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey],Object.hasOwn(valueCache,varKey)?store[varKey]=valueCache[varKey]:delete store[varKey]}))}}})},parseSquareBracketedMarkup:{value:function(){var Item=Lexer.enumFromNames(["Error","DelimLTR","DelimRTL","InnerMeta","ImageMeta","LinkMeta","Link","RightMeta","Setter","Source","Text"]),Delim=Lexer.enumFromNames(["None","LTR","RTL"]);function slurpQuote(lexer,endQuote){loop:for(;;)switch(lexer.next()){case"\\":var ch=lexer.next();if(ch!==EOF&&"\n"!==ch)break;case EOF:case"\n":return EOF;case endQuote:break loop}return lexer.pos}function lexLeftMeta(lexer){if(!lexer.accept("["))return lexer.error(Item.Error,"malformed square-bracketed markup");if(lexer.accept("["))lexer.data.isLink=!0,lexer.emit(Item.LinkMeta);else{if(lexer.accept("<>"),!(lexer.accept("Ii")&&lexer.accept("Mm")&&lexer.accept("Gg")&&lexer.accept("[")))return lexer.error(Item.Error,"malformed square-bracketed markup");lexer.data.isLink=!1,lexer.emit(Item.ImageMeta)}return lexer.depth=2,lexCoreComponents}function lexCoreComponents(lexer){for(var what=lexer.data.isLink?"link":"image",delim=Delim.None;;)switch(lexer.next()){case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case'"':if(slurpQuote(lexer,'"')===EOF)return lexer.error(Item.Error,"unterminated double quoted string in ".concat(what," markup"));break;case"|":delim===Delim.None&&(delim=Delim.LTR,lexer.backup(),lexer.emit(Item.Text),lexer.forward(),lexer.emit(Item.DelimLTR));break;case"-":delim===Delim.None&&">"===lexer.peek()&&(delim=Delim.LTR,lexer.backup(),lexer.emit(Item.Text),lexer.forward(2),lexer.emit(Item.DelimLTR));break;case"<":delim===Delim.None&&"-"===lexer.peek()&&(delim=Delim.RTL,lexer.backup(),lexer.emit(lexer.data.isLink?Item.Link:Item.Source),lexer.forward(2),lexer.emit(Item.DelimRTL));break;case"[":++lexer.depth;break;case"]":if(--lexer.depth,1===lexer.depth)switch(lexer.peek()){case"[":return++lexer.depth,lexer.backup(),delim===Delim.RTL?lexer.emit(Item.Text):lexer.emit(lexer.data.isLink?Item.Link:Item.Source),lexer.forward(2),lexer.emit(Item.InnerMeta),lexer.data.isLink?lexSetter:lexImageLink;case"]":return--lexer.depth,lexer.backup(),delim===Delim.RTL?lexer.emit(Item.Text):lexer.emit(lexer.data.isLink?Item.Link:Item.Source),lexer.forward(2),lexer.emit(Item.RightMeta),null;default:return lexer.error(Item.Error,"malformed ".concat(what," markup"))}}}function lexImageLink(lexer){for(var what=lexer.data.isLink?"link":"image";;)switch(lexer.next()){case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case'"':if(slurpQuote(lexer,'"')===EOF)return lexer.error(Item.Error,"unterminated double quoted string in ".concat(what," markup link component"));break;case"[":++lexer.depth;break;case"]":if(--lexer.depth,1===lexer.depth)switch(lexer.peek()){case"[":return++lexer.depth,lexer.backup(),lexer.emit(Item.Link),lexer.forward(2),lexer.emit(Item.InnerMeta),lexSetter;case"]":return--lexer.depth,lexer.backup(),lexer.emit(Item.Link),lexer.forward(2),lexer.emit(Item.RightMeta),null;default:return lexer.error(Item.Error,"malformed ".concat(what," markup"))}}}function lexSetter(lexer){for(var what=lexer.data.isLink?"link":"image";;)switch(lexer.next()){case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case'"':if(slurpQuote(lexer,'"')===EOF)return lexer.error(Item.Error,"unterminated double quoted string in ".concat(what," markup setter component"));break;case"'":if(slurpQuote(lexer,"'")===EOF)return lexer.error(Item.Error,"unterminated single quoted string in ".concat(what," markup setter component"));break;case"[":++lexer.depth;break;case"]":if(--lexer.depth,1===lexer.depth)return"]"!==lexer.peek()?lexer.error(Item.Error,"malformed ".concat(what," markup")):(--lexer.depth,lexer.backup(),lexer.emit(Item.Setter),lexer.forward(2),lexer.emit(Item.RightMeta),null)}}return function(w){var lexer=new Lexer(w.source,lexLeftMeta);lexer.start=lexer.pos=w.matchStart;var markup={},items=lexer.run(),last=items.last();return last&&last.type===Item.Error?markup.error=last.message:items.forEach((function(item){var text=item.text.trim();switch(item.type){case Item.ImageMeta:markup.isImage=!0,"<"===text[1]?markup.align="left":">"===text[1]&&(markup.align="right");break;case Item.LinkMeta:markup.isLink=!0;break;case Item.Link:"~"===text[0]?(markup.forceInternal=!0,markup.link=text.slice(1)):markup.link=text;break;case Item.Setter:markup.setter=text;break;case Item.Source:markup.source=text;break;case Item.Text:markup.text=text}})),markup.pos=lexer.pos,markup}}()}}),Wikifier}();!function(){function _verbatimTagHandler(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);match&&match.index===w.matchStart&&(w.nextMatch=this.lookahead.lastIndex,jQuery(document.createDocumentFragment()).append(match[1]).appendTo(w.output))}Wikifier.Parser.add({name:"quoteByBlock",profiles:["block"],match:"^<<<\\n",terminator:"^<<<\\n",handler:function(w){Wikifier.helpers.hasBlockContext(w.output.childNodes)?w.subWikify(jQuery(document.createElement("blockquote")).appendTo(w.output).get(0),this.terminator):jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"quoteByLine",profiles:["block"],match:"^>+",lookahead:/^>+/gm,terminator:"\\n",handler:function(w){if(Wikifier.helpers.hasBlockContext(w.output.childNodes)){var matched,i,destStack=[w.output],curLevel=0,newLevel=w.matchLength;do{if(newLevel>curLevel)for(i=curLevel;i<newLevel;++i)destStack.push(jQuery(document.createElement("blockquote")).appendTo(destStack[destStack.length-1]).get(0));else if(newLevel<curLevel)for(i=curLevel;i>newLevel;--i)destStack.pop();curLevel=newLevel,w.subWikify(destStack[destStack.length-1],this.terminator),jQuery(document.createElement("br")).appendTo(destStack[destStack.length-1]),this.lookahead.lastIndex=w.nextMatch;var match=this.lookahead.exec(w.source);(matched=match&&match.index===w.nextMatch)&&(newLevel=match[0].length,w.nextMatch+=match[0].length)}while(matched)}else jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"macro",profiles:["core"],match:"<<",lookahead:new RegExp("<<(/?".concat(Patterns.macroName,")(?:\\s*)((?:(?:/\\*[^*]*\\*+(?:[^/*][^*]*\\*+)*/)|(?://.*\\n)|(?:`(?:\\\\.|[^`\\\\])*`)|(?:\"(?:\\\\.|[^\"\\\\])*\")|(?:'(?:\\\\.|[^'\\\\])*')|(?:\\[(?:[<>]?[Ii][Mm][Gg])?\\[[^\\r\\n]*?\\]\\]+)|[^>]|(?:>(?!>)))*)>>"),"gm"),working:{source:"",name:"",arguments:"",index:0},context:null,handler:function(w){var matchStart=this.lookahead.lastIndex=w.matchStart;if(this.parseTag(w)){var macro,nextMatch=w.nextMatch,name=this.working.name,rawArgs=this.working.arguments;try{if(!(macro=Macro.get(name))){if(Macro.tags.has(name)){var tags=Macro.tags.get(name);return appendError(w.output,"child tag <<".concat(name,">> was found outside of a call to its parent macro").concat(1===tags.length?"":"s"," <<").concat(tags.join(">>, <<"),">>"),w.source.slice(matchStart,w.nextMatch))}return appendError(w.output,"macro <<".concat(name,">> does not exist"),w.source.slice(matchStart,w.nextMatch))}var payload=null;if(void 0!==macro.tags&&!(payload=this.parseBody(w,macro)))return w.nextMatch=nextMatch,appendError(w.output,"cannot find a closing tag for macro <<".concat(name,">>"),"".concat(w.source.slice(matchStart,w.nextMatch),"…"));if("function"!=typeof macro.handler)return appendError(w.output,"macro <<".concat(name,">> handler function ").concat(void 0===macro.handler?"does not exist":"is not a function"),w.source.slice(matchStart,w.nextMatch));var args=payload?payload[0].args:this.createArgs(rawArgs,this.skipArgs(macro,macro.name));if(void 0!==macro._MACRO_API){this.context=new MacroContext({macro:macro,name:name,args:args,payload:payload,source:w.source.slice(matchStart,w.nextMatch),parent:this.context,parser:w});try{macro.handler.call(this.context)}finally{this.context=this.context.parent}}else{console.warn("[DEPRECATED] The legacy macro API, used by <<".concat(name,">>, is deprecated."));var prevRawArgs=w._rawArgs;w._rawArgs=rawArgs;try{macro.handler(w.output,name,args,w,payload)}finally{w._rawArgs=prevRawArgs}}}catch(ex){return appendError(w.output,"cannot execute ".concat(macro&&macro.isWidget?"widget":"macro"," <<").concat(name,">>: ").concat(ex.message),w.source.slice(matchStart,w.nextMatch))}finally{this.working.source="",this.working.name="",this.working.arguments="",this.working.index=0}}else w.outputText(w.output,w.matchStart,w.nextMatch)},parseTag:function(w){var match=this.lookahead.exec(w.source);return!(!match||match.index!==w.matchStart||!match[1])&&(w.nextMatch=this.lookahead.lastIndex,this.working.source=w.source.slice(match.index,this.lookahead.lastIndex),this.working.name=match[1],this.working.arguments=match[2],this.working.index=match.index,!0)},parseBody:function(w,macro){for(var openTag=this.working.name,closeTag="/".concat(openTag),closeAlt="end".concat(openTag),bodyTags=!!Array.isArray(macro.tags)&&macro.tags,payload=[],end=-1,opened=1,curSource=this.working.source,curTag=this.working.name,curArgument=this.working.arguments,contentStart=w.nextMatch;-1!==(w.matchStart=w.source.indexOf(this.match,w.nextMatch));)if(this.parseTag(w)){var tagSource=this.working.source,tagName=this.working.name,tagArgs=this.working.arguments,tagBegin=this.working.index,tagEnd=w.nextMatch,hasArgs=""!==tagArgs.trim();switch(tagName){case openTag:++opened;break;case closeAlt:case closeTag:if(hasArgs)throw w.nextMatch=tagBegin+2+tagName.length,new Error('malformed closing tag: "'.concat(tagSource,'"'));--opened;break;default:if(hasArgs&&(tagName.startsWith("/")||tagName.startsWith("end"))){this.lookahead.lastIndex=w.nextMatch=tagBegin+2+tagName.length;continue}if(1===opened&&bodyTags)for(var i=0,iend=bodyTags.length;i<iend;++i)tagName===bodyTags[i]&&(payload.push({source:curSource,name:curTag,arguments:curArgument,args:this.createArgs(curArgument,this.skipArgs(macro,curTag)),contents:w.source.slice(contentStart,tagBegin)}),curSource=tagSource,curTag=tagName,curArgument=tagArgs,contentStart=tagEnd)}if(0===opened){payload.push({source:curSource,name:curTag,arguments:curArgument,args:this.createArgs(curArgument,this.skipArgs(macro,curTag)),contents:w.source.slice(contentStart,tagBegin)}),end=tagEnd;break}}else this.lookahead.lastIndex=w.nextMatch=w.matchStart+this.match.length;return-1!==end?(w.nextMatch=end,payload):null},createArgs:function(rawArgsString,skipArgs){var args=skipArgs?[]:this.parseArgs(rawArgsString);return Object.defineProperties(args,{raw:{value:rawArgsString},full:{value:Scripting.desugar(rawArgsString)}}),args},skipArgs:function(macro,tagName){if(void 0!==macro.skipArgs){var sa=macro.skipArgs;return"boolean"==typeof sa&&sa||Array.isArray(sa)&&sa.includes(tagName)}return void 0!==macro.skipArg0&&(macro.skipArg0&&macro.name===tagName)},parseArgs:function(){var Item=Lexer.enumFromNames(["Error","Bareword","Expression","String","SquareBracket"]),spaceRe=new RegExp(Patterns.space),notSpaceRe=new RegExp(Patterns.notSpace),varTest=new RegExp("^".concat(Patterns.variable));function slurpQuote(lexer,endQuote){loop:for(;;)switch(lexer.next()){case"\\":var ch=lexer.next();if(ch!==EOF&&"\n"!==ch)break;case EOF:case"\n":return EOF;case endQuote:break loop}return lexer.pos}function lexSpace(lexer){var offset=lexer.source.slice(lexer.pos).search(notSpaceRe);if(offset===EOF)return null;switch(0!==offset&&(lexer.pos+=offset,lexer.ignore()),lexer.next()){case"`":return lexExpression;case'"':return lexDoubleQuote;case"'":return lexSingleQuote;case"[":return lexSquareBracket;default:return lexBareword}}function lexExpression(lexer){return slurpQuote(lexer,"`")===EOF?lexer.error(Item.Error,"unterminated backquote expression"):(lexer.emit(Item.Expression),lexSpace)}function lexDoubleQuote(lexer){return slurpQuote(lexer,'"')===EOF?lexer.error(Item.Error,"unterminated double quoted string"):(lexer.emit(Item.String),lexSpace)}function lexSingleQuote(lexer){return slurpQuote(lexer,"'")===EOF?lexer.error(Item.Error,"unterminated single quoted string"):(lexer.emit(Item.String),lexSpace)}function lexSquareBracket(lexer){var what;if(lexer.accept("<>IiMmGg")?(what="image",lexer.acceptRun("<>IiMmGg")):what="link",!lexer.accept("["))return lexer.error(Item.Error,"malformed ".concat(what," markup"));lexer.depth=2;loop:for(;;)switch(lexer.next()){case"\\":var ch=lexer.next();if(ch!==EOF&&"\n"!==ch)break;case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case"[":++lexer.depth;break;case"]":if(--lexer.depth,lexer.depth<0)return lexer.error(Item.Error,"unexpected right square bracket ']'");if(1===lexer.depth){if("]"===lexer.next()){--lexer.depth;break loop}lexer.backup()}}return lexer.emit(Item.SquareBracket),lexSpace}function lexBareword(lexer){var offset=lexer.source.slice(lexer.pos).search(spaceRe);return lexer.pos=offset===EOF?lexer.source.length:lexer.pos+offset,lexer.emit(Item.Bareword),offset===EOF?null:lexSpace}return function(rawArgsString){var lexer=new Lexer(rawArgsString,lexSpace),args=[];return lexer.run().forEach((function(item){var arg=item.text;switch(item.type){case Item.Error:throw new Error('unable to parse macro argument "'.concat(arg,'": ').concat(item.message));case Item.Bareword:if(varTest.test(arg))arg=State.getVar(arg);else if(/^(?:settings|setup)[.[]/.test(arg))try{arg=Scripting.evalTwineScript(arg)}catch(ex){throw new Error('unable to parse macro argument "'.concat(arg,'": ').concat(ex.message))}else if("null"===arg)arg=null;else if("undefined"===arg)arg=undefined;else if("true"===arg)arg=!0;else if("false"===arg)arg=!1;else if("NaN"===arg)arg=NaN;else{var argAsNum=Number(arg);Number.isNaN(argAsNum)||(arg=argAsNum)}break;case Item.Expression:if(""===(arg=arg.slice(1,-1).trim()))arg=undefined;else try{arg=Scripting.evalTwineScript("(".concat(arg,")"))}catch(ex){throw new Error('unable to parse macro argument expression "'.concat(arg,'": ').concat(ex.message))}break;case Item.String:try{arg=Scripting.evalJavaScript(arg)}catch(ex){throw new Error('unable to parse macro argument string "'.concat(arg,'": ').concat(ex.message))}break;case Item.SquareBracket:var markup=Wikifier.helpers.parseSquareBracketedMarkup({source:arg,matchStart:0});if(Object.hasOwn(markup,"error"))throw new Error('unable to parse macro argument "'.concat(arg,'": ').concat(markup.error));if(markup.pos<arg.length)throw new Error('unable to parse macro argument "'.concat(arg,'": unexpected character(s) "').concat(arg.slice(markup.pos),'" (pos: ').concat(markup.pos,")"));markup.isLink?((arg={isLink:!0}).count=Object.hasOwn(markup,"text")?2:1,arg.link=Wikifier.helpers.evalPassageId(markup.link),arg.text=Object.hasOwn(markup,"text")?Wikifier.helpers.evalText(markup.text):arg.link,arg.external=!markup.forceInternal&&Wikifier.isExternalLink(arg.link),arg.setFn=Object.hasOwn(markup,"setter")?Wikifier.helpers.shadowHandler(Scripting.desugar(markup.setter)):null):markup.isImage&&(arg=function(source){var imgObj={source:source,isImage:!0};if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(imgObj.source=passage.text,imgObj.passage=passage.name)}return imgObj}(Wikifier.helpers.evalPassageId(markup.source)),Object.hasOwn(markup,"align")&&(arg.align=markup.align),Object.hasOwn(markup,"text")&&(arg.title=Wikifier.helpers.evalText(markup.text)),Object.hasOwn(markup,"link")&&(arg.link=Wikifier.helpers.evalPassageId(markup.link),arg.external=!markup.forceInternal&&Wikifier.isExternalLink(arg.link)),arg.setFn=Object.hasOwn(markup,"setter")?Wikifier.helpers.shadowHandler(Scripting.desugar(markup.setter)):null)}args.push(arg)})),args}}()}),Wikifier.Parser.add({name:"link",profiles:["core"],match:"\\[\\[[^[]",handler:function(w){var markup=Wikifier.helpers.parseSquareBracketedMarkup(w);if(Object.hasOwn(markup,"error"))w.outputText(w.output,w.matchStart,w.nextMatch);else{w.nextMatch=markup.pos;var link=Wikifier.helpers.evalPassageId(markup.link),text=Object.hasOwn(markup,"text")?Wikifier.helpers.evalText(markup.text):link,setFn=Object.hasOwn(markup,"setter")?Wikifier.helpers.shadowHandler(Scripting.desugar(markup.setter)):null,output=(Config.debug?new DebugView(w.output,"link-markup","[[link]]",w.source.slice(w.matchStart,w.nextMatch)):w).output;markup.forceInternal||!Wikifier.isExternalLink(link)?Wikifier.createInternalLink(output,link,text,setFn):Wikifier.createExternalLink(output,link,text)}}}),Wikifier.Parser.add({name:"urlLink",profiles:["core"],match:Patterns.url,handler:function(w){w.outputText(Wikifier.createExternalLink(w.output,w.matchText),w.matchStart,w.nextMatch)}}),Wikifier.Parser.add({name:"image",profiles:["core"],match:"\\[[<>]?[Ii][Mm][Gg]\\[",handler:function(w){var markup=Wikifier.helpers.parseSquareBracketedMarkup(w);if(Object.hasOwn(markup,"error"))w.outputText(w.output,w.matchStart,w.nextMatch);else{var debugView;w.nextMatch=markup.pos,Config.debug&&(debugView=new DebugView(w.output,"image-markup",Object.hasOwn(markup,"link")?"[img[][link]]":"[img[]]",w.source.slice(w.matchStart,w.nextMatch))).modes({block:!0});var source,setFn=Object.hasOwn(markup,"setter")?Wikifier.helpers.shadowHandler(Scripting.desugar(markup.setter)):null,el=(Config.debug?debugView:w).output;if(Object.hasOwn(markup,"link")){var link=Wikifier.helpers.evalPassageId(markup.link);(el=markup.forceInternal||!Wikifier.isExternalLink(link)?Wikifier.createInternalLink(el,link,null,setFn):Wikifier.createExternalLink(el,link)).classList.add("link-image")}if(el=jQuery(document.createElement("img")).appendTo(el).get(0),"data:"!==(source=Wikifier.helpers.evalPassageId(markup.source)).slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(el.setAttribute("data-passage",passage.name),source=passage.text.trim())}el.src=source,Object.hasOwn(markup,"text")&&(el.title=Wikifier.helpers.evalText(markup.text)),Object.hasOwn(markup,"align")&&(el.align=markup.align)}}}),Wikifier.Parser.add({name:"monospacedByBlock",profiles:["block"],match:"^\\{\\{\\{\\n",lookahead:/^\{\{\{\n((?:^[^\n]*\n)+?)(^\}\}\}$\n?)/gm,handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);if(match&&match.index===w.matchStart){var pre=jQuery(document.createElement("pre"));jQuery(document.createElement("code")).text(match[1]).appendTo(pre),pre.appendTo(w.output),w.nextMatch=this.lookahead.lastIndex}}}),Wikifier.Parser.add({name:"formatByChar",profiles:["core"],match:"''|//|__|\\^\\^|~~|==|\\{\\{\\{",handler:function(w){switch(w.matchText){case"''":w.subWikify(jQuery(document.createElement("strong")).appendTo(w.output).get(0),"''");break;case"//":w.subWikify(jQuery(document.createElement("em")).appendTo(w.output).get(0),"//");break;case"__":w.subWikify(jQuery(document.createElement("u")).appendTo(w.output).get(0),"__");break;case"^^":w.subWikify(jQuery(document.createElement("sup")).appendTo(w.output).get(0),"\\^\\^");break;case"~~":w.subWikify(jQuery(document.createElement("sub")).appendTo(w.output).get(0),"~~");break;case"==":w.subWikify(jQuery(document.createElement("s")).appendTo(w.output).get(0),"==");break;case"{{{":var lookahead=/\{\{\{((?:.|\n)*?)\}\}\}/gm;lookahead.lastIndex=w.matchStart;var match=lookahead.exec(w.source);match&&match.index===w.matchStart&&(jQuery(document.createElement("code")).text(match[1]).appendTo(w.output),w.nextMatch=lookahead.lastIndex)}}}),Wikifier.Parser.add({name:"customStyle",profiles:["core"],match:"@@",terminator:"@@",blockRe:/\s*\n/gm,handler:function(w){var css=Wikifier.helpers.inlineCss(w);this.blockRe.lastIndex=w.nextMatch;var blockMatch=this.blockRe.exec(w.source),blockLevel=blockMatch&&blockMatch.index===w.nextMatch,$el=jQuery(document.createElement(blockLevel?"div":"span")).appendTo(w.output);0===css.classes.length&&""===css.id&&0===Object.keys(css.styles).length?$el.addClass("marked"):(css.classes.forEach((function(className){return $el.addClass(className)})),""!==css.id&&$el.attr("id",css.id),$el.css(css.styles)),blockLevel?(w.nextMatch+=blockMatch[0].length,w.subWikify($el[0],"\\n?".concat(this.terminator))):w.subWikify($el[0],this.terminator)}}),Wikifier.Parser.add({name:"verbatimText",profiles:["core"],match:'"{3}|<[Nn][Oo][Ww][Ii][Kk][Ii]>',lookahead:/(?:"{3}((?:.|\n)*?)"{3})|(?:<[Nn][Oo][Ww][Ii][Kk][Ii]>((?:.|\n)*?)<\/[Nn][Oo][Ww][Ii][Kk][Ii]>)/gm,handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);match&&match.index===w.matchStart&&(w.nextMatch=this.lookahead.lastIndex,jQuery(document.createElement("span")).addClass("verbatim").text(match[1]||match[2]).appendTo(w.output))}}),Wikifier.Parser.add({name:"horizontalRule",profiles:["core"],match:"^----+\\s*$",handler:function(w){jQuery(document.createElement("hr")).appendTo(w.output)}}),Wikifier.Parser.add({name:"emdash",profiles:["core"],match:"--",handler:function(w){jQuery(document.createTextNode("—")).appendTo(w.output)}}),Wikifier.Parser.add({name:"doubleDollarSign",profiles:["core"],match:"\\${2}",handler:function(w){jQuery(document.createTextNode("$")).appendTo(w.output)}}),Wikifier.Parser.add({name:"nakedVariable",profiles:["core"],match:"".concat(Patterns.variable,"(?:(?:\\.").concat(Patterns.identifier,")|(?:\\[\\d+\\])|(?:\\[\"(?:\\\\.|[^\"\\\\])+\"\\])|(?:\\['(?:\\\\.|[^'\\\\])+'\\])|(?:\\[").concat(Patterns.variable,"\\]))*"),handler:function(w){var result=State.getVar(w.matchText);null==result?jQuery(document.createTextNode(w.matchText)).appendTo(w.output):new Wikifier((Config.debug?new DebugView(w.output,"variable",w.matchText,w.matchText):w).output,stringFrom(result))}}),Wikifier.Parser.add({name:"template",profiles:["core"],match:"\\?".concat(Patterns.templateName),handler:function(w){var name=w.matchText.slice(1),template=Template.get(name),result=null;switch(template instanceof Array&&(template=template.random()),_typeof(template)){case"function":try{result=stringFrom(template.call({name:name}))}catch(ex){return appendError(w.output,"cannot execute function template ?".concat(name,": ").concat(ex.message),w.source.slice(w.matchStart,w.nextMatch))}break;case"string":result=template}null===result?jQuery(document.createTextNode(w.matchText)).appendTo(w.output):new Wikifier((Config.debug?new DebugView(w.output,"template",w.matchText,w.matchText):w).output,result)}}),Wikifier.Parser.add({name:"heading",profiles:["block"],match:"^!{1,6}",terminator:"\\n",handler:function(w){Wikifier.helpers.hasBlockContext(w.output.childNodes)?w.subWikify(jQuery(document.createElement("h".concat(w.matchLength))).appendTo(w.output).get(0),this.terminator):jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"table",profiles:["block"],match:"^\\|(?:[^\\n]*)\\|(?:[fhck]?)$",lookahead:/^\|([^\n]*)\|([fhck]?)$/gm,rowTerminator:"\\|(?:[cfhk]?)$\\n?",cellPattern:"(?:\\|([^\\n\\|]*)\\|)|(\\|[cfhk]?$\\n?)",cellTerminator:"(?:\\u0020*)\\|",rowTypes:{c:"caption",f:"tfoot",h:"thead","":"tbody"},handler:function(w){if(Wikifier.helpers.hasBlockContext(w.output.childNodes)){var matched,table=jQuery(document.createElement("table")).appendTo(w.output).get(0),prevColumns=[],curRowType=null,$rowContainer=null,rowCount=0;w.nextMatch=w.matchStart;do{this.lookahead.lastIndex=w.nextMatch;var match=this.lookahead.exec(w.source);if(matched=match&&match.index===w.nextMatch){var nextRowType=match[2];"k"===nextRowType?(table.className=match[1],w.nextMatch+=match[0].length+1):(nextRowType!==curRowType&&(curRowType=nextRowType,$rowContainer=jQuery(document.createElement(this.rowTypes[nextRowType])).appendTo(table)),"c"===curRowType?($rowContainer.css("caption-side",0===rowCount?"top":"bottom"),w.nextMatch+=1,w.subWikify($rowContainer[0],this.rowTerminator)):this.rowHandler(w,jQuery(document.createElement("tr")).appendTo($rowContainer).get(0),prevColumns),++rowCount)}}while(matched)}else jQuery(w.output).append(document.createTextNode(w.matchText))},rowHandler:function(w,rowEl,prevColumns){var matched,_this10=this,cellRe=new RegExp(this.cellPattern,"gm"),col=0,curColCount=1,_loop5=function(){cellRe.lastIndex=w.nextMatch;var cellMatch=cellRe.exec(w.source);if(matched=cellMatch&&cellMatch.index===w.nextMatch){if("~"===cellMatch[1]){var last=prevColumns[col];last&&(++last.rowCount,last.$element.attr("rowspan",last.rowCount).css("vertical-align","middle")),w.nextMatch=cellMatch.index+cellMatch[0].length-1}else if(">"===cellMatch[1])++curColCount,w.nextMatch=cellMatch.index+cellMatch[0].length-1;else{if(cellMatch[2])return w.nextMatch=cellMatch.index+cellMatch[0].length,1;++w.nextMatch;for(var $cell,css=Wikifier.helpers.inlineCss(w),spaceLeft=!1,spaceRight=!1;" "===w.source.substr(w.nextMatch,1);)spaceLeft=!0,++w.nextMatch;"!"===w.source.substr(w.nextMatch,1)?($cell=jQuery(document.createElement("th")).appendTo(rowEl),++w.nextMatch):$cell=jQuery(document.createElement("td")).appendTo(rowEl),prevColumns[col]={rowCount:1,$element:$cell},curColCount>1&&($cell.attr("colspan",curColCount),curColCount=1),w.subWikify($cell[0],_this10.cellTerminator)," "===w.matchText.substr(w.matchText.length-2,1)&&(spaceRight=!0),css.classes.forEach((function(className){return $cell.addClass(className)})),""!==css.id&&$cell.attr("id",css.id),spaceLeft&&spaceRight?css.styles["text-align"]="center":spaceLeft?css.styles["text-align"]="right":spaceRight&&(css.styles["text-align"]="left"),$cell.css(css.styles),w.nextMatch=w.nextMatch-1}++col}};do{if(_loop5())break}while(matched)}}),Wikifier.Parser.add({name:"list",profiles:["block"],match:"^(?:(?:\\*+)|(?:#+))",lookahead:/^(?:(\*+)|(#+))/gm,terminator:"\\n",handler:function(w){if(Wikifier.helpers.hasBlockContext(w.output.childNodes)){w.nextMatch=w.matchStart;var matched,i,destStack=[w.output],curType=null,curLevel=0;do{this.lookahead.lastIndex=w.nextMatch;var match=this.lookahead.exec(w.source);if(matched=match&&match.index===w.nextMatch){var newType=match[2]?"ol":"ul",newLevel=match[0].length;if(w.nextMatch+=match[0].length,newLevel>curLevel)for(i=curLevel;i<newLevel;++i)destStack.push(jQuery(document.createElement(newType)).appendTo(destStack[destStack.length-1]).get(0));else if(newLevel<curLevel)for(i=curLevel;i>newLevel;--i)destStack.pop();else newLevel===curLevel&&newType!==curType&&(destStack.pop(),destStack.push(jQuery(document.createElement(newType)).appendTo(destStack[destStack.length-1]).get(0)));curLevel=newLevel,curType=newType,w.subWikify(jQuery(document.createElement("li")).appendTo(destStack[destStack.length-1]).get(0),this.terminator)}}while(matched)}else jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"commentByBlock",profiles:["core"],match:"(?:/(?:%|\\*))|(?:\x3c!--)",lookahead:/(?:\/(%|\*)(?:(?:.|\n)*?)\1\/)|(?:<!--(?:(?:.|\n)*?)-->)/gm,handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);match&&match.index===w.matchStart&&(w.nextMatch=this.lookahead.lastIndex)}}),Wikifier.Parser.add({name:"lineContinuation",profiles:["core"],match:"\\\\".concat(Patterns.spaceNoTerminator,"*\\n|\\n").concat(Patterns.spaceNoTerminator,"*\\\\|\\n?\\\\").concat(Patterns.spaceNoTerminator,"*$|^").concat(Patterns.spaceNoTerminator,"*\\\\\\n?"),handler:function(w){w.nextMatch=w.matchStart+w.matchLength}}),Wikifier.Parser.add({name:"lineBreak",profiles:["core"],match:"\\n",handler:function(w){w.options.nobr||jQuery(document.createElement("br")).appendTo(w.output)}}),Wikifier.Parser.add({name:"htmlCharacterReference",profiles:["core"],match:"(?:(?:&#?[0-9A-Za-z]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9A-Fa-f]|1D[C-Fc-f][0-9A-Fa-f]|20[D-Fd-f][0-9A-Fa-f]|FE2[0-9A-Fa-f])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[0-9A-Za-z]{2,8};)",handler:function(w){jQuery(document.createDocumentFragment()).append(w.matchText).appendTo(w.output)}}),Wikifier.Parser.add({name:"xmlProlog",profiles:["core"],match:"<\\?[Xx][Mm][Ll][^>]*\\?>",handler:function(w){w.nextMatch=w.matchStart+w.matchLength}}),Wikifier.Parser.add({name:"verbatimHtml",profiles:["core"],match:"<[Hh][Tt][Mm][Ll]>",lookahead:/<[Hh][Tt][Mm][Ll]>((?:.|\n)*?)<\/[Hh][Tt][Mm][Ll]>/gm,handler:_verbatimTagHandler}),Wikifier.Parser.add({name:"verbatimScriptTag",profiles:["core"],match:"<[Ss][Cc][Rr][Ii][Pp][Tt][^>]*>",lookahead:/(<[Ss][Cc][Rr][Ii][Pp][Tt][^>]*>(?:.|\n)*?<\/[Ss][Cc][Rr][Ii][Pp][Tt]>)/gm,handler:_verbatimTagHandler}),Wikifier.Parser.add({name:"styleTag",profiles:["core"],match:"<[Ss][Tt][Yy][Ll][Ee][^>]*>",lookahead:/(<[Ss][Tt][Yy][Ll][Ee][^>]*>)((?:.|\n)*?)(<\/[Ss][Tt][Yy][Ll][Ee]>)/gm,imageMarkup:new RegExp(Patterns.cssImage,"g"),hasImageMarkup:new RegExp(Patterns.cssImage),handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);if(match&&match.index===w.matchStart){w.nextMatch=this.lookahead.lastIndex;var css=match[2];this.hasImageMarkup.test(css)&&(this.imageMarkup.lastIndex=0,css=css.replace(this.imageMarkup,(function(wikiImage){var markup=Wikifier.helpers.parseSquareBracketedMarkup({source:wikiImage,matchStart:0});if(Object.hasOwn(markup,"error")||markup.pos<wikiImage.length)return wikiImage;var source=Wikifier.helpers.evalPassageId(markup.source);if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(source=passage.text)}return'url("'.concat(source.replace(/"/g,"%22"),'")')}))),jQuery(document.createDocumentFragment()).append(match[1]+css+match[3]).appendTo(w.output)}}}),Wikifier.Parser.add({name:"svgTag",profiles:["core"],match:"<[Ss][Vv][Gg][^>]*>",lookahead:/<(\/?)[Ss][Vv][Gg][^>]*>/gm,namespace:"http://www.w3.org/2000/svg",handler:function(w){var _this11=this;this.lookahead.lastIndex=w.nextMatch;for(var match,depth=1;depth>0&&null!==(match=this.lookahead.exec(w.source));)depth+="/"===match[1]?-1:1;if(0===depth){w.nextMatch=this.lookahead.lastIndex;var svgTag=w.source.slice(w.matchStart,this.lookahead.lastIndex),$frag=jQuery(document.createDocumentFragment()).append(svgTag);$frag.find("a[data-passage],image[data-passage]").each((function(_,el){var tagName=el.tagName.toLowerCase();try{_this11.processAttributeDirectives(el)}catch(ex){return appendError(w.output,"svg|<".concat(tagName,">: ").concat(ex.message),"".concat(w.matchText,"…"))}el.hasAttribute("data-passage")&&_this11.processDataAttributes(el,tagName)})),$frag.appendTo(w.output)}},processAttributeDirectives:function(el){Array.from(el.attributes).forEach((function(_ref11){var name=_ref11.name,value=_ref11.value,evalShorthand="@"===name[0];if(evalShorthand||name.startsWith("sc-eval:")){var result,newName=name.slice(evalShorthand?1:8);if("data-setter"===newName)throw new Error('evaluation directive is not allowed on the data-setter attribute: "'.concat(name,'"'));try{result=Scripting.evalTwineScript(value)}catch(ex){throw new Error('bad evaluation from attribute directive "'.concat(name,'": ').concat(ex.message))}try{el.setAttribute(newName,result),el.removeAttribute(name)}catch(ex){throw new Error('cannot transform attribute directive "'.concat(name,'" into attribute "').concat(newName,'"'))}}}))},processDataAttributes:function(el,tagName){var passage=el.getAttribute("data-passage");if(null!=passage){var evaluated=Wikifier.helpers.evalPassageId(passage);if(evaluated!==passage&&(passage=evaluated,el.setAttribute("data-passage",evaluated)),""!==passage)if("image"===tagName)"data:"!==passage.slice(0,5)&&Story.has(passage)&&(passage=Story.get(passage)).tags.includes("Twine.image")&&el.setAttribute("href",passage.text.trim());else{var setFn,setter=el.getAttribute("data-setter");null!=setter&&""!==(setter=String(setter).trim())&&(setFn=Wikifier.helpers.shadowHandler(Scripting.desugar(setter))),Story.has(passage)?(el.classList.add("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&el.classList.add("link-visited")):el.classList.add("link-broken"),jQuery(el).ariaClick({one:!0},(function(){"function"==typeof setFn&&setFn.call(this),Engine.play(passage)}))}}}}),Wikifier.Parser.add({name:"htmlTag",profiles:["core"],match:"<".concat(Patterns.htmlTagName,"(?:\\s+[^\\u0000-\\u001F\\u007F-\\u009F\\s\"'>\\/=]+(?:\\s*=\\s*(?:\"[^\"]*?\"|'[^']*?'|[^\\s\"'=<>`]+))?)*\\s*\\/?>"),tagRe:new RegExp("^<(".concat(Patterns.htmlTagName,")")),mediaTags:["audio","img","source","track","video"],nobrTags:["audio","colgroup","datalist","dl","figure","meter","ol","optgroup","picture","progress","ruby","select","table","tbody","tfoot","thead","tr","ul","video"],voidTags:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],handler:function(w){var tagMatch=this.tagRe.exec(w.matchText),tag=tagMatch&&tagMatch[1],tagName=tag&&tag.toLowerCase();if(tagName){var terminator,terminatorMatch,isVoid=this.voidTags.includes(tagName)||w.matchText.endsWith("/>"),isNobr=this.nobrTags.includes(tagName);if(!isVoid){terminator="<\\/".concat(tagName,"\\s*>");var terminatorRe=new RegExp(terminator,"gim");terminatorRe.lastIndex=w.matchStart,terminatorMatch=terminatorRe.exec(w.source)}if(!isVoid&&!terminatorMatch)return appendError(w.output,"cannot find a closing tag for HTML <".concat(tag,">"),"".concat(w.matchText,"…"));var debugView,output=w.output,el=document.createElement(w.output.tagName);for(el.innerHTML=w.matchText;el.firstChild;)el=el.firstChild;try{this.processAttributeDirectives(el)}catch(ex){return appendError(w.output,"<".concat(tagName,">: ").concat(ex.message),"".concat(w.matchText,"…"))}if(el.hasAttribute("data-passage")){if(el.hasAttribute("href"))return appendError(w.output,"<".concat(tagName,'>: elements may not include both "data-passage" and "href" atttributes'),"".concat(w.matchText,"…"));this.processDataAttributes(el,tagName),Config.debug&&((debugView=new DebugView(w.output,"html-".concat(tagName),tagName,w.matchText)).modes({block:"img"===tagName,nonvoid:terminatorMatch}),output=debugView.output)}else el.hasAttribute("href")&&Wikifier.isExternalLink(el.getAttribute("href"))&&el.classList.add("link-external");if(terminatorMatch){try{Wikifier.Option.push({nobr:isNobr}),w.subWikify(el,terminator,{ignoreTerminatorCase:!0})}finally{Wikifier.Option.pop()}debugView&&jQuery(el).find(".debug.block").length>0&&debugView.modes({block:!0})}output.appendChild("track"===tagName?el.cloneNode(!0):el)}},processAttributeDirectives:function(el){Array.from(el.attributes).forEach((function(_ref12){var name=_ref12.name,value=_ref12.value,evalShorthand="@"===name[0];if(evalShorthand||name.startsWith("sc-eval:")){var result,newName=name.slice(evalShorthand?1:8);if("data-setter"===newName)throw new Error('evaluation directive is not allowed on the data-setter attribute: "'.concat(name,'"'));try{result=Scripting.evalTwineScript(value)}catch(ex){throw new Error('bad evaluation from attribute directive "'.concat(name,'": ').concat(ex.message))}try{el.setAttribute(newName,result),el.removeAttribute(name)}catch(ex){throw new Error('cannot transform attribute directive "'.concat(name,'" into attribute "').concat(newName,'"'))}}}))},processDataAttributes:function(el,tagName){var passage=el.getAttribute("data-passage");if(null!=passage){var evaluated=Wikifier.helpers.evalPassageId(passage);if(evaluated!==passage&&(passage=evaluated,el.setAttribute("data-passage",evaluated)),""!==passage)if(this.mediaTags.includes(tagName)){if("data:"!==passage.slice(0,5)&&Story.has(passage)){var parentName,twineTag;switch(passage=Story.get(passage),tagName){case"audio":case"video":twineTag="Twine.".concat(tagName);break;case"img":twineTag="Twine.image";break;case"track":twineTag="Twine.vtt";break;case"source":var $parent=$(el).closest("audio,picture,video");$parent.length>0&&(parentName=$parent.get(0).tagName.toLowerCase(),twineTag="Twine.".concat("picture"===parentName?"image":parentName))}passage.tags.includes(twineTag)&&(el["picture"===parentName?"srcset":"src"]=passage.text.trim())}}else{var setFn,setter=el.getAttribute("data-setter");null!=setter&&""!==(setter=String(setter).trim())&&(setFn=Wikifier.helpers.shadowHandler(Scripting.desugar(setter))),Story.has(passage)?(el.classList.add("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&el.classList.add("link-visited")):el.classList.add("link-broken"),jQuery(el).ariaClick({one:!0},(function(){"function"==typeof setFn&&setFn.call(this),Engine.play(passage)}))}}}})}();var Template=(_templates=new Map,_validNameRe=new RegExp("^(?:".concat(Patterns.templateName,")$")),_validType=function(template){var templateType=_typeof(template);return"function"===templateType||"string"===templateType},Object.preventExtensions(Object.create(null,{add:{value:function(name,template){if(!(_validType(template)||template instanceof Array&&template.length>0&&template.every(_validType)))throw new TypeError("invalid template type (".concat(name,"); templates must be: functions, strings, or an array of either"));(name instanceof Array?name:[name]).forEach((function(name){if(!_validNameRe.test(name))throw new Error('invalid template name "'.concat(name,'"'));if(_templates.has(name))throw new Error("cannot clobber existing template ?".concat(name));_templates.set(name,template)}))}},delete:{value:function(name){(name instanceof Array?name:[name]).forEach((function(name){return _templates.delete(name)}))}},get:{value:function(name){return _templates.has(name)?_templates.get(name):null}},has:{value:function(name){return _templates.has(name)}},size:{get:function(){return _templates.size}}}))),_templates,_validNameRe,_validType,Macro=function(){var _macros={},_tags={},_validNameRe=new RegExp("^(?:".concat(Patterns.macroName,")$"));function macrosHas(name){return Object.hasOwn(_macros,name)}function tagsRegister(parent,bodyTags){if(!parent)throw new Error("no parent specified");for(var endTags=["/".concat(parent),"end".concat(parent)],allTags=[].concat(endTags,Array.isArray(bodyTags)?bodyTags:[]),i=0;i<allTags.length;++i){var tag=allTags[i];if(macrosHas(tag))throw new Error("cannot register tag for an existing macro");tagsHas(tag)?_tags[tag].includes(parent)||(_tags[tag].push(parent),_tags[tag].sort()):_tags[tag]=[parent]}}function tagsUnregister(parent){if(!parent)throw new Error("no parent specified");Object.keys(_tags).forEach((function(tag){var i=_tags[tag].indexOf(parent);-1!==i&&(1===_tags[tag].length?delete _tags[tag]:_tags[tag].splice(i,1))}))}function tagsHas(name){return Object.hasOwn(_tags,name)}return Object.preventExtensions(Object.create(null,{add:{value:function macrosAdd(name,def){if(Array.isArray(name))name.forEach((function(name){return macrosAdd(name,def)}));else{if(!_validNameRe.test(name))throw new Error('invalid macro name "'.concat(name,'"'));if(macrosHas(name))throw new Error("cannot clobber existing macro <<".concat(name,">>"));if(tagsHas(name))throw new Error("cannot clobber child tag <<".concat(name,">> of parent macro").concat(1===_tags[name].length?"":"s"," <<").concat(_tags[name].join(">>, <<"),">>"));try{if("object"===_typeof(def))_macros[name]=Object.assign(Object.create(null),def,{_MACRO_API:!0});else{if(!macrosHas(def))throw new Error("cannot create alias of nonexistent macro <<".concat(def,">>"));_macros[name]=Object.create(_macros[def],{_ALIAS_OF:{enumerable:!0,value:def}})}Object.defineProperty(_macros,name,{writable:!1})}catch(ex){throw"TypeError"===ex.name?new Error("cannot clobber protected macro <<".concat(name,">>")):new Error("unknown error when attempting to add macro <<".concat(name,">>: [").concat(ex.name,"] ").concat(ex.message))}if(void 0!==_macros[name].tags)if(null==_macros[name].tags)tagsRegister(name);else{if(!Array.isArray(_macros[name].tags))throw new Error('bad value for "tags" property of macro <<'.concat(name,">>"));tagsRegister(name,_macros[name].tags)}}}},delete:{value:function macrosDelete(name){if(Array.isArray(name))name.forEach((function(name){return macrosDelete(name)}));else if(macrosHas(name)){void 0!==_macros[name].tags&&tagsUnregister(name);try{Object.defineProperty(_macros,name,{writable:!0}),delete _macros[name]}catch(ex){throw new Error("unknown error removing macro <<".concat(name,">>: ").concat(ex.message))}}else if(tagsHas(name))throw new Error("cannot remove child tag <<".concat(name,">> of parent macro <<").concat(_tags[name],">>"))}},isEmpty:{value:function(){return 0===Object.keys(_macros).length}},has:{value:macrosHas},get:{value:function(name){var macro=null;return macrosHas(name)&&"function"==typeof _macros[name].handler?macro=_macros[name]:Object.hasOwn(macros,name)&&"function"==typeof macros[name].handler&&(macro=macros[name]),macro}},init:{value:function(){var handler=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"init";Object.keys(_macros).forEach((function(name){"function"==typeof _macros[name][handler]&&_macros[name][handler](name)})),Object.keys(macros).forEach((function(name){"function"==typeof macros[name][handler]&&macros[name][handler](name)}))}},tags:{value:Object.preventExtensions(Object.create(null,{register:{value:tagsRegister},unregister:{value:tagsUnregister},has:{value:tagsHas},get:{value:function(name){return tagsHas(name)?_tags[name]:null}}}))},evalStatements:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}}}))}(),MacroContext=function(){var MacroContext=function(){return _createClass((function MacroContext(contextData){_classCallCheck(this,MacroContext);var context=Object.assign({parent:null,macro:null,name:"",displayName:"",args:null,payload:null,parser:null,source:""},contextData);if(null===context.macro||""===context.name||null===context.parser)throw new TypeError("context object missing required properties");Object.defineProperties(this,{self:{value:context.macro},name:{value:void 0===context.macro._ALIAS_OF?context.name:context.macro._ALIAS_OF},displayName:{value:context.name},args:{value:context.args},payload:{value:context.payload},source:{value:context.source},parent:{value:context.parent},parser:{value:context.parser},_output:{value:context.parser.output},_shadows:{writable:!0,value:null},_debugView:{writable:!0,value:null},_debugViewEnabled:{writable:!0,value:Config.debug}})}),[{key:"output",get:function(){return this._debugViewEnabled?this.debugView.output:this._output}},{key:"shadows",get:function(){return Array.from(this._shadows)}},{key:"shadowView",get:function(){for(var view=new Set,context=this;null!==context;context=context.parent)context._shadows&&context._shadows.forEach((function(name){return view.add(name)}));return Array.from(view)}},{key:"debugView",get:function(){return this._debugViewEnabled?null!==this._debugView?this._debugView:this.createDebugView():null}},{key:"contextFilter",value:function(predicate,thisArg){if("function"!=typeof predicate)throw new TypeError("<MacroContext>.contextFilter() predicate parameter must be a function");for(var result=[],context=this.parent;null!==context;context=context.parent)predicate.call(void 0===thisArg?this:thisArg,context)&&result.push(context);return result}},{key:"contextFind",value:function(predicate,thisArg){if("function"!=typeof predicate)throw new TypeError("<MacroContext>.contextFind() predicate parameter must be a function");for(var context=this.parent;null!==context;context=context.parent)if(predicate.call(void 0===thisArg?this:thisArg,context))return context}},{key:"contextSome",value:function(predicate,thisArg){if("function"!=typeof predicate)throw new TypeError("<MacroContext>.contextSome() predicate parameter must be a function");for(var context=this.parent;null!==context;context=context.parent)if(predicate.call(void 0===thisArg?this:thisArg,context))return!0;return!1}},{key:"addShadow",value:function(){var _this12=this;this._shadows||(this._shadows=new Set);for(var varRe=new RegExp("^".concat(Patterns.variable,"$")),_len14=arguments.length,names=new Array(_len14),_key14=0;_key14<_len14;_key14++)names[_key14]=arguments[_key14];names.flat(1/0).forEach((function(name){if("string"!=typeof name)throw new TypeError("variable name must be a string; type: ".concat(_typeof(name)));if(!varRe.test(name))throw new Error('invalid variable name "'.concat(name,'"'));_this12._shadows.add(name)}))}},{key:"shadowHandler",value:function(callback,doneCallback,startCallback){var shadowStore,shadowContext=this;return"function"==typeof callback&&(shadowStore=Object.create(null),this.shadowView.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey]}))),function(){for(var _len15=arguments.length,args=new Array(_len15),_key15=0;_key15<_len15;_key15++)args[_key15]=arguments[_key15];if("function"==typeof startCallback&&startCallback.apply(this,args),"function"==typeof callback){var contextCache,shadowNames=Object.keys(shadowStore),valueCache=shadowNames.length>0?{}:null,macroParser=Wikifier.Parser.get("macro");try{shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;Object.hasOwn(store,varKey)&&(valueCache[varKey]=store[varKey]),store[varKey]=shadowStore[varName]})),contextCache=macroParser.context,macroParser.context=shadowContext,callback.apply(this,args)}finally{contextCache!==undefined&&(macroParser.context=contextCache),shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey],Object.hasOwn(valueCache,varKey)?store[varKey]=valueCache[varKey]:delete store[varKey]}))}}"function"==typeof doneCallback&&doneCallback.apply(this,args)}}},{key:"createDebugView",value:function(name,title){return this._debugView=new DebugView(this._output,"macro",name||this.displayName,title||this.source),null!==this.payload&&this.payload.length>0&&this._debugView.modes({nonvoid:!0}),this._debugViewEnabled=!0,this._debugView}},{key:"removeDebugView",value:function(){null!==this._debugView&&(this._debugView.remove(),this._debugView=null),this._debugViewEnabled=!1}},{key:"error",value:function(message,source){return appendError(this._output,"<<".concat(this.displayName,">>: ").concat(message),source||this.source)}}])}();return Object.defineProperties(MacroContext.prototype,{contextHas:{value:function(){console.warn("[DEPRECATED] <MacroContext>.contextHas() is deprecated.");for(var _len16=arguments.length,args=new Array(_len16),_key16=0;_key16<_len16;_key16++)args[_key16]=arguments[_key16];return MacroContext.prototype.contextSome.apply(this,args)}},contextSelect:{value:function(){console.warn("[DEPRECATED] <MacroContext>.contextSelect() is deprecated.");for(var _len17=arguments.length,args=new Array(_len17),_key17=0;_key17<_len17;_key17++)args[_key17]=arguments[_key17];return MacroContext.prototype.contextFind.apply(this,args)}},contextSelectAll:{value:function(){console.warn("[DEPRECATED] <MacroContext>.contextSelectAll() is deprecated.");for(var _len18=arguments.length,args=new Array(_len18),_key18=0;_key18<_len18;_key18++)args[_key18]=arguments[_key18];return MacroContext.prototype.contextFilter.apply(this,args)}},createShadowWrapper:{value:function(){console.warn("[DEPRECATED] <MacroContext>.createShadowWrapper() is deprecated.");for(var _len19=arguments.length,args=new Array(_len19),_key19=0;_key19<_len19;_key19++)args[_key19]=arguments[_key19];return MacroContext.prototype.shadowHandler.apply(this,args)}}}),MacroContext}();Macro.add(["addclass","toggleclass"],{handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("selector"),this.args.length<2&&errors.push("class names"),this.error("no ".concat(errors.join(" or ")," specified"))}var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));switch(this.name){case"addclass":$targets.addClass(this.args[1].trim());break;case"toggleclass":$targets.toggleClass(this.args[1].trim())}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add(["append","prepend","replace"],{tags:null,t8nRe:/^(?:transition|t8n)$/,handler:function(){var _this13=this;if(0===this.args.length)return this.error("no selector specified");var $insert,$targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));if(""!==this.payload[0].contents)switch(this.args.length>1&&this.self.t8nRe.test(this.args[1])?(($insert=jQuery(document.createElement("span"))).addClass("macro-".concat(this.name,"-insert macro-").concat(this.name,"-in")),setTimeout((function(){return $insert.removeClass("macro-".concat(_this13.name,"-in"))}),Engine.DOM_DELAY)):$insert=jQuery(document.createDocumentFragment()),$insert.wiki(this.payload[0].contents),this.name){case"replace":$targets.empty();case"append":$targets.append($insert);break;case"prepend":$targets.prepend($insert)}else"replace"===this.name&&$targets.empty();Config.debug&&this.debugView.modes({hidden:!0})}}),function(){if(Has.audio){var errorOnePlaybackAction=function(cur,prev){return'only one playback action allowed per invocation, "'.concat(cur,'" cannot be combined with "').concat(prev,'"')};Macro.add("audio",{handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("track and/or group IDs"),this.args.length<2&&errors.push("actions"),this.error("no ".concat(errors.join(" or ")," specified"))}var selected;try{selected=SimpleAudio.select(this.args[0])}catch(ex){return this.error(ex.message)}for(var action,fadeTo,loop,mute,passage,time,volume,args=this.args.slice(1),fadeOver=5;args.length>0;){var arg=args.shift(),raw=void 0;switch(arg){case"load":case"pause":case"play":case"stop":case"unload":if(action)return this.error(errorOnePlaybackAction(arg,action));action=arg;break;case"fadein":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=1;break;case"fadeout":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=0;break;case"fadeto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(0===args.length)return this.error("fadeto missing required level value");if(action="fade",raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeto: ".concat(raw));break;case"fadeoverto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(args.length<2){var _errors=[];return args.length<1&&_errors.push("seconds"),args.length<2&&_errors.push("level"),this.error("fadeoverto missing required ".concat(_errors.join(" and ")," value").concat(_errors.length>1?"s":""))}if(action="fade",raw=args.shift(),fadeOver=Number.parseFloat(raw),Number.isNaN(fadeOver)||!Number.isFinite(fadeOver))return this.error("cannot parse fadeoverto: ".concat(raw));if(raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeoverto: ".concat(raw));break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),volume=Number.parseFloat(raw),Number.isNaN(volume)||!Number.isFinite(volume))return this.error("cannot parse volume: ".concat(raw));break;case"mute":case"unmute":mute="mute"===arg;break;case"time":if(0===args.length)return this.error("time missing required seconds value");if(raw=args.shift(),time=Number.parseFloat(raw),Number.isNaN(time)||!Number.isFinite(time))return this.error("cannot parse time: ".concat(raw));break;case"loop":case"unloop":loop="loop"===arg;break;case"goto":if(0===args.length)return this.error("goto missing required passage title");if(raw=args.shift(),passage="object"===_typeof(raw)?raw.link:raw,!Story.has(passage))return this.error('passage "'.concat(passage,'" does not exist'));break;default:return this.error("unknown action: ".concat(arg))}}try{if(null!=volume&&selected.volume(volume),null!=time&&selected.time(time),null!=mute&&selected.mute(mute),null!=loop&&selected.loop(loop),null!=passage){var nsEnded="ended.macros.macro-".concat(this.name,"_goto");selected.off(nsEnded).one(nsEnded,(function(){selected.off(nsEnded),Engine.play(passage)}))}switch(action){case"fade":selected.fade(fadeOver,fadeTo);break;case"load":selected.load();break;case"pause":selected.pause();break;case"play":selected.playWhenAllowed();break;case"stop":selected.stop();break;case"unload":selected.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error("error executing action: ".concat(ex.message))}}}),Macro.add("cacheaudio",{handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("track ID"),this.args.length<2&&errors.push("sources"),this.error("no ".concat(errors.join(" or ")," specified"))}var id=String(this.args[0]).trim();try{SimpleAudio.tracks.add(id,this.args.slice(1))}catch(ex){return this.error(ex.message)}if(Config.debug&&!SimpleAudio.tracks.get(id).hasSource())return this.error('track ID "'.concat(id,'": no supported audio sources found'));Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("createaudiogroup",{tags:["track"],handler:function(){if(0===this.args.length)return this.error("no group ID specified");if(1===this.payload.length)return this.error("no tracks defined via <<track>>");Config.debug&&this.debugView.modes({nonvoid:!1,hidden:!0});for(var groupId=String(this.args[0]).trim(),trackIds=[],i=1,len=this.payload.length;i<len;++i){if(this.payload[i].args.length<1)return this.error("no track ID specified");trackIds.push(String(this.payload[i].args[0]).trim()),Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0})}try{SimpleAudio.groups.add(groupId,trackIds)}catch(ex){return this.error(ex.message)}Config.debug&&this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0})}}),Macro.add("createplaylist",{tags:["track"],handler:function(){if(0===this.args.length)return this.error("no list ID specified");if(1===this.payload.length)return this.error("no tracks defined via <<track>>");Config.debug&&this.debugView.modes({nonvoid:!1,hidden:!0});for(var listId=String(this.args[0]).trim(),trackObjs=[],i=1,len=this.payload.length;i<len;++i){if(0===this.payload[i].args.length)return this.error("no track ID specified");for(var trackObj={id:String(this.payload[i].args[0]).trim()},args=this.payload[i].args.slice(1);args.length>0;){var arg=args.shift(),raw=void 0,parsed=void 0;switch(arg){case"own":trackObj.own=!0;break;case"rate":args.length>0&&args.shift();break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),parsed=Number.parseFloat(raw),Number.isNaN(parsed)||!Number.isFinite(parsed))return this.error("cannot parse volume: ".concat(raw));trackObj.volume=parsed;break;default:return this.error("unknown action: ".concat(arg))}}trackObjs.push(trackObj),Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0})}try{SimpleAudio.lists.add(listId,trackObjs)}catch(ex){return this.error(ex.message)}Config.debug&&this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0})}}),Macro.add("masteraudio",{handler:function(){if(0===this.args.length)return this.error("no actions specified");for(var action,mute,muteOnHide,volume,args=this.args.slice(0);args.length>0;){var arg=args.shift(),raw=void 0;switch(arg){case"load":case"stop":case"unload":if(action)return this.error(errorOnePlaybackAction(arg,action));action=arg;break;case"mute":case"unmute":mute="mute"===arg;break;case"muteonhide":case"nomuteonhide":muteOnHide="muteonhide"===arg;break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),volume=Number.parseFloat(raw),Number.isNaN(volume)||!Number.isFinite(volume))return this.error("cannot parse volume: ".concat(raw));break;default:return this.error("unknown action: ".concat(arg))}}try{switch(null!=mute&&SimpleAudio.mute(mute),null!=muteOnHide&&SimpleAudio.muteOnHidden(muteOnHide),null!=volume&&SimpleAudio.volume(volume),action){case"load":SimpleAudio.load();break;case"stop":SimpleAudio.stop();break;case"unload":SimpleAudio.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error("error executing action: ".concat(ex.message))}}}),Macro.add("playlist",{handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("list ID"),this.args.length<2&&errors.push("actions"),this.error("no ".concat(errors.join(" or ")," specified"))}var id=String(this.args[0]).trim();if(!SimpleAudio.lists.has(id))return this.error('playlist "'.concat(id,'" does not exist'));for(var action,fadeTo,loop,mute,shuffle,volume,list=SimpleAudio.lists.get(id),args=this.args.slice(1),fadeOver=5;args.length>0;){var arg=args.shift(),raw=void 0;switch(arg){case"load":case"pause":case"play":case"skip":case"stop":case"unload":if(action)return this.error(errorOnePlaybackAction(arg,action));action=arg;break;case"fadein":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=1;break;case"fadeout":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=0;break;case"fadeto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(0===args.length)return this.error("fadeto missing required level value");if(action="fade",raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeto: ".concat(raw));break;case"fadeoverto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(args.length<2){var _errors2=[];return args.length<1&&_errors2.push("seconds"),args.length<2&&_errors2.push("level"),this.error("fadeoverto missing required ".concat(_errors2.join(" and ")," value").concat(_errors2.length>1?"s":""))}if(action="fade",raw=args.shift(),fadeOver=Number.parseFloat(raw),Number.isNaN(fadeOver)||!Number.isFinite(fadeOver))return this.error("cannot parse fadeoverto: ".concat(raw));if(raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeoverto: ".concat(raw));break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),volume=Number.parseFloat(raw),Number.isNaN(volume)||!Number.isFinite(volume))return this.error("cannot parse volume: ".concat(raw));break;case"mute":case"unmute":mute="mute"===arg;break;case"loop":case"unloop":loop="loop"===arg;break;case"shuffle":case"unshuffle":shuffle="shuffle"===arg;break;default:return this.error("unknown action: ".concat(arg))}}try{switch(null!=volume&&list.volume(volume),null!=mute&&list.mute(mute),null!=loop&&list.loop(loop),null!=shuffle&&list.shuffle(shuffle),action){case"fade":list.fade(fadeOver,fadeTo);break;case"load":list.load();break;case"pause":list.pause();break;case"play":list.playWhenAllowed();break;case"skip":list.skip();break;case"stop":list.stop();break;case"unload":list.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error("error executing action: ".concat(ex.message))}}}),Macro.add("removeaudiogroup",{handler:function(){if(0===this.args.length)return this.error("no group ID specified");var id=String(this.args[0]).trim();if(!SimpleAudio.groups.has(id))return this.error('group "'.concat(id,'" does not exist'));SimpleAudio.groups.delete(id),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("removeplaylist",{handler:function(){if(0===this.args.length)return this.error("no list ID specified");var id=String(this.args[0]).trim();if(!SimpleAudio.lists.has(id))return this.error('playlist "'.concat(id,'" does not exist'));SimpleAudio.lists.delete(id),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("waitforaudio",{skipArgs:!0,handler:function(){SimpleAudio.loadWithScreen()}})}else Macro.add(["audio","cacheaudio","createaudiogroup","createplaylist","masteraudio","playlist","removeaudiogroup","removeplaylist","waitforaudio"],{skipArgs:!0,handler:function(){Config.debug&&this.debugView.modes({hidden:!0})}})}(),Macro.add(["back","return"],{handler:function(){var passage,content,$link,momentIndex=-1;if(this.args.length>0)if("object"===_typeof(this.args[0]))if(this.args[0].isImage){content=document.createElement("img");var $image=jQuery(content).attr("src",this.args[0].source);Object.hasOwn(this.args[0],"passage")&&$image.attr("data-passage",this.args[0].passage),Object.hasOwn(this.args[0],"title")&&$image.attr("title",this.args[0].title),Object.hasOwn(this.args[0],"align")&&$image.attr("align",this.args[0].align),Object.hasOwn(this.args[0],"link")&&(passage=this.args[0].link)}else content=document.createTextNode(this.args[0].text),passage=this.args[0].link;else{content=document.createDocumentFragment();var forbidden=jQuery(content).wikiWithOptions({cleanup:!1,profile:"core"},this.args[0]).getForbiddenInteractiveContentTagNames();if(forbidden.length>0)throw new Error("text content contains restricted elements: <".concat(forbidden.join(">, <"),">"));passage=this.args.length>1?this.args[1]:undefined}if(null==passage){for(var i=State.length-2;i>=0;--i)if(State.history[i].title!==State.passage){momentIndex=i,passage=State.history[i].title;break}if(null==passage&&"return"===this.name)for(var _i6=State.expired.length-1;_i6>=0;--_i6)if(State.expired[_i6]!==State.passage){passage=State.expired[_i6];break}}else{if(!Story.has(passage))return this.error('passage "'.concat(passage,'" does not exist'));if("back"===this.name){for(var _i7=State.length-2;_i7>=0;--_i7)if(State.history[_i7].title===passage){momentIndex=_i7;break}if(-1===momentIndex)return this.error('cannot find passage "'.concat(passage,'" in the current story history'))}}if(null==passage)return this.error("cannot find passage");"back"!==this.name||-1!==momentIndex?($link=jQuery(document.createElement("a")).addClass("link-internal").ariaClick({one:!0},"return"===this.name?function(){return Engine.play(passage)}:function(){return Engine.goTo(momentIndex)}),content instanceof HTMLImageElement&&$link.addClass("link-image")):$link=jQuery(document.createElement("span")).addClass("link-disabled"),$link.addClass("macro-".concat(this.name)).append(content||document.createTextNode(L10n.get("macro".concat(this.name.toUpperFirst(),"Text")))).appendTo(this.output)}}),Macro.add(["button","link"],{isAsync:!0,tags:null,handler:function(){var _this14=this;if(0===this.args.length)return this.error("no ".concat("button"===this.name?"button":"link"," text specified"));var passage,$link=jQuery(document.createElement("button"===this.name?"button":"a"));if("object"===_typeof(this.args[0]))if(this.args[0].isImage){var $image=jQuery(document.createElement("img")).attr("src",this.args[0].source).appendTo($link);$link.addClass("link-image"),Object.hasOwn(this.args[0],"passage")&&$image.attr("data-passage",this.args[0].passage),Object.hasOwn(this.args[0],"title")&&$image.attr("title",this.args[0].title),Object.hasOwn(this.args[0],"align")&&$image.attr("align",this.args[0].align),passage=this.args[0].link}else $link.append(document.createTextNode(this.args[0].text)),passage=this.args[0].link;else{var $frag=jQuery(document.createDocumentFragment()).wikiWithOptions({cleanup:!1,profile:"core"},this.args[0]),forbidden=$frag.getForbiddenInteractiveContentTagNames();if(forbidden.length>0)throw new Error("text content contains restricted elements: <".concat(forbidden.join(">, <"),">"));$link.append($frag),passage=this.args.length>1?this.args[1]:undefined}null!=passage?($link.attr("data-passage",passage),Story.has(passage)?($link.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&$link.addClass("link-visited")):$link.addClass("link-broken")):$link.addClass("link-internal"),$link.addClass("macro-".concat(this.name)).ariaClick({namespace:".macros",role:null!=passage?"link":"button",one:null!=passage},this.shadowHandler(""!==this.payload[0].contents?function(){return Wikifier.wikifyEval(_this14.payload[0].contents.trim())}:null,null!=passage?function(){return Engine.play(passage)}:null)).appendTo(this.output)}}),Macro.add("capture",{skipArgs:!0,tags:null,tsVarRe:new RegExp("(".concat(Patterns.variable,")"),"g"),handler:function(){if(0===this.args.raw.length)return this.error("no story/temporary variable list specified");var valueCache={};try{for(var match,tsVarRe=this.self.tsVarRe;null!==(match=tsVarRe.exec(this.args.raw));){var varName=match[1],varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;Object.hasOwn(store,varKey)&&(valueCache[varKey]=store[varKey]),this.addShadow(varName)}new Wikifier(this.output,this.payload[0].contents)}finally{this.shadows.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;Object.hasOwn(valueCache,varKey)?store[varKey]=valueCache[varKey]:delete store[varKey]}))}}}),Macro.add("checkbox",{isAsync:!0,handler:function(){if(this.args.length<3){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("unchecked value"),this.args.length<3&&errors.push("checked value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var varId=createSlug(varName),uncheckValue=this.args[1],checkValue=this.args[2],el=document.createElement("input");switch(jQuery(el).attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),type:"checkbox",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.shadowHandler((function(){State.setVar(varName,this.checked?checkValue:uncheckValue)}))).appendTo(this.output),this.args[3]){case"autocheck":State.getVar(varName)===checkValue?el.checked=!0:State.setVar(varName,uncheckValue);break;case"checked":el.checked=!0,State.setVar(varName,checkValue);break;default:State.setVar(varName,uncheckValue)}}}),Macro.add("copy",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));jQuery(this.output).append($targets.html()),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add(["cycle","listbox"],{isAsync:!0,skipArgs:["optionsfrom"],tags:["option","optionsfrom"],handler:function(){var _this15=this;if(0===this.args.length)return this.error("no variable name specified");if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var varId=createSlug(varName),len=this.payload.length;if(1===len)return this.error("no options specified");for(var config={autoselect:!1,once:!1},i=1;i<this.args.length;++i){var arg=this.args[i];switch(arg){case"once":config.once=!0;break;case"autoselect":config.autoselect=!0;break;default:return this.error("unknown argument: ".concat(arg))}}for(var _ret,options=[],tagCount={option:0,optionsfrom:0},index=-1,_loop6=function(){var payload=_this15.payload[_i8];if("option"===payload.name){if(++tagCount.option,0===payload.args.length)return{v:_this15.error("no arguments specified for <<".concat(payload.name,">> (#").concat(tagCount.option,")"))};var option={label:String(payload.args[0])},isSelected=!1;switch(payload.args.length){case 1:option.value=payload.args[0];break;case 2:"selected"===payload.args[1]?(option.value=payload.args[0],isSelected=!0):option.value=payload.args[1];break;default:option.value=payload.args[1],"selected"===payload.args[2]&&(isSelected=!0)}if(options.push(option),isSelected){if(config.autoselect)return{v:_this15.error("cannot specify both the autoselect and selected keywords")};if(-1!==index)return{v:_this15.error("multiple selected keywords specified for <<".concat(payload.name,">> (#").concat(index+1," & #").concat(tagCount.option,")"))};index=options.length-1}}else{if(++tagCount.optionsfrom,0===payload.args.full.length)return{v:_this15.error("no expression specified for <<".concat(payload.name,">> (#").concat(tagCount.optionsfrom,")"))};var result;try{var exp=payload.args.full;result=Scripting.evalJavaScript("{"===exp[0]?"(".concat(exp,")"):exp)}catch(ex){return{v:_this15.error("bad evaluation: ".concat(getErrorMessage(ex)))}}if("object"!==_typeof(result)||null===result)return{v:_this15.error("expression must yield a supported collection or generic object (type: ".concat(null===result?"null":_typeof(result),")"))};if(result instanceof Array||result instanceof Set)result.forEach((function(val){return options.push({label:String(val),value:val})}));else if(result instanceof Map)result.forEach((function(val,key){return options.push({label:String(key),value:val})}));else{var oType=getToStringTag(result);if("Object"!==oType)return{v:_this15.error("expression must yield a supported collection or generic object (object type: ".concat(oType,")"))};Object.keys(result).forEach((function(key){return options.push({label:key,value:result[key]})}))}}},_i8=1;_i8<len;++_i8)if(_ret=_loop6())return _ret.v;if(-1===index)if(config.autoselect){var curValue=State.getVar(varName),curValueIndex=options.findIndex((function(opt){return sameValueZero(opt.value,curValue)}));index=-1===curValueIndex?0:curValueIndex}else index=0;if("cycle"===this.name){var lastIndex=options.length-1;if(config.once&&index===lastIndex)jQuery(this.output).wikiWithOptions({cleanup:!1,profile:"core"},options[index].label);else{var cycleIndex=index;jQuery(document.createElement("a")).wikiWithOptions({cleanup:!1,profile:"core"},options[index].label).attr("id","".concat(this.name,"-").concat(varId)).addClass("macro-".concat(this.name)).ariaClick({namespace:".macros",role:"button"},this.shadowHandler((function(){var $this=$(this);cycleIndex=(cycleIndex+1)%options.length,State.setVar(varName,options[cycleIndex].value),$this.empty().wikiWithOptions({cleanup:!1,profile:"core"},options[cycleIndex].label),config.once&&cycleIndex===lastIndex&&$this.off().contents().unwrap()}))).appendTo(this.output)}}else{var $select=jQuery(document.createElement("select"));options.forEach((function(opt,i){jQuery(document.createElement("option")).val(i).text(opt.label).appendTo($select)})),$select.attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),tabindex:0}).addClass("macro-".concat(this.name)).val(index).on("change.macros",this.shadowHandler((function(){State.setVar(varName,options[Number(this.value)].value)}))).appendTo(this.output)}State.setVar(varName,options[index].value)}}),jQuery(document).on(":redo",(function(ev){var evTags=ev.detail&&ev.detail.tags||[],selector=0===evTags.length?".".concat("redo-target"):evTags.map((function(tag){return".".concat("redo-target",'[data-do-tags~="').concat(tag,'"]')})).join(", ");triggerEvent(":redo-internal",jQuery(selector),{bubbles:!1,detail:ev.detail})})),Macro.add("do",{tags:null,handler:function(){for(var elTag="span",tags=[],options=this.args.slice();options.length>0;){var option=options.shift();switch(option){case"tag":if(0===options.length)return this.error("tag option missing required tag name(s)");var raw=String(options.shift()).trim();if(""===raw)throw new Error("tag option tag name(s) must be non-empty");tags=String(raw).trim().splitOrEmpty(/\s+/);break;case"element":if(0===options.length)return this.error("element option missing required element tag name");if(""===(elTag=String(options.shift()).trim()))throw new Error("element option tag name must be non-empty");break;default:return this.error("unknown option: ".concat(option))}}var contents=this.payload[0].contents;if(""!==contents.trim()){Config.debug&&this.debugView.modes({block:"span"!==elTag});var $target=jQuery(document.createElement(elTag)).addClass("macro-".concat(this.name," ").concat("redo-target")).attr("data-do-tags",tags.join(" ")).wiki(contents).on(":redo-internal",jQuery.throttle(Engine.DOM_DELAY,this.shadowHandler((function(){var frag=document.createDocumentFragment();new Wikifier(frag,contents),$target.empty().append(frag)})))).appendTo(this.output)}}}),Macro.add("redo",{handler:function(){var failRE=/^(?:do|for)$/,passRE=/^(?:button|link(?:append|prepend|replace)?)$/,closest=this.contextFind((function(ctx){return failRE.test(ctx.name)||passRE.test(ctx.name)}));if(closest&&failRE.test(closest.name))return this.error("must not be used directly within macro <<".concat(closest.name,">>"));var tags=this.args.length>0?String(this.args[0]).trim().splitOrEmpty(/\s+/):[];triggerEvent(":redo",document,{detail:{tags:tags}})}}),Macro.add("done",{skipArgs:!0,tags:null,handler:function(){var contents=this.payload[0].contents.trim();""!==contents&&setTimeout(this.shadowHandler((function(){return $.wiki(contents)})),Engine.DOM_DELAY)}}),Macro.add("for",{skipArgs:!0,tags:null,isRangeRe:new RegExp("^(?:\\S".concat(Patterns.anyChar,"*?\\s+)?range\\s+\\S").concat(Patterns.anyChar,"*?$")),rangeRe:new RegExp("^(?:(?:State\\.(variables|temporary)\\.(".concat(Patterns.identifier,")\\s*,\\s*)?State\\.(variables|temporary)\\.(").concat(Patterns.identifier,")\\s+)?range\\s+(\\S").concat(Patterns.anyChar,"*?)$")),threePartRe:/^([^;]*?)\s*;\s*([^;]*?)\s*;\s*([^;]*?)$/,forInRe:/^\S+\s+in\s+\S+/i,forOfRe:/^\S+\s+of\s+\S+/i,handler:function(){var argsStr=this.args.full.trim(),payload=this.payload[0].contents.replace(/\n$/,"");if(0===argsStr.length)this.self.handleFor.call(this,payload,null,!0,null);else if(this.self.isRangeRe.test(argsStr)){var parts=argsStr.match(this.self.rangeRe);if(null===parts)return this.error("invalid range form syntax, format: [[index ,] value] range collection");this.self.handleForRange.call(this,payload,{type:parts[1],name:parts[2]},{type:parts[3],name:parts[4]},parts[5])}else{var init,condition,post;if(-1===argsStr.indexOf(";")){if(this.self.forInRe.test(argsStr))return this.error("invalid syntax, for…in is not supported; see: for…range");if(this.self.forOfRe.test(argsStr))return this.error("invalid syntax, for…of is not supported; see: for…range");condition=argsStr}else{var _parts=argsStr.match(this.self.threePartRe);if(null===_parts)return this.error("invalid 3-part conditional form syntax, format: [init] ; [condition] ; [post]");init=_parts[1],condition=_parts[2].trim(),post=_parts[3],0===condition.length&&(condition=!0)}this.self.handleFor.call(this,payload,init,condition,post)}},handleFor:function(payload,init,condition,post){var evalJavaScript=Scripting.evalJavaScript,first=!0,safety=Config.macros.maxLoopIterations;Config.debug&&this.debugView.modes({block:!0});try{if(TempState.break=null,init)try{evalJavaScript(init)}catch(ex){return this.error("bad init expression: ".concat(getErrorMessage(ex)))}for(;evalJavaScript(condition);){if(--safety<0)return this.error("exceeded configured maximum loop iterations (".concat(Config.macros.maxLoopIterations,")"));if(new Wikifier(this.output,first?payload.replace(/^\n/,""):payload),first&&(first=!1),null!=TempState.break)if(1===TempState.break)TempState.break=null;else if(2===TempState.break){TempState.break=null;break}if(post)try{evalJavaScript(post)}catch(ex){return this.error("bad post expression: ".concat(getErrorMessage(ex)))}}}catch(ex){return this.error("bad conditional expression: ".concat(getErrorMessage(ex)))}finally{TempState.break=null}},handleForRange:function(payload,keyVar,valueVar,rangeExp){var rangeable,first=!0;try{rangeable=this.self.toRangeable(rangeExp)}catch(ex){return this.error(ex.message)}Config.debug&&this.debugView.modes({block:!0});try{for(TempState.break=null;;){var entry=rangeable.next();if(entry.done)break;if(keyVar.name&&(State[keyVar.type][keyVar.name]=entry.key),valueVar.name&&(State[valueVar.type][valueVar.name]=entry.value),new Wikifier(this.output,first?payload.replace(/^\n/,""):payload),first&&(first=!1),null!=TempState.break)if(1===TempState.break)TempState.break=null;else if(2===TempState.break){TempState.break=null;break}}}catch(ex){return this.error(getErrorMessage(ex))}finally{TempState.break=null}},toRangeable:function(rangeExp){var collection;try{collection=Scripting.evalJavaScript("{"===rangeExp[0]?"(".concat(rangeExp,")"):rangeExp)}catch(ex){if("object"!==_typeof(ex))throw new Error("bad range expression: ".concat(ex));throw ex.message="bad range expression: ".concat(ex.message),ex}switch(_typeof(collection)){case"number":if(Number.isNaN(collection)||!Number.isFinite(collection))throw new Error("unsupported range expression type: ".concat(stringFrom(collection)));if(!Number.isInteger(collection))throw new Error("unsupported range expression type: floating-point number");if(!Number.isSafeInteger(collection))throw new Error("unsupported range expression type: unsafe integer");return collection<=0?{next:function(){return{done:!0}}}:{end:collection,pos:0,next:function(){if(this.pos<this.end){var key=this.pos++;return{key:key,value:key,done:!1}}return{done:!0}}};case"string":return{list:collection,end:collection.length,pos:0,next:function(){if(this.pos<this.end){var O=charAndPosAt(this.list,this.pos),key=this.pos;return this.pos=O.end+1,{key:key,value:O.char,done:!1}}return{done:!0}}};case"object":if(collection instanceof Array)return{list:collection,end:collection.length,pos:0,next:function(){if(this.pos<this.end){var key=this.pos++;return{key:key,value:this.list[key],done:!1}}return{done:!0}}};if(collection instanceof Set)return{list:collection=Array.from(collection),end:collection.length,pos:0,next:function(){if(this.pos<this.end){var key=this.pos++;return{key:key,value:this.list[key],done:!1}}return{done:!0}}};if(collection instanceof Map){var keys=Array.from(collection.keys());return{keys:keys,list:collection,end:keys.length,pos:0,next:function(){if(this.pos<this.end){var key=this.keys[this.pos++];return{key:key,value:this.list.get(key),done:!1}}return{done:!0}}}}if("Object"===getToStringTag(collection)){var _keys=Object.keys(collection);return{keys:_keys,list:collection,end:_keys.length,pos:0,next:function(){if(this.pos<this.end){var key=this.keys[this.pos++];return{key:key,value:this.list[key],done:!1}}return{done:!0}}}}throw new Error("unsupported range expression type: ".concat(getToStringTag(collection)));default:throw new Error("unsupported range expression type: ".concat(_typeof(collection)))}}}),Macro.add(["break","continue"],{skipArgs:!0,handler:function(){if(!this.contextSome((function(ctx){return"for"===ctx.name})))return this.error("must only be used in conjunction with its parent macro <<for>>");TempState.break="continue"===this.name?1:2,Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("goto",{handler:function(){return 0===this.args.length?this.error("no passage specified"):(passage="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],Story.has(passage)?void setTimeout((function(){return Engine.play(passage)}),Engine.DOM_DELAY):this.error('passage "'.concat(passage,'" does not exist')));var passage}}),Macro.add("if",{skipArgs:!0,tags:["elseif","else"],isElseifWsRE:/^\s*if\b/i,isAssignRE:/[^!%&*+\-/<=>?^|]=[^=>]/,isLiteralRE:new RegExp(["(?:\"\"|''|``)",'(?:"(?:\\\\.|[^"\\\\])+")',"(?:'(?:\\\\.|[^'\\\\])+')","(?:`(?:\\\\.|[^`\\\\])+`)"].join("|"),"g"),handler:function(){var i;try{var len=this.payload.length,isElseifWsRE=this.self.isElseifWsRE,isAssignRE=this.self.isAssignRE,isLiteralRE=this.self.isLiteralRE;for(i=0;i<len;++i)if("else"===this.payload[i].name){if(this.payload[i].args.raw.length>0)return isElseifWsRE.test(this.payload[i].args.raw)?this.error('whitespace is not allowed between the "else" and "if" in <<elseif>> clause'.concat(i>0?" (#".concat(i,")"):"")):this.error("<<else>> does not accept a conditional expression (perhaps you meant to use <<elseif>>), invalid: ".concat(this.payload[i].args.raw));if(i+1!==len)return this.error("<<else>> must be the final clause")}else{if(0===this.payload[i].args.full.length)return this.error("no conditional expression specified for <<".concat(this.payload[i].name,">> clause").concat(i>0?" (#".concat(i,")"):""));if((Config.debug||Config.enableOptionalDebugging)&&isAssignRE.test(this.payload[i].args.full.replace(isLiteralRE,"")))return this.error("assignment operator found within <<".concat(this.payload[i].name,">> clause").concat(i>0?" (#".concat(i,")"):""," (perhaps you meant to use an equality operator: ==, ===, eq, is), invalid: ").concat(this.payload[i].args.raw))}var evalJavaScript=Scripting.evalJavaScript,success=!1;for(i=0;i<len;++i){if(Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1}),"else"===this.payload[i].name||evalJavaScript(this.payload[i].args.full)){success=!0,new Wikifier(this.output,this.payload[i].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++i;i<len;++i)this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0,invalid:!0});this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!success,invalid:!success})}}catch(ex){return this.error("bad conditional expression in <<".concat(0===i?"if":"elseif",">> clause").concat(i>0?" (#".concat(i,")"):"",": ").concat(getErrorMessage(ex)))}}}),Macro.add("include",{handler:function(){return"display"===this.name&&console.warn("[DEPRECATED] <<".concat(this.name,">> macro is deprecated.")),0===this.args.length?this.error("no passage specified"):(passage="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],Story.has(passage)?(Config.debug&&this.debugView.modes({block:!0}),passage=Story.get(passage),void(this.args[1]?jQuery(document.createElement(this.args[1])).addClass("".concat(passage.id," macro-").concat(this.name)).attr("data-passage",passage.name).appendTo(this.output):jQuery(this.output)).wiki(passage.processText())):this.error('passage "'.concat(passage,'" does not exist')));var passage}}),Macro.add(["linkappend","linkprepend","linkreplace"],{isAsync:!0,tags:null,t8nRe:/^(?:transition|t8n)$/,handler:function(){var _this16=this;if(0===this.args.length)return this.error("no link text specified");var $link=jQuery(document.createElement("a")),$insert=jQuery(document.createElement("span")),transition=this.args.length>1&&this.self.t8nRe.test(this.args[1]);$link.wikiWithOptions({cleanup:!1,profile:"core"},this.args[0]).addClass("link-internal macro-".concat(this.name)).ariaClick({namespace:".macros",one:!0},this.shadowHandler((function(){if("linkreplace"===_this16.name?$link.remove():$link.wrap('<span class="macro-'.concat(_this16.name,'"></span>')).replaceWith((function(){return $link.html()})),""!==_this16.payload[0].contents){var frag=document.createDocumentFragment();new Wikifier(frag,_this16.payload[0].contents,{cleanup:!1}),$insert.append(frag)}transition&&setTimeout((function(){return $insert.removeClass("macro-".concat(_this16.name,"-in"))}),Engine.DOM_DELAY)}))).appendTo(this.output),$insert.addClass("macro-".concat(this.name,"-insert")),transition&&$insert.addClass("macro-".concat(this.name,"-in")),"linkprepend"===this.name?$insert.insertBefore($link):$insert.insertAfter($link)}}),Macro.add("nobr",{skipArgs:!0,tags:null,handler:function(){new Wikifier(this.output,this.payload[0].contents.replace(/^\n+|\n+$/g,"").replace(/\n+/g," "))}}),Macro.add(["numberbox","textbox"],{isAsync:!0,handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("default value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));Config.debug&&this.debugView.modes({block:!0});var asNumber="numberbox"===this.name,defaultValue=asNumber?Number(this.args[1]):this.args[1];if(asNumber&&Number.isNaN(defaultValue))return this.error('default value "'.concat(this.args[1],'" is neither a number nor can it be parsed into a number'));var passage,varId=createSlug(varName),el=document.createElement("input"),autofocus=!1;this.args.length>3?(passage=this.args[2],autofocus="autofocus"===this.args[3]):this.args.length>2&&("autofocus"===this.args[2]?autofocus=!0:passage=this.args[2]),"object"===_typeof(passage)&&(passage=passage.link),jQuery(el).attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),type:asNumber?"number":"text",inputmode:asNumber?"decimal":"text",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.shadowHandler((function(){State.setVar(varName,asNumber?Number(this.value):this.value)}))).on("keypress.macros",this.shadowHandler((function(ev){13===ev.which&&(ev.preventDefault(),State.setVar(varName,asNumber?Number(this.value):this.value),null!=passage&&Engine.play(passage))}))).appendTo(this.output),asNumber&&(el.step="any"),State.setVar(varName,defaultValue),el.value=defaultValue,autofocus&&(el.setAttribute("autofocus","autofocus"),Engine.isPlaying()?jQuery(document).one(":passageend",(function(){setTimeout((function(){return el.focus()}),Engine.DOM_DELAY)})):setTimeout((function(){return el.focus()}),Engine.DOM_DELAY))}}),Macro.add(["print","=","-"],{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{var result=stringFrom(Scripting.evalJavaScript(this.args.full));null!==result&&new Wikifier(this.output,"-"===this.name?encodeEntities(result):result)}catch(ex){return this.error("bad evaluation: ".concat(getErrorMessage(ex)))}}}),Macro.add("radiobutton",{isAsync:!0,handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("checked value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var varId=createSlug(varName),checkValue=this.args[1],el=document.createElement("input");switch(Object.hasOwn(TempState,this.name)||(TempState[this.name]={}),Object.hasOwn(TempState[this.name],varId)||(TempState[this.name][varId]=0),jQuery(el).attr({id:"".concat(this.name,"-").concat(varId,"-").concat(TempState[this.name][varId]++),name:"".concat(this.name,"-").concat(varId),type:"radio",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.shadowHandler((function(){this.checked&&State.setVar(varName,checkValue)}))).appendTo(this.output),this.args[2]){case"autocheck":State.getVar(varName)===checkValue&&(el.checked=!0);break;case"checked":el.checked=!0,State.setVar(varName,checkValue)}}}),Macro.add("remove",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));$targets.remove(),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("removeclass",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));this.args.length>1?$targets.removeClass(this.args[1].trim()):$targets.removeClass(),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("repeat",{isAsync:!0,tags:null,timers:new Set,t8nRe:/^(?:transition|t8n)$/,handler:function(){var delay,_this17=this;if(0===this.args.length)return this.error("no time value specified");try{delay=Math.max(Engine.DOM_DELAY,cssTimeToMS(this.args[0]))}catch(ex){return this.error(ex.message)}Config.debug&&this.debugView.modes({block:!0});var transition=this.args.length>1&&this.self.t8nRe.test(this.args[1]),$wrapper=jQuery(document.createElement("span")).addClass("macro-".concat(this.name)).appendTo(this.output);this.self.registerInterval(this.shadowHandler((function(){var frag=document.createDocumentFragment();new Wikifier(frag,_this17.payload[0].contents,{cleanup:!1});var $output=$wrapper;transition&&($output=jQuery(document.createElement("span")).addClass("macro-repeat-insert macro-repeat-in").appendTo($output)),$output.append(frag),transition&&setTimeout((function(){return $output.removeClass("macro-repeat-in")}),Engine.DOM_DELAY)})),delay)},registerInterval:function(callback,delay){var _this18=this;if("function"!=typeof callback)throw new TypeError("callback parameter must be a function");var passage=State.passage,turn=State.turns,timers=this.timers,timerId=null;timerId=setInterval((function(){if(State.passage!==passage||State.turns!==turn)return clearInterval(timerId),void timers.delete(timerId);var timerIdCache;try{TempState.break=null,Object.hasOwn(TempState,"repeatTimerId")&&(timerIdCache=TempState.repeatTimerId),TempState.repeatTimerId=timerId,callback.call(_this18)}finally{void 0!==timerIdCache?TempState.repeatTimerId=timerIdCache:delete TempState.repeatTimerId,TempState.break=null}}),delay),timers.add(timerId),1===timers.size&&jQuery(document).one(":passageinit",(function(){timers.forEach((function(timerId){return clearInterval(timerId)})),timers.clear()}))}}),Macro.add("stop",{skipArgs:!0,handler:function(){if(!Object.hasOwn(TempState,"repeatTimerId"))return this.error("must only be used in conjunction with its parent macro <<repeat>>");var timers=Macro.get("repeat").timers,timerId=TempState.repeatTimerId;clearInterval(timerId),timers.delete(timerId),TempState.break=2,Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("script",{tags:null,handler:function(){var evalScript;switch(this.args.length>0?String(this.args[0]).toLowerCase():"javascript"){case"javascript":evalScript=Scripting.evalJavaScript;break;case"twinescript":evalScript=Scripting.evalTwineScript;break;default:return this.error('unknown language "'.concat(this.args[0],'"'))}var output=document.createDocumentFragment();try{evalScript(this.payload[0].contents,output)}catch(ex){return this.error("bad evaluation: ".concat(getErrorMessage(ex)))}Config.debug&&this.createDebugView(),output.hasChildNodes()&&this.output.appendChild(output)}}),Macro.add("set",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{Scripting.evalJavaScript(this.args.full)}catch(ex){return this.error("bad evaluation: ".concat(getErrorMessage(ex)))}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("run","set"),Macro.add("silent",{skipArgs:!0,tags:null,handler:function(){"silently"===this.name&&console.warn("[DEPRECATED] <<".concat(this.name,">> macro is deprecated."));var frag=document.createDocumentFragment();if(new Wikifier(frag,this.payload[0].contents.trim()),Config.debug)this.debugView.modes({block:!0,hidden:!0}),this.output.appendChild(frag);else{var errList=Array.from(frag.querySelectorAll(".error")).map((function(errEl){return errEl.textContent}));if(errList.length>0)return this.error("error".concat(1===errList.length?"":"s"," within contents (").concat(errList.join("; "),")"))}}}),Macro.add("switch",{skipArgs:["switch"],tags:["case","default"],handler:function(){if(0===this.args.full.length)return this.error("no expression specified");var i,result,len=this.payload.length;if(1===len)return this.error("no cases specified");for(i=1;i<len;++i)if("default"===this.payload[i].name){if(this.payload[i].args.length>0)return this.error("<<default>> does not accept values, invalid: ".concat(this.payload[i].args.raw));if(i+1!==len)return this.error("<<default>> must be the final case")}else if(0===this.payload[i].args.length)return this.error("no value(s) specified for <<".concat(this.payload[i].name,">> (#").concat(i,")"));try{result=Scripting.evalJavaScript(this.args.full)}catch(ex){return this.error("bad evaluation: ".concat(getErrorMessage(ex)))}var debugView=this.debugView,success=!1;for(Config.debug&&debugView.modes({nonvoid:!1,hidden:!0}),i=1;i<len;++i){if(Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1}),"default"===this.payload[i].name||this.payload[i].args.some((function(val){return val===result}))){success=!0,new Wikifier(this.output,this.payload[i].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++i;i<len;++i)this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0,invalid:!0});debugView.modes({nonvoid:!1,hidden:!0,invalid:!success}),this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0,invalid:!success})}}}),Macro.add("textarea",{isAsync:!0,handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("default value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));Config.debug&&this.debugView.modes({block:!0});var varId=createSlug(varName),defaultValue=this.args[1],autofocus="autofocus"===this.args[2],el=document.createElement("textarea");jQuery(el).attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),rows:4,tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.shadowHandler((function(){State.setVar(varName,this.value)}))).appendTo(this.output),State.setVar(varName,defaultValue),el.textContent=defaultValue,autofocus&&(el.setAttribute("autofocus","autofocus"),Engine.isPlaying()?jQuery(document).one(":passageend",(function(){setTimeout((function(){return el.focus()}),Engine.DOM_DELAY)})):setTimeout((function(){return el.focus()}),Engine.DOM_DELAY))}}),Macro.add("timed",{isAsync:!0,tags:["next"],timers:new Set,t8nRe:/^(?:transition|t8n)$/,handler:function(){if(0===this.args.length)return this.error("no time value specified in <<timed>>");var i,items=[];try{items.push({name:this.name,source:this.source,delay:Math.max(Engine.DOM_DELAY,cssTimeToMS(this.args[0])),content:this.payload[0].contents})}catch(ex){return this.error("".concat(ex.message," in <<timed>>"))}if(this.payload.length>1)try{var len;for(i=1,len=this.payload.length;i<len;++i)items.push({name:this.payload[i].name,source:this.payload[i].source,delay:0===this.payload[i].args.length?items[items.length-1].delay:Math.max(Engine.DOM_DELAY,cssTimeToMS(this.payload[i].args[0])),content:this.payload[i].contents})}catch(ex){return this.error("".concat(ex.message," in <<next>> (#").concat(i,")"))}Config.debug&&this.debugView.modes({block:!0});var transition=this.args.length>1&&this.self.t8nRe.test(this.args[1]),$wrapper=jQuery(document.createElement("span")).addClass("macro-".concat(this.name)).appendTo(this.output);this.self.registerTimeout(this.shadowHandler((function(item){var frag=document.createDocumentFragment();new Wikifier(frag,item.content,{cleanup:!1});var $output=$wrapper;Config.debug&&"next"===item.name&&($output=jQuery(new DebugView($output[0],"macro",item.name,item.source).output)),transition&&($output=jQuery(document.createElement("span")).addClass("macro-timed-insert macro-timed-in").appendTo($output)),$output.append(frag),transition&&setTimeout((function(){return $output.removeClass("macro-timed-in")}),Engine.DOM_DELAY)})),items)},registerTimeout:function(callback,items){if("function"!=typeof callback)throw new TypeError("callback parameter must be a function");var passage=State.passage,turn=State.turns,timers=this.timers,timerId=null,nextItem=items.shift();timerId=setTimeout((function worker(){if(timers.delete(timerId),State.passage===passage&&State.turns===turn){var curItem=nextItem;null!=(nextItem=items.shift())&&(timerId=setTimeout(worker,nextItem.delay),timers.add(timerId)),callback.call(this,curItem)}}),nextItem.delay),timers.add(timerId),1===timers.size&&jQuery(document).one(":passageinit",(function(){timers.forEach((function(timerId){return clearTimeout(timerId)})),timers.clear()}))}}),Macro.add("type",{isAsync:!0,tags:null,typeId:0,handler:function(){if(0===this.args.length)return this.error("no speed specified");var cursor,speed=cssTimeToMS(this.args[0]);if(speed<0)return this.error("speed time value must be non-negative (received: ".concat(this.args[0],")"));for(var elClass="",elId="",elTag="div",skipKey=Config.macros.typeSkipKey,start=400,options=this.args.slice(1);options.length>0;){var option=options.shift();switch(option){case"class":if(0===options.length)return this.error("class option missing required class name(s)");if(""===(elClass=options.shift()))throw new Error('class option class name(s) must be non-empty (received: "")');break;case"element":if(0===options.length)return this.error("element option missing required element tag name");if(""===(elTag=options.shift()))throw new Error('element option tag name must be non-empty (received: "")');break;case"id":if(0===options.length)return this.error("id option missing required ID");if(""===(elId=options.shift()))throw new Error('id option ID must be non-empty (received: "")');break;case"keep":cursor="keep";break;case"none":cursor="none";break;case"skipkey":if(0===options.length)return this.error("skipkey option missing required key value");if(""===(skipKey=options.shift()))throw new Error('skipkey option key value must be non-empty (received: "")');break;case"start":if(0===options.length)return this.error("start option missing required time value");var value=options.shift();if((start=cssTimeToMS(value))<0)throw new Error("start option time value must be non-negative (received: ".concat(value,")"));break;default:return this.error("unknown option: ".concat(option))}}var contents=this.payload[0].contents;if(""!==contents.trim()){Config.debug&&this.debugView.modes({block:!0});var className="macro-".concat(this.name),namespace=".".concat(className),$target=jQuery(document.createElement(elTag)).addClass("".concat(className," ").concat(className,"-target")).appendTo(this.output);TempState.macroTypeQueue||(TempState.macroTypeQueue=[],$(document).off(namespace).one(":passageinit".concat(namespace),(function(){return $(document).off(namespace)})));var startTyping=0===TempState.macroTypeQueue.length,selfId=++this.self.typeId,allowCleanup=this.self.allowCleanup;TempState.macroTypeQueue.push({id:selfId,handler:this.shadowHandler((function(){var $wrapper=jQuery(document.createElement(elTag)).addClass(className);elId&&$wrapper.attr("id",elId),elClass&&$wrapper.addClass(elClass),new Wikifier($wrapper,contents,allowCleanup(elTag)?undefined:{cleanup:!1});var passage=State.passage,turn=State.turns;if(0===speed||!Config.macros.typeVisitedPassages&&State.passages.slice(0,-1).some((function(title){return title===passage}))||$wrapper.find(".error").length>0)return $target.replaceWith($wrapper),TempState.macroTypeQueue.shift(),void(TempState.macroTypeQueue.length>0&&TempState.macroTypeQueue.first().handler());var typer=new NodeTyper({targetNode:$wrapper.get(0),classNames:"none"===cursor?null:"".concat(className,"-cursor")});$target.replaceWith($wrapper);var keydownAndNS="keydown".concat(namespace),typingStopAndNS="".concat(":typingstop").concat(namespace);$(document).off(keydownAndNS).on(keydownAndNS,(function(ev){scrubEventKey(ev.key)!==skipKey||ev.target!==document.body&&ev.target!==document.documentElement||(ev.preventDefault(),$(document).off(keydownAndNS),typer.finish())})).one(typingStopAndNS,(function(){TempState.macroTypeQueue&&(0===TempState.macroTypeQueue.length?triggerEvent(":typingcomplete"):TempState.macroTypeQueue.first().handler())}));var typeNode=function(){var typeNodeMember=function(typeIntervalId){State.passage===passage&&State.turns===turn&&typer.type()||(typeIntervalId&&clearInterval(typeIntervalId),TempState.macroTypeQueue&&TempState.macroTypeQueue.length>0&&TempState.macroTypeQueue.first().id===selfId&&TempState.macroTypeQueue.shift(),triggerEvent(":typingstop",$wrapper),$wrapper.addClass("".concat(className,"-done")),"keep"===cursor&&$wrapper.addClass("".concat(className,"-cursor")))};triggerEvent(":typingstart",$wrapper),typeNodeMember();var typeNodeMemberId=setInterval((function(){return typeNodeMember(typeNodeMemberId)}),speed)};start?setTimeout(typeNode,start):typeNode()}))}),startTyping&&(Engine.isPlaying()?$(document).one(":passageend".concat(namespace),(function(){return TempState.macroTypeQueue.first().handler()})):TempState.macroTypeQueue.first().handler())}},allowCleanup:function(tagName){switch(tagName.toUpperCase()){case"ARTICLE":case"DIV":case"FOOTER":case"FORM":case"HEADER":case"MAIN":case"SECTION":return!0}return!1}}),Macro.add("unset",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no story/temporary variable list specified");try{var unsetExp=this.args.full.replace(/[,;\s]*((?:State\.(?:variables|temporary)|setup)\.)/g,(function(_,p1){return"; delete ".concat(p1)})).replace(/^; /,"");Scripting.evalJavaScript(unsetExp)}catch(ex){return this.error("bad evaluation: ".concat(getErrorMessage(ex)))}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("widget",{tags:null,handler:function(){if(0===this.args.length)return this.error("no widget name specified");var widgetCode,widgetName=this.args[0],isNonVoid=this.args.length>1&&"container"===this.args[1];if(Macro.has(widgetName))return this.error("cannot clobber existing ".concat(Macro.get(widgetName).isWidget?"widget":"macro",' "').concat(widgetName,'"'));try{var widgetDef={isWidget:!0,handler:(widgetCode=this.payload[0].contents,function(){var shadowStore={};Object.hasOwn(State.temporary,"args")&&(shadowStore._args=State.temporary.args),State.temporary.args=Array.from(this.args),State.temporary.args.raw=this.args.raw,State.temporary.args.full=this.args.full,State.temporary.args.name=this.name,this.addShadow("_args"),isNonVoid&&(Object.hasOwn(State.temporary,"contents")&&(shadowStore._contents=State.temporary.contents),State.temporary.contents=this.payload[0].contents,this.addShadow("_contents")),Object.hasOwn(State.variables,"args")&&(shadowStore.$args=State.variables.args),State.variables.args=State.temporary.args,this.addShadow("$args");try{var resFrag=document.createDocumentFragment(),errList=[];if(new Wikifier(resFrag,widgetCode),Array.from(resFrag.querySelectorAll(".error")).forEach((function(errEl){errList.push(errEl.textContent)})),0!==errList.length)return this.error("error".concat(errList.length>1?"s":""," within widget code (").concat(errList.join("; "),")"));this.output.appendChild(resFrag)}catch(ex){return this.error("cannot execute widget: ".concat(ex.message))}finally{Object.hasOwn(shadowStore,"_args")?State.temporary.args=shadowStore._args:delete State.temporary.args,isNonVoid&&(Object.hasOwn(shadowStore,"_contents")?State.temporary.contents=shadowStore._contents:delete State.temporary.contents),Object.hasOwn(shadowStore,"$args")?State.variables.args=shadowStore.$args:delete State.variables.args}})};isNonVoid&&(widgetDef.tags=[]),Macro.add(widgetName,widgetDef),Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error('cannot create widget macro "'.concat(widgetName,'": ').concat(ex.message))}}}),Macro.add("silently","silent"),Macro.add("actions",{handler:function(){console.warn("[DEPRECATED] <<".concat(this.name,">> macro is deprecated."));for(var $list=jQuery(document.createElement("ul")).addClass(this.name).appendTo(this.output),i=0;i<this.args.length;++i){var passage=void 0,text=void 0,$image=void 0,setFn=void 0;if("object"===_typeof(this.args[i])?this.args[i].isImage?($image=jQuery(document.createElement("img")).attr("src",this.args[i].source),Object.hasOwn(this.args[i],"passage")&&$image.attr("data-passage",this.args[i].passage),Object.hasOwn(this.args[i],"title")&&$image.attr("title",this.args[i].title),Object.hasOwn(this.args[i],"align")&&$image.attr("align",this.args[i].align),passage=this.args[i].link,setFn=this.args[i].setFn):(text=this.args[i].text,passage=this.args[i].link,setFn=this.args[i].setFn):text=passage=this.args[i],!(Object.hasOwn(State.variables,"#actions")&&Object.hasOwn(State.variables["#actions"],passage)&&State.variables["#actions"][passage])){var $link=jQuery(Wikifier.createInternalLink(jQuery(document.createElement("li")).appendTo($list),passage,null,function(passage,fn){return function(){Object.hasOwn(State.variables,"#actions")||(State.variables["#actions"]={}),State.variables["#actions"][passage]=!0,"function"==typeof fn&&fn()}}(passage,setFn))).addClass("macro-".concat(this.name)).append($image||document.createTextNode(text));$image&&$link.addClass("link-image")}}}}),Macro.add("choice",{handler:function(){if(console.warn("[DEPRECATED] <<".concat(this.name,">> macro is deprecated.")),0===this.args.length)return this.error("no passage specified");var passage,text,$image,setFn,$link,choiceId=State.passage;if(1===this.args.length?"object"===_typeof(this.args[0])?this.args[0].isImage?($image=jQuery(document.createElement("img")).attr("src",this.args[0].source),Object.hasOwn(this.args[0],"passage")&&$image.attr("data-passage",this.args[0].passage),Object.hasOwn(this.args[0],"title")&&$image.attr("title",this.args[0].title),Object.hasOwn(this.args[0],"align")&&$image.attr("align",this.args[0].align),passage=this.args[0].link,setFn=this.args[0].setFn):(text=this.args[0].text,passage=this.args[0].link,setFn=this.args[0].setFn):text=passage=this.args[0]:(passage=this.args[0],text=this.args[1]),Object.hasOwn(State.variables,"#choice")&&Object.hasOwn(State.variables["#choice"],choiceId)&&State.variables["#choice"][choiceId])return $link=jQuery(document.createElement("span")).addClass("link-disabled macro-".concat(this.name)).attr("tabindex",-1).append($image||document.createTextNode(text)).appendTo(this.output),void($image&&$link.addClass("link-image"));$link=jQuery(Wikifier.createInternalLink(this.output,passage,null,(function(){Object.hasOwn(State.variables,"#choice")||(State.variables["#choice"]={}),State.variables["#choice"][choiceId]=!0,"function"==typeof setFn&&setFn()}))).addClass("macro-".concat(this.name)).append($image||document.createTextNode(text)),$image&&$link.addClass("link-image")}});var Dialog=function(){var DEFAULT_TOP=50,$overlay=null,$dialog=null,$title=null,$body=null,lastActive=null,observer=null,onCloseFn=null,scrollbarWidth=0;function calcInset(top){var $window=jQuery(window),inset={left:"",right:"",top:"",bottom:""};$dialog.css(inset);var horzSpace=$window.width()-$dialog.outerWidth(!0)-1,vertSpace=$window.height()-$dialog.outerHeight(!0)-1;if(horzSpace<=20+scrollbarWidth&&(vertSpace-=scrollbarWidth),vertSpace<=20+scrollbarWidth&&(horzSpace-=scrollbarWidth),inset.left=inset.right=horzSpace<=20?"10px":(horzSpace/2|0)+"px",vertSpace<=20)inset.top=inset.bottom="10px";else{var vertPos=vertSpace/2|0;inset.top=vertPos>top?top+"px":inset.bottom=vertPos+"px"}return inset}function onResize(top){"block"===$dialog.css("display")&&$dialog.css(calcInset(null!=top?top:DEFAULT_TOP))}function close(ev){if(triggerEvent(":dialogclosing",$body),jQuery(document).off(".dialog-close"),observer?(observer.disconnect(),observer=null):$body.off(".dialog-resize"),jQuery(window).off(".dialog-resize"),$dialog.removeClass("open").css({left:"",right:"",top:"",bottom:""}),jQuery("#ui-bar,#story").find("[tabindex=-2]").removeAttr("aria-hidden").attr("tabindex",0),jQuery("body>[tabindex=-3]").removeAttr("aria-hidden").removeAttr("tabindex"),$overlay.removeClass("open"),jQuery(document.documentElement).removeAttr("data-dialog"),$title.empty(),$body.empty().removeClass(),lastActive&&(lastActive.focus(),lastActive=null),onCloseFn)try{onCloseFn(ev)}finally{onCloseFn=null}return triggerEvent(":dialogclose",$body),triggerEvent(":dialogclosed",$body),Dialog}function create(title,classNames){return $title.empty().append((null!=title?String(title):"")||" "),$body.empty().removeClass(),null!=classNames&&$body.addClass(classNames),Dialog}function getBody(){return $body.get(0)}function isOpen(classNames){return $dialog.hasClass("open")&&(!classNames||classNames.splitOrEmpty(/\s+/).every((function(cn){return $body.hasClass(cn)})))}function wiki(){var _$body2;return(_$body2=$body).wiki.apply(_$body2,arguments),Dialog}return Object.preventExtensions(Object.create(null,{append:{value:function(){var _$body;return(_$body=$body).append.apply(_$body,arguments),Dialog}},body:{value:getBody},close:{value:close},create:{value:create},empty:{value:function(){return $body.empty(),Dialog}},init:{value:function(){if(!document.getElementById("ui-dialog")){scrollbarWidth=function(){var calcWidth;try{var inner=document.createElement("p");inner.style.width="100%",inner.style.height="200px";var outer=document.createElement("div");outer.style.position="absolute",outer.style.left="0",outer.style.top="0",outer.style.width="100px",outer.style.height="100px",outer.style.visibility="hidden",outer.style.overflow="hidden",outer.appendChild(inner),document.body.appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow="auto";var w2=inner.offsetWidth;w1===w2&&(w2=outer.clientWidth),document.body.removeChild(outer),calcWidth=w1-w2}catch(ex){}return calcWidth||17}();var $elems=jQuery(document.createDocumentFragment()).append('<div id="ui-overlay" class="ui-close"></div><div id="ui-dialog" tabindex="0" role="dialog" aria-labelledby="ui-dialog-title" aria-modal="true"><div id="ui-dialog-titlebar"><h1 id="ui-dialog-title"></h1>'+'<button id="ui-dialog-close" class="ui-close" tabindex="0" aria-label="'.concat(L10n.get("textClose"),'"></button>')+'</div><div id="ui-dialog-body"></div></div>');$overlay=jQuery($elems.find("#ui-overlay").get(0)),$dialog=jQuery($elems.find("#ui-dialog").get(0)),$title=jQuery($elems.find("#ui-dialog-title").get(0)),$body=jQuery($elems.find("#ui-dialog-body").get(0)),$elems.insertBefore("body>script#script-sugarcube")}}},isOpen:{value:isOpen},open:{value:function(options,onClose){var top=Object.assign({top:DEFAULT_TOP},options).top;if(null!=onClose){var closeType=getTypeOf(onClose);if("function"!==closeType)throw new TypeError("Dialog.open onClose parameter must be a function (received: ".concat(closeType,")"));onCloseFn=onClose}else onCloseFn=null;triggerEvent(":dialogopening",$body),isOpen()||(lastActive=getActiveElement()),jQuery(document.documentElement).attr("data-dialog","open"),$overlay.addClass("open"),jQuery("body>:not(script,#store-area,tw-storydata,#ui-bar,#ui-overlay,#ui-dialog)").attr("tabindex",-3).attr("aria-hidden",!0),jQuery("#ui-bar,#story").find("[tabindex]:not([tabindex^=-])").attr("tabindex",-2).attr("aria-hidden",!0);var resizeHandler=jQuery.throttle(40,(function(){return onResize(top)}));return $body.imagesLoaded().always(resizeHandler),$dialog.css(calcInset(top)).addClass("open").focus(),jQuery(window).off(".dialog-resize").on("resize.dialog-resize",resizeHandler),Has.mutationObserver?(observer=new MutationObserver((function(mutations){for(var i=0;i<mutations.length;++i)if("childList"===mutations[i].type){$body.imagesLoaded().always(resizeHandler),resizeHandler();break}}))).observe(getBody(),{childList:!0,subtree:!0}):$body.off(".dialog-resize").on("DOMNodeInserted.dialog-resize DOMNodeRemoved.dialog-resize",(function(){$body.imagesLoaded().always(resizeHandler),resizeHandler()})),jQuery(document).off(".dialog-close").one("click.dialog-close",".ui-close",(function(ev){close(ev)})).one("keypress.dialog-close",".ui-close",(function(ev){13!==ev.which&&32!==ev.which||triggerEvent("click",this)})),triggerEvent(":dialogopen",$body),triggerEvent(":dialogopened",$body),Dialog}},resize:{value:function(options){return onResize("object"===_typeof(options)?options.top:undefined)}},wiki:{value:wiki},wikiPassage:{value:function(name){return wiki(Story.get(name).processText())}},setup:{value:function(title,classNames){return console.warn("[DEPRECATED] Dialog.setup() is deprecated."),create(title,classNames),getBody()}}}))}(),Engine=function(){var States=enumFrom({Init:"init",Idle:"idle",Playing:"playing",Rendering:"rendering"}),DOM_DELAY=40,_initDebugViews=[],_state=States.Init,_lastPlay=null;function engineGo(offset){var succeeded=State.go(offset);return succeeded&&engineShow(),succeeded}function engineShow(){return enginePlay(State.passage,!0)}function enginePlay(title,noHistory){if(_state===States.Init)return!1;var passageReadyOutput,passageDoneOutput,passageTitle=title;if(_state=States.Playing,TempState={},State.clearTemporary(),"function"==typeof Config.navigation.override)try{var overrideTitle=Config.navigation.override(passageTitle);overrideTitle&&(passageTitle=overrideTitle)}catch(ex){}var passage=Story.get(passageTitle);if(jQuery.event.trigger({passage:passage,type:":passageinit",detail:{passage:passage}}),Object.keys(prehistory).forEach((function(task){"function"==typeof prehistory[task]&&prehistory[task].call(passage,task)})),noHistory||State.create(passage.name),document.body.className&&(document.body.className=""),_lastPlay=now(),Object.keys(predisplay).forEach((function(task){"function"==typeof predisplay[task]&&predisplay[task].call(passage,task)})),Story.has("PassageReady"))try{passageReadyOutput=Wikifier.wikifyEval(Story.get("PassageReady").text)}catch(ex){console.error(ex),Alert.error("PassageReady",ex.message)}_state=States.Rendering;var dataTags=passage.tags.length>0?passage.tags.join(" "):null,passageEl=document.createElement("div");jQuery(passageEl).attr({id:passage.id,"data-passage":passage.name,"data-tags":dataTags}).addClass("passage passage-in ".concat(passage.className)),jQuery(document.body).attr("data-tags",dataTags).addClass(passage.className),jQuery(document.documentElement).attr("data-tags",dataTags),jQuery.event.trigger({content:passageEl,passage:passage,type:":passagestart",detail:{content:passageEl,passage:passage}}),Object.keys(prerender).forEach((function(task){"function"==typeof prerender[task]&&prerender[task].call(passage,passageEl,task)})),Story.has("PassageHeader")&&new Wikifier(passageEl,Story.get("PassageHeader").processText()),passageEl.appendChild(passage.render()),Story.has("PassageFooter")&&new Wikifier(passageEl,Story.get("PassageFooter").processText()),jQuery.event.trigger({content:passageEl,passage:passage,type:":passagerender",detail:{content:passageEl,passage:passage}}),Object.keys(postrender).forEach((function(task){"function"==typeof postrender[task]&&postrender[task].call(passage,passageEl,task)}));var debugView,containerEl=document.getElementById("passages");if(containerEl.hasChildNodes()&&("number"==typeof Config.passages.transitionOut||"string"==typeof Config.passages.transitionOut&&""!==Config.passages.transitionOut&&Has.transitionEndEvent?Array.from(containerEl.childNodes).forEach((function(outgoing){var $outgoing=jQuery(outgoing);if(outgoing.nodeType===Node.ELEMENT_NODE&&$outgoing.hasClass("passage")){if($outgoing.hasClass("passage-out"))return;$outgoing.attr({id:"out-".concat($outgoing.attr("id")),"aria-hidden":"true","aria-live":"off"}).addClass("passage-out"),"string"==typeof Config.passages.transitionOut?$outgoing.on(Has.transitionEndEvent,(function(ev){ev.originalEvent.propertyName===Config.passages.transitionOut&&$outgoing.remove()})):setTimeout((function(){return $outgoing.remove()}),Math.max(DOM_DELAY,Config.passages.transitionOut))}else $outgoing.remove()})):jQuery(containerEl).empty()),jQuery(passageEl).appendTo(containerEl),setTimeout((function(){return jQuery(passageEl).removeClass("passage-in")}),DOM_DELAY/2),window.scroll(0,0),_state=States.Playing,Story.has("PassageDone"))try{passageDoneOutput=Wikifier.wikifyEval(Story.get("PassageDone").text)}catch(ex){console.error(ex),Alert.error("PassageDone",ex.message)}(jQuery.event.trigger({content:passageEl,passage:passage,type:":passagedisplay",detail:{content:passageEl,passage:passage}}),Object.keys(postdisplay).forEach((function(task){"function"==typeof postdisplay[task]&&postdisplay[task].call(passage,task)})),UI.update(),Config.debug)&&(null!=passageReadyOutput&&((debugView=new DebugView(document.createDocumentFragment(),"special","PassageReady","PassageReady")).modes({hidden:!0}),debugView.append(passageReadyOutput),jQuery(passageEl).prepend(debugView.output)),null!=passageDoneOutput&&((debugView=new DebugView(document.createDocumentFragment(),"special","PassageDone","PassageDone")).modes({hidden:!0}),debugView.append(passageDoneOutput),jQuery(passageEl).append(debugView.output)),1===State.turns&&_initDebugViews.length>0&&jQuery(passageEl).prepend(_initDebugViews));return jQuery("#story").find("a,link,button,input,select,textarea").not("[tabindex]").attr("tabindex",0),State.turns>1&&Save.browser.auto.isEnabled()&&Save.browser.auto.save(),jQuery.event.trigger({content:passageEl,passage:passage,type:":passageend",detail:{content:passageEl,passage:passage}}),_state=States.Idle,_lastPlay=now(),passageEl}return Object.preventExtensions(Object.create(null,{States:{value:States},DOM_DELAY:{get:function(){return DOM_DELAY}},init:{value:function(){if(_state===States.Init){jQuery("#init-no-js,#init-lacking").remove();var $main=jQuery('<div id="story" role="main"></div>'),markup=Story.has("StoryInterface")&&Story.get("StoryInterface").text.trim();if(markup){if(Config.ui.updateStoryElements=!1,UIBar.destroy(),jQuery(document.head).find("#style-core-display").remove(),$main.append(markup),$main.find("#story").length>0)throw new Error('element with ID "story" found within "StoryInterface" special passage');var $passages=$main.find("#passages");if(0===$passages.length)throw new Error('no element with ID "passages" found within "StoryInterface" special passage');$passages.empty().not("[aria-live]").attr("aria-live","polite").end();var $dataInitPassages=$main.find("[data-init-passage]"),$dataPassages=$main.find("[data-passage]");$dataInitPassages.each((function(i,el){if("passages"===el.id)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' id="passages"> must not contain a "data-init-passage" content attribute'));var passage=el.getAttribute("data-init-passage").trim();if(el.hasAttribute("data-passage"))throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' data-init-passage="').concat(passage,'"> must not contain a "data-passage" content attribute'));if(null!==el.firstElementChild)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' data-init-passage="').concat(passage,'"> contains child elements'));Story.has(passage)&&jQuery(document).one(":uiupdate".concat(".engine"),(function(){var frag=document.createDocumentFragment();new Wikifier(frag,Story.get(passage).processText().trim()),jQuery(el).empty().append(frag)}))})),$dataPassages.each((function(i,el){if("passages"===el.id)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' id="passages"> must not contain a "data-passage" content attribute'));var passage=el.getAttribute("data-passage").trim();if(null!==el.firstElementChild)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' data-passage="').concat(passage,'"> contains child elements'));Story.has(passage)&&jQuery(document).on(":uiupdate".concat(".engine"),(function(){var frag=document.createDocumentFragment();new Wikifier(frag,Story.get(passage).processText().trim()),jQuery(el).empty().append(frag)}))}))}else $main.append('<div id="passages" aria-live="polite"></div>');$main.insertBefore("body>script#script-sugarcube")}}},runUserScripts:{value:function(){var storyStyle;_state===States.Init&&(storyStyle=document.createElement("style"),new StyleWrapper(storyStyle).add(Story.getStyles().map((function(style){return style.text.trim()})).join("\n")),jQuery(storyStyle).appendTo(document.head).attr({id:"style-story",type:"text/css"}),Story.getScripts().forEach((function(script){try{Scripting.evalJavaScript(script.text)}catch(ex){console.error(ex),Alert.error(script.name,getErrorMessage(ex))}})),Story.getWidgets().forEach((function(widget){try{Wikifier.wikifyEval(widget.processText())}catch(ex){console.error(ex),Alert.error(widget.name,getErrorMessage(ex))}})))}},runUserInit:{value:function(){if(_state===States.Init&&(Story.getInits().forEach((function(passage){try{var debugBuffer=Wikifier.wikifyEval(passage.text);if(Config.debug){var debugView=new DebugView(document.createDocumentFragment(),"special","".concat(passage.name," [init-tagged]"),"".concat(passage.name," [init-tagged]"));debugView.modes({hidden:!0}),debugView.append(debugBuffer),_initDebugViews.push(debugView.output)}}catch(ex){console.error(ex),Alert.error("".concat(passage.name," [init-tagged]"),getErrorMessage(ex))}})),Story.has("StoryInit")))try{var debugBuffer=Wikifier.wikifyEval(Story.get("StoryInit").text);if(Config.debug){var debugView=new DebugView(document.createDocumentFragment(),"special","StoryInit","StoryInit");debugView.modes({hidden:!0}),debugView.append(debugBuffer),_initDebugViews.push(debugView.output)}}catch(ex){console.error(ex),Alert.error("StoryInit",getErrorMessage(ex))}}},start:{value:function(){if(_state===States.Init){if(null==Config.passages.start)throw new Error("starting passage not selected");if(!Story.has(Config.passages.start))throw new Error('starting passage ("'.concat(Config.passages.start,'") not found'));if(_state=States.Idle,document.documentElement.focus(),State.restore())engineShow();else{var autoloadType=_typeof(Config.saves._internal_autoload_);"string"===autoloadType?"prompt"===Config.saves._internal_autoload_&&(UI.buildAutoload(),Dialog.open()):new Promise((function(resolve,reject){if(Save.browser.size>0&&("boolean"===autoloadType&&Config.saves._internal_autoload_||"function"===autoloadType&&Config.saves._internal_autoload_()))return resolve();reject()})).then((function(){Save.browser.continue(),engineShow()})).catch((function(){enginePlay(Config.passages.start)}))}}}},restart:{value:function(){LoadScreen.show(),window.scroll(0,0),State.reset(),triggerEvent(":enginerestart"),window.location.reload()}},state:{get:function(){return _state}},isIdle:{value:function(){return _state===States.Idle}},isPlaying:{value:function(){return _state!==States.Idle}},isRendering:{value:function(){return _state===States.Rendering}},lastPlay:{get:function(){return _lastPlay}},goTo:{value:function(index){var succeeded=State.goTo(index);return succeeded&&engineShow(),succeeded}},go:{value:engineGo},backward:{value:function(){return engineGo(-1)}},forward:{value:function(){return engineGo(1)}},show:{value:engineShow},play:{value:enginePlay},display:{value:function(title,link,option){console.warn("[DEPRECATED] Engine.display() is deprecated.");var noHistory=!1;switch(option){case undefined:break;case"replace":case"back":noHistory=!0;break;default:throw new Error('Engine.display option parameter called with obsolete value "'.concat(option,'"; please notify the developer'))}enginePlay(title,noHistory)}},minDomActionDelay:{get:function(){return DOM_DELAY}}}))}(),Passage=(tagsToSkip=/^(?:debug|nobr|passage|widget|twine\..*)$/i,encodedRE=/\r/g,hasEncodedRE=new RegExp(encodedRE.source),decodePassageText=function(str){if(null==str)return"";var val=String(str);return val&&hasEncodedRE.test(val)?val.replace(encodedRE,""):val},function(){return _createClass((function Passage(name,el){var _this19=this;_classCallCheck(this,Passage),Object.defineProperties(this,{name:{value:decodeEntities(name)},element:{value:el||null},tags:{value:Object.freeze(el&&el.hasAttribute("tags")?Array.from(new Set(el.getAttribute("tags").trim().splitOrEmpty(/\s+/))):[])}}),Object.defineProperties(this,{id:{value:"passage-".concat(createSlug(this.name))},classes:{value:Object.freeze(0===this.tags.length?[]:_this19.tags.filter((function(tag){return!tagsToSkip.test(tag)})).map((function(tag){return createSlug(tag)})))},domId:{get:function(){return this.id}},title:{get:function(){return this.name}}})}),[{key:"className",get:function(){return this.classes.join(" ")}},{key:"text",get:function(){if(null==this.element){var passage=encodeMarkup(this.name),mesg="".concat(L10n.get("errorViewTitle"),": ").concat(L10n.get("errorNonexistentPassage",{passage:passage}));return'<div class="error-view"><span class="error">'.concat(mesg,"</span></div>")}return decodePassageText(this.element.textContent)}},{key:"processText",value:function(){if(null==this.element)return this.text;if(this.tags.includes("Twine.image"))return"[img[".concat(this.text,"]]");var processed=this.text;return Config.passages.onProcess&&(processed=Config.passages.onProcess.call(null,{title:this.name,tags:this.tags,text:processed})),(Config.passages.nobr||this.tags.includes("nobr"))&&(processed=processed.replace(/^\n+|\n+$/g,"").replace(/\n+/g," ")),processed}},{key:"render",value:function(options){var frag=document.createDocumentFragment();return new Wikifier(frag,this.processText(),options),frag}},{key:"description",value:function(){return"".concat(L10n.get("textTurn")," ").concat(State.turns)}}])}()),encodedRE,hasEncodedRE,tagsToSkip,decodePassageText,Save=function(){var Type=enumFrom({Unknown:0,Auto:1,Slot:2,Disk:3,Base64:4,Autosave:1,Serialize:4}),MAX_INDEX=15,INDEX_DELIMITER=":",AUTO_SUBKEY="".concat("save.","auto."),AUTO_DATA_SUBKEY="".concat(AUTO_SUBKEY,"data").concat(INDEX_DELIMITER),AUTO_INFO_SUBKEY="".concat(AUTO_SUBKEY,"info").concat(INDEX_DELIMITER),SLOT_SUBKEY="".concat("save.","slot."),SLOT_DATA_SUBKEY="".concat(SLOT_SUBKEY,"data").concat(INDEX_DELIMITER),SLOT_INFO_SUBKEY="".concat(SLOT_SUBKEY,"info").concat(INDEX_DELIMITER),onLoadHandlers=new Set,onSaveHandlers=new Set;function createDetails(saveType,description,metadata){var metadataType=_typeof(metadata);if("object"!==metadataType&&"undefined"!==metadataType)throw new TypeError("metadata parameter must be an object or null/undefined");var cfgMetadata=Config.saves.metadata?Config.saves.metadata(saveType):undefined,cfgMetadataType=_typeof(cfgMetadata);if("object"!==cfgMetadataType&&"undefined"!==cfgMetadataType)throw new TypeError("Config.saves.metadata function must return an object or null/undefined");var desc,details={type:saveType};null!=description&&(desc=String(description).trim()),desc||"function"!=typeof Config.saves.descriptions||"string"==typeof(desc=Config.saves.descriptions(saveType))&&(desc=desc.trim()),details.desc=desc||"".concat(L10n.get("textTurn")," ").concat(State.turns);var fullMetadata=Object.assign({},cfgMetadata,metadata);return Object.keys(fullMetadata).length>0&&(details.metadata=fullMetadata),details}function findNewest(saveType){var keys;switch(saveType){case Type.Auto:keys=getKeys(isAutoInfoKey);break;case Type.Slot:keys=getKeys(isSlotInfoKey);break;default:keys=getKeys(isInfoKey)}switch(keys.length){case 0:return{index:-1};case 1:return{index:getIndexFromKey(keys[0]),type:getTypeFromKey(keys[0])}}return keys.map((function(key){return{value:{index:getIndexFromKey(key),type:getTypeFromKey(key)},date:storage.get(key).date}})).sort((function(a,b){return b.date-a.date})).first().value}function getIndexFromKey(key){var pos=key.lastIndexOf(INDEX_DELIMITER);if(-1===pos)throw new Error("unable to get index from save key (received: ".concat(key,")"));return Number(key.slice(pos+1))}function getAutoInfoKeyFromIndex(index){return"".concat(AUTO_INFO_SUBKEY).concat(index)}function getAutoDataKeyFromIndex(index){return"".concat(AUTO_DATA_SUBKEY).concat(index)}function getSlotInfoKeyFromIndex(index){return"".concat(SLOT_INFO_SUBKEY).concat(index)}function getSlotDataKeyFromIndex(index){return"".concat(SLOT_DATA_SUBKEY).concat(index)}function getKeys(predicate){return storage.keys().filter(predicate)}function getTypeFromKey(key){return isAutoKey(key)?Type.Auto:Type.Slot}function isInfoKey(key){return key.startsWith(AUTO_INFO_SUBKEY)||key.startsWith(SLOT_INFO_SUBKEY)}function isAutoKey(key){return key.startsWith(AUTO_SUBKEY)}function isAutoInfoKey(key){return key.startsWith(AUTO_INFO_SUBKEY)}function isSlotKey(key){return key.startsWith(SLOT_SUBKEY)}function isSlotInfoKey(key){return key.startsWith(SLOT_INFO_SUBKEY)}function saveBlobToDiskAs(data,filename,extension){if("string"!=typeof filename)throw new Error("filename parameter must be a string");var baseName=createFilename(filename);if(""===baseName)throw new Error("filename parameter must not consist solely of illegal characters");var datestamp=function(date){if(!(date instanceof Date))throw new TypeError("createDatestamp date parameter must be a Date object");var MM=date.getMonth()+1,DD=date.getDate(),hh=date.getHours(),mm=date.getMinutes(),ss=date.getSeconds();return MM<10&&(MM="0".concat(MM)),DD<10&&(DD="0".concat(DD)),hh<10&&(hh="0".concat(hh)),mm<10&&(mm="0".concat(mm)),ss<10&&(ss="0".concat(ss)),"".concat(date.getFullYear()).concat(MM).concat(DD,"-").concat(hh).concat(mm).concat(ss)}(new Date),fileExt=createFilename(extension)||"save";saveAs(new Blob([data],{type:"text/plain;charset=UTF-8"}),"".concat(baseName,"-").concat(datestamp,".").concat(fileExt))}function saveToBrowserStorage(saveData){var data=saveData.data,dataKey=saveData.dataKey,info=saveData.info,infoKey=saveData.infoKey;try{storage.set(dataKey,data)&&(storage.set(infoKey,info)||storage.delete(dataKey))}catch(ex){throw storage.delete(dataKey),storage.delete(infoKey),ex}}function browserClear(){return autoClear(),slotClear(),!0}function browserIsEnabled(){return autoIsEnabled()||slotIsEnabled()}function autoClear(){return getKeys(isAutoKey).forEach((function(key){return storage.delete(key)})),!0}function autoDelete(index){if(!Number.isInteger(index))throw new TypeError("auto save index must be an integer");if(index<0||index>MAX_INDEX)throw new RangeError("auto save index out of bounds (range: 0–".concat(MAX_INDEX,"; received: ").concat(index,")"));return storage.delete(getAutoInfoKeyFromIndex(index)),storage.delete(getAutoDataKeyFromIndex(index)),!0}function autoGet(index){if(!Number.isInteger(index))throw new TypeError("auto save index must be an integer");if(index<0||index>MAX_INDEX)throw new RangeError("auto save index out of bounds (range: 0–".concat(MAX_INDEX,"; received: ").concat(index,")"));return storage.get(getAutoInfoKeyFromIndex(index))}function autoHas(index){if(!Number.isInteger(index))throw new TypeError("auto save index must be an integer");if(index<0||index>MAX_INDEX)throw new RangeError("auto save index out of bounds (range: 0–".concat(MAX_INDEX,"; received: ").concat(index,")"));return storage.has(getAutoInfoKeyFromIndex(index))}function autoIsEnabled(){return"cookie"!==storage.name&&Config.saves.maxAutoSaves>0}function autoLoad(index){return new Promise((function(resolve){if(!Number.isInteger(index))throw new TypeError("auto save index must be an integer");if(index<0||index>MAX_INDEX)throw new RangeError("auto save index out of bounds (range: 0–".concat(MAX_INDEX,"; received: ").concat(index,")"));if(Engine.state===Engine.States.Init)throw new Error(L10n.get("saveErrorLoadTooEarly"));var info=storage.get(getAutoInfoKeyFromIndex(index)),data=storage.get(getAutoDataKeyFromIndex(index));if(!info||!data)throw new Error(L10n.get("saveErrorNonexistent"));unmarshal(Object.assign(info,data)),resolve(!0)}))}function autoSave(desc,metadata){if(!autoIsEnabled()||"function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed(Type.Auto))return!1;var index=(findNewest(Type.Auto).index+1)%Config.saves.maxAutoSaves,infoKey=getAutoInfoKeyFromIndex(index),dataKey=getAutoDataKeyFromIndex(index),_splitSave3=splitSave(marshal(createDetails(Type.Auto,desc,metadata))),info=_splitSave3.info;saveToBrowserStorage({data:_splitSave3.data,dataKey:dataKey,info:info,infoKey:infoKey})}function slotClear(){return getKeys(isSlotKey).forEach((function(key){return storage.delete(key)})),!0}function slotDelete(index){if(!Number.isInteger(index))throw new TypeError("slot save index must be an integer");if(index<0||index>MAX_INDEX)throw new RangeError("slot save index out of bounds (range: 0–".concat(MAX_INDEX,"; received: ").concat(index,")"));return storage.delete(getSlotInfoKeyFromIndex(index)),storage.delete(getSlotDataKeyFromIndex(index)),!0}function slotGet(index){if(!Number.isInteger(index))throw new TypeError("slot save index must be an integer");if(index<0||index>MAX_INDEX)throw new RangeError("slot save index out of bounds (range: 0–".concat(MAX_INDEX,"; received: ").concat(index,")"));return storage.get(getSlotInfoKeyFromIndex(index))}function slotHas(index){if(!Number.isInteger(index))throw new TypeError("slot save index must be an integer");if(index<0||index>MAX_INDEX)throw new RangeError("slot save index out of bounds (range: 0–".concat(MAX_INDEX,"; received: ").concat(index,")"));return storage.has(getSlotInfoKeyFromIndex(index))}function slotIsEnabled(){return"cookie"!==storage.name&&Config.saves.maxSlotSaves>0}function slotLoad(index){return new Promise((function(resolve){if(!Number.isInteger(index))throw new TypeError("slot save index must be an integer");if(index<0||index>MAX_INDEX)throw new RangeError("slot save index out of bounds (range: 0–".concat(MAX_INDEX,"; received: ").concat(index,")"));if(Engine.state===Engine.States.Init)throw new Error(L10n.get("saveErrorLoadTooEarly"));var info=storage.get(getSlotInfoKeyFromIndex(index)),data=storage.get(getSlotDataKeyFromIndex(index));if(!info||!data)throw new Error(L10n.get("saveErrorNonexistent"));unmarshal(Object.assign(info,data)),resolve(!0)}))}function slotSave(index,desc,metadata){if(!Number.isInteger(index))throw new TypeError("slot save index must be an integer");if(index<0||index>=Config.saves.maxSlotSaves)throw new RangeError("slot save index out of bounds (range: 0–".concat(Config.saves.maxSlotSaves-1,"; received: ").concat(index,")"));if(!slotIsEnabled()||"function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed(Type.Slot))throw new Error(L10n.get("saveErrorDisallowed"));var infoKey=getSlotInfoKeyFromIndex(index),dataKey=getSlotDataKeyFromIndex(index),_splitSave4=splitSave(marshal(createDetails(Type.Slot,desc,metadata))),info=_splitSave4.info;saveToBrowserStorage({data:_splitSave4.data,dataKey:dataKey,info:info,infoKey:infoKey})}function slotSize(){return getKeys(isSlotInfoKey).length}function diskLoad(event){return new Promise((function(resolve,reject){var reader=new FileReader;jQuery(reader).on("loadend",(function(){try{if(Engine.state===Engine.States.Init)throw new Error(L10n.get("saveErrorLoadTooEarly"));if(reader.error)throw new Error("".concat(L10n.get("saveErrorDiskLoadFail"),": ").concat(reader.error));var save;try{save=Serial.parse(LZString.decompressFromBase64(reader.result))}catch(ex){throw new Error(L10n.get("saveErrorDecodeFail"))}unmarshal(save),resolve(save.metadata)}catch(ex){reject(ex)}})),reader.readAsText(event.target.files[0])}))}function diskSave(filename,metadata){if(null==filename)throw new Error("Save.disk.save filename parameter is required");if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed(Type.Disk))throw new Error(L10n.get("saveErrorDisallowed"));var details=createDetails(Type.Disk,filename,metadata);saveBlobToDiskAs(LZString.compressToBase64(Serial.stringify(marshal(details))),filename,"save")}function base64Load(base64){return new Promise((function(resolve){if(Engine.state===Engine.States.Init)throw new Error(L10n.get("saveErrorLoadTooEarly"));var save;try{save=Serial.parse(LZString.decompressFromBase64(base64))}catch(ex){throw new Error(L10n.get("saveErrorDecodeFail"))}unmarshal(save),resolve(save.metadata)}))}function base64Save(metadata){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed(Type.Base64))throw new Error(L10n.get("saveErrorDisallowed"));var details=createDetails(Type.Base64,null,metadata);return LZString.compressToBase64(Serial.stringify(marshal(details)))}function marshal(details){var save=Object.assign({},details,{date:Date.now(),id:Config.saves.id,state:State.marshalForSave()});return null!=Config.saves.version&&(save.version=Config.saves.version),onSaveHandlers.forEach((function(fn){return fn(save,function(save){switch(save.type){case Type.Auto:return{type:"autosave"};case Type.Slot:return{type:"slot"};case Type.Disk:return{type:"disk"};case Type.Base64:return{type:"serialize"}}throw new Error("save.type must be an integer (received: ".concat(_typeof(save.type),")"))}(save))})),save.state.delta=State.deltaEncode(save.state.history),delete save.state.history,save}function splitSave(save){var state=save.state;return{info:_objectWithoutProperties(save,_excluded3),data:{state:state}}}function unmarshal(save){if(null==save||"object"!==_typeof(save)||!Object.hasOwn(save,"id")||!Object.hasOwn(save,"state")||"object"!==_typeof(save.state)||!Object.hasOwn(save.state,"delta"))throw new Error(L10n.get("saveErrorInvalidData"));if(save.id!==Config.saves.id)throw new Error(L10n.get("saveErrorIdMismatch"));if(save.state.history=State.deltaDecode(save.state.delta),delete save.state.delta,"string"==typeof save.type){switch(save.type){case"auto":case"autosave":save.type=Type.Auto;break;case"slot":save.type=Type.Slot;break;case"disk":save.type=Type.Disk;break;case"base64":case"serialize":save.type=Type.Base64}if("number"!=typeof save.type)throw new Error("save.type is unknown")}onLoadHandlers.forEach((function(fn){return fn(save)})),State.unmarshalForSave(save.state)}return Object.preventExtensions(Object.create(null,{Type:{value:Type},MAX_INDEX:{get:function(){return MAX_INDEX}},init:{value:function(){return function(){var oldSaves=storage.get("saves");if(null===oldSaves)return;if(autoClear(),slotClear(),oldSaves.autosave){var _splitSave=splitSave(oldSaves.autosave),info=_splitSave.info,data=_splitSave.data;info.desc=info.title,delete info.title,info.type=Type.Auto;var infoKey=getAutoInfoKeyFromIndex(0),dataKey=getAutoDataKeyFromIndex(0);storage.set(dataKey,data)&&(storage.set(infoKey,info)||storage.delete(dataKey))}oldSaves.slots.forEach((function(save,index){if(save){var _splitSave2=splitSave(save),info=_splitSave2.info,data=_splitSave2.data;info.desc=info.title,delete info.title,info.type=Type.Slot;var infoKey=getSlotInfoKeyFromIndex(index),dataKey=getSlotDataKeyFromIndex(index);storage.set(dataKey,data)&&(storage.set(infoKey,info)||storage.delete(dataKey))}})),storage.delete("saves")}(),!0}},browser:{value:Object.preventExtensions(Object.create(null,{clear:{value:browserClear},continue:{value:function(){var newest=findNewest();return-1===newest.index?Promise.reject(new Error(L10n.get("saveErrorNonexistent"))):newest.type===Type.Auto?autoLoad(newest.index):slotLoad(newest.index)}},isEnabled:{value:browserIsEnabled},size:{get:function(){return getKeys(isInfoKey).length}},auto:{value:Object.preventExtensions(Object.create(null,{clear:{value:autoClear},delete:{value:autoDelete},entries:{value:function(){return getKeys(isAutoInfoKey).map((function(key){return{index:getIndexFromKey(key),info:storage.get(key)}})).sort((function(a,b){return b.info.date-a.info.date}))}},get:{value:autoGet},has:{value:autoHas},isEnabled:{value:autoIsEnabled},load:{value:autoLoad},save:{value:autoSave},size:{get:function(){return getKeys(isAutoInfoKey).length}}}))},slot:{value:Object.preventExtensions(Object.create(null,{clear:{value:slotClear},delete:{value:slotDelete},entries:{value:function(){return getKeys(isSlotInfoKey).map((function(key){return{index:getIndexFromKey(key),info:storage.get(key)}})).sort((function(a,b){return a.index-b.index}))}},get:{value:slotGet},has:{value:slotHas},isEnabled:{value:slotIsEnabled},load:{value:slotLoad},save:{value:slotSave},size:{get:slotSize}}))}}))},disk:{value:Object.preventExtensions(Object.create(null,{export:{value:function(filename){if(null==filename)throw new Error("Save.browser.export filename parameter is required");var auto=getKeys(isAutoInfoKey).map((function(infoKey){var index=getIndexFromKey(infoKey),info=storage.get(infoKey),data=storage.get(getAutoDataKeyFromIndex(index));if(!info||!data)throw new Error("during saves export auto save info or data nonexistent");return{index:index,info:info,data:data}})),slot=getKeys(isSlotInfoKey).map((function(infoKey){var index=getIndexFromKey(infoKey),info=storage.get(infoKey),data=storage.get(getSlotDataKeyFromIndex(index));if(!info||!data)throw new Error("during saves export slot save info or data nonexistent");return{index:index,info:info,data:data}}));saveBlobToDiskAs(LZString.compressToBase64(Serial.stringify({auto:auto,slot:slot})),filename,"savesbundle")}},import:{value:function(event){return new Promise((function(resolve,reject){var reader=new FileReader;jQuery(reader).on("loadend",(function(){try{if(reader.error)throw new Error("".concat(L10n.get("saveErrorDiskLoadFail"),": ").concat(reader.error));var bundle,badSave=function(O){return!Object.hasOwn(O,"index")||!Object.hasOwn(O,"info")||!Object.hasOwn(O,"data")};try{bundle=Serial.parse(LZString.decompressFromBase64(reader.result))}catch(ex){throw new Error(L10n.get("saveErrorDecodeFail"))}if(null==bundle||"object"!==_typeof(bundle)||!Object.hasOwn(bundle,"auto")||!(bundle.auto instanceof Array)||bundle.auto.some(badSave)||!Object.hasOwn(bundle,"slot")||!(bundle.slot instanceof Array)||bundle.slot.some(badSave))throw new Error(L10n.get("saveErrorInvalidData"));autoClear(),slotClear(),bundle.auto.forEach((function(save){return saveToBrowserStorage({data:save.data,dataKey:getAutoDataKeyFromIndex(save.index),info:save.info,infoKey:getAutoInfoKeyFromIndex(save.index)})})),bundle.slot.forEach((function(save){return saveToBrowserStorage({data:save.data,dataKey:getSlotDataKeyFromIndex(save.index),info:save.info,infoKey:getSlotInfoKeyFromIndex(save.index)})})),resolve(!0)}catch(ex){reject(ex)}})),reader.readAsText(event.target.files[0])}))}},load:{value:diskLoad},save:{value:diskSave}}))},base64:{value:Object.preventExtensions(Object.create(null,{export:{value:function(){var auto=getKeys(isAutoInfoKey).map((function(infoKey){var index=getIndexFromKey(infoKey),info=storage.get(infoKey),data=storage.get(getAutoDataKeyFromIndex(index));if(!info||!data)throw new Error("during saves export auto save info or data nonexistent");return{index:index,info:info,data:data}})),slot=getKeys(isSlotInfoKey).map((function(infoKey){var index=getIndexFromKey(infoKey),info=storage.get(infoKey),data=storage.get(getSlotDataKeyFromIndex(index));if(!info||!data)throw new Error("during saves export slot save info or data nonexistent");return{index:index,info:info,data:data}}));return LZString.compressToBase64(Serial.stringify({auto:auto,slot:slot}))}},import:{value:function(base64){return new Promise((function(resolve){var bundle,badSave=function(O){return!Object.hasOwn(O,"index")||!Object.hasOwn(O,"info")||!Object.hasOwn(O,"data")};try{bundle=Serial.parse(LZString.decompressFromBase64(base64))}catch(ex){throw new Error(L10n.get("saveErrorDecodeFail"))}if(null==bundle||"object"!==_typeof(bundle)||!Object.hasOwn(bundle,"auto")||!(bundle.auto instanceof Array)||bundle.auto.some(badSave)||!Object.hasOwn(bundle,"slot")||!(bundle.slot instanceof Array)||bundle.slot.some(badSave))throw new Error(L10n.get("saveErrorInvalidData"));autoClear(),slotClear(),bundle.auto.forEach((function(save){return saveToBrowserStorage({data:save.data,dataKey:getAutoDataKeyFromIndex(save.index),info:save.info,infoKey:getAutoInfoKeyFromIndex(save.index)})})),bundle.slot.forEach((function(save){return saveToBrowserStorage({data:save.data,dataKey:getSlotDataKeyFromIndex(save.index),info:save.info,infoKey:getSlotInfoKeyFromIndex(save.index)})})),resolve(!0)}))}},load:{value:base64Load},save:{value:base64Save}}))},onLoad:{value:Object.preventExtensions(Object.create(null,{add:{value:function(handler){var valueType=getTypeOf(handler);if("function"!==valueType)throw new TypeError("Save.onLoad.add handler parameter must be a function (received: ".concat(valueType,")"));onLoadHandlers.add(handler)}},clear:{value:function(){onLoadHandlers.clear()}},delete:{value:function(handler){return onLoadHandlers.delete(handler)}},size:{get:function(){return onLoadHandlers.size}}}))},onSave:{value:Object.preventExtensions(Object.create(null,{add:{value:function(handler){var valueType=getTypeOf(handler);if("function"!==valueType)throw new TypeError("Save.onSave.add handler parameter must be a function (received: ".concat(valueType,")"));onSaveHandlers.add(handler)}},clear:{value:function(){onSaveHandlers.clear()}},delete:{value:function(handler){return onSaveHandlers.delete(handler)}},size:{get:function(){return onSaveHandlers.size}}}))},get:{value:function(){throw new Error("[REMOVED] Save.get() has been removed.")}},clear:{value:function(){return console.warn("[DEPRECATED] Save.clear() is deprecated."),browserClear()}},ok:{value:function(){return console.warn("[DEPRECATED] Save.ok() is deprecated."),browserIsEnabled()}},autosave:{value:Object.preventExtensions(Object.create(null,{ok:{value:function(){return console.warn("[DEPRECATED] Save.autosave.ok() is deprecated."),autoIsEnabled()}},has:{value:function(){return console.warn("[DEPRECATED] Save.autosave.has() is deprecated."),autoHas(0)}},get:{value:function(){return console.warn("[DEPRECATED] Save.autosave.get() is deprecated."),autoGet(0)}},load:{value:function(){return console.warn("[DEPRECATED] Save.autosave.load() is deprecated."),autoLoad(0)}},save:{value:function(){return console.warn("[DEPRECATED] Save.autosave.save() is deprecated."),autoSave.apply(void 0,arguments)}},delete:{value:function(){return console.warn("[DEPRECATED] Save.autosave.delete() is deprecated."),autoDelete(0)}}}))},slots:{value:Object.preventExtensions(Object.create(null,{ok:{value:function(){return console.warn("[DEPRECATED] Save.slots.ok() is deprecated."),slotIsEnabled()}},length:{get:function(){return console.warn("[DEPRECATED] Save.slots.length is deprecated."),Config.saves.maxSlotSaves}},isEmpty:{value:function(){return console.warn("[DEPRECATED] Save.slots.isEmpty() is deprecated."),0===slotSize()}},count:{value:function(){return console.warn("[DEPRECATED] Save.slots.count() is deprecated."),slotSize()}},has:{value:function(){return console.warn("[DEPRECATED] Save.slots.has() is deprecated."),slotHas.apply(void 0,arguments)}},get:{value:function(){return console.warn("[DEPRECATED] Save.slots.get() is deprecated."),slotGet.apply(void 0,arguments)}},load:{value:function(){return console.warn("[DEPRECATED] Save.slots.load() is deprecated."),slotLoad.apply(void 0,arguments)}},save:{value:function(){return console.warn("[DEPRECATED] Save.slots.save() is deprecated."),slotSave.apply(void 0,arguments)}},delete:{value:function(){return console.warn("[DEPRECATED] Save.slots.delete() is deprecated."),slotDelete.apply(void 0,arguments)}}}))},export:{value:function(){return console.warn("[DEPRECATED] Save.export() is deprecated."),diskSave.apply(void 0,arguments)}},import:{value:function(){return console.warn("[DEPRECATED] Save.import() is deprecated."),diskLoad.apply(void 0,arguments)}},serialize:{value:function(){return console.warn("[DEPRECATED] Save.serialize() is deprecated."),base64Save.apply(void 0,arguments)}},deserialize:{value:function(){return console.warn("[DEPRECATED] Save.deserialize() is deprecated."),base64Load.apply(void 0,arguments)}}}))}(),Setting=function(){var Types=enumFrom({Header:0,Toggle:1,List:2,Range:3,Value:4}),_definitions=[];function updateSettingsObject(value){window.SugarCube.settings=settings=value}function createResultObject(def){var result={name:def.name,value:settings[def.name],default:def.default};return Object.hasOwn(def,"list")&&(result.list=def.list),Object.hasOwn(def,"min")&&(result.min=def.min),Object.hasOwn(def,"max")&&(result.max=def.max),Object.hasOwn(def,"step")&&(result.step=def.step),result}function clear(){return updateSettingsObject(create()),storage.delete("settings"),!0}function create(){return Object.create(null)}function load(){var defaultSettings=create(),loadedSettings=storage.get("settings")||create();_definitions.filter((function(def){return def.type!==Types.Header})).forEach((function(def){return defaultSettings[def.name]=def.default})),updateSettingsObject(Object.assign(defaultSettings,loadedSettings))}function save(){var savedSettings=create();return Object.keys(settings).length>0&&_definitions.filter((function(def){return def.type!==Types.Header&&settings[def.name]!==def.default})).forEach((function(def){return savedSettings[def.name]=settings[def.name]})),0===Object.keys(savedSettings).length?(storage.delete("settings"),!0):storage.set("settings",savedSettings)}function add(type,name,def){if(arguments.length<2){var errors=[];throw arguments.length<1&&errors.push("type"),arguments.length<2&&errors.push("name"),new Error("missing parameters, no ".concat(errors.join(" or ")," specified"))}if(null==def)def={};else if("object"!==_typeof(def))throw new TypeError("definition parameter must be an object");if(has(name))throw new Error('cannot clobber existing setting "'.concat(name,'"'));var str,pos,definition={type:type,name:name};if(type!==Types.Value&&(definition.label="string"==typeof def.label?def.label.trim():""),"string"==typeof def.desc){var desc=def.desc.trim();""!==desc&&(definition.desc=desc)}switch(type){case Types.Header:break;case Types.List:if(!Object.hasOwn(def,"list"))throw new Error("no list specified");if(!Array.isArray(def.list))throw new TypeError("list must be an array");if(0===def.list.length)throw new Error("list must not be empty");if(definition.list=Object.freeze(def.list),null==def.default)definition.default=def.list[0];else{var defaultIndex=def.list.indexOf(def.default);if(-1===defaultIndex)throw new Error("list does not contain default");definition.default=def.list[defaultIndex]}break;case Types.Range:if(!Object.hasOwn(def,"min"))throw new Error("no min specified");if("number"!=typeof def.min||Number.isNaN(def.min)||!Number.isFinite(def.min))throw new TypeError("min must be a finite number");if(!Object.hasOwn(def,"max"))throw new Error("no max specified");if("number"!=typeof def.max||Number.isNaN(def.max)||!Number.isFinite(def.max))throw new TypeError("max must be a finite number");if(!Object.hasOwn(def,"step"))throw new Error("no step specified");if("number"!=typeof def.step||Number.isNaN(def.step)||!Number.isFinite(def.step)||def.step<=0)throw new TypeError("step must be a finite number greater than zero");var fracDigits=(str=String(def.step),-1===(pos=str.lastIndexOf("."))?0:str.length-pos-1);if(function(value){if(fracDigits>0){var ma=Number("".concat(def.min,"e").concat(fracDigits)),sa=Number("".concat(def.step,"e").concat(fracDigits)),_va=Number("".concat(value,"e").concat(fracDigits))-ma;return Number("".concat(_va-_va%sa+ma,"e-").concat(fracDigits))}var va=value-def.min;return va-va%def.step+def.min}(def.max)!==def.max)throw new RangeError("max (".concat(def.max,") is not a multiple of the step (").concat(def.step,") plus the min (").concat(def.min,")"));if(definition.max=def.max,definition.min=def.min,definition.step=def.step,null==def.default)definition.default=def.max;else{if("number"!=typeof def.default||Number.isNaN(def.default)||!Number.isFinite(def.default))throw new TypeError("default must be a finite number");if(def.default<def.min)throw new RangeError("default (".concat(def.default,") is less than min (").concat(def.min,")"));if(def.default>def.max)throw new RangeError("default (".concat(def.default,") is greater than max (").concat(def.max,")"));definition.default=def.default}break;case Types.Toggle:definition.default=Boolean(def.default);break;case Types.Value:definition.default=def.default;break;default:throw new Error("unknown Setting type: ".concat(type))}"function"==typeof def.onInit&&(definition.onInit=Object.freeze(def.onInit)),"function"==typeof def.onChange&&(definition.onChange=Object.freeze(def.onChange)),_definitions.push(Object.freeze(definition))}function get(name){return _definitions.find((function(definition){return definition.name===name}))}function has(name){return _definitions.some((function(definition){return definition.name===name}))}return Object.preventExtensions(Object.create(null,{Types:{value:Types},init:{value:function(){load(),_definitions.forEach((function(def){if(Object.hasOwn(def,"onInit")){var data=createResultObject(def);def.onInit.call(data,data)}}))}},clear:{value:clear},create:{value:create},load:{value:load},reset:{value:function(name){if(0===arguments.length)clear(),load();else{if(null==name||!has(name))throw new Error('nonexistent setting "'.concat(name,'"'));var def=get(name);def.type!==Types.Header&&(settings[name]=def.default)}return save()}},save:{value:save},add:{value:add},addHeader:{value:function(name,desc){add(Types.Header,name,{desc:desc})}},addList:{value:function(){for(var _len20=arguments.length,args=new Array(_len20),_key20=0;_key20<_len20;_key20++)args[_key20]=arguments[_key20];add.apply(void 0,[Types.List].concat(args))}},addRange:{value:function(){for(var _len21=arguments.length,args=new Array(_len21),_key21=0;_key21<_len21;_key21++)args[_key21]=arguments[_key21];add.apply(void 0,[Types.Range].concat(args))}},addToggle:{value:function(){for(var _len22=arguments.length,args=new Array(_len22),_key22=0;_key22<_len22;_key22++)args[_key22]=arguments[_key22];add.apply(void 0,[Types.Toggle].concat(args))}},addValue:{value:function(){for(var _len23=arguments.length,args=new Array(_len23),_key23=0;_key23<_len23;_key23++)args[_key23]=arguments[_key23];add.apply(void 0,[Types.Value].concat(args))}},delete:{value:function(name){for(var i=0;i<_definitions.length;++i)if(_definitions[i].name===name){_definitions.splice(i,1);break}Object.hasOwn(settings,name)&&delete settings[name]}},forEach:{value:function(callback,thisArg){_definitions.forEach(callback,thisArg)}},get:{value:get},has:{value:has},isEmpty:{value:function(){return 0===_definitions.length}},getValue:{value:function(name){return settings[name]}},setValue:{value:function(name,value){if(!has(name))throw new Error("no such setting");settings[name]=value,save();var def=get(name);if(Object.hasOwn(def,"onChange")){var data=createResultObject(def);def.onChange.call(data,data)}return!0}}}))}(),Story=function(){var _ifId="",_id="",_name="",_passages=createPassageStore(),_inits=[],_scripts=[],_styles=[],_widgets=[],codePassageNames=["PassageDone","PassageFooter","PassageHeader","PassageReady","StoryAuthor","StoryBanner","StoryCaption","StoryDisplayTitle","StoryInit","StoryInterface","StoryMenu","StoryShare","StorySubtitle"],codeTagNames=["init","widget"];function createPassageStore(passages){var store=Object.create(null);return passages?Object.assign(store,passages):store}function generateName(rawName){if(null==rawName)throw new Error("story name must not be null or undefined");var name=decodeEntities(String(rawName)).trim();if(""===name)throw new Error("story name must not be empty or consist solely of whitespace");return name}function getId(){return _id}function getName(){return _name}function filter(predicate,thisArg){if("function"!=typeof predicate)throw new TypeError("Story.filter() predicate parameter must be a function");for(var results=[],i=0,keys=Object.keys(_passages);i<keys.length;++i){var passage=_passages[keys[i]];predicate.call(void 0===thisArg?this:thisArg,passage)&&results.push(passage)}return results}return Object.preventExtensions(Object.create(null,{init:{value:function(){function assertNoCodeTags(passage,desc){if(passage.tags.includesAny(codeTagNames))throw new Error("".concat(desc,' passage "').concat(passage.name,'" includes code tags; invalid: "').concat(passage.tags.filter((function(tag){return codeTagNames.includes(tag)})).sort().join('", "'),'"'))}function assertValidCodeTagUsage(passage){var found=passage.tags.filter((function(tag){return codeTagNames.includes(tag)})).sort();if(found.length>1)throw new Error('passage "'.concat(passage.name,'" includes multiple code tags; invalid: "').concat(found.join('", "'),'"'))}var $storydata=jQuery("tw-storydata"),startNode=$storydata.attr("startnode")||"";Config.passages.start=null,Config.debug=/\bdebug\b/.test($storydata.attr("options")),$storydata.children("style").each((function(i){_styles.push(new Passage("tw-user-style-".concat(i),this))})),$storydata.children("script").each((function(i){_scripts.push(new Passage("tw-user-script-".concat(i),this))})),$storydata.children('tw-passagedata:not([tags~="Twine.private"],[tags~="annotation"])').each((function(){var $this=jQuery(this),pid=$this.attr("pid")||"",passage=new Passage($this.attr("name"),this);pid===startNode&&""!==startNode?(Config.passages.start=passage.name,assertNoCodeTags(passage,"starting"),_passages[passage.name]=passage):codePassageNames.includes(passage.name)?(assertNoCodeTags(passage,"code"),_passages[passage.name]=passage):passage.tags.includes("init")?(assertValidCodeTagUsage(passage),_inits.push(passage)):passage.tags.includes("widget")?(assertValidCodeTagUsage(passage),_widgets.push(passage)):_passages[passage.name]=passage})),_ifId=$storydata.attr("ifid"),_name=generateName("Pilgrim&#39;s Progreſs"),_id=function(name){var id=createSlug(name);if(""===id)if(""!==_ifId)id=_ifId;else for(var i=0;i<name.length;++i){var _charAndPosAt2=charAndPosAt(name,i),char=_charAndPosAt2.char,start=_charAndPosAt2.start,end=_charAndPosAt2.end;id+=char.codePointAt(0).toString(16),i+=end-start}return id}(_name),Config.saves.id=_id,document.title=_name}},id:{get:getId},ifId:{get:function(){return _ifId}},name:{get:getName},add:{value:function(descriptor){if("Object"!==getTypeOf(descriptor))throw new TypeError("Story.add() descriptor parameter must be a generic object");if(Object.hasOwn(_passages,descriptor.name))return!1;var elem=document.createElement("div");elem.setAttribute("name",descriptor.name),elem.setAttribute("tags",descriptor.tags),elem.textContent=descriptor.text;var passage=new Passage(descriptor.name,elem);if(codePassageNames.includes(passage.name))throw new Error('Story.add() passage descriptor object "'.concat(passage.name,'" must not be a code passage'));if(passage.tags.includesAny(codeTagNames))throw new Error('Story.add() passage descriptor object "'.concat(passage.name,'" must not include code tags'));return _passages[passage.name]=passage,!0}},delete:{value:function(name){var type=_typeof(name);switch(type){case"number":case"string":var key=String(name);if(!Object.hasOwn(_passages,key))return!1;if(key===Config.passages.start||codePassageNames.includes(key))throw new Error('Story.delete() passage "'.concat(key,'" must not be a code passage'));if(_passages[key].tags.includesAny(codeTagNames))throw new Error('Story.delete() passage "'.concat(key,'" must not include code tags'));return delete _passages[key],!0;case"undefined":break;case"object":type=null===name?"null":"an object";break;default:type="a ".concat(type)}throw new TypeError("Story.delete() name parameter cannot be ".concat(type))}},filter:{value:filter},find:{value:function(predicate,thisArg){if("function"!=typeof predicate)throw new TypeError("Story.find() predicate parameter must be a function");for(var i=0,keys=Object.keys(_passages);i<keys.length;++i){var passage=_passages[keys[i]];if(predicate.call(void 0===thisArg?this:thisArg,passage))return passage}}},get:{value:function(name){var type=_typeof(name);switch(type){case"number":case"string":var key=String(name);return Object.hasOwn(_passages,key)?_passages[key]:new Passage(key||"(unknown)");case"undefined":break;case"object":type=null===name?"null":"an object";break;default:type="a ".concat(type)}throw new TypeError("Story.get() name parameter cannot be ".concat(type))}},getInits:{value:function(){return Object.freeze(Array.from(_inits))}},getNormals:{value:function(){return Object.freeze(createPassageStore(_passages))}},getScripts:{value:function(){return Object.freeze(Array.from(_scripts))}},getStyles:{value:function(){return Object.freeze(Array.from(_styles))}},getWidgets:{value:function(){return Object.freeze(Array.from(_widgets))}},has:{value:function(name){var type=_typeof(name);switch(type){case"number":case"string":return Object.hasOwn(_passages,String(name));case"undefined":break;case"object":type=null===name?"null":"an object";break;default:type="a ".concat(type)}throw new TypeError("Story.has name parameter cannot be ".concat(type))}},domId:{get:function(){return console.warn("[DEPRECATED] Story.domId is deprecated."),getId()}},title:{get:function(){return console.warn("[DEPRECATED] Story.title is deprecated."),getName()}},lookup:{value:function(key,value){var sortKey=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"name";return console.warn("[DEPRECATED] Story.lookup() is deprecated."),filter((function(passage){return"object"===_typeof(passage[key])&&null!==passage[key]?passage[key]instanceof Array&&passage[key].some((function(m){return sameValueZero(m,value)})):sameValueZero(passage[key],value)})).sort((function(a,b){return a[sortKey]==b[sortKey]?0:a[sortKey]<b[sortKey]?-1:1}))}},lookupWith:{value:function(predicate){var sortKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"name";if(console.warn("[DEPRECATED] Story.lookupWith() is deprecated."),"function"!=typeof predicate)throw new TypeError("Story.lookupWith() predicate parameter must be a function");return filter(predicate).sort((function(a,b){return a[sortKey]==b[sortKey]?0:a[sortKey]<b[sortKey]?-1:1}))}}}))}(),UI=function(){function assembleLinkList(passage,listEl){var list=listEl,debugState=Config.debug;Config.debug=!1;try{null==list&&(list=document.createElement("ul"));var frag=document.createDocumentFragment();new Wikifier(frag,Story.get(passage).processText().trim(),{cleanup:!1});var errors=Array.from(frag.querySelectorAll(".error")).map((function(errEl){return errEl.textContent.replace(errorPrologRegExp,"")}));if(errors.length>0)throw new Error(errors.join("; "));for(;frag.hasChildNodes();){var node=frag.firstChild;if(node.nodeType===Node.ELEMENT_NODE&&"A"===node.nodeName.toUpperCase()){var li=document.createElement("li");list.appendChild(li),li.appendChild(node)}else frag.removeChild(node)}}finally{Config.debug=debugState}return list}function buildRestart(){return Dialog.create(L10n.get("restartTitle"),"restart").append("<p>".concat(L10n.get("restartMesgPrompt"),'</p><ul class="buttons">')+'<li><button id="restart-ok">'.concat(L10n.get(["restartTextOk","textOk"]),"</button></li>")+'<li><button id="restart-cancel" class="ui-close">'.concat(L10n.get(["restartTextCancel","textCancel"]),"</button></li>")+"</ul>"),jQuery(Dialog.body()).find("#restart-ok").ariaClick({one:!0},(function(){jQuery(document).one(":dialogclosed",(function(){return Engine.restart()})),Dialog.close()})),!0}function buildSaves(){function createFileInput(id,callback){var input=document.createElement("input");return jQuery(input).attr({id:id,type:"file",tabindex:-1,"aria-hidden":!0}).css({display:"block",visibility:"hidden",position:"fixed",left:"-16128px",top:"-16128px",width:"1px",height:"1px"}).on("change",callback),input}function createActionItem(id,classNames,text,label,callback){var $btn=jQuery(document.createElement("button")).attr("id","saves-".concat(id)).text(text);return classNames&&$btn.addClass(classNames),callback?$btn.ariaClick({label:label},callback):$btn.ariaDisabled(!0),jQuery(document.createElement("li")).append($btn)}var browserEnabled=Save.browser.isEnabled();if(!browserEnabled&&!Has.fileAPI)return openAlert(L10n.get("warningNoSaves")),!1;Dialog.create(L10n.get("savesTitle"),"saves");var $dialogBody=jQuery(Dialog.body());if(browserEnabled){jQuery(document.createElement("h2")).text(L10n.get("savesHeaderBrowser")).appendTo($dialogBody),$dialogBody.append(function(){function createButton(id,classNames,kind,index,callback){var text;switch(id){case"delete":text=L10n.get("textDelete");break;case"load":text=L10n.get("textLoad");break;case"save":text=L10n.get("textSave");break;default:throw new Error('buildSaves unknown ID "'.concat(id,'"'))}var $btn=jQuery(document.createElement("button")).attr("id","saves-".concat(id,"-").concat(index)).addClass(id);return classNames&&$btn.addClass(classNames),callback?$btn.ariaClick({label:"".concat(text," ").concat(kind," ").concat(index+1)},(function(){try{callback(index)}catch(ex){openAlert("".concat(ex.message,".</p><p>").concat(L10n.get("textAborting"),"."))}})):$btn.ariaDisabled(!0),$btn}var $tbody=jQuery(document.createElement("tbody"));Save.browser.auto.entries().forEach((function(_ref13){var index=_ref13.index,info=_ref13.info,$tdSlot=jQuery(document.createElement("td")),$tdLoad=jQuery(document.createElement("td")),$tdDesc=jQuery(document.createElement("td")),$tdDele=jQuery(document.createElement("td"));jQuery(document.createElement("div")).text(info.desc).appendTo($tdDesc),jQuery(document.createElement("div")).addClass("details").addClass("datestamp").text("".concat(L10n.get("savesTextBrowserAuto")," ").concat(index+1,"  •  ")).append(info.date?"".concat(new Date(info.date).toLocaleString()):"<em>".concat(L10n.get("savesTextNoDate"),"</em>")).appendTo($tdDesc),$tdLoad.append(createButton("load","ui-close",L10n.get("savesTextBrowserAuto"),index,(function(index){jQuery(document).one(":dialogclosed",(function(){Save.browser.auto.load(index).then(Engine.show,(function(ex){return openAlert("".concat(ex.message.toUpperFirst(),".</p><p>").concat(L10n.get("textAborting"),"."))}))}))}))),$tdDele.append(createButton("delete",null,L10n.get("savesTextBrowserAuto"),index,(function(index){Save.browser.auto.delete(index),buildSaves()}))),jQuery(document.createElement("tr")).append($tdSlot).append($tdLoad).append($tdDesc).append($tdDele).appendTo($tbody)}));var slotAllowed="function"!=typeof Config.saves.isAllowed||Config.saves.isAllowed(Save.Type.Slot);return Save.browser.slot.entries().reduce((function(slots,entry){return slots[entry.index]=entry,slots}),Array.from({length:Config.saves.maxSlotSaves},(function(_,i){return{index:i}}))).forEach((function(_ref14){var index=_ref14.index,info=_ref14.info,$tdSlot=jQuery(document.createElement("td")),$tdLoad=jQuery(document.createElement("td")),$tdDesc=jQuery(document.createElement("td")),$tdDele=jQuery(document.createElement("td"));info?(jQuery(document.createElement("div")).text(info.desc).appendTo($tdDesc),jQuery(document.createElement("div")).addClass("details").addClass("datestamp").text("".concat(L10n.get("savesTextBrowserSlot")," ").concat(index+1,"  •  ")).append(info.date?"".concat(new Date(info.date).toLocaleString()):"<em>".concat(L10n.get("savesTextNoDate"),"</em>")).appendTo($tdDesc),$tdLoad.append(createButton("load","ui-close",L10n.get("savesTextBrowserSlot"),index,(function(index){jQuery(document).one(":dialogclosed",(function(){Save.browser.slot.load(index).then(Engine.show,(function(ex){return openAlert("".concat(ex.message.toUpperFirst(),".</p><p>").concat(L10n.get("textAborting"),"."))}))}))}))),$tdDele.append(createButton("delete",null,L10n.get("savesTextBrowserSlot"),index,(function(index){Save.browser.slot.delete(index),buildSaves()})))):($tdDesc.addClass("empty"),jQuery(document.createElement("div")).text(" ").appendTo($tdDesc),jQuery(document.createElement("div")).addClass("details").addClass("datestamp").text("".concat(L10n.get("savesTextBrowserSlot")," ").concat(index+1)).appendTo($tdDesc),$tdLoad.append(createButton("save",null,L10n.get("savesTextBrowserSlot"),index,index<Config.saves.maxSlotSaves&&slotAllowed?function(index){Save.browser.slot.save(index),buildSaves()}:null)),$tdDele.append(createButton("delete",null,L10n.get("savesTextBrowserSlot"),index))),jQuery(document.createElement("tr")).append($tdSlot).append($tdLoad).append($tdDesc).append($tdDele).appendTo($tbody)})),jQuery(document.createElement("table")).attr("id","saves-list").append($tbody)}());var $slotButtons=jQuery(document.createElement("ul")).addClass("buttons slots").appendTo($dialogBody);if(Has.fileAPI){var slotImportInput=createFileInput("saves-import-handler",(function(ev){Save.disk.import(ev).then(buildSaves,(function(ex){return openAlert("".concat(ex.message.toUpperFirst(),".</p><p>").concat(L10n.get("textAborting"),"."))}))}));$slotButtons.append(createActionItem("export",null,"".concat(L10n.get("textExport"),"…"),L10n.get("savesLabelBrowserExport"),(function(){return Save.disk.export("saves-export-".concat(Story.name))}))).append(createActionItem("import",null,"".concat(L10n.get("textImport"),"…"),L10n.get("savesLabelBrowserImport"),(function(){return slotImportInput.click()}))),jQuery(slotImportInput).appendTo($dialogBody)}$slotButtons.append(createActionItem("clear",null,L10n.get("textClear"),L10n.get("savesLabelBrowserClear"),Save.browser.size>0?function(){Save.browser.clear(),buildSaves()}:null))}if(Has.fileAPI){jQuery(document.createElement("h2")).text(L10n.get("savesHeaderDisk")).appendTo($dialogBody);var $diskButtons=jQuery(document.createElement("ul")).addClass("buttons").appendTo($dialogBody),diskLoadInput=createFileInput("saves-disk-load-handler",(function(ev){jQuery(document).one(":dialogclosed",(function(){Save.disk.load(ev).then(Engine.show,(function(ex){return openAlert("".concat(ex.message.toUpperFirst(),".</p><p>").concat(L10n.get("textAborting"),"."))}))})),Dialog.close()}));$diskButtons.append(createActionItem("disk-save",null,"".concat(L10n.get("textSave"),"…"),L10n.get("savesLabelDiskSave"),"function"!=typeof Config.saves.isAllowed||Config.saves.isAllowed(Save.Type.Disk)?function(){return Save.disk.save(Story.name)}:null)).append(createActionItem("disk-load",null,"".concat(L10n.get("textLoad"),"…"),L10n.get("savesLabelDiskLoad"),(function(){return diskLoadInput.click()}))),jQuery(diskLoadInput).appendTo($dialogBody)}return!0}function buildSettings(){Dialog.create(L10n.get("settingsTitle"),"settings");var $dialogBody=jQuery(Dialog.body());return Setting.forEach((function(control){switch(control.type){case Setting.Types.Header:var _name2=control.name,_id2=createSlug(_name2),$header=jQuery(document.createElement("div")),$heading=jQuery(document.createElement("h2"));return $header.attr("id","header-body-".concat(_id2)).append($heading).appendTo($dialogBody),$heading.attr("id","header-heading-".concat(_id2)).wikiWithOptions({cleanup:!1},_name2),void(control.desc&&jQuery(document.createElement("p")).attr("id","header-desc-".concat(_id2)).wikiWithOptions({cleanup:!1},control.desc).appendTo($header));case Setting.Types.Value:return}var $control,name=control.name,id=createSlug(name),$setting=jQuery(document.createElement("div")),$label=jQuery(document.createElement("label")),$controlBox=jQuery(document.createElement("div"));switch(jQuery(document.createElement("div")).append($label).append($controlBox).appendTo($setting),control.desc&&jQuery(document.createElement("p")).attr("id","setting-desc-".concat(id)).wikiWithOptions({cleanup:!1},control.desc).appendTo($setting),$label.attr({id:"setting-label-".concat(id),for:"setting-control-".concat(id)}).wikiWithOptions({cleanup:!1},control.label),null==Setting.getValue(name)&&Setting.setValue(name,control.default),control.type){case Setting.Types.List:$control=jQuery(document.createElement("select"));for(var i=0,iend=control.list.length;i<iend;++i)jQuery(document.createElement("option")).val(i).text(control.list[i]).appendTo($control);$control.val(control.list.indexOf(Setting.getValue(name))).attr("tabindex",0).on("change",(function(){Setting.setValue(name,control.list[Number(this.value)])}));break;case Setting.Types.Range:($control=jQuery(document.createElement("input"))).attr({type:"range",min:control.min,max:control.max,step:control.step,value:Setting.getValue(name),tabindex:0}).on("change input",(function(){Setting.setValue(name,Number(this.value))})).on("keypress",(function(ev){13===ev.which&&(ev.preventDefault(),triggerEvent("change",$control))}));break;case Setting.Types.Toggle:$control=jQuery(document.createElement("button")),Setting.getValue(name)?$control.addClass("enabled").text(L10n.get("textOn")):$control.text(L10n.get("textOff")),$control.ariaClick((function(){var status=Setting.getValue(name);status?jQuery(this).removeClass("enabled").text(L10n.get("textOff")):jQuery(this).addClass("enabled").text(L10n.get("textOn")),Setting.setValue(name,!status)}))}$control.attr("id","setting-control-".concat(id)).appendTo($controlBox),$setting.attr("id","setting-body-".concat(id)).appendTo($dialogBody)})),$dialogBody.append('<ul class="buttons">'+'<li><button id="settings-ok" class="ui-close">'.concat(L10n.get(["settingsTextOk","textOk"]),"</button></li>")+'<li><button id="settings-reset">'.concat(L10n.get("settingsTextReset"),"</button></li>")+"</ul>").find("#settings-reset").ariaClick({one:!0},(function(){jQuery(document).one(":dialogclosed",(function(){Setting.reset(),window.location.reload()})),Dialog.close()})),!0}function openAlert(message){for(var _Dialog$create$append,_len24=arguments.length,args=new Array(_len24>1?_len24-1:0),_key24=1;_key24<_len24;_key24++)args[_key24-1]=arguments[_key24];(_Dialog$create$append=Dialog.create(L10n.get("alertTitle"),"alert").append("<p>".concat(message,'</p><ul class="buttons">')+'<li><button id="alert-ok" class="ui-close">'.concat(L10n.get(["alertTextOk","textOk"]),"</button></li>")+"</ul>")).open.apply(_Dialog$create$append,args)}function buildJumpto(){console.warn("[DEPRECATED] UI.buildJumpto() is deprecated.");var list=document.createElement("ul");Dialog.create(L10n.get("jumptoTitle"),"jumpto list").append(list);for(var expired=State.expired.length,i=State.size-1;i>=0;--i)if(i!==State.activeIndex){var passage=Story.get(State.history[i].title);passage&&passage.tags.includes("bookmark")&&jQuery(document.createElement("li")).append(jQuery(document.createElement("a")).ariaClick({one:!0},function(index){return function(){return jQuery(document).one(":dialogclosed",(function(){return Engine.goTo(index)}))}}(i)).addClass("ui-close").text("".concat(L10n.get("textTurn")," ").concat(expired+i+1))).appendTo(list)}list.hasChildNodes()||jQuery(list).append("<li><a><em>".concat(L10n.get("jumptoMesgUnavailable"),"</em></a></li>"))}function buildShare(){console.warn("[DEPRECATED] UI.buildShare() is deprecated.");try{Dialog.create(L10n.get("shareTitle"),"share list").append(assembleLinkList("StoryShare"))}catch(ex){return console.error(ex),Alert.error("StoryShare",ex.message),!1}return!0}return Object.preventExtensions(Object.create(null,{assembleLinkList:{value:assembleLinkList},buildRestart:{value:buildRestart},buildSaves:{value:buildSaves},buildSettings:{value:buildSettings},update:{value:function(){triggerEvent(":uiupdate")}},alert:{value:openAlert},restart:{value:function(){buildRestart(),Dialog.open.apply(Dialog,arguments)}},saves:{value:function(){buildSaves(),Dialog.open.apply(Dialog,arguments)}},settings:{value:function(){buildSettings(),Dialog.open.apply(Dialog,arguments)}},buildAutoload:{value:function(){return console.warn("[DEPRECATED] UI.buildAutoload() is deprecated."),Dialog.create(L10n.get("autoloadTitle"),"autoload").append("<p>".concat(L10n.get("autoloadMesgPrompt"),'</p><ul class="buttons">')+'<li><button id="autoload-ok" class="ui-close">'.concat(L10n.get(["autoloadTextOk","textOk"]),"</button></li>")+'<li><button id="autoload-cancel" class="ui-close">'.concat(L10n.get(["autoloadTextCancel","textCancel"]),"</button></li>")+"</ul>"),jQuery(document).one("click.autoload",".ui-close",(function(ev){var isAutoloadOk="autoload-ok"===ev.target.id;jQuery(document).one(":dialogclosed",(function(){new Promise((function(resolve,reject){isAutoloadOk&&resolve(),reject()})).then((function(){return Save.browser.continue()})).catch((function(){Engine.play(Config.passages.start)}))}))})),!0}},buildJumpto:{value:buildJumpto},buildShare:{value:buildShare},jumpto:{value:function(){buildJumpto(),Dialog.open.apply(Dialog,arguments)}},share:{value:function(){buildShare(),Dialog.open.apply(Dialog,arguments)}}}))}(),UIBar=function(){var _$uiBar=null;function stow(noAnimation){var $story;_$uiBar&&!_$uiBar.hasClass("stowed")&&(noAnimation&&(($story=jQuery("#story")).addClass("no-transition"),_$uiBar.addClass("no-transition")),_$uiBar.addClass("stowed"),noAnimation&&setTimeout((function(){$story.removeClass("no-transition"),_$uiBar.removeClass("no-transition")}),Engine.DOM_DELAY));return UIBar}function update(){if(console.warn("[DEPRECATED] UIBar.update() is deprecated."),_$uiBar)return UI.update(),UIBar}return Object.preventExtensions(Object.create(null,{init:{value:function(){if(!document.getElementById("ui-bar")){var toggleLabel,backwardLabel,jumptoLabel,forwardLabel,$backward,$forward,$elems=(toggleLabel=L10n.get("uiBarLabelToggle"),backwardLabel=L10n.get("uiBarLabelBackward"),jumptoLabel=L10n.get("uiBarLabelJumpto"),forwardLabel=L10n.get("uiBarLabelForward"),jQuery(document.createDocumentFragment()).append('<div id="ui-bar" aria-live="polite"><div id="ui-bar-tray">'+'<button id="ui-bar-toggle" tabindex="0" title="'.concat(toggleLabel,'" aria-label="').concat(toggleLabel,'"></button>')+'<div id="ui-bar-history">'+'<button id="history-backward" tabindex="0" title="'.concat(backwardLabel,'" aria-label="').concat(backwardLabel,'"></button>')+'<button id="history-jumpto" tabindex="0" title="'.concat(jumptoLabel,'" aria-label="').concat(jumptoLabel,'"></button>')+'<button id="history-forward" tabindex="0" title="'.concat(forwardLabel,'" aria-label="').concat(forwardLabel,'"></button>')+'</div></div><div id="ui-bar-body"><header id="title" role="banner"><div id="story-banner"></div><h1 id="story-title"></h1><div id="story-subtitle"></div><div id="story-title-separator"></div><p id="story-author"></p></header><div id="story-caption"></div><nav id="menu" role="navigation"><ul id="menu-story"></ul><ul id="menu-core">'+'<li id="menu-item-continue"><a tabindex="0">'.concat(L10n.get("continueTitle"),"</a></li>")+'<li id="menu-item-saves"><a tabindex="0">'.concat(L10n.get("savesTitle"),"</a></li>")+'<li id="menu-item-settings"><a tabindex="0">'.concat(L10n.get("settingsTitle"),"</a></li>")+'<li id="menu-item-restart"><a tabindex="0">'.concat(L10n.get("restartTitle"),"</a></li>")+'<li id="menu-item-share"><a tabindex="0">'.concat(L10n.get("shareTitle"),"</a></li>")+"</ul></nav></div></div>"));_$uiBar=jQuery($elems.find("#ui-bar").get(0)),$elems.insertBefore("body>script#script-sugarcube"),jQuery(document).on(":historyupdate".concat(".ui-bar"),($backward=jQuery("#history-backward"),$forward=jQuery("#history-forward"),function(){$backward.ariaDisabled(State.length<2),$forward.ariaDisabled(State.length===State.size)}))}}},destroy:{value:function(){_$uiBar&&(_$uiBar.hide(),jQuery(document).off(".ui-bar"),jQuery(document.head).find("#style-ui-bar").remove(),_$uiBar.remove(),_$uiBar=null)}},hide:{value:function(){return _$uiBar&&_$uiBar.hide(),UIBar}},isHidden:{value:function(){return _$uiBar&&"none"===_$uiBar.css("display")}},isStowed:{value:function(){return _$uiBar&&_$uiBar.hasClass("stowed")}},show:{value:function(){return _$uiBar&&_$uiBar.show(),UIBar}},start:{value:function(){if(_$uiBar){("boolean"==typeof Config.ui.stowBarInitially?Config.ui.stowBarInitially:jQuery(window).width()<=Config.ui.stowBarInitially)&&stow(!0),jQuery("#ui-bar-toggle").ariaClick({label:L10n.get("uiBarLabelToggle")},(function(){return _$uiBar.toggleClass("stowed")})),Config.history.controls?(jQuery("#history-backward").ariaDisabled(State.length<2).ariaClick({label:L10n.get("uiBarLabelBackward")},(function(){return Engine.backward()})),Story.filter((function(passage){return passage.tags.includes("bookmark")})).length>0?jQuery("#history-jumpto").ariaClick({label:L10n.get("uiBarLabelJumpto")},(function(){return UI.jumpto()})):jQuery("#history-jumpto").remove(),jQuery("#history-forward").ariaDisabled(State.length===State.size).ariaClick({label:L10n.get("uiBarLabelForward")},(function(){return Engine.forward()}))):jQuery("#ui-bar-history").remove();var storyTitleHandler,addUiUpdateHandler=function(handler){return jQuery(document)[Config.ui.updateStoryElements?"on":"one"](":uiupdate".concat(".ui-bar"),handler)},addUpdaterOrRemove=function(selector,passageName){var $el=jQuery(selector);Story.has(passageName)?addUiUpdateHandler((function(){var frag=document.createDocumentFragment();new Wikifier(frag,Story.get(passageName).processText().trim()),$el.empty().append(frag)})):$el.remove()};if(storyTitleHandler=Story.has("StoryDisplayTitle")?function(){return setDisplayTitle(Story.get("StoryDisplayTitle").processText())}:function(){return setDisplayTitle(Story.name,!0)},addUiUpdateHandler(storyTitleHandler),addUpdaterOrRemove("#story-banner","StoryBanner"),addUpdaterOrRemove("#story-subtitle","StorySubtitle"),addUpdaterOrRemove("#story-author","StoryAuthor"),addUpdaterOrRemove("#story-caption","StoryCaption"),Story.has("StoryMenu")){var $menuStory=jQuery("#menu-story");jQuery(document).on(":uiupdate".concat(".ui-bar"),(function(){try{var frag=UI.assembleLinkList("StoryMenu",document.createDocumentFragment());$menuStory.empty().append(frag)}catch(ex){console.error(ex),Alert.error("StoryMenu",ex.message)}}))}else jQuery("#menu-story").remove();Save.browser.size>0?(jQuery("#menu-item-continue a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),Save.browser.continue().then((function(){jQuery(document).off(".menu-item-continue"),jQuery("#menu-item-continue").remove(),Engine.show()}),(function(ex){return UI.alert("".concat(ex.message.toUpperFirst(),".</p><p>").concat(L10n.get("textAborting"),"."))}))})).text(L10n.get("continueTitle")),jQuery(document).on(":passagestart.menu-item-continue",(function(){State.turns>1&&(jQuery(document).off(".menu-item-continue"),jQuery("#menu-item-continue").remove())}))):jQuery("#menu-item-continue").remove(),jQuery("#menu-item-saves a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildSaves(),Dialog.open()})).text(L10n.get("savesTitle")),Setting.isEmpty()?jQuery("#menu-item-settings").remove():jQuery("#menu-item-settings a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildSettings(),Dialog.open()})).text(L10n.get("settingsTitle")),jQuery("#menu-item-restart a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildRestart(),Dialog.open()})).text(L10n.get("restartTitle")),Story.has("StoryShare")?jQuery("#menu-item-share a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildShare(),Dialog.open()})).text(L10n.get("shareTitle")):jQuery("#menu-item-share").remove()}}},stow:{value:stow},unstow:{value:function(noAnimation){var $story;return _$uiBar&&_$uiBar.hasClass("stowed")&&(noAnimation&&(($story=jQuery("#story")).addClass("no-transition"),_$uiBar.addClass("no-transition")),_$uiBar.removeClass("stowed"),noAnimation&&setTimeout((function(){$story.removeClass("no-transition"),_$uiBar.removeClass("no-transition")}),Engine.DOM_DELAY)),UIBar}},setStoryElements:{value:update},update:{value:update}}))}(),DebugBar=function(){var STORAGE_KEY="debug.state",WATCH_LIST_DELAY=200,VAR_LIST_DELAY=500,variableRE=new RegExp("^".concat(Patterns.variable,"$")),numericKeyRE=/^\d+$/,watchList=[],varList=[],watchTimerId=null,listTimerId=null,stowed=!0,$debugBar=null,$watchBody=null,$varDataList=null,$turnSelect=null,$passageDataList=null;function debugBarStow(){disableWatchUpdates(),disableVarListUpdates(),$debugBar.css("right","-".concat($debugBar.outerWidth(),"px")),stowed=!0,updateSession()}function debugBarUnstow(){debugBarWatchIsEnabled()&&enableWatchUpdates(),enableVarListUpdates(),$debugBar.css("right",0),stowed=!1,updateSession()}function debugBarToggle(){stowed?debugBarUnstow():debugBarStow()}function debugBarWatchAdd(varName){variableRE.test(varName)&&(watchList.pushUnique(varName),watchList.sort(),updateWatchBody(),updateVarList(),updateSession())}function debugBarWatchAddAll(){Object.keys(State.variables).map((function(name){return watchList.pushUnique("$".concat(name))})),Object.keys(State.temporary).map((function(name){return watchList.pushUnique("_".concat(name))})),watchList.sort(),updateWatchBody(),updateVarList(),updateSession()}function debugBarWatchClear(){watchList.length=0,$watchBody.empty().append("<div>— ".concat(L10n.get("debugBarMesgNoWatches")," —</div>")),updateWatchBody(),updateVarList(),updateSession()}function debugBarWatchDelete(varName){watchList.deleteFirst(varName),$watchBody.find('tr[data-name="'.concat(varName,'"]')).remove(),updateWatchBody(),updateVarList(),updateSession()}function debugBarWatchDisable(){disableWatchUpdates(),disableWatch(),updateSession()}function debugBarWatchEnable(){enableWatchUpdates(),enableWatch(),updateSession()}function debugBarWatchIsEnabled(){return!$watchBody.attr("hidden")}function debugBarWatchToggle(){$watchBody.attr("hidden")?debugBarWatchEnable():debugBarWatchDisable()}function disableWatch(){$watchBody.attr({"aria-hidden":!0,hidden:"hidden"})}function disableWatchUpdates(){null!==watchTimerId&&(clearInterval(watchTimerId),watchTimerId=null)}function enableWatch(){$watchBody.removeAttr("aria-hidden hidden")}function enableWatchUpdates(){null===watchTimerId&&(watchTimerId=setInterval((function(){return updateWatchBody()}),WATCH_LIST_DELAY))}function disableVarListUpdates(){null!==listTimerId&&(clearInterval(listTimerId),listTimerId=null)}function enableVarListUpdates(){null===listTimerId&&(listTimerId=setInterval((function(){return updateVarList()}),VAR_LIST_DELAY))}function clearSession(){session.delete(STORAGE_KEY)}function updateSession(){session.set(STORAGE_KEY,{stowed:stowed,watchList:watchList,watchEnabled:debugBarWatchIsEnabled(),viewsEnabled:DebugView.isEnabled()})}function updateWatchBody(){if(0!==watchList.length){var $tbody,$rowMap=new Map,$table=jQuery($watchBody.children("table"));$table.length>0?($tbody=jQuery($table.children("tbody"))).children("tr").each((function(_,el){return $rowMap.set(el.getAttribute("data-name"),jQuery(el))})):($table=jQuery(document.createElement("table")),$tbody=jQuery(document.createElement("tbody")),$table.append($tbody),$watchBody.empty().append($table));var delLabel=L10n.get("debugBarLabelWatchDelete"),cursor=$rowMap.size>0?$tbody.children("tr").get(0):null;watchList.forEach((function(varName){var varKey=varName.slice(1),value=toWatchString(("$"===varName[0]?State.variables:State.temporary)[varKey]),$row=$rowMap.get(varName);if($row){var $code=$row.children().children("code");value!==$code.text()&&$code.text(value)}else $row=function(varName,value){var $row=jQuery(document.createElement("tr")),$delBtn=jQuery(document.createElement("button")),$code=jQuery(document.createElement("code"));return $row.attr("data-name",varName),$delBtn.addClass("watch-delete").ariaClick({one:!0,label:delLabel},(function(){return debugBarWatchDelete(varName)})),$code.text(value),jQuery(document.createElement("td")).append($delBtn).appendTo($row),jQuery(document.createElement("td")).text(varName).appendTo($row),jQuery(document.createElement("td")).append($code).appendTo($row),$row}(varName,value),cursor?$row.insertAfter(cursor):$row.appendTo($tbody);cursor=$row.get(0)}))}}function updateVarList(){var names=[].concat(Object.keys(State.variables).map((function(name){return"$".concat(name)})),Object.keys(State.temporary).map((function(name){return"_".concat(name)})));if(0===names.length)return varList.length=0,void $varDataList.empty();if(names.sort().deleteAll(watchList),names.length!==varList.length||!names.every((function(m,i){return m===varList[i]}))){varList=names;var options=document.createDocumentFragment();varList.forEach((function(name){jQuery(document.createElement("option")).val(name).appendTo(options)})),$varDataList.empty().append(options)}}function updateTurnSelect(){for(var histLen=State.size,expLen=State.expired.length,options=document.createDocumentFragment(),i=0;i<histLen;++i)jQuery(document.createElement("option")).val(i).text("".concat(expLen+i+1,". ").concat(State.history[i].title)).appendTo(options);$turnSelect.empty().ariaDisabled(histLen<2).append(options).val(State.activeIndex)}function updatePassageList(){var passages=Object.keys(Story.getNormals()).sort(),options=document.createDocumentFragment();passages.forEach((function(name){jQuery(document.createElement("option")).val(name).appendTo(options)})),$passageDataList.empty().append(options)}function toWatchString(O){if(null===O)return"null";switch(_typeof(O)){case"bigint":case"boolean":case"number":case"symbol":case"undefined":return String(O);case"string":return JSON.stringify(O);case"function":return"Function"}var objType=getToStringTag(O);if("Date"===objType)return"Date {".concat(O.toLocaleString(),"}");if("RegExp"===objType)return"RegExp ".concat(O.toString());var result=[];if(O instanceof Array||O instanceof Set){for(var list=O instanceof Array?O:Array.from(O),i=0,len=list.length;i<len;++i)result.push(Object.hasOwn(list,i)?toWatchString(list[i]):"<empty>");return Object.keys(list).filter((function(key){return!numericKeyRE.test(key)})).forEach((function(key){return result.push("".concat(toWatchString(key),": ").concat(toWatchString(list[key])))})),"".concat(objType,"(").concat(list.length,") [").concat(result.join(", "),"]")}return O instanceof Map?(O.forEach((function(val,key){return result.push("".concat(toWatchString(key)," → ").concat(toWatchString(val)))})),"".concat(objType,"(").concat(O.size,") {").concat(result.join(", "),"}")):(Object.keys(O).forEach((function(key){return result.push("".concat(toWatchString(key),": ").concat(toWatchString(O[key])))})),"".concat(objType," {").concat(result.join(", "),"}"))}return Object.preventExtensions(Object.create(null,{init:{value:function(){if(Config.debug){var barToggleLabel=L10n.get("debugBarLabelToggle"),watchAddLabel=L10n.get("debugBarLabelWatchAdd"),watchAllLabel=L10n.get("debugBarLabelWatchAll"),watchClearLabel=L10n.get("debugBarLabelWatchClear"),watchToggleLabel=L10n.get("debugBarLabelWatchToggle"),viewsToggleLabel=L10n.get("debugBarLabelViewsToggle"),passagePlayLabel=L10n.get("debugBarLabelPassagePlay");jQuery(document.createDocumentFragment()).append('<div id="debug-bar"><div id="debug-bar-watch">'+"<div>— ".concat(L10n.get("debugBarMesgNoWatches")," —</div>")+"</div><div>"+'<label id="debug-bar-watch-label" for="debug-bar-watch-input">'.concat(L10n.get("debugBarTextWatch"),"</label>")+'<input id="debug-bar-watch-input" name="debug-bar-watch-input" type="text" placeholder="'.concat(L10n.get("debugBarLabelWatchPlaceholder"),'" list="debug-bar-var-list" tabindex="0">')+'<datalist id="debug-bar-var-list" aria-hidden="true" hidden="hidden"></datalist>'+'<button id="debug-bar-watch-add" tabindex="0" title="'.concat(watchAddLabel,'" aria-label="').concat(watchAddLabel,'"></button>')+'<button id="debug-bar-watch-all" tabindex="0" title="'.concat(watchAllLabel,'" aria-label="').concat(watchAllLabel,'"></button>')+'<button id="debug-bar-watch-clear" tabindex="0" title="'.concat(watchClearLabel,'" aria-label="').concat(watchClearLabel,'"></button>')+"</div><div>"+'<label id="debug-bar-turn-label" for="debug-bar-turn-select">'.concat(L10n.get("textTurn"),"</label>")+'<select id="debug-bar-turn-select" tabindex="0"></select></div><div>'+'<label id="debug-bar-passage-label" for="debug-bar-passage-input">'.concat(L10n.get("debugBarTextPassage"),"</label>")+'<input id="debug-bar-passage-input" name="debug-bar-passage-input" type="text" placeholder="'.concat(L10n.get("debugBarLabelPassagePlaceholder"),'" list="debug-bar-passage-list" tabindex="0">')+'<datalist id="debug-bar-passage-list" aria-hidden="true" hidden="hidden"></datalist>'+'<button id="debug-bar-passage-play" tabindex="0" title="'.concat(passagePlayLabel,'" aria-label="').concat(passagePlayLabel,'"></button>')+"</div><div>"+'<button id="debug-bar-views-toggle" tabindex="0" title="'.concat(viewsToggleLabel,'" aria-label="').concat(viewsToggleLabel,'">').concat(L10n.get("debugBarTextViews"),"</button>")+'<button id="debug-bar-watch-toggle" tabindex="0" title="'.concat(watchToggleLabel,'" aria-label="').concat(watchToggleLabel,'">').concat(L10n.get("debugBarTextWatch"),"</button>")+"</div>"+'<button id="debug-bar-toggle" tabindex="0" title="'.concat(barToggleLabel,'" aria-label="').concat(barToggleLabel,'"></button>')+'</div><div id="debug-bar-hint"></div>').appendTo("body"),$debugBar=jQuery("#debug-bar"),$watchBody=jQuery($debugBar.find("#debug-bar-watch").get(0)),$varDataList=jQuery($debugBar.find("#debug-bar-var-list").get(0)),$turnSelect=jQuery($debugBar.find("#debug-bar-turn-select").get(0)),$passageDataList=jQuery($debugBar.find("#debug-bar-passage-list").get(0));var $watchInput=jQuery($debugBar.find("#debug-bar-watch-input").get(0)),$watchAdd=jQuery($debugBar.find("#debug-bar-watch-add").get(0)),$watchAll=jQuery($debugBar.find("#debug-bar-watch-all").get(0)),$watchClear=jQuery($debugBar.find("#debug-bar-watch-clear").get(0)),$passageInput=jQuery($debugBar.find("#debug-bar-passage-input").get(0)),$passagePlay=jQuery($debugBar.find("#debug-bar-passage-play").get(0)),$viewsToggle=jQuery($debugBar.find("#debug-bar-views-toggle").get(0)),$watchToggle=jQuery($debugBar.find("#debug-bar-watch-toggle").get(0)),$barToggle=jQuery($debugBar.find("#debug-bar-toggle").get(0));$watchInput.on("sc:debug-watch-add",(function(){debugBarWatchAdd(this.value.trim()),this.value=""})).on("keypress",(function(ev){13===ev.which&&(ev.preventDefault(),triggerEvent("sc:debug-watch-add",$watchInput))})),$watchAdd.ariaClick((function(){return triggerEvent("sc:debug-watch-add",$watchInput)})),$watchAll.ariaClick(debugBarWatchAddAll),$watchClear.ariaClick(debugBarWatchClear),$turnSelect.on("change",(function(){Engine.goTo(Number(this.value))})),$passageInput.on("sc:debug-passage-play",(function(){Engine.play(this.value.trim()),this.value=""})).on("keypress",(function(ev){13===ev.which&&(ev.preventDefault(),triggerEvent("sc:debug-passage-play",$passageInput))})).on("focus",updatePassageList),$passagePlay.ariaClick((function(){return triggerEvent("sc:debug-passage-play",$passageInput)})),$viewsToggle.ariaClick((function(){DebugView.toggle(),updateSession()})),$watchToggle.ariaClick(debugBarWatchToggle),$barToggle.ariaClick(debugBarToggle),jQuery(document).on(":passageend.debug-bar",(function(){updateWatchBody(),updateVarList()})).on(":historyupdate.debug-bar",updateTurnSelect).on(":enginerestart.debug-bar",clearSession)}else jQuery(document.head).find('[id|="style-ui-debug"]').remove()}},isStowed:{value:function(){return stowed}},start:{value:function(){Config.debug&&(function(){if(!session.has(STORAGE_KEY))return!1;var debugState=session.get(STORAGE_KEY);watchList.push.apply(watchList,_toConsumableArray(debugState.watchList)),debugState.watchEnabled?(stowed?disableWatchUpdates():enableWatchUpdates(),enableWatch()):(disableWatchUpdates(),disableWatch());debugState.viewsEnabled?DebugView.enable():DebugView.disable();(stowed=debugState.stowed)?(disableVarListUpdates(),debugBarStow()):(enableVarListUpdates(),debugBarUnstow());return!0}()||(debugBarStow(),DebugView.enable(),enableWatchUpdates(),enableWatch()),updateVarList(),updateTurnSelect())}},stow:{value:debugBarStow},toggle:{value:debugBarToggle},unstow:{value:debugBarUnstow},watch:{value:Object.preventExtensions(Object.create(null,{add:{value:debugBarWatchAdd},all:{value:debugBarWatchAddAll},clear:{value:debugBarWatchClear},delete:{value:debugBarWatchDelete},disable:{value:debugBarWatchDisable},enable:{value:debugBarWatchEnable},isEnabled:{value:debugBarWatchIsEnabled},toggle:{value:debugBarWatchToggle}}))}}))}(),LoadScreen=function(){var _locks=new Set,_autoId=0;function loadScreenHide(){jQuery(document.documentElement).removeAttr("data-init")}function loadScreenShow(){jQuery(document.documentElement).attr("data-init","loading")}return Object.preventExtensions(Object.create(null,{init:{value:function(){jQuery(document).on("readystatechange.SugarCube",(function(){_locks.size>0||("complete"===document.readyState?"loading"===jQuery(document.documentElement).attr("data-init")&&(Config.loadDelay>0?setTimeout((function(){0===_locks.size&&loadScreenHide()}),Math.max(Engine.DOM_DELAY,Config.loadDelay)):loadScreenHide()):loadScreenShow())}))}},clear:{value:function(){jQuery(document).off("readystatechange.SugarCube"),_locks.clear(),loadScreenHide()}},hide:{value:loadScreenHide},show:{value:loadScreenShow},lock:{value:function(){return++_autoId,_locks.add(_autoId),loadScreenShow(),_autoId}},unlock:{value:function(id){if(null==id)throw new Error("LoadScreen.unlock called with a null or undefined ID");_locks.has(id)&&_locks.delete(id),0===_locks.size&&triggerEvent("readystatechange")}},size:{get:function(){return _locks.size}}}))}(),Util=Object.preventExtensions(Object.create(null,{charAndPosAt:{value:function(){return console.warn("[DEPRECATED] Util.charAndPosAt() is deprecated."),charAndPosAt.apply(void 0,arguments)}},escape:{value:function(){return console.warn("[DEPRECATED] Util.escape() is deprecated."),encodeEntities.apply(void 0,arguments)}},escapeMarkup:{value:function(){return console.warn("[DEPRECATED] Util.escapeMarkup() is deprecated."),encodeMarkup.apply(void 0,arguments)}},fromCssProperty:{value:function(){return console.warn("[DEPRECATED] Util.fromCssProperty() is deprecated."),cssPropToDOMProp.apply(void 0,arguments)}},fromCssTime:{value:function(){return console.warn("[DEPRECATED] Util.fromCssTime() is deprecated."),cssTimeToMS.apply(void 0,arguments)}},getType:{value:function(){return console.warn("[DEPRECATED] Util.getType() is deprecated."),getTypeOf.apply(void 0,arguments)}},hasMediaQuery:{value:function(){return console.warn("[DEPRECATED] Util.hasMediaQuery() is deprecated."),hasMediaQuery.apply(void 0,arguments)}},newExceptionFrom:{value:function(){return console.warn("[DEPRECATED] Util.newExceptionFrom() is deprecated."),exceptionFrom.apply(void 0,arguments)}},now:{value:function(){return console.warn("[DEPRECATED] Util.now() is deprecated."),now.apply(void 0,arguments)}},parseUrl:{value:function(){return console.warn("[DEPRECATED] Util.parseUrl() is deprecated."),parseURL.apply(void 0,arguments)}},sameValueZero:{value:function(){return console.warn("[DEPRECATED] Util.sameValueZero() is deprecated."),sameValueZero.apply(void 0,arguments)}},sanitizeFilename:{value:function(){return console.warn("[DEPRECATED] Util.sanitizeFilename() is deprecated."),createFilename.apply(void 0,arguments)}},scrubEventKey:{value:function(){return console.warn("[DEPRECATED] Util.scrubEventKey() is deprecated."),scrubEventKey.apply(void 0,arguments)}},slugify:{value:function(){return console.warn("[DEPRECATED] Util.slugify() is deprecated."),createSlug.apply(void 0,arguments)}},toCssTime:{value:function(){return console.warn("[DEPRECATED] Util.toCssTime() is deprecated."),msToCSSTime.apply(void 0,arguments)}},toEnum:{value:function(){return console.warn("[DEPRECATED] Util.toEnum() is deprecated."),enumFrom.apply(void 0,arguments)}},toStringTag:{value:function(){return console.warn("[DEPRECATED] Util.toStringTag() is deprecated."),getToStringTag.apply(void 0,arguments)}},unescape:{value:function(){return console.warn("[DEPRECATED] Util.unescape() is deprecated."),decodeEntities.apply(void 0,arguments)}}})),version=(semVerRE=/^[Vv]?(\d+)(?:\.(\d+)(?:\.(\d+)(?:-[0-9A-Za-z.-]+)?(?:\+[0-9A-Za-z.-]+)?)?)?$/,Object.preventExtensions(Object.create(null,{name:{value:"SugarCube"},major:{value:2},minor:{value:37},patch:{value:3},prerelease:{value:""},build:{value:10338},date:{value:new Date("2024-07-27T00:45:20.724Z")},isOk:{value:function(semver){if("string"!=typeof semver)throw new Error("version.isOk semver parameter must be a string (received: ".concat(_typeof(semver),")"));var trimmed=semver.trim();if(""===trimmed)throw new Error("version.isOk semver parameter must not be empty");var match=semVerRE.exec(trimmed);if(!match)throw new Error("version.isOk semver parameter is invalid (format: [v]MAJOR[.MINOR[.PATCH[-PRERELEASE][+BUILD]]]; received: ".concat(trimmed));var major=Number(match[1]),minor=Number(match[2])||0,patch=Number(match[3])||0;return major===this.major&&(minor<this.minor||minor===this.minor&&patch<=this.patch)}},long:{value:function(){return"".concat(this.name," v").concat(this.toString()," (").concat(this.date.toUTCString(),")")}},short:{value:function(){var prerelease=this.prerelease?"-".concat(this.prerelease):"";return"".concat(this.name," (v").concat(this.major,".").concat(this.minor,".").concat(this.patch).concat(prerelease,")")}},toString:{value:function(){var prerelease=this.prerelease?"-".concat(this.prerelease):"";return"".concat(this.major,".").concat(this.minor,".").concat(this.patch).concat(prerelease,"+").concat(this.build)}},title:{value:"SugarCube"}}))),semVerRE,TempState={},session=null,settings=Setting.create(),setup={},storage=null,macros={},postdisplay={},postrender={},predisplay={},prehistory={},prerender={};Object.defineProperty(window,"SugarCube",{value:Object.seal(Object.assign(Object.create(null),{Browser:Browser,Config:Config,Dialog:Dialog,Engine:Engine,Fullscreen:Fullscreen,Has:Has,L10n:L10n,Macro:Macro,Passage:Passage,Save:Save,Scripting:Scripting,Setting:Setting,SimpleAudio:SimpleAudio,State:State,Story:Story,UI:UI,UIBar:UIBar,DebugBar:DebugBar,Util:Util,Visibility:Visibility,Wikifier:Wikifier,session:session,settings:settings,setup:setup,storage:storage,version:version}))}),jQuery((function(){var lockId=LoadScreen.lock();LoadScreen.init(),document.normalize&&document.normalize(),new Promise((function(resolve){Story.init();try{SugarCube.storage=storage=SimpleStore.create(Story.id,!0),SugarCube.session=session=SimpleStore.create(Story.id,!1)}catch(ex){throw new Error(L10n.get("warningNoStorage"))}Dialog.init(),UIBar.init(),Engine.init(),Outliner.init(),Engine.runUserScripts(),L10n.init(),session.has("rcWarn")||"cookie"!==storage.name||(session.set("rcWarn",1),window.alert(L10n.get("warningNoWebStorage"))),Save.init(),Setting.init(),Macro.init(),DebugBar.init();var $window=jQuery(window),vpReadyId=setInterval((function(){$window.width()&&LoadScreen.size<=1&&(clearInterval(vpReadyId),resolve())}),Engine.DOM_DELAY)})).then((function(){Engine.runUserInit(),UIBar.start(),Engine.start(),DebugBar.start(),triggerEvent(":storyready"),setTimeout((function(){return LoadScreen.unlock(lockId)}),2*Engine.DOM_DELAY)})).catch((function(ex){return console.error(ex),LoadScreen.clear(),Alert.fatal(null,ex.message,ex)}))}))})(window,window.document,jQuery);}
	</script>
</body>
</html>
